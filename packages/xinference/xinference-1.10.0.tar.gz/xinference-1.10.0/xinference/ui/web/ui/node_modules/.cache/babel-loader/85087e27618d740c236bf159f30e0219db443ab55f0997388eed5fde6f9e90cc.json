{"ast":null,"code":"import _toConsumableArray from\"/home/runner/work/inference/inference/xinference/ui/web/ui/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/runner/work/inference/inference/xinference/ui/web/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import AddIcon from'@mui/icons-material/Add';import DeleteIcon from'@mui/icons-material/Delete';import{Button,TextField}from'@mui/material';import React,{useEffect,useState}from'react';import{useTranslation}from'react-i18next';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddVirtualenv=function AddVirtualenv(_ref){var virtualenv=_ref.virtualenv,onChangeVirtualenv=_ref.onChangeVirtualenv,scrollRef=_ref.scrollRef;var _useTranslation=useTranslation(),t=_useTranslation.t;var _useState=useState(function(){return virtualenv.packages.map(function(){return\"\".concat(Date.now(),\"-\").concat(Math.random());});}),_useState2=_slicedToArray(_useState,2),packageKeys=_useState2[0],setPackageKeys=_useState2[1];useEffect(function(){handleScrollBottom();setPackageKeys(function(prevKeys){var lengthDiff=virtualenv.packages.length-prevKeys.length;if(lengthDiff>0){return[].concat(_toConsumableArray(prevKeys),_toConsumableArray(new Array(lengthDiff).fill(0).map(function(){return\"\".concat(Date.now(),\"-\").concat(Math.random());})));}else if(lengthDiff<0){return prevKeys.slice(0,virtualenv.packages.length);}return prevKeys;});},[virtualenv.packages]);var handleScrollBottom=function handleScrollBottom(){scrollRef.current.scrollTo({top:scrollRef.current.scrollHeight,behavior:'smooth'});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{marginBottom:'20px',marginRight:'20px'},children:t('registerModel.packages')}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",size:\"small\",endIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:function onClick(){return onChangeVirtualenv('add');},children:t('registerModel.more')}),/*#__PURE__*/_jsx(\"div\",{children:virtualenv.packages.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:5,marginTop:'10px',marginLeft:50},children:[/*#__PURE__*/_jsx(TextField,{style:{width:'100%'},size:\"small\",value:item,onChange:function onChange(e){onChangeVirtualenv('change',index,e.target.value);}}),/*#__PURE__*/_jsx(DeleteIcon,{onClick:function onClick(){return onChangeVirtualenv('delete',index);},style:{cursor:'pointer',color:'#1976d2'}})]},packageKeys[index]);})})]});};export default AddVirtualenv;","map":{"version":3,"names":["AddIcon","DeleteIcon","Button","TextField","React","useEffect","useState","useTranslation","jsx","_jsx","jsxs","_jsxs","AddVirtualenv","_ref","virtualenv","onChangeVirtualenv","scrollRef","_useTranslation","t","_useState","packages","map","concat","Date","now","Math","random","_useState2","_slicedToArray","packageKeys","setPackageKeys","handleScrollBottom","prevKeys","lengthDiff","length","_toConsumableArray","Array","fill","slice","current","scrollTo","top","scrollHeight","behavior","children","style","marginBottom","marginRight","variant","size","endIcon","onClick","item","index","display","alignItems","gap","marginTop","marginLeft","width","value","onChange","e","target","cursor","color"],"sources":["/home/runner/work/inference/inference/xinference/ui/web/ui/src/scenes/register_model/components/addVirtualenv.js"],"sourcesContent":["import AddIcon from '@mui/icons-material/Add'\nimport DeleteIcon from '@mui/icons-material/Delete'\nimport { Button, TextField } from '@mui/material'\nimport React, { useEffect, useState } from 'react'\nimport { useTranslation } from 'react-i18next'\n\nconst AddVirtualenv = ({ virtualenv, onChangeVirtualenv, scrollRef }) => {\n  const { t } = useTranslation()\n\n  const [packageKeys, setPackageKeys] = useState(() =>\n    virtualenv.packages.map(() => `${Date.now()}-${Math.random()}`)\n  )\n\n  useEffect(() => {\n    handleScrollBottom()\n    setPackageKeys((prevKeys) => {\n      const lengthDiff = virtualenv.packages.length - prevKeys.length\n\n      if (lengthDiff > 0) {\n        return [\n          ...prevKeys,\n          ...new Array(lengthDiff)\n            .fill(0)\n            .map(() => `${Date.now()}-${Math.random()}`),\n        ]\n      } else if (lengthDiff < 0) {\n        return prevKeys.slice(0, virtualenv.packages.length)\n      }\n\n      return prevKeys\n    })\n  }, [virtualenv.packages])\n\n  const handleScrollBottom = () => {\n    scrollRef.current.scrollTo({\n      top: scrollRef.current.scrollHeight,\n      behavior: 'smooth',\n    })\n  }\n\n  return (\n    <div>\n      <label style={{ marginBottom: '20px', marginRight: '20px' }}>\n        {t('registerModel.packages')}\n      </label>\n      <Button\n        variant=\"contained\"\n        size=\"small\"\n        endIcon={<AddIcon />}\n        onClick={() => onChangeVirtualenv('add')}\n      >\n        {t('registerModel.more')}\n      </Button>\n\n      <div>\n        {virtualenv.packages.map((item, index) => (\n          <div\n            key={packageKeys[index]}\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: 5,\n              marginTop: '10px',\n              marginLeft: 50,\n            }}\n          >\n            <TextField\n              style={{ width: '100%' }}\n              size=\"small\"\n              value={item}\n              onChange={(e) => {\n                onChangeVirtualenv('change', index, e.target.value)\n              }}\n            />\n            <DeleteIcon\n              onClick={() => onChangeVirtualenv('delete', index)}\n              style={{ cursor: 'pointer', color: '#1976d2' }}\n            />\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n\nexport default AddVirtualenv\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}