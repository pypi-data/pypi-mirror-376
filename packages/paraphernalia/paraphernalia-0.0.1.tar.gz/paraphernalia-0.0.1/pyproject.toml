[project]
name = "paraphernalia"
dynamic = ["version"]
description = "A collection of tools for making art"
authors = [{ name = "Joe Halliwell", email = "joe.halliwell@gmail.com" }]
requires-python = "~=3.10"
readme = "README.md"
license = "GPL-3.0-or-later"
keywords = ["art", "torch", "glsl"]
classifiers = [
    "Environment :: Console",
    "Operating System :: OS Independent",
    "Topic :: Software Development :: Libraries :: Python Modules",
]
dependencies = [
    "click>=7.1.2,<8",
    "imageio>=2.9.0,<3",
    "imageio-ffmpeg>=0.4.3,<0.5",
    "importlib-metadata~=1.0 ; python_version < '3.8'",
    "moderngl>=5.6.4,<6",
    "moderngl-window>=2.4.1,<3",
    "pyrr>=0.10.3,<0.11",
    "pydantic[dotenv]>=1.8.2,<2",
    "torch>=1.11.0,<2",
    "tqdm>=4.59.0,<5",
    "xdg>=5.1.0,<6",
    "einops>=0.3.0,<0.4",
    "ipython>=7.25.0,<8",
    "python-xmp-toolkit>=2.0.1,<3",
    "torchvision>=0.14.1,<0.15",
]

[project.optional-dependencies]
openai = [
    "regex>=2021.7.1,<2022",
    "ftfy>=6.0.3,<7",
    "clip-anytorch>=2.4.0,<3",
    "DALL-E>=0.1,<0.2",
]
taming = [
    "taming-transformers",
    "omegaconf>=2.1.0,<3",
    "pytorch-lightning==1.5.0rc0",
]
docs = [
    "sphinx==4.2.0",
    "pydata-sphinx-theme>=0.7.1,<0.8",
    "sphinx-click>=3.0.1,<4",
    "autodoc-pydantic>=1.5.1,<2",
]
rich = ["rich>=10.15.2,<11"]

[project.urls]
Homepage = "https://github.com/joehalliwell/paraphernalia"
Repository = "https://github.com/joehalliwell/paraphernalia"

[project.scripts]
render = "paraphernalia.glsl:render"
preview = "paraphernalia.glsl:preview"
sign = "paraphernalia.signature:sign"
review = "paraphernalia.review:review"

[dependency-groups]
dev = [
    "pytest>=7.1.2,<8",
    "coverage~=5.5",
    "ipykernel>=5.5.5,<6",
    "pre-commit>=2.13.0,<3",
    "isort>=5.8.0,<6",
    "black~=20.8b1",
    "flake8>=4.0.1,<5",
    "interrogate>=1.4.0,<2",
    "docformatter~=1.4",
    "ruff>=0.0.247,<0.0.248",
    "pytest-dotenv>=0.5.2",
    "pytest-cov>=5.0.0",
]

[build-system]
requires = ["hatchling", "versioningit"]
build-backend = "hatchling.build"

[tool.hatch.version]
source = "versioningit"

[tool.interrogate]
ignore-init-method = true
ignore-init-module = false
ignore-magic = true
ignore-semiprivate = true
ignore-private = false
ignore-property-decorators = false
ignore-setters = true
ignore-module = false
ignore-nested-functions = false
ignore-nested-classes = true
fail-under = 90
exclude = ["setup.py", "docs", "build", "tests", "scratch"]
ignore-regex = ["^forward$", "^training_step$"]
verbose = 0
quiet = false
whitelist-regex = []
color = true

[tool.isort]
profile = "black"

[tool.pytest.ini_options]
log_cli = true
log_cli_level = "INFO"
log_cli_format = "%(asctime)s [%(levelname)8s] %(message)s (%(filename)s:%(lineno)s)"
log_cli_date_format = "%Y-%m-%d %H:%M:%S"
addopts = ["-ra -qu"]
testpaths = ["tests"]

[tool.uv.sources]
taming-transformers = { git = "https://github.com/joehalliwell/taming-transformers.git" }
