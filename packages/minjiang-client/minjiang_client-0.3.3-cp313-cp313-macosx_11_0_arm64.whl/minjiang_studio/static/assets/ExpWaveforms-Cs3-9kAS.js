import{ae as ti,ai as zi,d as it,K as Mt,aj as ni,ap as Fr,bl as Fi,F as Tt,ar as Xa,as as Ui,ah as yo,bm as Gi,bn as Bi,a4 as ht,bo as Hi,bp as bo,c as ge,e as q,f as Y,aF as ji,aS as tt,aI as cr,aJ as ri,Y as Ln,a$ as Ur,a0 as Zt,j as d,bq as Nr,a5 as Ut,aM as ao,C as $e,x as qe,w as D,h as I,B as $t,n as Ce,t as we,br as Ji,H as Gr,r as he,a1 as oo,bs as Ya,o as io,bt as Wi,aK as Lt,aT as Rt,$ as ai,a as kn,z as oi,ad as wo,N as Br,I as zn,J as Et,p as Fn,bu as qi,bv as Vi,aa as lo,Z as Xi,a2 as It,a9 as Yi,l as so,aU as xo,bw as ar,bx as Ka,by as Ki,k as Qi,i as ii,a3 as Zi,a6 as el,aW as tl,a7 as nl,aP as rl,bz as al,L as li,bA as uo}from"./index-KHiidVve.js";import{u as Un,n as co}from"./exp-BsGMuzkz.js";import{A as Pr}from"./Add-CUVNZISR.js";import{D as fo,E as si}from"./EditOutlined-BC1EF0YK.js";import{_ as Hr,C as ui,r as ol,Z as So,c as Co,w as Io,g as Oo,a as il,R as ll,b as ci,t as ot,i as sl,d as ul,e as cl,m as fl,k as dl,f as fi,h as di,j as pl,l as Eo,n as hl,o as vl,p as gl,q as ml,s as _l,S as yl,u as bl,v as wl,x as xl,y as To,z as Sl,A as Cl,B as Il,D as Ol,E as El,F as Tl,G as Al,H as Dl,I as Nl,J as Pl,K as Ml}from"./installCanvasRenderer-DQ3trSBi.js";import{n as Rl,o as $l,p as Ll,q as kl}from"./exp-B9hhSwm7.js";import{P as pi,o as zl}from"./index-DKys7GAE.js";import{C as Fl}from"./Copy16Filled-BsDfRmvo.js";import{N as po}from"./InputNumber-nTwBv73q.js";import{_ as hi,Q as Ao}from"./ScriptTemplate.vue_vue_type_script_setup_true_lang-BAhz66ri.js";import{V as vi}from"./index-DIUobDAZ.js";import{_ as jr,a as Jr}from"./FormItem-BLErRK4c.js";import{_ as Ul}from"./Popconfirm-Dt2TFIl_.js";import{C as Gl}from"./CommingSoon-CtPnd3mF.js";import{u as Bl}from"./use-houdini-Bva7E0im.js";import"./Add-CUOykUgu.js";const Hl=ti("input-group-label",`
 position: relative;
 user-select: none;
 -webkit-user-select: none;
 box-sizing: border-box;
 padding: 0 12px;
 display: inline-block;
 border-radius: var(--n-border-radius);
 background-color: var(--n-group-label-color);
 color: var(--n-group-label-text-color);
 font-size: var(--n-font-size);
 line-height: var(--n-height);
 height: var(--n-height);
 flex-shrink: 0;
 white-space: nowrap;
 transition: 
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
`,[zi("border",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 border: var(--n-group-label-border);
 transition: border-color .3s var(--n-bezier);
 `)]),jl=Object.assign(Object.assign({},Fr.props),{size:{type:String,default:"medium"},bordered:{type:Boolean,default:void 0}}),Jl=it({name:"InputGroupLabel",props:jl,setup(e){const{mergedBorderedRef:r,mergedClsPrefixRef:n,inlineThemeDisabled:a}=ni(e),l=Fr("Input","-input-group-label",Hl,Fi,e,n),s=Tt(()=>{const{size:h}=e,{common:{cubicBezierEaseInOut:c},self:{groupLabelColor:m,borderRadius:p,groupLabelTextColor:C,lineHeight:N,groupLabelBorder:v,[Xa("fontSize",h)]:O,[Xa("height",h)]:M}}=l.value;return{"--n-bezier":c,"--n-group-label-color":m,"--n-group-label-border":v,"--n-border-radius":p,"--n-group-label-text-color":C,"--n-font-size":O,"--n-line-height":N,"--n-height":M}}),u=a?Ui("input-group-label",Tt(()=>e.size[0]),s,e):void 0;return{mergedClsPrefix:n,mergedBordered:r,cssVars:a?void 0:s,themeClass:u==null?void 0:u.themeClass,onRender:u==null?void 0:u.onRender}},render(){var e,r,n;const{mergedClsPrefix:a}=this;return(e=this.onRender)===null||e===void 0||e.call(this),Mt("div",{class:[`${a}-input-group-label`,this.themeClass],style:this.cssVars},(n=(r=this.$slots).default)===null||n===void 0?void 0:n.call(r),this.mergedBordered?Mt("div",{class:`${a}-input-group-label__border`}):null)}}),Wl=yo([ti("skeleton",`
 height: 1em;
 width: 100%;
 transition:
 --n-color-start .3s var(--n-bezier),
 --n-color-end .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 animation: 2s skeleton-loading infinite cubic-bezier(0.36, 0, 0.64, 1);
 background-color: var(--n-color-start);
 `),yo("@keyframes skeleton-loading",`
 0% {
 background: var(--n-color-start);
 }
 40% {
 background: var(--n-color-end);
 }
 80% {
 background: var(--n-color-start);
 }
 100% {
 background: var(--n-color-start);
 }
 `)]),ql=Object.assign(Object.assign({},Fr.props),{text:Boolean,round:Boolean,circle:Boolean,height:[String,Number],width:[String,Number],size:String,repeat:{type:Number,default:1},animated:{type:Boolean,default:!0},sharp:{type:Boolean,default:!0}}),Vl=it({name:"Skeleton",inheritAttrs:!1,props:ql,setup(e){Bl();const{mergedClsPrefixRef:r}=ni(e),n=Fr("Skeleton","-skeleton",Wl,Hi,e,r);return{mergedClsPrefix:r,style:Tt(()=>{var a,l;const s=n.value,{common:{cubicBezierEaseInOut:u}}=s,h=s.self,{color:c,colorEnd:m,borderRadius:p}=h;let C;const{circle:N,sharp:v,round:O,width:M,height:B,size:z,text:K,animated:V}=e;z!==void 0&&(C=h[Xa("height",z)]);const P=N?(a=M??B)!==null&&a!==void 0?a:C:M,E=(l=N?M??B:B)!==null&&l!==void 0?l:C;return{display:K?"inline-block":"",verticalAlign:K?"-0.125em":"",borderRadius:N?"50%":O?"4096px":v?"":p,width:typeof P=="number"?bo(P):P,height:typeof E=="number"?bo(E):E,animation:V?"":"none","--n-bezier":u,"--n-color-start":c,"--n-color-end":m}})}},render(){const{repeat:e,style:r,mergedClsPrefix:n,$attrs:a}=this,l=Mt("div",Gi({class:`${n}-skeleton`,style:r},a));return e>1?Mt(ht,null,Bi(e,null).map(s=>[l,`
`])):l}}),Xl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Yl=it({name:"Pulse",render:function(r,n){return q(),ge("svg",Xl,n[0]||(n[0]=[Y("path",{d:"M432 272a48.09 48.09 0 0 0-45.25 32h-39.22l-28.35-85.06a16 16 0 0 0-30.56.66l-44.51 155.76l-52.33-314a16 16 0 0 0-31.3-1.25L99.51 304H48a16 16 0 0 0 0 32h64a16 16 0 0 0 15.52-12.12l45.34-181.37l51.36 308.12A16 16 0 0 0 239.1 464h.91a16 16 0 0 0 15.37-11.6l49.8-174.28l15.64 46.94A16 16 0 0 0 336 336h50.75A48 48 0 1 0 432 272z",fill:"currentColor"},null,-1)]))}}),Kl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Ql=it({name:"ArrowLeft24Regular",render:function(r,n){return q(),ge("svg",Kl,n[0]||(n[0]=[Y("g",{fill:"none"},[Y("path",{d:"M10.733 19.79a.75.75 0 0 0 1.034-1.086L5.516 12.75H20.25a.75.75 0 0 0 0-1.5H5.516l6.251-5.955a.75.75 0 0 0-1.034-1.086l-7.42 7.067a.995.995 0 0 0-.3.58a.754.754 0 0 0 .001.289a.995.995 0 0 0 .3.579l7.419 7.067z",fill:"currentColor"})],-1)]))}}),Zl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},es=it({name:"ArrowRight24Regular",render:function(r,n){return q(),ge("svg",Zl,n[0]||(n[0]=[Y("g",{fill:"none"},[Y("path",{d:"M13.267 4.209a.75.75 0 0 0-1.034 1.086l6.251 5.955H3.75a.75.75 0 0 0 0 1.5h14.734l-6.251 5.954a.75.75 0 0 0 1.034 1.087l7.42-7.067a.996.996 0 0 0 .3-.58a.758.758 0 0 0-.001-.29a.995.995 0 0 0-.3-.578l-7.419-7.067z",fill:"currentColor"})],-1)]))}});var ts=function(e){Hr(r,e);function r(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=r.type,n.layoutMode={type:"box",ignoreSize:!0},n}return r.type="title",r.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},r}(ui),ns=function(e){Hr(r,e);function r(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=r.type,n}return r.prototype.render=function(n,a,l){if(this.group.removeAll(),!!n.get("show")){var s=this.group,u=n.getModel("textStyle"),h=n.getModel("subtextStyle"),c=n.get("textAlign"),m=ol(n.get("textBaseline"),n.get("textVerticalAlign")),p=new So({style:Co(u,{text:n.get("text"),fill:u.getTextColor()},{disableBox:!0}),z2:10}),C=p.getBoundingRect(),N=n.get("subtext"),v=new So({style:Co(h,{text:N,fill:h.getTextColor(),y:C.height+n.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),O=n.get("link"),M=n.get("sublink"),B=n.get("triggerEvent",!0);p.silent=!O&&!B,v.silent=!M&&!B,O&&p.on("click",function(){Io(O,"_"+n.get("target"))}),M&&v.on("click",function(){Io(M,"_"+n.get("subtarget"))}),Oo(p).eventData=Oo(v).eventData=B?{componentType:"title",componentIndex:n.componentIndex}:null,s.add(p),N&&s.add(v);var z=s.getBoundingRect(),K=n.getBoxLayoutParams();K.width=z.width,K.height=z.height;var V=il(K,{width:l.getWidth(),height:l.getHeight()},n.get("padding"));c||(c=n.get("left")||n.get("right"),c==="middle"&&(c="center"),c==="right"?V.x+=V.width:c==="center"&&(V.x+=V.width/2)),m||(m=n.get("top")||n.get("bottom"),m==="center"&&(m="middle"),m==="bottom"?V.y+=V.height:m==="middle"&&(V.y+=V.height/2),m=m||"top"),s.x=V.x,s.y=V.y,s.markRedraw();var P={align:c,verticalAlign:m};p.setStyle(P),v.setStyle(P),z=s.getBoundingRect();var E=V.margin,R=n.getItemStyle(["color","opacity"]);R.fill=n.get("backgroundColor");var x=new ll({shape:{x:z.x-E[3],y:z.y-E[0],width:z.width+E[1]+E[3],height:z.height+E[0]+E[2],r:n.get("borderRadius")},style:R,subPixelOptimize:!0,silent:!0});s.add(x)}},r.type="title",r}(ci);function rs(e){e.registerComponentModel(ts),e.registerComponentView(ns)}var Do={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},as=function(){function e(r){var n=this._condVal=Eo(r)?new RegExp(r):hl(r)?r:null;if(n==null){var a="";ot(a)}}return e.prototype.evaluate=function(r){var n=typeof r;return Eo(n)?this._condVal.test(r):vl(n)?this._condVal.test(r+""):!1},e}(),os=function(){function e(){}return e.prototype.evaluate=function(){return this.value},e}(),is=function(){function e(){}return e.prototype.evaluate=function(){for(var r=this.children,n=0;n<r.length;n++)if(!r[n].evaluate())return!1;return!0},e}(),ls=function(){function e(){}return e.prototype.evaluate=function(){for(var r=this.children,n=0;n<r.length;n++)if(r[n].evaluate())return!0;return!1},e}(),ss=function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e}(),us=function(){function e(){}return e.prototype.evaluate=function(){for(var r=!!this.valueParser,n=this.getValue,a=n(this.valueGetterParam),l=r?this.valueParser(a):null,s=0;s<this.subCondList.length;s++)if(!this.subCondList[s].evaluate(r?l:a))return!1;return!0},e}();function ho(e,r){if(e===!0||e===!1){var n=new os;return n.value=e,n}var a="";return gi(e)||ot(a),e.and?No("and",e,r):e.or?No("or",e,r):e.not?cs(e,r):fs(e,r)}function No(e,r,n){var a=r[e],l="";cl(a)||ot(l),a.length||ot(l);var s=e==="and"?new is:new ls;return s.children=fl(a,function(u){return ho(u,n)}),s.children.length||ot(l),s}function cs(e,r){var n=e.not,a="";gi(n)||ot(a);var l=new ss;return l.child=ho(n,r),l.child||ot(a),l}function fs(e,r){for(var n="",a=r.prepareGetValue(e),l=[],s=dl(e),u=e.parser,h=u?fi(u):null,c=0;c<s.length;c++){var m=s[c];if(!(m==="parser"||r.valueGetterAttrMap.get(m))){var p=di(Do,m)?Do[m]:m,C=e[m],N=h?h(C):C,v=pl(p,N)||p==="reg"&&new as(N);v||ot(n),l.push(v)}}l.length||ot(n);var O=new us;return O.valueGetterParam=a,O.valueParser=h,O.getValue=r.getValue,O.subCondList=l,O}function gi(e){return sl(e)&&!ul(e)}var ds=function(){function e(r,n){this._cond=ho(r,n)}return e.prototype.evaluate=function(){return this._cond.evaluate()},e}();function ps(e,r){return new ds(e,r)}var hs={type:"echarts:filter",transform:function(e){for(var r=e.upstream,n,a=ps(e.config,{valueGetterAttrMap:gl({dimension:!0}),prepareGetValue:function(h){var c="",m=h.dimension;di(h,"dimension")||ot(c);var p=r.getDimensionInfo(m);return p||ot(c),{dimIdx:p.index}},getValue:function(h){return r.retrieveValueFromItem(n,h.dimIdx)}}),l=[],s=0,u=r.count();s<u;s++)n=r.getRawDataItem(s),a.evaluate()&&l.push(n);return{data:l}}},vs={type:"echarts:sort",transform:function(e){var r=e.upstream,n=e.config,a="",l=ml(n);l.length||ot(a);var s=[];_l(l,function(p){var C=p.dimension,N=p.order,v=p.parser,O=p.incomparable;if(C==null&&ot(a),N!=="asc"&&N!=="desc"&&ot(a),O&&O!=="min"&&O!=="max"){var M="";ot(M)}if(N!=="asc"&&N!=="desc"){var B="";ot(B)}var z=r.getDimensionInfo(C);z||ot(a);var K=v?fi(v):null;v&&!K&&ot(a),s.push({dimIdx:z.index,parser:K,comparator:new yl(N,O)})});var u=r.sourceFormat;u!==bl&&u!==wl&&ot(a);for(var h=[],c=0,m=r.count();c<m;c++)h.push(r.getRawDataItem(c));return h.sort(function(p,C){for(var N=0;N<s.length;N++){var v=s[N],O=r.retrieveValueFromItem(p,v.dimIdx),M=r.retrieveValueFromItem(C,v.dimIdx);v.parser&&(O=v.parser(O),M=v.parser(M));var B=v.comparator.evaluate(O,M);if(B!==0)return B}return 0}),{data:h}}};function gs(e){e.registerTransform(hs),e.registerTransform(vs)}var ms=function(e){Hr(r,e);function r(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="dataset",n}return r.prototype.init=function(n,a,l){e.prototype.init.call(this,n,a,l),this._sourceManager=new xl(this),To(this)},r.prototype.mergeOption=function(n,a){e.prototype.mergeOption.call(this,n,a),To(this)},r.prototype.optionUpdated=function(){this._sourceManager.dirty()},r.prototype.getSourceManager=function(){return this._sourceManager},r.type="dataset",r.defaultOption={seriesLayoutBy:Sl},r}(ui),_s=function(e){Hr(r,e);function r(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="dataset",n}return r.type="dataset",r}(ci);function ys(e){e.registerComponentModel(ms),e.registerComponentView(_s)}const bs={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},ws=it({name:"Draggable",render:function(r,n){return q(),ge("svg",bs,n[0]||(n[0]=[ji('<path d="M10 6h4v4h-4z" fill="currentColor"></path><path d="M18 6h4v4h-4z" fill="currentColor"></path><path d="M10 14h4v4h-4z" fill="currentColor"></path><path d="M18 14h4v4h-4z" fill="currentColor"></path><path d="M10 22h4v4h-4z" fill="currentColor"></path><path d="M18 22h4v4h-4z" fill="currentColor"></path>',6)]))}}),xs={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Qa=it({name:"Script",render:function(r,n){return q(),ge("svg",xs,n[0]||(n[0]=[Y("path",{d:"M18.83 26l2.58-2.58L20 22l-4 4l4 4l1.42-1.41L18.83 26z",fill:"currentColor"},null,-1),Y("path",{d:"M27.17 26l-2.58 2.58L26 30l4-4l-4-4l-1.42 1.41L27.17 26z",fill:"currentColor"},null,-1),Y("path",{d:"M14 28H8V4h8v6a2.006 2.006 0 0 0 2 2h6v6h2v-8a.91.91 0 0 0-.3-.7l-7-7A.909.909 0 0 0 18 2H8a2.006 2.006 0 0 0-2 2v24a2.006 2.006 0 0 0 2 2h6zm4-23.6l5.6 5.6H18z",fill:"currentColor"},null,-1)]))}});var Zn={exports:{}};Zn.exports;var Po;function Ss(){return Po||(Po=1,function(e,r){var n=200,a="Expected a function",l="__lodash_hash_undefined__",s=1,u=2,h=9007199254740991,c="[object Arguments]",m="[object Array]",p="[object Boolean]",C="[object Date]",N="[object Error]",v="[object Function]",O="[object GeneratorFunction]",M="[object Map]",B="[object Number]",z="[object Object]",K="[object Promise]",V="[object RegExp]",P="[object Set]",E="[object String]",R="[object Symbol]",x="[object WeakMap]",S="[object ArrayBuffer]",y="[object DataView]",k="[object Float32Array]",J="[object Float64Array]",G="[object Int8Array]",F="[object Int16Array]",X="[object Int32Array]",W="[object Uint8Array]",Q="[object Uint8ClampedArray]",pe="[object Uint16Array]",ye="[object Uint32Array]",Te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ae=/^\w*$/,Ue=/^\./,le=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ve=/[\\^$.*+?()[\]{}|]/g,fe=/\\(\\)?/g,oe=/^\[object .+?Constructor\]$/,Ie=/^(?:0|[1-9]\d*)$/,b={};b[k]=b[J]=b[G]=b[F]=b[X]=b[W]=b[Q]=b[pe]=b[ye]=!0,b[c]=b[m]=b[S]=b[p]=b[y]=b[C]=b[N]=b[v]=b[M]=b[B]=b[z]=b[V]=b[P]=b[E]=b[x]=!1;var H=typeof tt=="object"&&tt&&tt.Object===Object&&tt,te=typeof self=="object"&&self&&self.Object===Object&&self,j=H||te||Function("return this")(),me=r&&!r.nodeType&&r,be=me&&!0&&e&&!e.nodeType&&e,ue=be&&be.exports===me,ie=ue&&H.process,se=function(){try{return ie&&ie.binding("util")}catch{}}(),xe=se&&se.isTypedArray;function _e(t,o){for(var f=-1,w=t?t.length:0;++f<w;)if(o(t[f],f,t))return!0;return!1}function Ee(t){return function(o){return o==null?void 0:o[t]}}function ze(t,o){for(var f=-1,w=Array(t);++f<t;)w[f]=o(f);return w}function Be(t){return function(o){return t(o)}}function Je(t,o){return t==null?void 0:t[o]}function Fe(t){var o=!1;if(t!=null&&typeof t.toString!="function")try{o=!!(t+"")}catch{}return o}function Ye(t){var o=-1,f=Array(t.size);return t.forEach(function(w,A){f[++o]=[A,w]}),f}function ct(t,o){return function(f){return t(o(f))}}function wt(t){var o=-1,f=Array(t.size);return t.forEach(function(w){f[++o]=w}),f}var Gt=Array.prototype,At=Function.prototype,ft=Object.prototype,lt=j["__core-js_shared__"],Dt=function(){var t=/[^.]+$/.exec(lt&&lt.keys&&lt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),gt=At.toString,He=ft.hasOwnProperty,Ke=ft.toString,pn=RegExp("^"+gt.call(He).replace(ve,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Nt=j.Symbol,_=j.Uint8Array,$=ft.propertyIsEnumerable,ne=Gt.splice,De=ct(Object.keys,Object),g=on(j,"DataView"),T=on(j,"Map"),Z=on(j,"Promise"),Me=on(j,"Set"),st=on(j,"WeakMap"),Qe=on(Object,"create"),rn=yt(g),qt=yt(T),hn=yt(Z),an=yt(Me),wn=yt(st),Vt=Nt?Nt.prototype:void 0,vn=Vt?Vt.valueOf:void 0,Gn=Vt?Vt.toString:void 0;function mt(t){var o=-1,f=t?t.length:0;for(this.clear();++o<f;){var w=t[o];this.set(w[0],w[1])}}function qr(){this.__data__=Qe?Qe(null):{}}function Vr(t){return this.has(t)&&delete this.__data__[t]}function Xr(t){var o=this.__data__;if(Qe){var f=o[t];return f===l?void 0:f}return He.call(o,t)?o[t]:void 0}function Yr(t){var o=this.__data__;return Qe?o[t]!==void 0:He.call(o,t)}function Kr(t,o){var f=this.__data__;return f[t]=Qe&&o===void 0?l:o,this}mt.prototype.clear=qr,mt.prototype.delete=Vr,mt.prototype.get=Xr,mt.prototype.has=Yr,mt.prototype.set=Kr;function nt(t){var o=-1,f=t?t.length:0;for(this.clear();++o<f;){var w=t[o];this.set(w[0],w[1])}}function Qr(){this.__data__=[]}function Zr(t){var o=this.__data__,f=Yt(o,t);if(f<0)return!1;var w=o.length-1;return f==w?o.pop():ne.call(o,f,1),!0}function ea(t){var o=this.__data__,f=Yt(o,t);return f<0?void 0:o[f][1]}function ta(t){return Yt(this.__data__,t)>-1}function na(t,o){var f=this.__data__,w=Yt(f,t);return w<0?f.push([t,o]):f[w][1]=o,this}nt.prototype.clear=Qr,nt.prototype.delete=Zr,nt.prototype.get=ea,nt.prototype.has=ta,nt.prototype.set=na;function rt(t){var o=-1,f=t?t.length:0;for(this.clear();++o<f;){var w=t[o];this.set(w[0],w[1])}}function ra(){this.__data__={hash:new mt,map:new(T||nt),string:new mt}}function aa(t){return Sn(this,t).delete(t)}function oa(t){return Sn(this,t).get(t)}function ia(t){return Sn(this,t).has(t)}function la(t,o){return Sn(this,t).set(t,o),this}rt.prototype.clear=ra,rt.prototype.delete=aa,rt.prototype.get=oa,rt.prototype.has=ia,rt.prototype.set=la;function Xt(t){var o=-1,f=t?t.length:0;for(this.__data__=new rt;++o<f;)this.add(t[o])}function sa(t){return this.__data__.set(t,l),this}function ua(t){return this.__data__.has(t)}Xt.prototype.add=Xt.prototype.push=sa,Xt.prototype.has=ua;function at(t){this.__data__=new nt(t)}function ca(){this.__data__=new nt}function fa(t){return this.__data__.delete(t)}function da(t){return this.__data__.get(t)}function pa(t){return this.__data__.has(t)}function ha(t,o){var f=this.__data__;if(f instanceof nt){var w=f.__data__;if(!T||w.length<n-1)return w.push([t,o]),this;f=this.__data__=new rt(w)}return f.set(t,o),this}at.prototype.clear=ca,at.prototype.delete=fa,at.prototype.get=da,at.prototype.has=pa,at.prototype.set=ha;function va(t,o){var f=Kt(t)||Vn(t)?ze(t.length,String):[],w=f.length,A=!!w;for(var L in t)He.call(t,L)&&!(A&&(L=="length"||Jn(L,w)))&&f.push(L);return f}function Yt(t,o){for(var f=t.length;f--;)if(Ht(t[f][0],o))return f;return-1}function Bn(t,o){o=ln(o,t)?[o]:xn(o);for(var f=0,w=o.length;t!=null&&f<w;)t=t[kt(o[f++])];return f&&f==w?t:void 0}function ga(t){return Ke.call(t)}function pr(t,o){return t!=null&&o in Object(t)}function Hn(t,o,f,w,A){return t===o?!0:t==null||o==null||!un(t)&&!En(o)?t!==t&&o!==o:ma(t,o,Hn,f,w,A)}function ma(t,o,f,w,A,L){var ee=Kt(t),de=Kt(o),Se=m,Ne=m;ee||(Se=_t(t),Se=Se==c?z:Se),de||(Ne=_t(o),Ne=Ne==c?z:Ne);var Le=Se==z&&!Fe(t),Re=Ne==z&&!Fe(o),ke=Se==Ne;if(ke&&!Le)return L||(L=new at),ee||Pa(t)?hr(t,o,f,w,A,L):vr(t,o,Se,f,w,A,L);if(!(A&u)){var Ge=Le&&He.call(t,"__wrapped__"),Xe=Re&&He.call(o,"__wrapped__");if(Ge||Xe){var ut=Ge?t.value():t,dt=Xe?o.value():o;return L||(L=new at),f(ut,dt,w,A,L)}}return ke?(L||(L=new at),Ta(t,o,f,w,A,L)):!1}function jn(t,o,f,w){var A=f.length,L=A;if(t==null)return!L;for(t=Object(t);A--;){var ee=f[A];if(ee[2]?ee[1]!==t[ee[0]]:!(ee[0]in t))return!1}for(;++A<L;){ee=f[A];var de=ee[0],Se=t[de],Ne=ee[1];if(ee[2]){if(Se===void 0&&!(de in t))return!1}else{var Le=new at,Re;if(!(Re===void 0?Hn(Ne,Se,w,s|u,Le):Re))return!1}}return!0}function _a(t){if(!un(t)||Aa(t))return!1;var o=gn(t)||Fe(t)?pn:oe;return o.test(yt(t))}function ya(t){return En(t)&&sn(t.length)&&!!b[Ke.call(t)]}function ba(t){return typeof t=="function"?t:t==null?$a:typeof t=="object"?Kt(t)?Sa(t[0],t[1]):xa(t):i(t)}function wa(t){if(!Da(t))return De(t);var o=[];for(var f in Object(t))He.call(t,f)&&f!="constructor"&&o.push(f);return o}function xa(t){var o=Cn(t);return o.length==1&&o[0][2]?Wn(o[0][0],o[0][1]):function(f){return f===t||jn(f,t,o)}}function Sa(t,o){return ln(t)&&gr(o)?Wn(kt(t),o):function(f){var w=Tn(f,t);return w===void 0&&w===o?Ra(f,t):Hn(o,w,void 0,s|u)}}function Ca(t){return function(o){return Bn(o,t)}}function Ia(t,o){for(var f=t?o.length:0,w=f-1;f--;){var A=o[f];if(f==w||A!==L){var L=A;if(Jn(A))ne.call(t,A,1);else if(ln(A,t))delete t[kt(A)];else{var ee=xn(A),de=mr(t,ee);de!=null&&delete de[kt(qn(ee))]}}}return t}function Oa(t,o,f){var w=-1,A=t.length;o<0&&(o=-o>A?0:A+o),f=f>A?A:f,f<0&&(f+=A),A=o>f?0:f-o>>>0,o>>>=0;for(var L=Array(A);++w<A;)L[w]=t[w+o];return L}function Ea(t){if(typeof t=="string")return t;if(Kn(t))return Gn?Gn.call(t):"";var o=t+"";return o=="0"&&1/t==-1/0?"-0":o}function xn(t){return Kt(t)?t:Na(t)}function hr(t,o,f,w,A,L){var ee=A&u,de=t.length,Se=o.length;if(de!=Se&&!(ee&&Se>de))return!1;var Ne=L.get(t);if(Ne&&L.get(o))return Ne==o;var Le=-1,Re=!0,ke=A&s?new Xt:void 0;for(L.set(t,o),L.set(o,t);++Le<de;){var Ge=t[Le],Xe=o[Le];if(w)var ut=ee?w(Xe,Ge,Le,o,t,L):w(Ge,Xe,Le,t,o,L);if(ut!==void 0){if(ut)continue;Re=!1;break}if(ke){if(!_e(o,function(dt,jt){if(!ke.has(jt)&&(Ge===dt||f(Ge,dt,w,A,L)))return ke.add(jt)})){Re=!1;break}}else if(!(Ge===Xe||f(Ge,Xe,w,A,L))){Re=!1;break}}return L.delete(t),L.delete(o),Re}function vr(t,o,f,w,A,L,ee){switch(f){case y:if(t.byteLength!=o.byteLength||t.byteOffset!=o.byteOffset)return!1;t=t.buffer,o=o.buffer;case S:return!(t.byteLength!=o.byteLength||!w(new _(t),new _(o)));case p:case C:case B:return Ht(+t,+o);case N:return t.name==o.name&&t.message==o.message;case V:case E:return t==o+"";case M:var de=Ye;case P:var Se=L&u;if(de||(de=wt),t.size!=o.size&&!Se)return!1;var Ne=ee.get(t);if(Ne)return Ne==o;L|=s,ee.set(t,o);var Le=hr(de(t),de(o),w,A,L,ee);return ee.delete(t),Le;case R:if(vn)return vn.call(t)==vn.call(o)}return!1}function Ta(t,o,f,w,A,L){var ee=A&u,de=Qn(t),Se=de.length,Ne=Qn(o),Le=Ne.length;if(Se!=Le&&!ee)return!1;for(var Re=Se;Re--;){var ke=de[Re];if(!(ee?ke in o:He.call(o,ke)))return!1}var Ge=L.get(t);if(Ge&&L.get(o))return Ge==o;var Xe=!0;L.set(t,o),L.set(o,t);for(var ut=ee;++Re<Se;){ke=de[Re];var dt=t[ke],jt=o[ke];if(w)var mn=ee?w(jt,dt,ke,o,t,L):w(dt,jt,ke,t,o,L);if(!(mn===void 0?dt===jt||f(dt,jt,w,A,L):mn)){Xe=!1;break}ut||(ut=ke=="constructor")}if(Xe&&!ut){var Qt=t.constructor,yr=o.constructor;Qt!=yr&&"constructor"in t&&"constructor"in o&&!(typeof Qt=="function"&&Qt instanceof Qt&&typeof yr=="function"&&yr instanceof yr)&&(Xe=!1)}return L.delete(t),L.delete(o),Xe}function Sn(t,o){var f=t.__data__;return In(o)?f[typeof o=="string"?"string":"hash"]:f.map}function Cn(t){for(var o=Qn(t),f=o.length;f--;){var w=o[f],A=t[w];o[f]=[w,A,gr(A)]}return o}function on(t,o){var f=Je(t,o);return _a(f)?f:void 0}var _t=ga;(g&&_t(new g(new ArrayBuffer(1)))!=y||T&&_t(new T)!=M||Z&&_t(Z.resolve())!=K||Me&&_t(new Me)!=P||st&&_t(new st)!=x)&&(_t=function(t){var o=Ke.call(t),f=o==z?t.constructor:void 0,w=f?yt(f):void 0;if(w)switch(w){case rn:return y;case qt:return M;case hn:return K;case an:return P;case wn:return x}return o});function Bt(t,o,f){o=ln(o,t)?[o]:xn(o);for(var w,A=-1,ee=o.length;++A<ee;){var L=kt(o[A]);if(!(w=t!=null&&f(t,L)))break;t=t[L]}if(w)return w;var ee=t?t.length:0;return!!ee&&sn(ee)&&Jn(L,ee)&&(Kt(t)||Vn(t))}function Jn(t,o){return o=o??h,!!o&&(typeof t=="number"||Ie.test(t))&&t>-1&&t%1==0&&t<o}function ln(t,o){if(Kt(t))return!1;var f=typeof t;return f=="number"||f=="symbol"||f=="boolean"||t==null||Kn(t)?!0:Ae.test(t)||!Te.test(t)||o!=null&&t in Object(o)}function In(t){var o=typeof t;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?t!=="__proto__":t===null}function Aa(t){return!!Dt&&Dt in t}function Da(t){var o=t&&t.constructor,f=typeof o=="function"&&o.prototype||ft;return t===f}function gr(t){return t===t&&!un(t)}function Wn(t,o){return function(f){return f==null?!1:f[t]===o&&(o!==void 0||t in Object(f))}}function mr(t,o){return o.length==1?t:Bn(t,Oa(o,0,-1))}var Na=On(function(t){t=Ma(t);var o=[];return Ue.test(t)&&o.push(""),t.replace(le,function(f,w,A,L){o.push(A?L.replace(fe,"$1"):w||f)}),o});function kt(t){if(typeof t=="string"||Kn(t))return t;var o=t+"";return o=="0"&&1/t==-1/0?"-0":o}function yt(t){if(t!=null){try{return gt.call(t)}catch{}try{return t+""}catch{}}return""}function qn(t){var o=t?t.length:0;return o?t[o-1]:void 0}function _r(t,o){var f=[];if(!(t&&t.length))return f;var w=-1,A=[],L=t.length;for(o=ba(o);++w<L;){var ee=t[w];o(ee,w,t)&&(f.push(ee),A.push(w))}return Ia(t,A),f}function On(t,o){if(typeof t!="function"||o&&typeof o!="function")throw new TypeError(a);var f=function(){var w=arguments,A=o?o.apply(this,w):w[0],L=f.cache;if(L.has(A))return L.get(A);var ee=t.apply(this,w);return f.cache=L.set(A,ee),ee};return f.cache=new(On.Cache||rt),f}On.Cache=rt;function Ht(t,o){return t===o||t!==t&&o!==o}function Vn(t){return Yn(t)&&He.call(t,"callee")&&(!$.call(t,"callee")||Ke.call(t)==c)}var Kt=Array.isArray;function Xn(t){return t!=null&&sn(t.length)&&!gn(t)}function Yn(t){return En(t)&&Xn(t)}function gn(t){var o=un(t)?Ke.call(t):"";return o==v||o==O}function sn(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=h}function un(t){var o=typeof t;return!!t&&(o=="object"||o=="function")}function En(t){return!!t&&typeof t=="object"}function Kn(t){return typeof t=="symbol"||En(t)&&Ke.call(t)==R}var Pa=xe?Be(xe):ya;function Ma(t){return t==null?"":Ea(t)}function Tn(t,o,f){var w=t==null?void 0:Bn(t,o);return w===void 0?f:w}function Ra(t,o){return t!=null&&Bt(t,o,pr)}function Qn(t){return Xn(t)?va(t):wa(t)}function $a(t){return t}function i(t){return ln(t)?Ee(kt(t)):Ca(t)}e.exports=_r}(Zn,Zn.exports)),Zn.exports}var Cs=Ss();const vo=cr(Cs),Is={class:"thead"},Os={class:"tr"},Es={class:"th-title-wrap flex justify-between items-center group"},Ts={class:"w-8 h-5 inline-flex"},As={class:"th-title inline-flex items-center gap-4 relative"},Ds={class:"hidden group-hover:inline-flex items-center justify-center absolute top-[1px] -right-10"},Ns={class:"w-8 h-5 inline-flex"},Ps=it({__name:"WaveformHeader",props:{layers:{}},setup(e){ri(c=>({"5da7fefc":d(r).dividerColor,"30b1234c":d(r).tableHeaderColor}));const r=Ln(),n=Un(),{layers:a,gates:l,program:s}=Ur(n),u=c=>{var N;const m=JSON.parse(JSON.stringify(l.value||{}));a.value[c].forEach(v=>{delete m[v]}),l.value=m;const C=JSON.parse(JSON.stringify(s.value));vo(C.waveform_script,v=>v.layer===c),a.value.length>Ji&&(a.value.splice(c,1),(N=C.waveform_script)==null||N.forEach(v=>{v.layer>c&&(v.layer=v.layer-1)})),s.value=C},h=c=>{var p;a.value.splice(c,0,[]);const m=JSON.parse(JSON.stringify(((p=s.value)==null?void 0:p.waveform_script)||[]));m==null||m.forEach(C=>{C.layer>=c&&(C.layer=C.layer+1)}),s.value={...s.value||{},waveform_script:m}};return(c,m)=>{const p=$t;return q(),ge("table",{class:"table",style:Zt({width:`${100+d(Nr)*d(a).length}px`})},[Y("colgroup",null,[m[0]||(m[0]=Y("col",{class:"w-[100px]"},null,-1)),(q(!0),ge(ht,null,Ut(d(a),(C,N)=>(q(),ge("col",{key:N,class:ao(`w-[${d(Nr)}px]`)},null,2))),128))]),Y("thead",Is,[Y("tr",Os,[m[1]||(m[1]=Y("th",{class:"th"},[Y("div",{class:"th-title-wrap"},[Y("div",{class:"th-title"},"Entities")])],-1)),(q(!0),ge(ht,null,Ut(d(a),(C,N)=>{var v,O,M,B,z,K;return q(),ge("th",{class:"th",key:N},[Y("div",Es,[(O=(v=d(n))==null?void 0:v.expInfo)!=null&&O.exp_id?qe("",!0):(q(),$e(p,{key:0,type:"info",circle:"",quaternary:"",onClick:()=>h(N)},{icon:D(()=>[Y("div",Ts,[I(d(Ql)),I(d(Pr))])]),_:2},1032,["onClick"])),Y("div",As,[Ce(we(N)+" ",1),Y("div",Ds,[(B=(M=d(n))==null?void 0:M.expInfo)!=null&&B.exp_id?qe("",!0):(q(),$e(p,{key:0,size:"small",class:"!w-5 !h-5",circle:"",type:"error",onClick:()=>u(N)},{icon:D(()=>[I(d(fo))]),_:2},1032,["onClick"]))])]),(K=(z=d(n))==null?void 0:z.expInfo)!=null&&K.exp_id?qe("",!0):(q(),$e(p,{key:1,type:"info",circle:"",quaternary:"",onClick:()=>h(N+1)},{icon:D(()=>[Y("div",Ns,[I(d(Pr)),I(d(es))])]),_:2},1032,["onClick"]))])])}),128))])])],4)}}}),Ms=Gr(Ps,[["__scopeId","data-v-a971b1ac"]]),Rs=it({__name:"WaveformScroll",setup(e){const r=he(),n=he(),a=s=>{var h,c;const u=s.target;(h=n.value)!=null&&h.scrollbarInstRef&&((c=n.value)==null||c.scrollTo({left:u.scrollLeft}))},l=s=>{var h,c;const u=s.target;(h=r.value)!=null&&h.scrollbarInstRef&&((c=r.value)==null||c.scrollTo({left:u.scrollLeft}))};return(s,u)=>{const h=oo;return q(),ge("div",null,[I(h,{ref_key:"headerRef",ref:r,style:{"max-width":"calc(100vw - 212px)"},onScroll:a},{default:D(()=>[Ya(s.$slots,"header")]),_:3},512),I(h,{class:"box-border","x-scrollable":"",ref_key:"bodyRef",ref:n,onScroll:l,style:{maxHeight:"calc(100vh - 380px)",maxWidth:"calc(100vw - 212px)"}},{default:D(()=>[Ya(s.$slots,"default")]),_:3},512)])}}}),mi=it({__name:"WaveCharts",props:{data:{},size:{}},setup(e){const r=e;Cl([rs,Ol,El,ys,gs,Tl,Al,Dl,Nl,Pl,Ml]);const n=Ln(),a=he(),l=he();return io(()=>{a.value=Wi(Il(l.value,n.value.baseColor==="#000"?"dark":"light"))}),Lt(()=>r.data,s=>{if(!s)return;const u=Object.keys(s.channel_seqs),h={tooltip:{trigger:"none",axisPointer:{type:"cross"}},legend:{data:u},grid:{top:"20px",left:"50px",right:"20px",bottom:"70px"},dataZoom:[{type:"slider",xAxisIndex:0,filterMode:"filter",start:0,end:10},{type:"inside",xAxisIndex:0,filterMode:"filter",start:0,end:10}],xAxis:{type:"category",axisTick:{alignWithLabel:!0},axisLine:{onZero:!1},data:s.time_list},yAxis:[{type:"value"}],series:u.map(c=>({name:c,type:"line",data:s.channel_seqs[c]}))};Rt(()=>{var c;(c=a.value)==null||c.setOption(JSON.parse(JSON.stringify(h)))})},{immediate:!0}),ai(()=>{var s;(s=a.value)==null||s.dispose()}),(s,u)=>{var h,c,m,p;return q(),ge("div",{ref_key:"chartRef",ref:l,style:Zt({width:`${((h=s.size)==null?void 0:h.w)||690}px`,height:`${((c=s.size)==null?void 0:c.h)||220}px`}),class:ao([[`min-w-[${((m=s.size)==null?void 0:m.w)||690}px] min-h-[${((p=s.size)==null?void 0:p.h)||220}px]`],"!w-full h-full mt-4"])},null,6)}}}),$s={class:"flex justify-between items-center mb-2"},Ls={class:"text-center text-xl font-bold pb-3"},ks={class:"h-[400px]"},zs=it({__name:"WaveformAction",setup(e){const r=Un(),{t:n}=kn(),a=oi(),l=he(),s=he(!1),u=he(),h=he(!1),c=he(!1),m=()=>{c.value=!0},p=()=>{c.value=!1,h.value=!1},C=B=>{B||p()},N=async()=>{var V,P,E,R,x,S,y,k,J,G,F,X,W;const B={};r.layers.forEach((Q,pe)=>{B[String(pe)]=Q});const[z,K]=await Rl({template_name:(P=(V=r.expInfo)==null?void 0:V.exp)==null?void 0:P.template.split("/")[1],device_group_name:a.query.device_group_name,space_id:a.query.space_id,task_id:(E=r.expInfo)==null?void 0:E.task_id,experiment_json:{...r.expInfo||{},title:(x=(R=r.expInfo)==null?void 0:R.exp)==null?void 0:x.title,desc:(y=(S=r.expInfo)==null?void 0:S.exp)==null?void 0:y.desc,options:(J=(k=r.expInfo)==null?void 0:k.exp)==null?void 0:J.options,template:(F=(G=r.expInfo)==null?void 0:G.exp)==null?void 0:F.template,wave_circuit:{gates:r.gates||{},layers:B},waveform_script:((X=r.program)==null?void 0:X.waveform_script)||[],space_parameter_script:((W=r.program)==null?void 0:W.space_parameter_script)||[]}});s.value=!1,!z&&(K==null?void 0:K.status)===0&&(l.value=K.data,h.value=!0)},v=()=>{s.value||(s.value=!0,h.value=!0,N())},O=Tt(()=>{let B=[];return wo(r.gates,z=>{B=B.concat(z.entity)}),B}),M=B=>{const z=JSON.parse(JSON.stringify(r.allQubits||{}));wo(z,K=>{B.includes(K.value)?K.visible=!0:K.visible=!1}),r.allQubits=z};return Lt(()=>r.allQubits,B=>{u.value=B.filter(z=>z.visible).map(z=>z.value)},{immediate:!0}),(B,z)=>{const K=$t,V=Br,P=Vi,E=qi,R=Fn,x=zn,S=lo;return q(),ge("div",null,[Y("div",$s,[I(K,{type:"primary",onClick:m},{default:D(()=>[Ce(we(d(n)("expInfo.chooseEntities")),1)]),_:1}),I(K,{type:"primary",loading:d(s),onClick:v},{icon:D(()=>[I(V,{component:d(pi)},null,8,["component"])]),default:D(()=>[Ce(" "+we(d(n)("expInfo.viewWaveForms")),1)]),_:1},8,["loading"])]),I(x,{show:d(c),"onUpdate:show":z[1]||(z[1]=y=>Et(c)?c.value=y:null),"on-update:show":C},{default:D(()=>[I(R,{style:{width:"660px"},size:"huge",bordered:!1,class:"!pt-0"},{default:D(()=>[Y("div",Ls,we(d(n)("expInfo.chooseEntities")),1),I(E,{value:d(u),"onUpdate:value":[z[0]||(z[0]=y=>Et(u)?u.value=y:null),M]},{default:D(()=>[(q(!0),ge(ht,null,Ut(d(r).allQubits,y=>(q(),$e(P,{key:y.id,value:y.value,label:y.value,disabled:d(O).includes(y.value)},null,8,["value","label","disabled"]))),128))]),_:1},8,["value"])]),_:1})]),_:1},8,["show"]),I(x,{show:d(h),"onUpdate:show":z[2]||(z[2]=y=>Et(h)?h.value=y:null),"on-update:show":C},{default:D(()=>[I(R,{style:{"min-width":"1000px",height:"500px",width:"90vw"},size:"huge",bordered:!1,class:"!pt-0"},{default:D(()=>[I(S,{show:d(s)},{default:D(()=>[Y("div",ks,[d(s)?qe("",!0):(q(),$e(mi,{key:0,size:{w:920,h:400},data:d(l)},null,8,["data"]))])]),_:1},8,["show"])]),_:1})]),_:1},8,["show"])])}}}),Fs=["id"],Us={class:"flex gap-4 justify-between items-center"},Gs={class:"flex items-center"},Bs={key:0,class:"gate-handle mt-1 px-2 cursor-move"},Hs={key:1,class:"ml-0.5 inline-flex items-center justify-center"},js={class:"hidden group-hover:flex items-center gap-2"},Js={class:"flex items-center gap-3"},Ws={class:"w-24"},qs={class:"flex items-center gap-3 mt-5"},Vs={class:"w-24"},Xs={class:"flex justify-end mt-5"},Ys=it({__name:"WaveformCell",props:{qubit:{},layer:{},layerIdx:{},changeId:{}},emits:["open-gate-modal","open-edit-modal"],setup(e,{expose:r,emit:n}){const{t:a}=kn(),l=Ln(),s=Un(),{gates:u,layers:h,program:c}=Ur(s),m=Xi(),p=he(!1),C=()=>{p.value=!0},N=()=>{p.value=!1,O.value=void 0,v.value=void 0},v=he(),O=he(),M=Tt(()=>s.allQubits.filter(J=>{if(J.visible)return!0}).map(J=>({...J,label:J.value}))),B=(k,J)=>{const G=(F,X)=>u.value?h.value[X].some(Q=>{var pe;if(u.value&&u.value[Q])return(pe=u.value[Q].entity)==null?void 0:pe.includes(F)}):!1;return!k.some(F=>G(F,J))},z=()=>{var pe,ye,Te,Ae,Ue,le,ve,fe;if(v.value===void 0)return;const k=(Ae=(Te=(ye=(pe=S==null?void 0:S.value)==null?void 0:pe.matchedGate)==null?void 0:ye.val)==null?void 0:Te.entity)==null?void 0:Ae.length;if(k>1&&k!==((Ue=O.value)==null?void 0:Ue.length)||v.value>=h.value.length)return;if(!B(k===1?[O.value]:O.value,v.value)){m.error("目标位非空");return}if(k>1){const oe=h.value[v.value];if(!It(oe)){let Ie=[];if(oe.forEach(b=>{var H;Ie=Ie.concat(u.value?(H=u.value[b])==null?void 0:H.entity:[])}),Ie.includes(O.value||""))return}}const G=JSON.parse(JSON.stringify((le=S.value.matchedGate)==null?void 0:le.val));G.entity=k>1?O.value:[O.value],(ve=G==null?void 0:G.waves)==null||ve.forEach((oe,Ie)=>{var b,H,te,j,me,be,ue,ie;if(oe.channel){if(k===1)oe.channel=oe.channel.replace(((te=(H=(b=S==null?void 0:S.value)==null?void 0:b.matchedGate)==null?void 0:H.val)==null?void 0:te.entity[0])||"",O.value);else if(k>1){const se={i:0,t:""};(ue=(be=(me=(j=S==null?void 0:S.value)==null?void 0:j.matchedGate)==null?void 0:me.val)==null?void 0:be.entity)==null||ue.some((xe,_e)=>{if(oe.channel.startsWith(xe))return se.i=_e,se.t=xe,!0}),se.t&&(oe.channel=(ie=oe.channel)==null?void 0:ie.replace(se==null?void 0:se.t,O.value[se.i]))}}});const F=co();u.value={...u.value,[F]:G};const X=JSON.parse(JSON.stringify(h.value));X[+v.value]?X[+v.value].push(F):X[+v.value]=[F],h.value=X;const W=JSON.parse(JSON.stringify(c.value)),Q=[];(fe=W==null?void 0:W.waveform_script)==null||fe.forEach(oe=>{var Ie,b,H,te;oe.layer===P.layerIdx&&((te=(H=(b=(Ie=S.value)==null?void 0:Ie.matchedGate)==null?void 0:b.val)==null?void 0:H.entity)!=null&&te.includes(oe.entity))&&Q.push({...oe,entity:k>1?O.value[0]:O.value,layer:v.value})}),W.waveform_script=W.waveform_script.concat(Q),c.value=W,Rt(()=>{setTimeout(()=>{E("open-edit-modal",k===1?O.value:O.value[0],v.value),N()},200)})},K=k=>{var G,F,X,W;const J=(W=(X=(F=(G=S==null?void 0:S.value)==null?void 0:G.matchedGate)==null?void 0:F.val)==null?void 0:X.entity)==null?void 0:W.length;Array.isArray(k)&&k.length>J&&Rt(()=>{var Q;O.value=(Q=O.value)==null?void 0:Q.slice(0,J)})},V=k=>{k||N()},P=e,E=n,R=()=>{E("open-gate-modal",{...xo(P)})},x=()=>{var k;E("open-gate-modal",{...xo(P),gateInfo:(k=S.value)==null?void 0:k.matchedGate})},S=Tt(()=>{var G;if(It(u.value))return{};const k={};let J=`${P.qubit.id}__**__${P.qubit.value}__**__${P.layerIdx}`;return(G=P.layer)==null||G.some(F=>{var W;const X=u.value?(W=u.value[F])==null?void 0:W.entity:null;if(X&&X.includes(P.qubit.value))return k.val=u.value?u.value[F]:void 0,k.key=F,J=`${P.qubit.id}__**__${P.qubit.value}__**__${P.layerIdx}__**__${F}`,!0}),{matchedGate:k,id:J}}),y=()=>{var X,W,Q;if(It((X=S.value)==null?void 0:X.matchedGate))return;const k=(Q=(W=S.value)==null?void 0:W.matchedGate)==null?void 0:Q.key,J=JSON.parse(JSON.stringify(u.value||{}));delete J[k];const G=JSON.parse(JSON.stringify(h.value||[]));G[P.layerIdx]=ar(G[P.layerIdx],k);const F=JSON.parse(JSON.stringify(c.value));vo(F.waveform_script,pe=>{var ye,Te,Ae;if(P.layerIdx===pe.layer&&((Ae=(Te=(ye=S.value)==null?void 0:ye.matchedGate)==null?void 0:Te.val)!=null&&Ae.entity.includes(pe.entity)))return!0}),c.value=F,u.value=J,h.value=G};return r({handleEdit:x,props:P}),(k,J)=>{var Te,Ae,Ue,le,ve,fe,oe,Ie,b,H,te,j,me,be,ue,ie,se,xe,_e,Ee,ze,Be;const G=$t,F=Br,X=Yi,W=so,Q=po,pe=Fn,ye=zn;return q(),ge("div",{class:"group cell-group p-3",id:(Te=d(S))==null?void 0:Te.id,style:Zt({display:k.changeId===((Ae=d(S))==null?void 0:Ae.id)&&((Ue=d(S))!=null&&Ue.id)?"none":"block"})},[d(It)((ve=(le=d(S))==null?void 0:le.matchedGate)==null?void 0:ve.val)&&!((oe=(fe=d(s))==null?void 0:fe.expInfo)!=null&&oe.exp_id)?(q(),$e(G,{key:0,circle:"",type:"info",size:"small",class:"!w-5 !h-5",quaternary:"",onClick:R},{icon:D(()=>[I(d(Pr))]),_:1})):d(It)((b=(Ie=d(S))==null?void 0:Ie.matchedGate)==null?void 0:b.val)?qe("",!0):(q(),ge(ht,{key:1},[Y("div",Us,[Y("div",Gs,[(te=(H=d(s))==null?void 0:H.expInfo)!=null&&te.exp_id?qe("",!0):(q(),ge("span",Bs,[I(F,{component:d(ws)},null,8,["component"])])),I(X,{style:{"max-width":"110px"}},{default:D(()=>{var Je,Fe,Ye;return[Ce(we((Ye=(Fe=(Je=d(S))==null?void 0:Je.matchedGate)==null?void 0:Fe.val)==null?void 0:Ye.gate_name),1)]}),_:1}),Ce(" ("+we((ue=(be=(me=(j=d(S))==null?void 0:j.matchedGate)==null?void 0:me.val)==null?void 0:be.entity)==null?void 0:ue.join(","))+") ",1),d(It)((xe=(se=(ie=d(S))==null?void 0:ie.matchedGate)==null?void 0:se.val)==null?void 0:xe.waves)?qe("",!0):(q(),ge("span",Hs,[I(F,{component:d(Yl),color:d(l).infoColor,size:"16"},null,8,["component","color"])]))]),Y("div",js,[(Ee=(_e=d(s))==null?void 0:_e.expInfo)!=null&&Ee.exp_id?qe("",!0):(q(),$e(G,{key:0,size:"small",class:"!w-5 !h-5",circle:"",type:"info",onClick:C},{icon:D(()=>[I(d(Fl))]),_:1})),I(G,{type:"primary",size:"small",class:"!w-5 !h-5",circle:"",onClick:x},{icon:D(()=>[I(d(si))]),_:1}),(Be=(ze=d(s))==null?void 0:ze.expInfo)!=null&&Be.exp_id?qe("",!0):(q(),$e(G,{key:1,size:"small",class:"!w-5 !h-5",circle:"",type:"error",onClick:y},{icon:D(()=>[I(d(fo))]),_:1}))])]),I(ye,{show:d(p),"onUpdate:show":J[2]||(J[2]=Je=>Et(p)?p.value=Je:null),onUpdateShow:V},{default:D(()=>[I(pe,{style:{width:"500px"}},{default:D(()=>{var Je,Fe,Ye,ct;return[Y("div",Js,[Y("div",Ws,we(d(a)("expInfo.targetEntity")),1),I(W,{multiple:((ct=(Ye=(Fe=(Je=d(S))==null?void 0:Je.matchedGate)==null?void 0:Fe.val)==null?void 0:Ye.entity)==null?void 0:ct.length)>1,filterable:"",value:d(O),"onUpdate:value":J[0]||(J[0]=wt=>Et(O)?O.value=wt:null),options:d(M),"max-tag-count":2,onUpdateValue:K,class:"flex-1"},null,8,["multiple","value","options"])]),Y("div",qs,[Y("div",Vs,we(d(a)("expInfo.targetLayer")),1),I(Q,{class:"flex-1",value:d(v),"onUpdate:value":J[1]||(J[1]=wt=>Et(v)?v.value=wt:null),min:0},null,8,["value"])]),Y("div",Xs,[I(G,{type:"primary",onClick:z},{default:D(()=>[Ce(we(d(a)("common.OK")),1)]),_:1})])]}),_:1})]),_:1},8,["show"])],64))],12,Fs)}}});var er={exports:{}};er.exports;var Mo;function Ks(){return Mo||(Mo=1,function(e,r){var n=200,a="Expected a function",l="__lodash_hash_undefined__",s=1,u=2,h=9007199254740991,c="[object Arguments]",m="[object Array]",p="[object Boolean]",C="[object Date]",N="[object Error]",v="[object Function]",O="[object GeneratorFunction]",M="[object Map]",B="[object Number]",z="[object Object]",K="[object Promise]",V="[object RegExp]",P="[object Set]",E="[object String]",R="[object Symbol]",x="[object WeakMap]",S="[object ArrayBuffer]",y="[object DataView]",k="[object Float32Array]",J="[object Float64Array]",G="[object Int8Array]",F="[object Int16Array]",X="[object Int32Array]",W="[object Uint8Array]",Q="[object Uint8ClampedArray]",pe="[object Uint16Array]",ye="[object Uint32Array]",Te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ae=/^\w*$/,Ue=/^\./,le=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ve=/[\\^$.*+?()[\]{}|]/g,fe=/\\(\\)?/g,oe=/^\[object .+?Constructor\]$/,Ie=/^(?:0|[1-9]\d*)$/,b={};b[k]=b[J]=b[G]=b[F]=b[X]=b[W]=b[Q]=b[pe]=b[ye]=!0,b[c]=b[m]=b[S]=b[p]=b[y]=b[C]=b[N]=b[v]=b[M]=b[B]=b[z]=b[V]=b[P]=b[E]=b[x]=!1;var H=typeof tt=="object"&&tt&&tt.Object===Object&&tt,te=typeof self=="object"&&self&&self.Object===Object&&self,j=H||te||Function("return this")(),me=r&&!r.nodeType&&r,be=me&&!0&&e&&!e.nodeType&&e,ue=be&&be.exports===me,ie=ue&&H.process,se=function(){try{return ie&&ie.binding("util")}catch{}}(),xe=se&&se.isTypedArray;function _e(i,t){for(var o=-1,f=i?i.length:0;++o<f;)if(t(i[o],o,i))return!0;return!1}function Ee(i){return function(t){return t==null?void 0:t[i]}}function ze(i,t){for(var o=-1,f=Array(i);++o<i;)f[o]=t(o);return f}function Be(i){return function(t){return i(t)}}function Je(i,t){return i==null?void 0:i[t]}function Fe(i){var t=!1;if(i!=null&&typeof i.toString!="function")try{t=!!(i+"")}catch{}return t}function Ye(i){var t=-1,o=Array(i.size);return i.forEach(function(f,w){o[++t]=[w,f]}),o}function ct(i,t){return function(o){return i(t(o))}}function wt(i){var t=-1,o=Array(i.size);return i.forEach(function(f){o[++t]=f}),o}var Gt=Array.prototype,At=Function.prototype,ft=Object.prototype,lt=j["__core-js_shared__"],Dt=function(){var i=/[^.]+$/.exec(lt&&lt.keys&&lt.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),gt=At.toString,He=ft.hasOwnProperty,Ke=ft.toString,pn=RegExp("^"+gt.call(He).replace(ve,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Nt=j.Symbol,_=j.Uint8Array,$=ft.propertyIsEnumerable,ne=Gt.splice,De=ct(Object.keys,Object),g=_t(j,"DataView"),T=_t(j,"Map"),Z=_t(j,"Promise"),Me=_t(j,"Set"),st=_t(j,"WeakMap"),Qe=_t(Object,"create"),rn=yt(g),qt=yt(T),hn=yt(Z),an=yt(Me),wn=yt(st),Vt=Nt?Nt.prototype:void 0,vn=Vt?Vt.valueOf:void 0,Gn=Vt?Vt.toString:void 0;function mt(i){var t=-1,o=i?i.length:0;for(this.clear();++t<o;){var f=i[t];this.set(f[0],f[1])}}function qr(){this.__data__=Qe?Qe(null):{}}function Vr(i){return this.has(i)&&delete this.__data__[i]}function Xr(i){var t=this.__data__;if(Qe){var o=t[i];return o===l?void 0:o}return He.call(t,i)?t[i]:void 0}function Yr(i){var t=this.__data__;return Qe?t[i]!==void 0:He.call(t,i)}function Kr(i,t){var o=this.__data__;return o[i]=Qe&&t===void 0?l:t,this}mt.prototype.clear=qr,mt.prototype.delete=Vr,mt.prototype.get=Xr,mt.prototype.has=Yr,mt.prototype.set=Kr;function nt(i){var t=-1,o=i?i.length:0;for(this.clear();++t<o;){var f=i[t];this.set(f[0],f[1])}}function Qr(){this.__data__=[]}function Zr(i){var t=this.__data__,o=Yt(t,i);if(o<0)return!1;var f=t.length-1;return o==f?t.pop():ne.call(t,o,1),!0}function ea(i){var t=this.__data__,o=Yt(t,i);return o<0?void 0:t[o][1]}function ta(i){return Yt(this.__data__,i)>-1}function na(i,t){var o=this.__data__,f=Yt(o,i);return f<0?o.push([i,t]):o[f][1]=t,this}nt.prototype.clear=Qr,nt.prototype.delete=Zr,nt.prototype.get=ea,nt.prototype.has=ta,nt.prototype.set=na;function rt(i){var t=-1,o=i?i.length:0;for(this.clear();++t<o;){var f=i[t];this.set(f[0],f[1])}}function ra(){this.__data__={hash:new mt,map:new(T||nt),string:new mt}}function aa(i){return Cn(this,i).delete(i)}function oa(i){return Cn(this,i).get(i)}function ia(i){return Cn(this,i).has(i)}function la(i,t){return Cn(this,i).set(i,t),this}rt.prototype.clear=ra,rt.prototype.delete=aa,rt.prototype.get=oa,rt.prototype.has=ia,rt.prototype.set=la;function Xt(i){var t=-1,o=i?i.length:0;for(this.__data__=new rt;++t<o;)this.add(i[t])}function sa(i){return this.__data__.set(i,l),this}function ua(i){return this.__data__.has(i)}Xt.prototype.add=Xt.prototype.push=sa,Xt.prototype.has=ua;function at(i){this.__data__=new nt(i)}function ca(){this.__data__=new nt}function fa(i){return this.__data__.delete(i)}function da(i){return this.__data__.get(i)}function pa(i){return this.__data__.has(i)}function ha(i,t){var o=this.__data__;if(o instanceof nt){var f=o.__data__;if(!T||f.length<n-1)return f.push([i,t]),this;o=this.__data__=new rt(f)}return o.set(i,t),this}at.prototype.clear=ca,at.prototype.delete=fa,at.prototype.get=da,at.prototype.has=pa,at.prototype.set=ha;function va(i,t){var o=Ht(i)||On(i)?ze(i.length,String):[],f=o.length,w=!!f;for(var A in i)He.call(i,A)&&!(w&&(A=="length"||ln(A,f)))&&o.push(A);return o}function Yt(i,t){for(var o=i.length;o--;)if(_r(i[o][0],t))return o;return-1}var Bn=hr();function ga(i,t){return i&&Bn(i,t,Tn)}function pr(i,t){t=In(t,i)?[t]:xn(t);for(var o=0,f=t.length;i!=null&&o<f;)i=i[kt(t[o++])];return o&&o==f?i:void 0}function Hn(i){return Ke.call(i)}function ma(i,t){return i!=null&&t in Object(i)}function jn(i,t,o,f,w){return i===t?!0:i==null||t==null||!gn(i)&&!sn(t)?i!==i&&t!==t:_a(i,t,jn,o,f,w)}function _a(i,t,o,f,w,A){var L=Ht(i),ee=Ht(t),de=m,Se=m;L||(de=Bt(i),de=de==c?z:de),ee||(Se=Bt(t),Se=Se==c?z:Se);var Ne=de==z&&!Fe(i),Le=Se==z&&!Fe(t),Re=de==Se;if(Re&&!Ne)return A||(A=new at),L||En(i)?vr(i,t,o,f,w,A):Ta(i,t,de,o,f,w,A);if(!(w&u)){var ke=Ne&&He.call(i,"__wrapped__"),Ge=Le&&He.call(t,"__wrapped__");if(ke||Ge){var Xe=ke?i.value():i,ut=Ge?t.value():t;return A||(A=new at),o(Xe,ut,f,w,A)}}return Re?(A||(A=new at),Sn(i,t,o,f,w,A)):!1}function ya(i,t,o,f){var w=o.length,A=w;if(i==null)return!A;for(i=Object(i);w--;){var L=o[w];if(L[2]?L[1]!==i[L[0]]:!(L[0]in i))return!1}for(;++w<A;){L=o[w];var ee=L[0],de=i[ee],Se=L[1];if(L[2]){if(de===void 0&&!(ee in i))return!1}else{var Ne=new at,Le;if(!(Le===void 0?jn(Se,de,f,s|u,Ne):Le))return!1}}return!0}function ba(i){if(!gn(i)||Da(i))return!1;var t=Xn(i)||Fe(i)?pn:oe;return t.test(yt(i))}function wa(i){return sn(i)&&Yn(i.length)&&!!b[Ke.call(i)]}function xa(i){return typeof i=="function"?i:i==null?Qn:typeof i=="object"?Ht(i)?Ia(i[0],i[1]):Ca(i):$a(i)}function Sa(i){if(!gr(i))return De(i);var t=[];for(var o in Object(i))He.call(i,o)&&o!="constructor"&&t.push(o);return t}function Ca(i){var t=on(i);return t.length==1&&t[0][2]?mr(t[0][0],t[0][1]):function(o){return o===i||ya(o,i,t)}}function Ia(i,t){return In(i)&&Wn(t)?mr(kt(i),t):function(o){var f=Pa(o,i);return f===void 0&&f===t?Ma(o,i):jn(t,f,void 0,s|u)}}function Oa(i){return function(t){return pr(t,i)}}function Ea(i){if(typeof i=="string")return i;if(un(i))return Gn?Gn.call(i):"";var t=i+"";return t=="0"&&1/i==-1/0?"-0":t}function xn(i){return Ht(i)?i:Na(i)}function hr(i){return function(t,o,f){for(var w=-1,A=Object(t),L=f(t),ee=L.length;ee--;){var de=L[++w];if(o(A[de],de,A)===!1)break}return t}}function vr(i,t,o,f,w,A){var L=w&u,ee=i.length,de=t.length;if(ee!=de&&!(L&&de>ee))return!1;var Se=A.get(i);if(Se&&A.get(t))return Se==t;var Ne=-1,Le=!0,Re=w&s?new Xt:void 0;for(A.set(i,t),A.set(t,i);++Ne<ee;){var ke=i[Ne],Ge=t[Ne];if(f)var Xe=L?f(Ge,ke,Ne,t,i,A):f(ke,Ge,Ne,i,t,A);if(Xe!==void 0){if(Xe)continue;Le=!1;break}if(Re){if(!_e(t,function(ut,dt){if(!Re.has(dt)&&(ke===ut||o(ke,ut,f,w,A)))return Re.add(dt)})){Le=!1;break}}else if(!(ke===Ge||o(ke,Ge,f,w,A))){Le=!1;break}}return A.delete(i),A.delete(t),Le}function Ta(i,t,o,f,w,A,L){switch(o){case y:if(i.byteLength!=t.byteLength||i.byteOffset!=t.byteOffset)return!1;i=i.buffer,t=t.buffer;case S:return!(i.byteLength!=t.byteLength||!f(new _(i),new _(t)));case p:case C:case B:return _r(+i,+t);case N:return i.name==t.name&&i.message==t.message;case V:case E:return i==t+"";case M:var ee=Ye;case P:var de=A&u;if(ee||(ee=wt),i.size!=t.size&&!de)return!1;var Se=L.get(i);if(Se)return Se==t;A|=s,L.set(i,t);var Ne=vr(ee(i),ee(t),f,w,A,L);return L.delete(i),Ne;case R:if(vn)return vn.call(i)==vn.call(t)}return!1}function Sn(i,t,o,f,w,A){var L=w&u,ee=Tn(i),de=ee.length,Se=Tn(t),Ne=Se.length;if(de!=Ne&&!L)return!1;for(var Le=de;Le--;){var Re=ee[Le];if(!(L?Re in t:He.call(t,Re)))return!1}var ke=A.get(i);if(ke&&A.get(t))return ke==t;var Ge=!0;A.set(i,t),A.set(t,i);for(var Xe=L;++Le<de;){Re=ee[Le];var ut=i[Re],dt=t[Re];if(f)var jt=L?f(dt,ut,Re,t,i,A):f(ut,dt,Re,i,t,A);if(!(jt===void 0?ut===dt||o(ut,dt,f,w,A):jt)){Ge=!1;break}Xe||(Xe=Re=="constructor")}if(Ge&&!Xe){var mn=i.constructor,Qt=t.constructor;mn!=Qt&&"constructor"in i&&"constructor"in t&&!(typeof mn=="function"&&mn instanceof mn&&typeof Qt=="function"&&Qt instanceof Qt)&&(Ge=!1)}return A.delete(i),A.delete(t),Ge}function Cn(i,t){var o=i.__data__;return Aa(t)?o[typeof t=="string"?"string":"hash"]:o.map}function on(i){for(var t=Tn(i),o=t.length;o--;){var f=t[o],w=i[f];t[o]=[f,w,Wn(w)]}return t}function _t(i,t){var o=Je(i,t);return ba(o)?o:void 0}var Bt=Hn;(g&&Bt(new g(new ArrayBuffer(1)))!=y||T&&Bt(new T)!=M||Z&&Bt(Z.resolve())!=K||Me&&Bt(new Me)!=P||st&&Bt(new st)!=x)&&(Bt=function(i){var t=Ke.call(i),o=t==z?i.constructor:void 0,f=o?yt(o):void 0;if(f)switch(f){case rn:return y;case qt:return M;case hn:return K;case an:return P;case wn:return x}return t});function Jn(i,t,o){t=In(t,i)?[t]:xn(t);for(var f,w=-1,L=t.length;++w<L;){var A=kt(t[w]);if(!(f=i!=null&&o(i,A)))break;i=i[A]}if(f)return f;var L=i?i.length:0;return!!L&&Yn(L)&&ln(A,L)&&(Ht(i)||On(i))}function ln(i,t){return t=t??h,!!t&&(typeof i=="number"||Ie.test(i))&&i>-1&&i%1==0&&i<t}function In(i,t){if(Ht(i))return!1;var o=typeof i;return o=="number"||o=="symbol"||o=="boolean"||i==null||un(i)?!0:Ae.test(i)||!Te.test(i)||t!=null&&i in Object(t)}function Aa(i){var t=typeof i;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?i!=="__proto__":i===null}function Da(i){return!!Dt&&Dt in i}function gr(i){var t=i&&i.constructor,o=typeof t=="function"&&t.prototype||ft;return i===o}function Wn(i){return i===i&&!gn(i)}function mr(i,t){return function(o){return o==null?!1:o[i]===t&&(t!==void 0||i in Object(o))}}var Na=qn(function(i){i=Kn(i);var t=[];return Ue.test(i)&&t.push(""),i.replace(le,function(o,f,w,A){t.push(w?A.replace(fe,"$1"):f||o)}),t});function kt(i){if(typeof i=="string"||un(i))return i;var t=i+"";return t=="0"&&1/i==-1/0?"-0":t}function yt(i){if(i!=null){try{return gt.call(i)}catch{}try{return i+""}catch{}}return""}function qn(i,t){if(typeof i!="function"||t&&typeof t!="function")throw new TypeError(a);var o=function(){var f=arguments,w=t?t.apply(this,f):f[0],A=o.cache;if(A.has(w))return A.get(w);var L=i.apply(this,f);return o.cache=A.set(w,L),L};return o.cache=new(qn.Cache||rt),o}qn.Cache=rt;function _r(i,t){return i===t||i!==i&&t!==t}function On(i){return Kt(i)&&He.call(i,"callee")&&(!$.call(i,"callee")||Ke.call(i)==c)}var Ht=Array.isArray;function Vn(i){return i!=null&&Yn(i.length)&&!Xn(i)}function Kt(i){return sn(i)&&Vn(i)}function Xn(i){var t=gn(i)?Ke.call(i):"";return t==v||t==O}function Yn(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=h}function gn(i){var t=typeof i;return!!i&&(t=="object"||t=="function")}function sn(i){return!!i&&typeof i=="object"}function un(i){return typeof i=="symbol"||sn(i)&&Ke.call(i)==R}var En=xe?Be(xe):wa;function Kn(i){return i==null?"":Ea(i)}function Pa(i,t,o){var f=i==null?void 0:pr(i,t);return f===void 0?o:f}function Ma(i,t){return i!=null&&Jn(i,t,ma)}function Tn(i){return Vn(i)?va(i):Sa(i)}function Ra(i,t){var o={};return t=xa(t),ga(i,function(f,w,A){o[w]=t(f,w,A)}),o}function Qn(i){return i}function $a(i){return In(i)?Ee(kt(i)):Oa(i)}e.exports=Ra}(er,er.exports)),er.exports}var Qs=Ks();const Ro=cr(Qs),Zs={class:"whitespace-pre-line"},eu={class:"flex items-center gap-2 mb-4"},tu={class:"flex justify-end"},nu=it({__name:"ScriptTool",props:{scripts:{},idx:{},editable:{type:Boolean}},emits:["close","update-value"],setup(e,{emit:r}){const n=e,a=r,{t:l}=kn(),s=he(),u=he({script:void 0}),h=he(!1),c=()=>{h.value=!1,u.value={script:""},a("close")},m=()=>{n.editable&&(h.value=!0,u.value={script:(n==null?void 0:n.idx)!==void 0&&n.idx>-1&&(n==null?void 0:n.scripts)!==void 0?n.scripts[n.idx].script:void 0})},p=v=>{v||c()},C=()=>{var v;(v=s.value)==null||v.validate(O=>{var M;O||(a("update-value",(M=u.value)==null?void 0:M.script,n.idx),c())})},N=v=>{u.value={...u.value,script:v}};return Lt(n,v=>{u.value={script:(v==null?void 0:v.idx)!==void 0&&v.idx>-1&&(v==null?void 0:v.scripts)!==void 0?v.scripts[v.idx].script:void 0}},{immediate:!0}),(v,O)=>{var P;const M=Br,B=Jr,z=jr,K=Fn,V=zn;return q(),ge("div",null,[v.idx!==void 0&&v.idx>-1&&v.scripts!==void 0&&((P=v.scripts[v.idx])!=null&&P.script)?(q(),$e(d(Ka),{key:0,trigger:"hover"},{trigger:D(()=>[I(d($t),{type:"warning",onClick:m},{default:D(()=>[I(M,null,{default:D(()=>[I(d(Qa))]),_:1})]),_:1})]),default:D(()=>[Y("div",Zs,we(v.scripts[v.idx].script),1)]),_:1})):(q(),$e(d($t),{key:1,type:"info",onClick:m},{default:D(()=>[I(M,null,{default:D(()=>[I(d(Qa))]),_:1})]),_:1})),I(V,{show:d(h),"onUpdate:show":O[1]||(O[1]=E=>Et(h)?h.value=E:null),"on-update:show":p},{default:D(()=>[I(K,{style:{width:"750px"},size:"huge",bordered:!1,role:"dialog","aria-modal":"true",class:"!pt-0"},{default:D(()=>[I(z,{model:d(u),ref_key:"formRef",ref:s,size:"small"},{default:D(()=>[I(B,{path:"script",class:"w-full",label:"Script"},{label:D(()=>[Y("div",eu,[O[2]||(O[2]=Y("span",{class:"inline-block w-12"}," Script ",-1)),v.editable?(q(),$e(hi,{key:0,"onUpdate:value":N})):qe("",!0)])]),default:D(()=>[I(d(vi),{height:"500px",theme:"vs-dark",value:d(u).script,"onUpdate:value":O[0]||(O[0]=E=>d(u).script=E),language:"python"},null,8,["value"])]),_:1})]),_:1},8,["model"]),Y("div",tu,[I(d($t),{type:"primary",onClick:C},{default:D(()=>[Ce(we(d(l)("common.OK")),1)]),_:1})])]),_:1})]),_:1},8,["show"])])}}}),br=Gr(nu,[["__scopeId","data-v-63e6099a"]]),ru={class:"flex justify-between items-center gap-2"},au={class:"flex justify-between gap-2"},ou={class:"flex items-center gap-2"},iu={class:"flex justify-end mr-4"},lu=it({__name:"WaveformModal",props:{gateInfo:{},layerIdx:{},len:{},waveInfo:{},scriptInfo:{}},emits:["close","update-value"],setup(e,{expose:r,emit:n}){const a=e,l=n,{t:s}=kn(),u=Ln(),h=Un(),c=he(),m=he(),p=he({type:"func",t0:0,ratio:1,channel:void 0,func_name:void 0,wave_parameters:{},waveform_compiler_config:{},name:void 0}),C=he({type:{required:!0,message:s("common.required")},channel:{required:!0,message:s("common.required")},func_name:{required:!0,message:s("common.required")},t0:{required:!0,message:s("common.required")},ratio:{required:!0,message:s("common.required")}}),N=he(!1),v=()=>{N.value=!1,l("close")},O=()=>{N.value=!0},M=()=>{v()},B=()=>{var E;(E=m.value)==null||E.validate(R=>{var x;R||(l("update-value",(x=c.value)==null?void 0:x.map(S=>{var y;return{...S,gate_name:(y=a.gateInfo)==null?void 0:y.gate_name,wave_func_names:[p.value.func_name]}}),p.value),v())})},z=Tt(()=>{const E=p.value.func_name;return E?h.waveFunctions?h.waveFunctions[E]:void 0:{}}),K=E=>Mt("div",{class:"inline-flex justify-center items-center gap-2"},[Mt("div",Mt(Ka,{trigger:"hover",style:"white-space: pre-line"},{default:()=>Mt("div",h.waveFunctions?h.waveFunctions[E.label].docstring:""),trigger:()=>Mt($t,{size:"small",class:"!relative !mt-1 !w-5 !h-5",circle:!0,type:"info"},{icon:()=>Mt(Ao)})})),Mt("div",E.value)]),V=E=>{Rt(()=>{var x;const R=JSON.parse(JSON.stringify(((x=z.value)==null?void 0:x.parameters)||{}));p.value={...p.value,wave_parameters:Ro(R,()=>{}),name:E}})},P=(E,R,x)=>{var y;const S=JSON.parse(JSON.stringify(c.value||[]));R===void 0||R<0?S.push({entity:a.gateInfo.entity,layer:a.layerIdx,ratio:1,t0:0,channel:a.gateInfo.channel,wave_ids:((y=a.waveInfo)==null?void 0:y.wave_id)!==void 0?[a.waveInfo.wave_id]:[a.len],parameter:x,script:E,gate_name:a.gateInfo.gate_name,wave_func_names:p.value.func_name,search_type:"ids"}):S[R]={...S[R],script:E},c.value=S};return Lt(()=>h.waveCompiler,E=>{if(E){const R=JSON.parse(JSON.stringify(E));p.value={...p.value,waveform_compiler_config:Ro(R,()=>0)}}},{immediate:!0}),Lt(()=>a.scriptInfo,E=>{c.value=E},{immediate:!0}),Lt(()=>a.waveInfo,E=>{It(E==null?void 0:E.wave)||(p.value={...E.wave,waveform_compiler_config:E.wave.waveform_compiler_config||{}})},{immediate:!0}),r({open:O,close:v}),(E,R)=>{const x=Jl,S=Qi,y=Ki,k=Jr,J=so,G=ii,F=po,X=el,W=Zi,Q=jr,pe=oo,ye=Fn,Te=zn;return q(),$e(Te,{show:d(N),"onUpdate:show":R[7]||(R[7]=Ae=>Et(N)?N.value=Ae:null),"on-update:show":M},{default:D(()=>[I(ye,{style:{width:"880px"},size:"huge",bordered:!1,role:"dialog","aria-modal":"true",class:"!pt-0","content-class":"!pl-5 !pr-1 !py-4"},{default:D(()=>[I(pe,{style:{"max-height":"500px","padding-right":"15px"}},{default:D(()=>{var Ae,Ue;return[I(Q,{model:d(p),rules:d(C),ref_key:"formRef",ref:m,size:"small",disabled:!!((Ue=(Ae=d(h))==null?void 0:Ae.expInfo)!=null&&Ue.exp_id)},{default:D(()=>[Y("div",ru,[I(k,{path:"channel",class:"flex-1"},{default:D(()=>[I(y,null,{default:D(()=>[I(x,{size:"small"},{default:D(()=>[Ce(we(d(s)("expInfo.channel"))+" ",1),Y("span",{style:Zt({color:d(u).errorColor})}," *",4)]),_:1}),I(S,{value:d(p).channel,"onUpdate:value":R[0]||(R[0]=le=>d(p).channel=le)},null,8,["value"])]),_:1})]),_:1}),I(k,{path:"type",class:"flex-1"},{default:D(()=>[I(y,null,{default:D(()=>[I(x,{size:"small"},{default:D(()=>[Ce(we(d(s)("expInfo.type")),1)]),_:1}),I(J,{disabled:"",options:[{label:"func",value:"func"}],value:d(p).type,"onUpdate:value":R[1]||(R[1]=le=>d(p).type=le)},null,8,["value"])]),_:1})]),_:1})]),I(G,{class:"!mt-0 !mb-2"},{default:D(()=>[Ce(we(d(s)("expInfo.waveformParameter")),1)]),_:1}),Y("div",au,[I(k,{path:"func_name",class:"flex-1"},{default:D(()=>[I(y,null,{default:D(()=>[I(x,{size:"small"},{default:D(()=>[Ce(we(d(s)("expInfo.function"))+" ",1),Y("span",{style:Zt({color:d(u).errorColor})}," *",4)]),_:1}),I(J,{value:d(p).func_name,"onUpdate:value":R[2]||(R[2]=le=>d(p).func_name=le),options:Object.keys(d(h).waveFunctions||{}).map(le=>({label:le,value:le})),"render-label":K,onUpdateValue:V},null,8,["value","options"])]),_:1})]),_:1}),I(k,{path:"t0",class:"flex-1"},{default:D(()=>[I(y,null,{default:D(()=>{var le,ve,fe;return[I(x,{size:"small"},{default:D(()=>[R[8]||(R[8]=Ce(" t0 ")),Y("span",{style:Zt({color:d(u).errorColor})}," *",4)]),_:1}),I(F,{value:d(p).t0,"onUpdate:value":R[3]||(R[3]=oe=>d(p).t0=oe),class:"w-full"},null,8,["value"]),I(br,{editable:!((ve=(le=d(h))==null?void 0:le.expInfo)!=null&&ve.exp_id),scripts:d(c),idx:(fe=d(c))==null?void 0:fe.findIndex(oe=>oe.parameter==="t0"),onUpdateValue:R[4]||(R[4]=(oe,Ie)=>P(oe,Ie,"t0"))},null,8,["editable","scripts","idx"])]}),_:1})]),_:1}),I(k,{path:"ratio",class:"flex-1"},{default:D(()=>[I(y,null,{default:D(()=>{var le,ve,fe;return[I(x,{size:"small"},{default:D(()=>[R[9]||(R[9]=Ce(" ratio ")),Y("span",{style:Zt({color:d(u).errorColor})}," *",4)]),_:1}),I(F,{value:d(p).ratio,"onUpdate:value":R[5]||(R[5]=oe=>d(p).ratio=oe),class:"w-full"},null,8,["value"]),I(br,{editable:!((ve=(le=d(h))==null?void 0:le.expInfo)!=null&&ve.exp_id),scripts:d(c),idx:(fe=d(c))==null?void 0:fe.findIndex(oe=>oe.parameter==="ratio"),onUpdateValue:R[6]||(R[6]=(oe,Ie)=>P(oe,Ie,"ratio"))},null,8,["editable","scripts","idx"])]}),_:1})]),_:1})]),d(It)(d(p).wave_parameters)?qe("",!0):(q(),$e(W,{key:0,cols:3,"x-gap":"8"},{default:D(()=>{var le;return[(q(!0),ge(ht,null,Ut((le=d(z))==null?void 0:le.parameters,(ve,fe)=>(q(),$e(X,{key:fe},{default:D(()=>[(q(),$e(k,{key:fe,path:`wave_parameters.(${fe})`,class:"flex-1"},{default:D(()=>[I(y,null,{default:D(()=>{var oe,Ie,b;return[I(x,{size:"small"},{default:D(()=>[Ce(we(fe),1)]),_:2},1024),I(F,{placeholder:String(ve),value:d(p).wave_parameters[fe],"onUpdate:value":H=>d(p).wave_parameters[fe]=H},null,8,["placeholder","value","onUpdate:value"]),I(br,{editable:!((Ie=(oe=d(h))==null?void 0:oe.expInfo)!=null&&Ie.exp_id),scripts:d(c),idx:(b=d(c))==null?void 0:b.findIndex(H=>H.parameter===String(fe)),onUpdateValue:(H,te)=>P(H,te,String(fe))},null,8,["editable","scripts","idx","onUpdateValue"])]}),_:2},1024)]),_:2},1032,["path"]))]),_:2},1024))),128))]}),_:1})),I(G,{class:"!m-0"},{default:D(()=>[Ce(we(d(s)("expInfo.waveCompilerSetup")),1)]),_:1}),I(W,{cols:3,"x-gap":"8"},{default:D(()=>[(q(!0),ge(ht,null,Ut(d(h).waveCompiler,(le,ve)=>(q(),$e(X,{key:ve},{default:D(()=>[(q(),$e(k,{key:ve,path:`waveform_compiler_config.${ve}`,class:"flex-1"},{default:D(()=>[I(y,null,{default:D(()=>{var fe,oe,Ie;return[I(d(Ka),{trigger:"hover"},{trigger:D(()=>[I(x,{size:"small"},{default:D(()=>[Y("div",ou,[Ce(we(ve)+" ",1),I(d($t),{type:"info",size:"small",class:"!w-5 !h-5",circle:""},{icon:D(()=>[I(d(Ao))]),_:1})])]),_:2},1024)]),default:D(()=>[Ce(" "+we(le==null?void 0:le.desc),1)]),_:2},1024),I(F,{placeholder:String(le.type),value:d(p).waveform_compiler_config[ve],"onUpdate:value":b=>d(p).waveform_compiler_config[ve]=b},null,8,["placeholder","value","onUpdate:value"]),I(br,{editable:!((oe=(fe=d(h))==null?void 0:fe.expInfo)!=null&&oe.exp_id),scripts:d(c),idx:(Ie=d(c))==null?void 0:Ie.findIndex(b=>b.parameter===String(ve)),onUpdateValue:(b,H)=>P(b,H,String(ve))},null,8,["editable","scripts","idx","onUpdateValue"])]}),_:2},1024)]),_:2},1032,["path"]))]),_:2},1024))),128))]),_:1})]),_:1},8,["model","rules","disabled"])]}),_:1}),Y("div",iu,[I(d($t),{type:"primary",onClick:B},{default:D(()=>[Ce(we(d(s)("common.OK")),1)]),_:1})])]),_:1})]),_:1},8,["show"])}}});var La,$o;function su(){if($o)return La;$o=1;var e="Expected a function",r="__lodash_hash_undefined__",n="[object Function]",a="[object GeneratorFunction]",l="[object Symbol]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/,h=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,m=/[\\^$.*+?()[\]{}|]/g,p=/\\(\\)?/g,C=/^\[object .+?Constructor\]$/,N=typeof tt=="object"&&tt&&tt.Object===Object&&tt,v=typeof self=="object"&&self&&self.Object===Object&&self,O=N||v||Function("return this")();function M(_,$){return _==null?void 0:_[$]}function B(_){var $=!1;if(_!=null&&typeof _.toString!="function")try{$=!!(_+"")}catch{}return $}var z=Array.prototype,K=Function.prototype,V=Object.prototype,P=O["__core-js_shared__"],E=function(){var _=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),R=K.toString,x=V.hasOwnProperty,S=V.toString,y=RegExp("^"+R.call(x).replace(m,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=O.Symbol,J=z.splice,G=Be(O,"Map"),F=Be(Object,"create"),X=k?k.prototype:void 0,W=X?X.toString:void 0;function Q(_){var $=-1,ne=_?_.length:0;for(this.clear();++$<ne;){var De=_[$];this.set(De[0],De[1])}}function pe(){this.__data__=F?F(null):{}}function ye(_){return this.has(_)&&delete this.__data__[_]}function Te(_){var $=this.__data__;if(F){var ne=$[_];return ne===r?void 0:ne}return x.call($,_)?$[_]:void 0}function Ae(_){var $=this.__data__;return F?$[_]!==void 0:x.call($,_)}function Ue(_,$){var ne=this.__data__;return ne[_]=F&&$===void 0?r:$,this}Q.prototype.clear=pe,Q.prototype.delete=ye,Q.prototype.get=Te,Q.prototype.has=Ae,Q.prototype.set=Ue;function le(_){var $=-1,ne=_?_.length:0;for(this.clear();++$<ne;){var De=_[$];this.set(De[0],De[1])}}function ve(){this.__data__=[]}function fe(_){var $=this.__data__,ne=ie($,_);if(ne<0)return!1;var De=$.length-1;return ne==De?$.pop():J.call($,ne,1),!0}function oe(_){var $=this.__data__,ne=ie($,_);return ne<0?void 0:$[ne][1]}function Ie(_){return ie(this.__data__,_)>-1}function b(_,$){var ne=this.__data__,De=ie(ne,_);return De<0?ne.push([_,$]):ne[De][1]=$,this}le.prototype.clear=ve,le.prototype.delete=fe,le.prototype.get=oe,le.prototype.has=Ie,le.prototype.set=b;function H(_){var $=-1,ne=_?_.length:0;for(this.clear();++$<ne;){var De=_[$];this.set(De[0],De[1])}}function te(){this.__data__={hash:new Q,map:new(G||le),string:new Q}}function j(_){return ze(this,_).delete(_)}function me(_){return ze(this,_).get(_)}function be(_){return ze(this,_).has(_)}function ue(_,$){return ze(this,_).set(_,$),this}H.prototype.clear=te,H.prototype.delete=j,H.prototype.get=me,H.prototype.has=be,H.prototype.set=ue;function ie(_,$){for(var ne=_.length;ne--;)if(ft(_[ne][0],$))return ne;return-1}function se(_,$){$=Je($,_)?[$]:Ee($);for(var ne=0,De=$.length;_!=null&&ne<De;)_=_[wt($[ne++])];return ne&&ne==De?_:void 0}function xe(_){if(!gt(_)||Ye(_))return!1;var $=Dt(_)||B(_)?y:C;return $.test(Gt(_))}function _e(_){if(typeof _=="string")return _;if(Ke(_))return W?W.call(_):"";var $=_+"";return $=="0"&&1/_==-1/0?"-0":$}function Ee(_){return lt(_)?_:ct(_)}function ze(_,$){var ne=_.__data__;return Fe($)?ne[typeof $=="string"?"string":"hash"]:ne.map}function Be(_,$){var ne=M(_,$);return xe(ne)?ne:void 0}function Je(_,$){if(lt(_))return!1;var ne=typeof _;return ne=="number"||ne=="symbol"||ne=="boolean"||_==null||Ke(_)?!0:u.test(_)||!s.test(_)||$!=null&&_ in Object($)}function Fe(_){var $=typeof _;return $=="string"||$=="number"||$=="symbol"||$=="boolean"?_!=="__proto__":_===null}function Ye(_){return!!E&&E in _}var ct=At(function(_){_=pn(_);var $=[];return h.test(_)&&$.push(""),_.replace(c,function(ne,De,g,T){$.push(g?T.replace(p,"$1"):De||ne)}),$});function wt(_){if(typeof _=="string"||Ke(_))return _;var $=_+"";return $=="0"&&1/_==-1/0?"-0":$}function Gt(_){if(_!=null){try{return R.call(_)}catch{}try{return _+""}catch{}}return""}function At(_,$){if(typeof _!="function"||$&&typeof $!="function")throw new TypeError(e);var ne=function(){var De=arguments,g=$?$.apply(this,De):De[0],T=ne.cache;if(T.has(g))return T.get(g);var Z=_.apply(this,De);return ne.cache=T.set(g,Z),Z};return ne.cache=new(At.Cache||H),ne}At.Cache=H;function ft(_,$){return _===$||_!==_&&$!==$}var lt=Array.isArray;function Dt(_){var $=gt(_)?S.call(_):"";return $==n||$==a}function gt(_){var $=typeof _;return!!_&&($=="object"||$=="function")}function He(_){return!!_&&typeof _=="object"}function Ke(_){return typeof _=="symbol"||He(_)&&S.call(_)==l}function pn(_){return _==null?"":_e(_)}function Nt(_,$,ne){var De=_==null?void 0:se(_,$);return De===void 0?ne:De}return La=Nt,La}var uu=su();const cu=cr(uu),fu={class:"flex items-center"},du={key:0},pu={class:"flex justify-end"},hu=it({__name:"WaveQuickEdit",props:{wave:{},pkey:{},editable:{type:Boolean},idx:{},scriptInfo:{}},emits:["update-value"],setup(e,{emit:r}){const n=r,a=e,l=he({value:void 0,script:void 0}),s=he(null),u=he(!1),h=()=>{u.value=!0},c=()=>{u.value=!1},m=v=>{v||c()},p=()=>{n("update-value",{idx:a.idx,pkey:a.pkey,...l.value}),c()},C=(v="")=>{l.value={...l.value,script:v}};Lt(u,()=>{var O;const v=JSON.parse(JSON.stringify(a||{}));l.value={value:cu(a.wave,a.pkey),script:((O=v==null?void 0:v.scriptInfo)==null?void 0:O.script)||""}},{immediate:!0,deep:!0});const N=Tt(()=>{var v,O,M;return((v=a.scriptInfo)==null?void 0:v.parameter)===((O=a.pkey.split("."))==null?void 0:O.pop())&&((M=a==null?void 0:a.scriptInfo)==null?void 0:M.script)});return(v,O)=>{var R;const M=$t,B=tl,z=po,K=Jr,V=jr,P=Fn,E=zn;return q(),ge("div",{class:"flex items-center",onClick:h},[I(B,{trigger:"hover",disabled:!((R=v.scriptInfo)!=null&&R.script)},{trigger:D(()=>[Y("div",fu,[Y("div",null,[Ya(v.$slots,"default",{},void 0,!0)]),d(N)?(q(),$e(M,{key:0,size:"small",class:"!w-5 !h-5",type:"warning"},{icon:D(()=>[I(d(Qa))]),_:1})):qe("",!0)])]),default:D(()=>[v.scriptInfo.script?(q(),ge("span",du,we(v.scriptInfo.script),1)):qe("",!0)]),_:3},8,["disabled"]),I(E,{show:d(u),"onUpdate:show":O[2]||(O[2]=x=>Et(u)?u.value=x:null),onUpdateShow:m},{default:D(()=>[I(P,{style:{width:"900px"}},{default:D(()=>[I(V,{model:d(l),ref_key:"formRef",ref:s,size:"small",disabled:!v.editable},{default:D(()=>{var x;return[I(K,{label:(x=v.pkey.split("."))==null?void 0:x.pop()},{default:D(()=>[I(z,{class:"w-52",value:d(l).value,"onUpdate:value":O[0]||(O[0]=S=>d(l).value=S)},null,8,["value"])]),_:1},8,["label"]),I(K,{path:"script",class:"w-full",label:"Script"},{label:D(()=>[Y("div",null,[O[3]||(O[3]=Y("span",{class:"inline-block w-12 mb-2"}," Script ",-1)),v.editable?(q(),$e(hi,{key:0,"onUpdate:value":C})):qe("",!0)])]),default:D(()=>[I(d(vi),{height:"400px",theme:"vs-dark",value:d(l).script,"onUpdate:value":O[1]||(O[1]=S=>d(l).script=S),language:"python",options:{readOnly:!v.editable}},null,8,["value","options"])]),_:1})]}),_:1},8,["model","disabled"]),Y("div",pu,[I(M,{type:"primary",onClick:p},{default:D(()=>O[4]||(O[4]=[Ce(" 确定 ")])),_:1})])]),_:1})]),_:1},8,["show"])])}}}),wr=Gr(hu,[["__scopeId","data-v-ede03f38"]]);var ka,Lo;function vu(){if(Lo)return ka;Lo=1;var e="Expected a function",r="__lodash_hash_undefined__",n=9007199254740991,a="[object Function]",l="[object GeneratorFunction]",s="[object Symbol]",u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,h=/^\w*$/,c=/^\./,m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/[\\^$.*+?()[\]{}|]/g,C=/\\(\\)?/g,N=/^\[object .+?Constructor\]$/,v=/^(?:0|[1-9]\d*)$/,O=typeof tt=="object"&&tt&&tt.Object===Object&&tt,M=typeof self=="object"&&self&&self.Object===Object&&self,B=O||M||Function("return this")();function z(g,T){return g==null?void 0:g[T]}function K(g){var T=!1;if(g!=null&&typeof g.toString!="function")try{T=!!(g+"")}catch{}return T}var V=Array.prototype,P=Function.prototype,E=Object.prototype,R=B["__core-js_shared__"],x=function(){var g=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),S=P.toString,y=E.hasOwnProperty,k=E.toString,J=RegExp("^"+S.call(y).replace(p,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),G=B.Symbol,F=V.splice,X=Ye(B,"Map"),W=Ye(Object,"create"),Q=G?G.prototype:void 0,pe=Q?Q.toString:void 0;function ye(g){var T=-1,Z=g?g.length:0;for(this.clear();++T<Z;){var Me=g[T];this.set(Me[0],Me[1])}}function Te(){this.__data__=W?W(null):{}}function Ae(g){return this.has(g)&&delete this.__data__[g]}function Ue(g){var T=this.__data__;if(W){var Z=T[g];return Z===r?void 0:Z}return y.call(T,g)?T[g]:void 0}function le(g){var T=this.__data__;return W?T[g]!==void 0:y.call(T,g)}function ve(g,T){var Z=this.__data__;return Z[g]=W&&T===void 0?r:T,this}ye.prototype.clear=Te,ye.prototype.delete=Ae,ye.prototype.get=Ue,ye.prototype.has=le,ye.prototype.set=ve;function fe(g){var T=-1,Z=g?g.length:0;for(this.clear();++T<Z;){var Me=g[T];this.set(Me[0],Me[1])}}function oe(){this.__data__=[]}function Ie(g){var T=this.__data__,Z=_e(T,g);if(Z<0)return!1;var Me=T.length-1;return Z==Me?T.pop():F.call(T,Z,1),!0}function b(g){var T=this.__data__,Z=_e(T,g);return Z<0?void 0:T[Z][1]}function H(g){return _e(this.__data__,g)>-1}function te(g,T){var Z=this.__data__,Me=_e(Z,g);return Me<0?Z.push([g,T]):Z[Me][1]=T,this}fe.prototype.clear=oe,fe.prototype.delete=Ie,fe.prototype.get=b,fe.prototype.has=H,fe.prototype.set=te;function j(g){var T=-1,Z=g?g.length:0;for(this.clear();++T<Z;){var Me=g[T];this.set(Me[0],Me[1])}}function me(){this.__data__={hash:new ye,map:new(X||fe),string:new ye}}function be(g){return Fe(this,g).delete(g)}function ue(g){return Fe(this,g).get(g)}function ie(g){return Fe(this,g).has(g)}function se(g,T){return Fe(this,g).set(g,T),this}j.prototype.clear=me,j.prototype.delete=be,j.prototype.get=ue,j.prototype.has=ie,j.prototype.set=se;function xe(g,T,Z){var Me=g[T];(!(y.call(g,T)&&He(Me,Z))||Z===void 0&&!(T in g))&&(g[T]=Z)}function _e(g,T){for(var Z=g.length;Z--;)if(He(g[Z][0],T))return Z;return-1}function Ee(g){if(!Nt(g)||At(g))return!1;var T=pn(g)||K(g)?J:N;return T.test(Dt(g))}function ze(g,T,Z,Me){if(!Nt(g))return g;T=wt(T,g)?[T]:Je(T);for(var st=-1,Qe=T.length,rn=Qe-1,qt=g;qt!=null&&++st<Qe;){var hn=lt(T[st]),an=Z;if(st!=rn){var wn=qt[hn];an=void 0,an===void 0&&(an=Nt(wn)?wn:ct(T[st+1])?[]:{})}xe(qt,hn,an),qt=qt[hn]}return g}function Be(g){if(typeof g=="string")return g;if($(g))return pe?pe.call(g):"";var T=g+"";return T=="0"&&1/g==-1/0?"-0":T}function Je(g){return Ke(g)?g:ft(g)}function Fe(g,T){var Z=g.__data__;return Gt(T)?Z[typeof T=="string"?"string":"hash"]:Z.map}function Ye(g,T){var Z=z(g,T);return Ee(Z)?Z:void 0}function ct(g,T){return T=T??n,!!T&&(typeof g=="number"||v.test(g))&&g>-1&&g%1==0&&g<T}function wt(g,T){if(Ke(g))return!1;var Z=typeof g;return Z=="number"||Z=="symbol"||Z=="boolean"||g==null||$(g)?!0:h.test(g)||!u.test(g)||T!=null&&g in Object(T)}function Gt(g){var T=typeof g;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?g!=="__proto__":g===null}function At(g){return!!x&&x in g}var ft=gt(function(g){g=ne(g);var T=[];return c.test(g)&&T.push(""),g.replace(m,function(Z,Me,st,Qe){T.push(st?Qe.replace(C,"$1"):Me||Z)}),T});function lt(g){if(typeof g=="string"||$(g))return g;var T=g+"";return T=="0"&&1/g==-1/0?"-0":T}function Dt(g){if(g!=null){try{return S.call(g)}catch{}try{return g+""}catch{}}return""}function gt(g,T){if(typeof g!="function"||T&&typeof T!="function")throw new TypeError(e);var Z=function(){var Me=arguments,st=T?T.apply(this,Me):Me[0],Qe=Z.cache;if(Qe.has(st))return Qe.get(st);var rn=g.apply(this,Me);return Z.cache=Qe.set(st,rn),rn};return Z.cache=new(gt.Cache||j),Z}gt.Cache=j;function He(g,T){return g===T||g!==g&&T!==T}var Ke=Array.isArray;function pn(g){var T=Nt(g)?k.call(g):"";return T==a||T==l}function Nt(g){var T=typeof g;return!!g&&(T=="object"||T=="function")}function _(g){return!!g&&typeof g=="object"}function $(g){return typeof g=="symbol"||_(g)&&k.call(g)==s}function ne(g){return g==null?"":Be(g)}function De(g,T,Z){return g==null?g:ze(g,T,Z)}return ka=De,ka}var gu=vu();const mu=cr(gu),_u={style:{border:"1px dashed rgba(56, 137, 197, 0.35)"},class:"rounded p-1 my-1"},yu={class:"flex justify-between items-center gap-2 flex-wrap"},bu={class:"text-l"},wu={class:"my-1 flex gap-1 flex-1 flex-wrap"},xu={class:"inline-flex gap-2 items-center"},Su=it({__name:"WaveView",props:{widx:{},wave:{},editable:{type:Boolean},root:{},scriptInfo:{}},emits:["edit-wave","delete-wave","update-wave-script"],setup(e,{emit:r}){const n=e,{t:a}=kn(),l=he(),s=r,u=()=>{s("edit-wave")},h=()=>{s("delete-wave")};Lt(()=>n.scriptInfo,m=>{l.value=m==null?void 0:m.waveformScript},{immediate:!0,deep:!0});const c=({pkey:m,script:p,value:C,idx:N})=>{const v=JSON.parse(JSON.stringify(n.wave));mu(v,m,C),s("update-wave-script",{wave:v,pkey:m,script:p,widx:n.widx,idx:N})};return(m,p)=>{var O,M,B,z,K,V;const C=nl,N=$t,v=Ul;return q(),ge("div",_u,[Y("div",yu,[Y("div",bu,[I(C,{type:"info",bordered:!1,size:"small"},{default:D(()=>{var P;return[Ce(we((P=m.wave)==null?void 0:P.channel),1)]}),_:1}),p[0]||(p[0]=Ce(" : ")),I(C,{type:"success",bordered:!1,size:"small"},{default:D(()=>{var P;return[Ce(we((P=m.wave)==null?void 0:P.func_name),1)]}),_:1})]),Y("div",wu,[p[3]||(p[3]=Ce(" ( ")),I(wr,{pkey:"t0",wave:m.wave,editable:m.editable,idx:(O=d(l))==null?void 0:O.findIndex(P=>P.parameter==="t0"),"script-info":(M=d(l))==null?void 0:M.find(P=>P.parameter==="t0"),onUpdateValue:c},{default:D(()=>[I(C,{bordered:!1,class:"!cursor-pointer",size:"small",color:{textColor:"#ff7d00"}},{default:D(()=>{var P;return[Ce(" t0 = "+we((P=m.wave)==null?void 0:P.t0),1)]}),_:1})]),_:1},8,["wave","editable","idx","script-info"]),p[4]||(p[4]=Ce(" , ")),I(wr,{pkey:"ratio",wave:m.wave,editable:m.editable,idx:(B=d(l))==null?void 0:B.findIndex(P=>P.parameter==="ratio"),"script-info":(z=d(l))==null?void 0:z.find(P=>P.parameter==="ratio"),onUpdateValue:c},{default:D(()=>[I(C,{bordered:!1,size:"small",class:"!cursor-pointer",color:{textColor:"#ff7d00"}},{default:D(()=>{var P;return[Ce(" ratio = "+we((P=m.wave)==null?void 0:P.ratio),1)]}),_:1})]),_:1},8,["wave","editable","idx","script-info"]),p[5]||(p[5]=Ce(" , ")),(q(!0),ge(ht,null,Ut((K=m.wave)==null?void 0:K.wave_parameters,(P,E)=>{var R,x;return q(),ge(ht,{key:E},[I(wr,{wave:m.wave,pkey:`wave_parameters.${E}`,editable:m.editable,idx:(R=d(l))==null?void 0:R.findIndex(S=>S.parameter===E),"script-info":(x=d(l))==null?void 0:x.find(S=>S.parameter===E),onUpdateValue:c},{default:D(()=>[I(C,{bordered:!1,class:"!cursor-pointer",size:"small",color:{textColor:"#ff7d00"}},{default:D(()=>[Ce(we(E)+" = "+we(P),1)]),_:2},1024)]),_:2},1032,["wave","pkey","editable","idx","script-info"]),p[1]||(p[1]=Ce(" , "))],64)}),128)),(q(!0),ge(ht,null,Ut((V=m.wave)==null?void 0:V.waveform_compiler_config,(P,E)=>{var R,x;return q(),ge(ht,{key:E},[I(wr,{wave:m.wave,pkey:`waveform_compiler_config.${E}`,editable:m.editable,idx:(R=d(l))==null?void 0:R.findIndex(S=>S.parameter===E),"script-info":(x=d(l))==null?void 0:x.find(S=>S.parameter===E),onUpdateValue:c},{default:D(()=>[I(C,{bordered:!1,class:"!cursor-pointer",size:"small",color:{textColor:"#00b42a"}},{default:D(()=>[Ce(we(E)+" = "+we(P),1)]),_:2},1024)]),_:2},1032,["wave","pkey","editable","idx","script-info"]),p[2]||(p[2]=Y("span",{class:"last:hidden"},",",-1))],64)}),128)),p[6]||(p[6]=Ce(" ) "))]),Y("div",xu,[I(N,{type:"info",size:"small",circle:"",onClick:u},{icon:D(()=>[I(d(si))]),_:1}),m.editable?(q(),$e(v,{key:0,trigger:"click",onPositiveClick:h},{trigger:D(()=>[I(N,{type:"error",size:"small",circle:""},{icon:D(()=>[I(d(fo))]),_:1})]),default:D(()=>[Ce(" "+we(d(a)("common.removeConfirm")),1)]),_:1})):qe("",!0)])])])}}}),Cu={class:"flex justify-between items-center gap-2"},Iu={class:"flex justify-between"},Ou={class:"text-xl inline-flex items-center gap-2"},Eu={class:"flex items-center gap-2"},Tu={key:0,class:"text-center mt-20"},Au={class:"n-empty__description"},Du={key:1,class:"text-center mt-20"},Nu={class:"n-empty__description"},Pu={class:"h-[236px] overflow-hidden"},Mu={class:"flex justify-end mt-4"},Ru=it({__name:"GateModal",props:{info:{}},emits:["ok","close"],setup(e,{expose:r,emit:n}){const a=e,l=Ln(),s=Un(),{allQubits:u,gates:h,program:c,layers:m}=Ur(s),{t:p}=kn(),C=oi(),N=he(),v=he(),O=he(),M=he(!1),B=he(!1),z=he(!1),K=he([]),V=he(!1),P=he(),E=he(),R=he(),x=he({gate_name:void 0,entity:void 0}),S=he({gate_name:{required:!0,message:p("common.required")},entity:{required:!0,message:p("common.required")}}),y=n,k=he(!1),J=()=>{k.value=!1,P.value=void 0,y("close")},G=()=>{k.value=!0},F=()=>{J()},X=()=>{V.value=!0,Rt(()=>{var b;(b=E.value)==null||b.open()})},W=()=>{P.value=void 0,V.value=!1,O.value=void 0},Q=()=>{var b;(b=R.value)==null||b.validate(H=>{var te,j,me,be;if(!H){let ue=JSON.parse(JSON.stringify(((te=c.value)==null?void 0:te.waveform_script)||[]));const{idx:ie=[],waveformScript:se=[]}=v.value||{};if(se.forEach(_e=>{var Ee;_e.entity=x.value.entity?x.value.entity[0]:"",_e.gate_name=((Ee=x.value)==null?void 0:Ee.gate_name)||""}),ie==null||ie.forEach((_e,Ee)=>{ue[_e]=se[Ee]}),ue=ue.concat(se.slice(ie.length)),vo(ue,_e=>!_e.script),c.value={space_parameter_script:(j=c.value)==null?void 0:j.space_parameter_script,waveform_script:ue},(me=a.info)!=null&&me.gateInfo)h.value={...h.value||{},[a.info.gateInfo.key]:x.value};else if(((be=a.info)==null?void 0:be.layerIdx)!==void 0){const _e=co(),Ee=JSON.parse(JSON.stringify(m.value||[]));Ee[a.info.layerIdx].push(_e),m.value=Ee,h.value={...h.value||{},[_e]:x.value}}const xe=JSON.parse(JSON.stringify(u.value));xe==null||xe.forEach(_e=>{var Ee;(_e.value===x.value.entity||(Ee=x.value.entity)!=null&&Ee.includes(_e.value))&&(_e.visible=!0)}),u.value=xe,J()}})},pe=Tt(()=>{var H;let b=[];return m.value[(H=a.info)==null?void 0:H.layerIdx].forEach(te=>{var me;const j=h!=null&&h.value?(me=h.value[te])==null?void 0:me.entity:[];b=b.concat(j)}),u.value.filter(te=>!b.includes(te.value)).map(te=>({label:te.value,value:te.value}))}),ye=b=>{if(b.length>2){Rt(()=>{x.value={...x.value,entity:b.slice(0,2)}});return}},Te=(b,H)=>{var me,be;const te=[],j=(be=(me=v.value)==null?void 0:me.waveformScript)==null?void 0:be.filter((ue,ie)=>{var se,xe,_e,Ee,ze;if(ue.search_type==="ids"&&ue.script&&((xe=(se=ue.wave_ids)==null?void 0:se.map(Je=>+Je))==null?void 0:xe.includes(+H))||ue.search_type==="name"&&ue.script&&ue.wave_names.includes(b.name)||ue.search_type==="channel"&&ue.script&&(ue.channels.includes(b.channel)||ue.channels.includes((ze=b.channel)==null?void 0:ze.replace(((Ee=(_e=a.info)==null?void 0:_e.qubit)==null?void 0:Ee.value)||"",""))))return te.push(ie),!0});return{idx:te,waveformScript:j}},Ae=(b,H)=>{O.value=Te(b,H),P.value={wave_id:H,wave:x.value.waves?x.value.waves[H]:void 0},X()},Ue=b=>{if(x.value.waves){const H=JSON.parse(JSON.stringify(v.value));H.waveformScript.forEach(j=>{var me,be;j.search_type==="ids"&&(((me=j.wave_ids)==null?void 0:me.length)>1?ar(j.wave_ids,b):(be=j.wave_ids)!=null&&be.includes(b)&&(j.script=""),j.wave_ids.forEach((ie,se)=>{ie>b&&(j.wave_ids[se]=ie-1)}))}),v.value=H;const te=JSON.parse(JSON.stringify(x.value.waves));te.splice(b,1),x.value={...x.value,waves:te},Rt(()=>{var j;((j=x.value.waves)==null?void 0:j.length)===0&&(N.value=void 0)})}},le=async b=>{if(M.value)return;M.value=!0;const H=x.value.waves;if(!H)return;const[te,j]=await $l({device_group_name:C.query.device_group_name,space_id:C.query.space_id,waves:H});M.value=!1,!te&&(j==null?void 0:j.status)===0&&(N.value=j.data)},ve=async()=>{var b,H,te,j,me,be;if((b=x.value)!=null&&b.entity&&((H=x.value)!=null&&H.gate_name)&&It((te=x.value)==null?void 0:te.waves)){const[ue,ie]=await Ll({device_group_name:C.query.device_group_name,space_id:C.query.space_id,entities:(me=(j=x.value)==null?void 0:j.entity)==null?void 0:me.join(","),gate_name:(be=x.value)==null?void 0:be.gate_name});!ue&&(ie==null?void 0:ie.status)===0&&(x.value={...x.value,waves:ie.data.waves})}},fe=(b,H)=>{var be,ue,ie;let te=JSON.parse(JSON.stringify(((be=v.value)==null?void 0:be.waveformScript)||[]));const{idx:j=[]}=O.value||{};j==null||j.forEach((se,xe)=>{te[se]=b[xe]}),(b==null?void 0:b.length)>j.length&&(te=te.concat(b.slice(j.length))),v.value={idx:((ue=v.value)==null?void 0:ue.idx)||[],waveformScript:te};const me=JSON.parse(JSON.stringify(x.value.waves||[]));P.value?(me[P.value.wave_id]=H,x.value={...x.value,waves:me}):x.value={...x.value,waves:(((ie=x.value)==null?void 0:ie.waves)||[]).concat(H)}},oe=({wave:b,script:H,pkey:te,widx:j,idx:me})=>{var _e,Ee;const be=JSON.parse(JSON.stringify(x.value.waves));be[j]=b,x.value={...x.value,waves:be};const ue=JSON.parse(JSON.stringify(v.value||{waveformScript:[],idx:[]})),{idx:ie,waveformScript:se}=Te(b,j),xe=(_e=te.split("."))==null?void 0:_e.pop();se==null||se.forEach(ze=>{ze.parameter===xe&&(ze.script=H||"")}),ie.forEach((ze,Be)=>{ue.waveformScript[ze]=se?se[Be]:void 0}),xe&&!(se!=null&&se.map(ze=>ze.parameter).includes(xe))&&ue.waveformScript.push({entity:x.value.entity,layer:(Ee=a.info)==null?void 0:Ee.layerIdx,channel:b.channel,wave_ids:[j],parameter:xe,script:H,gate_name:x.value.gate_name,wave_func_names:[b.func_name],search_type:"ids"}),v.value=ue};Lt(a,b=>{var H,te,j,me,be,ue,ie;if((te=(H=b==null?void 0:b.info)==null?void 0:H.qubit)!=null&&te.value&&(x.value={...x.value,...(j=b.info.gateInfo)==null?void 0:j.val,entity:(be=(me=b.info.gateInfo)==null?void 0:me.val)==null?void 0:be.entity},(ue=b==null?void 0:b.info)!=null&&ue.gateInfo)){const se=[],xe=JSON.parse(JSON.stringify(((ie=c.value)==null?void 0:ie.waveform_script)||[])),_e=xe==null?void 0:xe.filter((Ee,ze)=>{var Be,Je,Fe,Ye;if(((Be=b.info)==null?void 0:Be.layerIdx)===Ee.layer&&((Ye=(Fe=(Je=b.info.gateInfo)==null?void 0:Je.val)==null?void 0:Fe.entity)!=null&&Ye.includes(Ee.entity)))return se.push(ze),!0});v.value={idx:se,waveformScript:_e}}},{immediate:!0}),Lt(x,b=>{b.gate_name&&!It(b.entity)?(B.value=!1,z.value=!1):(B.value=!0,z.value=!0)},{deep:!0,immediate:!0}),Lt(()=>x.value.waves,b=>{Rt(()=>{It(b)||le()})},{immediate:!0});const Ie=async()=>{const[b,H]=await kl({device_group_name:C.query.device_group_name,space_id:C.query.space_id});!b&&(H==null?void 0:H.status)===0&&(K.value=Object.keys(H.data).map(te=>({label:te,value:te})))};return io(()=>{Ie()}),r({open:G,close:J}),(b,H)=>{const te=so,j=Jr,me=jr,be=ii,ue=Br,ie=$t,se=rl,xe=oo,_e=lo,Ee=Fn,ze=zn;return q(),$e(ze,{show:d(k),"onUpdate:show":H[2]||(H[2]=Be=>Et(k)?k.value=Be:null),"on-update:show":F},{default:D(()=>[I(Ee,{style:Zt([{width:"1000px",height:"93vh"},{background:d(l).modalColor}]),size:"huge",bordered:!1,role:"dialog","aria-modal":"true",class:"!pt-0 g-n-card","content-style":"padding: 20px"},{default:D(()=>{var Be,Je,Fe,Ye;return[I(me,{model:d(x),rules:d(S),ref_key:"formRef",ref:R,size:"small",disabled:!!((Je=(Be=d(s))==null?void 0:Be.expInfo)!=null&&Je.exp_id)},{default:D(()=>[Y("div",Cu,[I(j,{label:d(p)("expInfo.gateName"),path:"gate_name",class:"flex-1"},{default:D(()=>[I(te,{tag:"",filterable:"",value:d(x).gate_name,"onUpdate:value":H[0]||(H[0]=ct=>d(x).gate_name=ct),options:d(K)},null,8,["value","options"])]),_:1},8,["label"]),I(j,{label:d(p)("expInfo.qubits"),path:"entity",class:"w-full flex-1"},{default:D(()=>[I(te,{multiple:"",filterable:"",value:d(x).entity,"onUpdate:value":H[1]||(H[1]=ct=>d(x).entity=ct),options:d(pe),"max-tag-count":2,onUpdateValue:ye},null,8,["value","options"])]),_:1},8,["label"])])]),_:1},8,["model","rules","disabled"]),I(be,{class:"!mb-2 !mt-0"}),Y("div",Iu,[Y("div",Ou,[I(ue,{component:d(pi)},null,8,["component"]),Ce(" "+we(d(p)("expInfo.waveformsTitle")),1)]),Y("div",Eu,[d(It)(d(x).waves)?(q(),$e(ie,{key:0,type:"info",size:"small",onClick:ve,disabled:d(z)},{default:D(()=>[Ce(we(d(p)("expInfo.waveformsTips")),1)]),_:1},8,["disabled"])):qe("",!0),(Ye=(Fe=d(s))==null?void 0:Fe.expInfo)!=null&&Ye.exp_id?qe("",!0):(q(),$e(ie,{key:1,onClick:X,type:"info",size:"small",disabled:d(B)},{icon:D(()=>[I(d(Pr))]),default:D(()=>[Ce(" "+we(d(p)("expInfo.addWaveForm")),1)]),_:1},8,["disabled"]))])]),I(xe,{style:{height:"calc(93vh - 435px)"}},{default:D(()=>{var ct,wt,Gt,At;return[d(z)?(q(),ge("div",Tu,[I(se,{description:d(p)("expInfo.nowaveforms")},{extra:D(()=>[Y("div",Au,we(d(p)("expInfo.checkTips")),1)]),_:1},8,["description"])])):qe("",!0),d(It)(d(x).waves)&&!d(z)?(q(),ge("div",Du,[I(se,{description:d(p)("expInfo.nowaveforms")},{extra:D(()=>[Y("div",Nu,we(d(p)("expInfo.defaultTips")),1)]),_:1},8,["description"])])):qe("",!0),(q(!0),ge(ht,null,Ut(d(x).waves,(ft,lt)=>{var Dt,gt;return q(),$e(Su,{key:lt,widx:lt,root:d(x),wave:ft,"script-info":Te(ft,lt),onEditWave:()=>Ae(ft,lt),onDeleteWave:()=>Ue(lt),onUpdateWaveScript:oe,editable:!((gt=(Dt=d(s))==null?void 0:Dt.expInfo)!=null&&gt.exp_id)},null,8,["widx","root","wave","script-info","onEditWave","onDeleteWave","editable"])}),128)),d(V)&&((ct=b.info)==null?void 0:ct.layerIdx)!==void 0?(q(),$e(lu,{key:2,ref_key:"waveFormRef",ref:E,"layer-idx":(wt=b.info)==null?void 0:wt.layerIdx,"gate-info":d(x),"wave-info":d(P),"script-info":(Gt=d(O))==null?void 0:Gt.waveformScript,len:((At=d(x).waves)==null?void 0:At.length)||0,onClose:W,onUpdateValue:fe},null,8,["layer-idx","gate-info","wave-info","script-info","len"])):qe("",!0)]}),_:1}),Y("div",Pu,[d(M)?(q(),$e(_e,{key:0,class:"h-full w-full","v-show":!0})):d(N)?(q(),$e(mi,{key:1,data:d(N)},null,8,["data"])):qe("",!0)]),Y("div",Mu,[I(ie,{type:"primary",onClick:Q},{default:D(()=>[Ce(we(d(p)("common.OK")),1)]),_:1})])]}),_:1},8,["style"])]),_:1},8,["show"])}}});var $u=Object.defineProperty,Mr=Object.getOwnPropertySymbols,_i=Object.prototype.hasOwnProperty,yi=Object.prototype.propertyIsEnumerable,ko=(e,r,n)=>r in e?$u(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,Pn=(e,r)=>{for(var n in r||(r={}))_i.call(r,n)&&ko(e,n,r[n]);if(Mr)for(var n of Mr(r))yi.call(r,n)&&ko(e,n,r[n]);return e},bi=(e,r)=>{var n={};for(var a in e)_i.call(e,a)&&r.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&Mr)for(var a of Mr(e))r.indexOf(a)<0&&yi.call(e,a)&&(n[a]=e[a]);return n};const wi="[vue-draggable-plus]: ";function Lu(e){console.warn(wi+e)}function ku(e){console.error(wi+e)}function zo(e,r,n){return n>=0&&n<e.length&&e.splice(n,0,e.splice(r,1)[0]),e}function zu(e){return e.replace(/-(\w)/g,(r,n)=>n?n.toUpperCase():"")}function Fu(e){return Object.keys(e).reduce((r,n)=>(typeof e[n]<"u"&&(r[zu(n)]=e[n]),r),{})}function Fo(e,r){return Array.isArray(e)&&e.splice(r,1),e}function Uo(e,r,n){return Array.isArray(e)&&e.splice(r,0,n),e}function Uu(e){return typeof e>"u"}function Gu(e){return typeof e=="string"}function Go(e,r,n){const a=e.children[n];e.insertBefore(r,a)}function za(e){e.parentNode&&e.parentNode.removeChild(e)}function Bu(e,r=document){var n;let a=null;return typeof(r==null?void 0:r.querySelector)=="function"?a=(n=r==null?void 0:r.querySelector)==null?void 0:n.call(r,e):a=document.querySelector(e),a||Lu(`Element not found: ${e}`),a}function Hu(e,r,n=null){return function(...a){return e.apply(n,a),r.apply(n,a)}}function ju(e,r){const n=Pn({},e);return Object.keys(r).forEach(a=>{n[a]?n[a]=Hu(e[a],r[a]):n[a]=r[a]}),n}function Ju(e){return e instanceof HTMLElement}function Bo(e,r){Object.keys(e).forEach(n=>{r(n,e[n])})}function Wu(e){return e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97)}const qu=Object.assign;/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Ho(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Wt(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Ho(Object(n),!0).forEach(function(a){Vu(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ho(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Or(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Or=function(r){return typeof r}:Or=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Or(e)}function Vu(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function tn(){return tn=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},tn.apply(this,arguments)}function Xu(e,r){if(e==null)return{};var n={},a=Object.keys(e),l,s;for(s=0;s<a.length;s++)l=a[s],!(r.indexOf(l)>=0)&&(n[l]=e[l]);return n}function Yu(e,r){if(e==null)return{};var n=Xu(e,r),a,l;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(l=0;l<s.length;l++)a=s[l],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var Ku="1.15.2";function en(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var nn=en(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),fr=en(/Edge/i),jo=en(/firefox/i),or=en(/safari/i)&&!en(/chrome/i)&&!en(/android/i),xi=en(/iP(ad|od|hone)/i),Si=en(/chrome/i)&&en(/android/i),Ci={capture:!1,passive:!1};function Pe(e,r,n){e.addEventListener(r,n,!nn&&Ci)}function Oe(e,r,n){e.removeEventListener(r,n,!nn&&Ci)}function Rr(e,r){if(r){if(r[0]===">"&&(r=r.substring(1)),e)try{if(e.matches)return e.matches(r);if(e.msMatchesSelector)return e.msMatchesSelector(r);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(r)}catch{return!1}return!1}}function Qu(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Ft(e,r,n,a){if(e){n=n||document;do{if(r!=null&&(r[0]===">"?e.parentNode===n&&Rr(e,r):Rr(e,r))||a&&e===n)return e;if(e===n)break}while(e=Qu(e))}return null}var Jo=/\s+/g;function St(e,r,n){if(e&&r)if(e.classList)e.classList[n?"add":"remove"](r);else{var a=(" "+e.className+" ").replace(Jo," ").replace(" "+r+" "," ");e.className=(a+(n?" "+r:"")).replace(Jo," ")}}function re(e,r,n){var a=e&&e.style;if(a){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),r===void 0?n:n[r];!(r in a)&&r.indexOf("webkit")===-1&&(r="-webkit-"+r),a[r]=n+(typeof n=="string"?"":"px")}}function Rn(e,r){var n="";if(typeof e=="string")n=e;else do{var a=re(e,"transform");a&&a!=="none"&&(n=a+" "+n)}while(!r&&(e=e.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(n)}function Ii(e,r,n){if(e){var a=e.getElementsByTagName(r),l=0,s=a.length;if(n)for(;l<s;l++)n(a[l],l);return a}return[]}function Jt(){var e=document.scrollingElement;return e||document.documentElement}function et(e,r,n,a,l){if(!(!e.getBoundingClientRect&&e!==window)){var s,u,h,c,m,p,C;if(e!==window&&e.parentNode&&e!==Jt()?(s=e.getBoundingClientRect(),u=s.top,h=s.left,c=s.bottom,m=s.right,p=s.height,C=s.width):(u=0,h=0,c=window.innerHeight,m=window.innerWidth,p=window.innerHeight,C=window.innerWidth),(r||n)&&e!==window&&(l=l||e.parentNode,!nn))do if(l&&l.getBoundingClientRect&&(re(l,"transform")!=="none"||n&&re(l,"position")!=="static")){var N=l.getBoundingClientRect();u-=N.top+parseInt(re(l,"border-top-width")),h-=N.left+parseInt(re(l,"border-left-width")),c=u+s.height,m=h+s.width;break}while(l=l.parentNode);if(a&&e!==window){var v=Rn(l||e),O=v&&v.a,M=v&&v.d;v&&(u/=M,h/=O,C/=O,p/=M,c=u+p,m=h+C)}return{top:u,left:h,bottom:c,right:m,width:C,height:p}}}function Wo(e,r,n){for(var a=dn(e,!0),l=et(e)[r];a;){var s=et(a)[n],u=void 0;if(u=l>=s,!u)return a;if(a===Jt())break;a=dn(a,!1)}return!1}function $n(e,r,n,a){for(var l=0,s=0,u=e.children;s<u.length;){if(u[s].style.display!=="none"&&u[s]!==ae.ghost&&(a||u[s]!==ae.dragged)&&Ft(u[s],n.draggable,e,!1)){if(l===r)return u[s];l++}s++}return null}function go(e,r){for(var n=e.lastElementChild;n&&(n===ae.ghost||re(n,"display")==="none"||r&&!Rr(n,r));)n=n.previousElementSibling;return n||null}function Pt(e,r){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==ae.clone&&(!r||Rr(e,r))&&n++;return n}function qo(e){var r=0,n=0,a=Jt();if(e)do{var l=Rn(e),s=l.a,u=l.d;r+=e.scrollLeft*s,n+=e.scrollTop*u}while(e!==a&&(e=e.parentNode));return[r,n]}function Zu(e,r){for(var n in e)if(e.hasOwnProperty(n)){for(var a in r)if(r.hasOwnProperty(a)&&r[a]===e[n][a])return Number(n)}return-1}function dn(e,r){if(!e||!e.getBoundingClientRect)return Jt();var n=e,a=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var l=re(n);if(n.clientWidth<n.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Jt();if(a||r)return n;a=!0}}while(n=n.parentNode);return Jt()}function ec(e,r){if(e&&r)for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);return e}function Fa(e,r){return Math.round(e.top)===Math.round(r.top)&&Math.round(e.left)===Math.round(r.left)&&Math.round(e.height)===Math.round(r.height)&&Math.round(e.width)===Math.round(r.width)}var ir;function Oi(e,r){return function(){if(!ir){var n=arguments,a=this;n.length===1?e.call(a,n[0]):e.apply(a,n),ir=setTimeout(function(){ir=void 0},r)}}}function tc(){clearTimeout(ir),ir=void 0}function Ei(e,r,n){e.scrollLeft+=r,e.scrollTop+=n}function Ti(e){var r=window.Polymer,n=window.jQuery||window.Zepto;return r&&r.dom?r.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function Ai(e,r,n){var a={};return Array.from(e.children).forEach(function(l){var s,u,h,c;if(!(!Ft(l,r.draggable,e,!1)||l.animated||l===n)){var m=et(l);a.left=Math.min((s=a.left)!==null&&s!==void 0?s:1/0,m.left),a.top=Math.min((u=a.top)!==null&&u!==void 0?u:1/0,m.top),a.right=Math.max((h=a.right)!==null&&h!==void 0?h:-1/0,m.right),a.bottom=Math.max((c=a.bottom)!==null&&c!==void 0?c:-1/0,m.bottom)}}),a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var Ot="Sortable"+new Date().getTime();function nc(){var e=[],r;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(a){if(!(re(a,"display")==="none"||a===ae.ghost)){e.push({target:a,rect:et(a)});var l=Wt({},e[e.length-1].rect);if(a.thisAnimationDuration){var s=Rn(a,!0);s&&(l.top-=s.f,l.left-=s.e)}a.fromRect=l}})}},addAnimationState:function(n){e.push(n)},removeAnimationState:function(n){e.splice(Zu(e,{target:n}),1)},animateAll:function(n){var a=this;if(!this.options.animation){clearTimeout(r),typeof n=="function"&&n();return}var l=!1,s=0;e.forEach(function(u){var h=0,c=u.target,m=c.fromRect,p=et(c),C=c.prevFromRect,N=c.prevToRect,v=u.rect,O=Rn(c,!0);O&&(p.top-=O.f,p.left-=O.e),c.toRect=p,c.thisAnimationDuration&&Fa(C,p)&&!Fa(m,p)&&(v.top-p.top)/(v.left-p.left)===(m.top-p.top)/(m.left-p.left)&&(h=ac(v,C,N,a.options)),Fa(p,m)||(c.prevFromRect=m,c.prevToRect=p,h||(h=a.options.animation),a.animate(c,v,p,h)),h&&(l=!0,s=Math.max(s,h),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},h),c.thisAnimationDuration=h)}),clearTimeout(r),l?r=setTimeout(function(){typeof n=="function"&&n()},s):typeof n=="function"&&n(),e=[]},animate:function(n,a,l,s){if(s){re(n,"transition",""),re(n,"transform","");var u=Rn(this.el),h=u&&u.a,c=u&&u.d,m=(a.left-l.left)/(h||1),p=(a.top-l.top)/(c||1);n.animatingX=!!m,n.animatingY=!!p,re(n,"transform","translate3d("+m+"px,"+p+"px,0)"),this.forRepaintDummy=rc(n),re(n,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),re(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){re(n,"transition",""),re(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},s)}}}}function rc(e){return e.offsetWidth}function ac(e,r,n,a){return Math.sqrt(Math.pow(r.top-e.top,2)+Math.pow(r.left-e.left,2))/Math.sqrt(Math.pow(r.top-n.top,2)+Math.pow(r.left-n.left,2))*a.animation}var An=[],Ua={initializeByDefault:!0},dr={mount:function(e){for(var r in Ua)Ua.hasOwnProperty(r)&&!(r in e)&&(e[r]=Ua[r]);An.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),An.push(e)},pluginEvent:function(e,r,n){var a=this;this.eventCanceled=!1,n.cancel=function(){a.eventCanceled=!0};var l=e+"Global";An.forEach(function(s){r[s.pluginName]&&(r[s.pluginName][l]&&r[s.pluginName][l](Wt({sortable:r},n)),r.options[s.pluginName]&&r[s.pluginName][e]&&r[s.pluginName][e](Wt({sortable:r},n)))})},initializePlugins:function(e,r,n,a){An.forEach(function(u){var h=u.pluginName;if(!(!e.options[h]&&!u.initializeByDefault)){var c=new u(e,r,e.options);c.sortable=e,c.options=e.options,e[h]=c,tn(n,c.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var s=this.modifyOption(e,l,e.options[l]);typeof s<"u"&&(e.options[l]=s)}},getEventProperties:function(e,r){var n={};return An.forEach(function(a){typeof a.eventProperties=="function"&&tn(n,a.eventProperties.call(r[a.pluginName],e))}),n},modifyOption:function(e,r,n){var a;return An.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[r]=="function"&&(a=l.optionListeners[r].call(e[l.pluginName],n))}),a}};function oc(e){var r=e.sortable,n=e.rootEl,a=e.name,l=e.targetEl,s=e.cloneEl,u=e.toEl,h=e.fromEl,c=e.oldIndex,m=e.newIndex,p=e.oldDraggableIndex,C=e.newDraggableIndex,N=e.originalEvent,v=e.putSortable,O=e.extraEventProperties;if(r=r||n&&n[Ot],!!r){var M,B=r.options,z="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!nn&&!fr?M=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(M=document.createEvent("Event"),M.initEvent(a,!0,!0)),M.to=u||n,M.from=h||n,M.item=l||n,M.clone=s,M.oldIndex=c,M.newIndex=m,M.oldDraggableIndex=p,M.newDraggableIndex=C,M.originalEvent=N,M.pullMode=v?v.lastPutMode:void 0;var K=Wt(Wt({},O),dr.getEventProperties(a,r));for(var V in K)M[V]=K[V];n&&n.dispatchEvent(M),B[z]&&B[z].call(r,M)}}var ic=["evt"],xt=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=n.evt,l=Yu(n,ic);dr.pluginEvent.bind(ae)(e,r,Wt({dragEl:U,parentEl:Ve,ghostEl:ce,rootEl:je,nextEl:bn,lastDownEl:Er,cloneEl:We,cloneHidden:fn,dragStarted:tr,putSortable:pt,activeSortable:ae.active,originalEvent:a,oldIndex:Mn,oldDraggableIndex:lr,newIndex:Ct,newDraggableIndex:cn,hideGhostForTarget:Mi,unhideGhostForTarget:Ri,cloneNowHidden:function(){fn=!0},cloneNowShown:function(){fn=!1},dispatchSortableEvent:function(s){bt({sortable:r,name:s,originalEvent:a})}},l))};function bt(e){oc(Wt({putSortable:pt,cloneEl:We,targetEl:U,rootEl:je,oldIndex:Mn,oldDraggableIndex:lr,newIndex:Ct,newDraggableIndex:cn},e))}var U,Ve,ce,je,bn,Er,We,fn,Mn,Ct,lr,cn,xr,pt,Nn=!1,$r=!1,Lr=[],_n,zt,Ga,Ba,Vo,Xo,tr,Dn,sr,ur=!1,Sr=!1,Tr,vt,Ha=[],Za=!1,kr=[],Wr=typeof document<"u",Cr=xi,Yo=fr||nn?"cssFloat":"float",lc=Wr&&!Si&&!xi&&"draggable"in document.createElement("div"),Di=function(){if(Wr){if(nn)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Ni=function(e,r){var n=re(e),a=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),l=$n(e,0,r),s=$n(e,1,r),u=l&&re(l),h=s&&re(s),c=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+et(l).width,m=h&&parseInt(h.marginLeft)+parseInt(h.marginRight)+et(s).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&u.float&&u.float!=="none"){var p=u.float==="left"?"left":"right";return s&&(h.clear==="both"||h.clear===p)?"vertical":"horizontal"}return l&&(u.display==="block"||u.display==="flex"||u.display==="table"||u.display==="grid"||c>=a&&n[Yo]==="none"||s&&n[Yo]==="none"&&c+m>a)?"vertical":"horizontal"},sc=function(e,r,n){var a=n?e.left:e.top,l=n?e.right:e.bottom,s=n?e.width:e.height,u=n?r.left:r.top,h=n?r.right:r.bottom,c=n?r.width:r.height;return a===u||l===h||a+s/2===u+c/2},uc=function(e,r){var n;return Lr.some(function(a){var l=a[Ot].options.emptyInsertThreshold;if(!(!l||go(a))){var s=et(a),u=e>=s.left-l&&e<=s.right+l,h=r>=s.top-l&&r<=s.bottom+l;if(u&&h)return n=a}}),n},Pi=function(e){function r(l,s){return function(u,h,c,m){var p=u.options.group.name&&h.options.group.name&&u.options.group.name===h.options.group.name;if(l==null&&(s||p))return!0;if(l==null||l===!1)return!1;if(s&&l==="clone")return l;if(typeof l=="function")return r(l(u,h,c,m),s)(u,h,c,m);var C=(s?u:h).options.group.name;return l===!0||typeof l=="string"&&l===C||l.join&&l.indexOf(C)>-1}}var n={},a=e.group;(!a||Or(a)!="object")&&(a={name:a}),n.name=a.name,n.checkPull=r(a.pull,!0),n.checkPut=r(a.put),n.revertClone=a.revertClone,e.group=n},Mi=function(){!Di&&ce&&re(ce,"display","none")},Ri=function(){!Di&&ce&&re(ce,"display","")};Wr&&!Si&&document.addEventListener("click",function(e){if($r)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),$r=!1,!1},!0);var yn=function(e){if(U){e=e.touches?e.touches[0]:e;var r=uc(e.clientX,e.clientY);if(r){var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);n.target=n.rootEl=r,n.preventDefault=void 0,n.stopPropagation=void 0,r[Ot]._onDragOver(n)}}},cc=function(e){U&&U.parentNode[Ot]._isOutsideThisEl(e.target)};function ae(e,r){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=r=tn({},r),e[Ot]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ni(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,u){s.setData("Text",u.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:ae.supportPointer!==!1&&"PointerEvent"in window&&!or,emptyInsertThreshold:5};dr.initializePlugins(this,e,n);for(var a in n)!(a in r)&&(r[a]=n[a]);Pi(r);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=r.forceFallback?!1:lc,this.nativeDraggable&&(this.options.touchStartThreshold=1),r.supportPointer?Pe(e,"pointerdown",this._onTapStart):(Pe(e,"mousedown",this._onTapStart),Pe(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Pe(e,"dragover",this),Pe(e,"dragenter",this)),Lr.push(this.el),r.store&&r.store.get&&this.sort(r.store.get(this)||[]),tn(this,nc())}ae.prototype={constructor:ae,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Dn=null)},_getDirection:function(e,r){return typeof this.options.direction=="function"?this.options.direction.call(this,e,r,U):this.options.direction},_onTapStart:function(e){if(e.cancelable){var r=this,n=this.el,a=this.options,l=a.preventOnFilter,s=e.type,u=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,h=(u||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||h,m=a.filter;if(_c(n),!U&&!(/mousedown|pointerdown/.test(s)&&e.button!==0||a.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&or&&h&&h.tagName.toUpperCase()==="SELECT")&&(h=Ft(h,a.draggable,n,!1),!(h&&h.animated)&&Er!==h)){if(Mn=Pt(h),lr=Pt(h,a.draggable),typeof m=="function"){if(m.call(this,e,h,this)){bt({sortable:r,rootEl:c,name:"filter",targetEl:h,toEl:n,fromEl:n}),xt("filter",r,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if(m&&(m=m.split(",").some(function(p){if(p=Ft(c,p.trim(),n,!1),p)return bt({sortable:r,rootEl:p,name:"filter",targetEl:h,fromEl:n,toEl:n}),xt("filter",r,{evt:e}),!0}),m)){l&&e.cancelable&&e.preventDefault();return}a.handle&&!Ft(c,a.handle,n,!1)||this._prepareDragStart(e,u,h)}}},_prepareDragStart:function(e,r,n){var a=this,l=a.el,s=a.options,u=l.ownerDocument,h;if(n&&!U&&n.parentNode===l){var c=et(n);if(je=l,U=n,Ve=U.parentNode,bn=U.nextSibling,Er=n,xr=s.group,ae.dragged=U,_n={target:U,clientX:(r||e).clientX,clientY:(r||e).clientY},Vo=_n.clientX-c.left,Xo=_n.clientY-c.top,this._lastX=(r||e).clientX,this._lastY=(r||e).clientY,U.style["will-change"]="all",h=function(){if(xt("delayEnded",a,{evt:e}),ae.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!jo&&a.nativeDraggable&&(U.draggable=!0),a._triggerDragStart(e,r),bt({sortable:a,name:"choose",originalEvent:e}),St(U,s.chosenClass,!0)},s.ignore.split(",").forEach(function(m){Ii(U,m.trim(),ja)}),Pe(u,"dragover",yn),Pe(u,"mousemove",yn),Pe(u,"touchmove",yn),Pe(u,"mouseup",a._onDrop),Pe(u,"touchend",a._onDrop),Pe(u,"touchcancel",a._onDrop),jo&&this.nativeDraggable&&(this.options.touchStartThreshold=4,U.draggable=!0),xt("delayStart",this,{evt:e}),s.delay&&(!s.delayOnTouchOnly||r)&&(!this.nativeDraggable||!(fr||nn))){if(ae.eventCanceled){this._onDrop();return}Pe(u,"mouseup",a._disableDelayedDrag),Pe(u,"touchend",a._disableDelayedDrag),Pe(u,"touchcancel",a._disableDelayedDrag),Pe(u,"mousemove",a._delayedDragTouchMoveHandler),Pe(u,"touchmove",a._delayedDragTouchMoveHandler),s.supportPointer&&Pe(u,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(h,s.delay)}else h()}},_delayedDragTouchMoveHandler:function(e){var r=e.touches?e.touches[0]:e;Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){U&&ja(U),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Oe(e,"mouseup",this._disableDelayedDrag),Oe(e,"touchend",this._disableDelayedDrag),Oe(e,"touchcancel",this._disableDelayedDrag),Oe(e,"mousemove",this._delayedDragTouchMoveHandler),Oe(e,"touchmove",this._delayedDragTouchMoveHandler),Oe(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,r){r=r||e.pointerType=="touch"&&e,!this.nativeDraggable||r?this.options.supportPointer?Pe(document,"pointermove",this._onTouchMove):r?Pe(document,"touchmove",this._onTouchMove):Pe(document,"mousemove",this._onTouchMove):(Pe(U,"dragend",this),Pe(je,"dragstart",this._onDragStart));try{document.selection?Ar(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,r){if(Nn=!1,je&&U){xt("dragStarted",this,{evt:r}),this.nativeDraggable&&Pe(document,"dragover",cc);var n=this.options;!e&&St(U,n.dragClass,!1),St(U,n.ghostClass,!0),ae.active=this,e&&this._appendGhost(),bt({sortable:this,name:"start",originalEvent:r})}else this._nulling()},_emulateDragOver:function(){if(zt){this._lastX=zt.clientX,this._lastY=zt.clientY,Mi();for(var e=document.elementFromPoint(zt.clientX,zt.clientY),r=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(zt.clientX,zt.clientY),e!==r);)r=e;if(U.parentNode[Ot]._isOutsideThisEl(e),r)do{if(r[Ot]){var n=void 0;if(n=r[Ot]._onDragOver({clientX:zt.clientX,clientY:zt.clientY,target:e,rootEl:r}),n&&!this.options.dragoverBubble)break}e=r}while(r=r.parentNode);Ri()}},_onTouchMove:function(e){if(_n){var r=this.options,n=r.fallbackTolerance,a=r.fallbackOffset,l=e.touches?e.touches[0]:e,s=ce&&Rn(ce,!0),u=ce&&s&&s.a,h=ce&&s&&s.d,c=Cr&&vt&&qo(vt),m=(l.clientX-_n.clientX+a.x)/(u||1)+(c?c[0]-Ha[0]:0)/(u||1),p=(l.clientY-_n.clientY+a.y)/(h||1)+(c?c[1]-Ha[1]:0)/(h||1);if(!ae.active&&!Nn){if(n&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(ce){s?(s.e+=m-(Ga||0),s.f+=p-(Ba||0)):s={a:1,b:0,c:0,d:1,e:m,f:p};var C="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");re(ce,"webkitTransform",C),re(ce,"mozTransform",C),re(ce,"msTransform",C),re(ce,"transform",C),Ga=m,Ba=p,zt=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ce){var e=this.options.fallbackOnBody?document.body:je,r=et(U,!0,Cr,!0,e),n=this.options;if(Cr){for(vt=e;re(vt,"position")==="static"&&re(vt,"transform")==="none"&&vt!==document;)vt=vt.parentNode;vt!==document.body&&vt!==document.documentElement?(vt===document&&(vt=Jt()),r.top+=vt.scrollTop,r.left+=vt.scrollLeft):vt=Jt(),Ha=qo(vt)}ce=U.cloneNode(!0),St(ce,n.ghostClass,!1),St(ce,n.fallbackClass,!0),St(ce,n.dragClass,!0),re(ce,"transition",""),re(ce,"transform",""),re(ce,"box-sizing","border-box"),re(ce,"margin",0),re(ce,"top",r.top),re(ce,"left",r.left),re(ce,"width",r.width),re(ce,"height",r.height),re(ce,"opacity","0.8"),re(ce,"position",Cr?"absolute":"fixed"),re(ce,"zIndex","100000"),re(ce,"pointerEvents","none"),ae.ghost=ce,e.appendChild(ce),re(ce,"transform-origin",Vo/parseInt(ce.style.width)*100+"% "+Xo/parseInt(ce.style.height)*100+"%")}},_onDragStart:function(e,r){var n=this,a=e.dataTransfer,l=n.options;if(xt("dragStart",this,{evt:e}),ae.eventCanceled){this._onDrop();return}xt("setupClone",this),ae.eventCanceled||(We=Ti(U),We.removeAttribute("id"),We.draggable=!1,We.style["will-change"]="",this._hideClone(),St(We,this.options.chosenClass,!1),ae.clone=We),n.cloneId=Ar(function(){xt("clone",n),!ae.eventCanceled&&(n.options.removeCloneOnHide||je.insertBefore(We,U),n._hideClone(),bt({sortable:n,name:"clone"}))}),!r&&St(U,l.dragClass,!0),r?($r=!0,n._loopId=setInterval(n._emulateDragOver,50)):(Oe(document,"mouseup",n._onDrop),Oe(document,"touchend",n._onDrop),Oe(document,"touchcancel",n._onDrop),a&&(a.effectAllowed="move",l.setData&&l.setData.call(n,a,U)),Pe(document,"drop",n),re(U,"transform","translateZ(0)")),Nn=!0,n._dragStartId=Ar(n._dragStarted.bind(n,r,e)),Pe(document,"selectstart",n),tr=!0,or&&re(document.body,"user-select","none")},_onDragOver:function(e){var r=this.el,n=e.target,a,l,s,u=this.options,h=u.group,c=ae.active,m=xr===h,p=u.sort,C=pt||c,N,v=this,O=!1;if(Za)return;function M(pe,ye){xt(pe,v,Wt({evt:e,isOwner:m,axis:N?"vertical":"horizontal",revert:s,dragRect:a,targetRect:l,canSort:p,fromSortable:C,target:n,completed:z,onMove:function(Te,Ae){return Ir(je,r,U,a,Te,et(Te),e,Ae)},changed:K},ye))}function B(){M("dragOverAnimationCapture"),v.captureAnimationState(),v!==C&&C.captureAnimationState()}function z(pe){return M("dragOverCompleted",{insertion:pe}),pe&&(m?c._hideClone():c._showClone(v),v!==C&&(St(U,pt?pt.options.ghostClass:c.options.ghostClass,!1),St(U,u.ghostClass,!0)),pt!==v&&v!==ae.active?pt=v:v===ae.active&&pt&&(pt=null),C===v&&(v._ignoreWhileAnimating=n),v.animateAll(function(){M("dragOverAnimationComplete"),v._ignoreWhileAnimating=null}),v!==C&&(C.animateAll(),C._ignoreWhileAnimating=null)),(n===U&&!U.animated||n===r&&!n.animated)&&(Dn=null),!u.dragoverBubble&&!e.rootEl&&n!==document&&(U.parentNode[Ot]._isOutsideThisEl(e.target),!pe&&yn(e)),!u.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),O=!0}function K(){Ct=Pt(U),cn=Pt(U,u.draggable),bt({sortable:v,name:"change",toEl:r,newIndex:Ct,newDraggableIndex:cn,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=Ft(n,u.draggable,r,!0),M("dragOver"),ae.eventCanceled)return O;if(U.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||v._ignoreWhileAnimating===n)return z(!1);if($r=!1,c&&!u.disabled&&(m?p||(s=Ve!==je):pt===this||(this.lastPutMode=xr.checkPull(this,c,U,e))&&h.checkPut(this,c,U,e))){if(N=this._getDirection(e,n)==="vertical",a=et(U),M("dragOverValid"),ae.eventCanceled)return O;if(s)return Ve=je,B(),this._hideClone(),M("revert"),ae.eventCanceled||(bn?je.insertBefore(U,bn):je.appendChild(U)),z(!0);var V=go(r,u.draggable);if(!V||hc(e,N,this)&&!V.animated){if(V===U)return z(!1);if(V&&r===e.target&&(n=V),n&&(l=et(n)),Ir(je,r,U,a,n,l,e,!!n)!==!1)return B(),V&&V.nextSibling?r.insertBefore(U,V.nextSibling):r.appendChild(U),Ve=r,K(),z(!0)}else if(V&&pc(e,N,this)){var P=$n(r,0,u,!0);if(P===U)return z(!1);if(n=P,l=et(n),Ir(je,r,U,a,n,l,e,!1)!==!1)return B(),r.insertBefore(U,P),Ve=r,K(),z(!0)}else if(n.parentNode===r){l=et(n);var E=0,R,x=U.parentNode!==r,S=!sc(U.animated&&U.toRect||a,n.animated&&n.toRect||l,N),y=N?"top":"left",k=Wo(n,"top","top")||Wo(U,"top","top"),J=k?k.scrollTop:void 0;Dn!==n&&(R=l[y],ur=!1,Sr=!S&&u.invertSwap||x),E=vc(e,n,l,N,S?1:u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,Sr,Dn===n);var G;if(E!==0){var F=Pt(U);do F-=E,G=Ve.children[F];while(G&&(re(G,"display")==="none"||G===ce))}if(E===0||G===n)return z(!1);Dn=n,sr=E;var X=n.nextElementSibling,W=!1;W=E===1;var Q=Ir(je,r,U,a,n,l,e,W);if(Q!==!1)return(Q===1||Q===-1)&&(W=Q===1),Za=!0,setTimeout(dc,30),B(),W&&!X?r.appendChild(U):n.parentNode.insertBefore(U,W?X:n),k&&Ei(k,0,J-k.scrollTop),Ve=U.parentNode,R!==void 0&&!Sr&&(Tr=Math.abs(R-et(n)[y])),K(),z(!0)}if(r.contains(U))return z(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Oe(document,"mousemove",this._onTouchMove),Oe(document,"touchmove",this._onTouchMove),Oe(document,"pointermove",this._onTouchMove),Oe(document,"dragover",yn),Oe(document,"mousemove",yn),Oe(document,"touchmove",yn)},_offUpEvents:function(){var e=this.el.ownerDocument;Oe(e,"mouseup",this._onDrop),Oe(e,"touchend",this._onDrop),Oe(e,"pointerup",this._onDrop),Oe(e,"touchcancel",this._onDrop),Oe(document,"selectstart",this)},_onDrop:function(e){var r=this.el,n=this.options;if(Ct=Pt(U),cn=Pt(U,n.draggable),xt("drop",this,{evt:e}),Ve=U&&U.parentNode,Ct=Pt(U),cn=Pt(U,n.draggable),ae.eventCanceled){this._nulling();return}Nn=!1,Sr=!1,ur=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),eo(this.cloneId),eo(this._dragStartId),this.nativeDraggable&&(Oe(document,"drop",this),Oe(r,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),or&&re(document.body,"user-select",""),re(U,"transform",""),e&&(tr&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),ce&&ce.parentNode&&ce.parentNode.removeChild(ce),(je===Ve||pt&&pt.lastPutMode!=="clone")&&We&&We.parentNode&&We.parentNode.removeChild(We),U&&(this.nativeDraggable&&Oe(U,"dragend",this),ja(U),U.style["will-change"]="",tr&&!Nn&&St(U,pt?pt.options.ghostClass:this.options.ghostClass,!1),St(U,this.options.chosenClass,!1),bt({sortable:this,name:"unchoose",toEl:Ve,newIndex:null,newDraggableIndex:null,originalEvent:e}),je!==Ve?(Ct>=0&&(bt({rootEl:Ve,name:"add",toEl:Ve,fromEl:je,originalEvent:e}),bt({sortable:this,name:"remove",toEl:Ve,originalEvent:e}),bt({rootEl:Ve,name:"sort",toEl:Ve,fromEl:je,originalEvent:e}),bt({sortable:this,name:"sort",toEl:Ve,originalEvent:e})),pt&&pt.save()):Ct!==Mn&&Ct>=0&&(bt({sortable:this,name:"update",toEl:Ve,originalEvent:e}),bt({sortable:this,name:"sort",toEl:Ve,originalEvent:e})),ae.active&&((Ct==null||Ct===-1)&&(Ct=Mn,cn=lr),bt({sortable:this,name:"end",toEl:Ve,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){xt("nulling",this),je=U=Ve=ce=bn=We=Er=fn=_n=zt=tr=Ct=cn=Mn=lr=Dn=sr=pt=xr=ae.dragged=ae.ghost=ae.clone=ae.active=null,kr.forEach(function(e){e.checked=!0}),kr.length=Ga=Ba=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":U&&(this._onDragOver(e),fc(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],r,n=this.el.children,a=0,l=n.length,s=this.options;a<l;a++)r=n[a],Ft(r,s.draggable,this.el,!1)&&e.push(r.getAttribute(s.dataIdAttr)||mc(r));return e},sort:function(e,r){var n={},a=this.el;this.toArray().forEach(function(l,s){var u=a.children[s];Ft(u,this.options.draggable,a,!1)&&(n[l]=u)},this),r&&this.captureAnimationState(),e.forEach(function(l){n[l]&&(a.removeChild(n[l]),a.appendChild(n[l]))}),r&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,r){return Ft(e,r||this.options.draggable,this.el,!1)},option:function(e,r){var n=this.options;if(r===void 0)return n[e];var a=dr.modifyOption(this,e,r);typeof a<"u"?n[e]=a:n[e]=r,e==="group"&&Pi(n)},destroy:function(){xt("destroy",this);var e=this.el;e[Ot]=null,Oe(e,"mousedown",this._onTapStart),Oe(e,"touchstart",this._onTapStart),Oe(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Oe(e,"dragover",this),Oe(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(r){r.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Lr.splice(Lr.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!fn){if(xt("hideClone",this),ae.eventCanceled)return;re(We,"display","none"),this.options.removeCloneOnHide&&We.parentNode&&We.parentNode.removeChild(We),fn=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(fn){if(xt("showClone",this),ae.eventCanceled)return;U.parentNode==je&&!this.options.group.revertClone?je.insertBefore(We,U):bn?je.insertBefore(We,bn):je.appendChild(We),this.options.group.revertClone&&this.animate(U,We),re(We,"display",""),fn=!1}}};function fc(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Ir(e,r,n,a,l,s,u,h){var c,m=e[Ot],p=m.options.onMove,C;return window.CustomEvent&&!nn&&!fr?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=r,c.from=e,c.dragged=n,c.draggedRect=a,c.related=l||r,c.relatedRect=s||et(r),c.willInsertAfter=h,c.originalEvent=u,e.dispatchEvent(c),p&&(C=p.call(m,c,u)),C}function ja(e){e.draggable=!1}function dc(){Za=!1}function pc(e,r,n){var a=et($n(n.el,0,n.options,!0)),l=Ai(n.el,n.options,ce),s=10;return r?e.clientX<l.left-s||e.clientY<a.top&&e.clientX<a.right:e.clientY<l.top-s||e.clientY<a.bottom&&e.clientX<a.left}function hc(e,r,n){var a=et(go(n.el,n.options.draggable)),l=Ai(n.el,n.options,ce),s=10;return r?e.clientX>l.right+s||e.clientY>a.bottom&&e.clientX>a.left:e.clientY>l.bottom+s||e.clientX>a.right&&e.clientY>a.top}function vc(e,r,n,a,l,s,u,h){var c=a?e.clientY:e.clientX,m=a?n.height:n.width,p=a?n.top:n.left,C=a?n.bottom:n.right,N=!1;if(!u){if(h&&Tr<m*l){if(!ur&&(sr===1?c>p+m*s/2:c<C-m*s/2)&&(ur=!0),ur)N=!0;else if(sr===1?c<p+Tr:c>C-Tr)return-sr}else if(c>p+m*(1-l)/2&&c<C-m*(1-l)/2)return gc(r)}return N=N||u,N&&(c<p+m*s/2||c>C-m*s/2)?c>p+m/2?1:-1:0}function gc(e){return Pt(U)<Pt(e)?1:-1}function mc(e){for(var r=e.tagName+e.className+e.src+e.href+e.textContent,n=r.length,a=0;n--;)a+=r.charCodeAt(n);return a.toString(36)}function _c(e){kr.length=0;for(var r=e.getElementsByTagName("input"),n=r.length;n--;){var a=r[n];a.checked&&kr.push(a)}}function Ar(e){return setTimeout(e,0)}function eo(e){return clearTimeout(e)}Wr&&Pe(document,"touchmove",function(e){(ae.active||Nn)&&e.cancelable&&e.preventDefault()});ae.utils={on:Pe,off:Oe,css:re,find:Ii,is:function(e,r){return!!Ft(e,r,e,!1)},extend:ec,throttle:Oi,closest:Ft,toggleClass:St,clone:Ti,index:Pt,nextTick:Ar,cancelNextTick:eo,detectDirection:Ni,getChild:$n};ae.get=function(e){return e[Ot]};ae.mount=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];r[0].constructor===Array&&(r=r[0]),r.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(ae.utils=Wt(Wt({},ae.utils),a.utils)),dr.mount(a)})};ae.create=function(e,r){return new ae(e,r)};ae.version=Ku;var Ze=[],nr,to,no=!1,Ja,Wa,zr,rr;function yc(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this))}return e.prototype={dragStarted:function(r){var n=r.originalEvent;this.sortable.nativeDraggable?Pe(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Pe(document,"pointermove",this._handleFallbackAutoScroll):n.touches?Pe(document,"touchmove",this._handleFallbackAutoScroll):Pe(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(r){var n=r.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?Oe(document,"dragover",this._handleAutoScroll):(Oe(document,"pointermove",this._handleFallbackAutoScroll),Oe(document,"touchmove",this._handleFallbackAutoScroll),Oe(document,"mousemove",this._handleFallbackAutoScroll)),Ko(),Dr(),tc()},nulling:function(){zr=to=nr=no=rr=Ja=Wa=null,Ze.length=0},_handleFallbackAutoScroll:function(r){this._handleAutoScroll(r,!0)},_handleAutoScroll:function(r,n){var a=this,l=(r.touches?r.touches[0]:r).clientX,s=(r.touches?r.touches[0]:r).clientY,u=document.elementFromPoint(l,s);if(zr=r,n||this.options.forceAutoScrollFallback||fr||nn||or){qa(r,this.options,u,n);var h=dn(u,!0);no&&(!rr||l!==Ja||s!==Wa)&&(rr&&Ko(),rr=setInterval(function(){var c=dn(document.elementFromPoint(l,s),!0);c!==h&&(h=c,Dr()),qa(r,a.options,c,n)},10),Ja=l,Wa=s)}else{if(!this.options.bubbleScroll||dn(u,!0)===Jt()){Dr();return}qa(r,this.options,dn(u,!1),!1)}}},tn(e,{pluginName:"scroll",initializeByDefault:!0})}function Dr(){Ze.forEach(function(e){clearInterval(e.pid)}),Ze=[]}function Ko(){clearInterval(rr)}var qa=Oi(function(e,r,n,a){if(r.scroll){var l=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,u=r.scrollSensitivity,h=r.scrollSpeed,c=Jt(),m=!1,p;to!==n&&(to=n,Dr(),nr=r.scroll,p=r.scrollFn,nr===!0&&(nr=dn(n,!0)));var C=0,N=nr;do{var v=N,O=et(v),M=O.top,B=O.bottom,z=O.left,K=O.right,V=O.width,P=O.height,E=void 0,R=void 0,x=v.scrollWidth,S=v.scrollHeight,y=re(v),k=v.scrollLeft,J=v.scrollTop;v===c?(E=V<x&&(y.overflowX==="auto"||y.overflowX==="scroll"||y.overflowX==="visible"),R=P<S&&(y.overflowY==="auto"||y.overflowY==="scroll"||y.overflowY==="visible")):(E=V<x&&(y.overflowX==="auto"||y.overflowX==="scroll"),R=P<S&&(y.overflowY==="auto"||y.overflowY==="scroll"));var G=E&&(Math.abs(K-l)<=u&&k+V<x)-(Math.abs(z-l)<=u&&!!k),F=R&&(Math.abs(B-s)<=u&&J+P<S)-(Math.abs(M-s)<=u&&!!J);if(!Ze[C])for(var X=0;X<=C;X++)Ze[X]||(Ze[X]={});(Ze[C].vx!=G||Ze[C].vy!=F||Ze[C].el!==v)&&(Ze[C].el=v,Ze[C].vx=G,Ze[C].vy=F,clearInterval(Ze[C].pid),(G!=0||F!=0)&&(m=!0,Ze[C].pid=setInterval((function(){a&&this.layer===0&&ae.active._onTouchMove(zr);var W=Ze[this.layer].vy?Ze[this.layer].vy*h:0,Q=Ze[this.layer].vx?Ze[this.layer].vx*h:0;typeof p=="function"&&p.call(ae.dragged.parentNode[Ot],Q,W,e,zr,Ze[this.layer].el)!=="continue"||Ei(Ze[this.layer].el,Q,W)}).bind({layer:C}),24))),C++}while(r.bubbleScroll&&N!==c&&(N=dn(N,!1)));no=m}},30),$i=function(e){var r=e.originalEvent,n=e.putSortable,a=e.dragEl,l=e.activeSortable,s=e.dispatchSortableEvent,u=e.hideGhostForTarget,h=e.unhideGhostForTarget;if(r){var c=n||l;u();var m=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:r,p=document.elementFromPoint(m.clientX,m.clientY);h(),c&&!c.el.contains(p)&&(s("spill"),this.onSpill({dragEl:a,putSortable:n}))}};function mo(){}mo.prototype={startIndex:null,dragStart:function(e){var r=e.oldDraggableIndex;this.startIndex=r},onSpill:function(e){var r=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var a=$n(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(r,a):this.sortable.el.appendChild(r),this.sortable.animateAll(),n&&n.animateAll()},drop:$i};tn(mo,{pluginName:"revertOnSpill"});function _o(){}_o.prototype={onSpill:function(e){var r=e.dragEl,n=e.putSortable,a=n||this.sortable;a.captureAnimationState(),r.parentNode&&r.parentNode.removeChild(r),a.animateAll()},drop:$i};tn(_o,{pluginName:"removeOnSpill"});ae.mount(new yc);ae.mount(_o,mo);function bc(e){return e==null?e:JSON.parse(JSON.stringify(e))}function wc(e){uo()&&ai(e)}function xc(e){uo()?io(e):Rt(e)}let Li=null,ki=null;function Qo(e=null,r=null){Li=e,ki=r}function Sc(){return{data:Li,clonedData:ki}}const Zo=Symbol("cloneElement");function Cc(...e){var r,n;const a=(r=uo())==null?void 0:r.proxy;let l=null;const s=e[0];let[,u,h]=e;Array.isArray(d(u))||(h=u,u=null);let c=null;const{immediate:m=!0,clone:p=bc,customUpdate:C}=(n=d(h))!=null?n:{};function N(S){var y;const{from:k,oldIndex:J,item:G}=S;l=Array.from(k.childNodes);const F=d((y=d(u))==null?void 0:y[J]),X=p(F);Qo(F,X),G[Zo]=X}function v(S){const y=S.item[Zo];if(!Uu(y)){if(za(S.item),Et(u)){const k=[...d(u)];u.value=Uo(k,S.newDraggableIndex,y);return}Uo(d(u),S.newDraggableIndex,y)}}function O(S){const{from:y,item:k,oldIndex:J,oldDraggableIndex:G,pullMode:F,clone:X}=S;if(Go(y,k,J),F==="clone"){za(X);return}if(Et(u)){const W=[...d(u)];u.value=Fo(W,G);return}Fo(d(u),G)}function M(S){if(C){C(S);return}const{from:y,item:k,oldIndex:J,oldDraggableIndex:G,newDraggableIndex:F}=S;if(za(k),Go(y,k,J),Et(u)){const X=[...d(u)];u.value=zo(X,G,F);return}zo(d(u),G,F)}function B(S){const{newIndex:y,oldIndex:k,from:J,to:G}=S;let F=null;const X=y===k&&J===G;try{if(X){let W=null;l==null||l.some((Q,pe)=>{if(W&&(l==null?void 0:l.length)!==G.childNodes.length)return J.insertBefore(W,Q.nextSibling),!0;const ye=G.childNodes[pe];W=G==null?void 0:G.replaceChild(Q,ye)})}}catch(W){F=W}finally{l=null}Rt(()=>{if(Qo(),F)throw F})}const z={onUpdate:M,onStart:N,onAdd:v,onRemove:O,onEnd:B};function K(S){const y=d(s);return S||(S=Gu(y)?Bu(y,a==null?void 0:a.$el):y),S&&!Ju(S)&&(S=S.$el),S||ku("Root element not found"),S}function V(){var S;const y=(S=d(h))!=null?S:{},{immediate:k,clone:J}=y,G=bi(y,["immediate","clone"]);return Bo(G,(F,X)=>{Wu(F)&&(G[F]=(W,...Q)=>{const pe=Sc();return qu(W,pe),X(W,...Q)})}),ju(u===null?{}:z,G)}const P=S=>{S=K(S),c&&E.destroy(),c=new ae(S,V())};Lt(()=>h,()=>{c&&Bo(V(),(S,y)=>{c==null||c.option(S,y)})},{deep:!0});const E={option:(S,y)=>c==null?void 0:c.option(S,y),destroy:()=>{c==null||c.destroy(),c=null},save:()=>c==null?void 0:c.save(),toArray:()=>c==null?void 0:c.toArray(),closest:(...S)=>c==null?void 0:c.closest(...S)},R=()=>E==null?void 0:E.option("disabled",!0),x=()=>E==null?void 0:E.option("disabled",!1);return xc(()=>{m&&P()}),wc(E.destroy),Pn({start:P,pause:R,resume:x},E)}const ro=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],Ic=["clone","animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...ro.map(e=>`on${e.replace(/^\S/,r=>r.toUpperCase())}`)],Oc=it({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:Ic,emits:["update:modelValue",...ro],setup(e,{slots:r,emit:n,expose:a,attrs:l}){const s=ro.reduce((p,C)=>{const N=`on${C.replace(/^\S/,v=>v.toUpperCase())}`;return p[N]=(...v)=>n(C,...v),p},{}),u=Tt(()=>{const p=al(e),{modelValue:C}=p,N=bi(p,["modelValue"]),v=Object.entries(N).reduce((O,[M,B])=>{const z=d(B);return z!==void 0&&(O[M]=z),O},{});return Pn(Pn({},s),Fu(Pn(Pn({},l),v)))}),h=Tt({get:()=>e.modelValue,set:p=>n("update:modelValue",p)}),c=he(),m=li(Cc(e.target||c,h,u));return a(m),()=>{var p;return Mt(e.tag||"div",{ref:c},(p=r==null?void 0:r.default)==null?void 0:p.call(r,m))}}});var Va,ei;function Ec(){if(ei)return Va;ei=1;var e=9007199254740991,r="[object Arguments]",n="[object Function]",a="[object GeneratorFunction]",l=typeof tt=="object"&&tt&&tt.Object===Object&&tt,s=typeof self=="object"&&self&&self.Object===Object&&self,u=l||s||Function("return this")();function h(y,k){for(var J=-1,G=k.length,F=y.length;++J<G;)y[F+J]=k[J];return y}var c=Object.prototype,m=c.hasOwnProperty,p=c.toString,C=u.Symbol,N=c.propertyIsEnumerable,v=C?C.isConcatSpreadable:void 0;function O(y,k,J,G,F){var X=-1,W=y.length;for(J||(J=M),F||(F=[]);++X<W;){var Q=y[X];J(Q)?h(F,Q):F[F.length]=Q}return F}function M(y){return K(y)||z(y)||!!(v&&y&&y[v])}function B(y){var k=y?y.length:0;return k?O(y):[]}function z(y){return P(y)&&m.call(y,"callee")&&(!N.call(y,"callee")||p.call(y)==r)}var K=Array.isArray;function V(y){return y!=null&&R(y.length)&&!E(y)}function P(y){return S(y)&&V(y)}function E(y){var k=x(y)?p.call(y):"";return k==n||k==a}function R(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=e}function x(y){var k=typeof y;return!!y&&(k=="object"||k=="function")}function S(y){return!!y&&typeof y=="object"}return Va=B,Va}var Tc=Ec();const Ac=cr(Tc),Dc={class:"tbody"},Nc={class:"td"},Pc={class:"p-3"},Mc=it({__name:"ExpWaveforms",setup(e){ri(E=>({b8546664:d(r).dividerColor,b893f9a8:d(r).tableHeaderColor}));const r=Ln(),n=Un(),{allQubits:a,layers:l,gates:s,expInfo:u,program:h}=Ur(n),c=Tt(()=>a.value.filter(E=>E.visible)),m=he(),p=he(),C=()=>{p.value=void 0},N=E=>{var y;const R=JSON.parse(JSON.stringify(s.value||{})),x=JSON.parse(JSON.stringify(l.value||[])),S=co();R[S]={gate_name:E.gate_name,entity:E.entity},x[p.value.layerIdx].push(S),s.value=R,l.value=x,p.value=void 0,(y=m.value)==null||y.close()},v=E=>{p.value=JSON.parse(JSON.stringify({...E||{},show:!0})),Rt(()=>{var R;(R=m.value)==null||R.open()})},O=li({}),M=(E,R)=>{O[R]=E},B=he(),z=E=>{var S,y,k;const R=(S=E.item)==null?void 0:S.id,x=(k=Array.from((y=E.to)==null?void 0:y.querySelectorAll(".cell-group")))==null?void 0:k.map(J=>J.id);ar(x,R),B.value=x[0]},K=(E,R)=>{var x;(x=O[`${E}-${R}`])==null||x.handleEdit()},V=E=>{var pe,ye,Te,Ae,Ue,le;B.value=void 0;const[R,x,S,y]=(ye=(pe=E.to)==null?void 0:pe.querySelector(".cell-group"))==null?void 0:ye.getAttribute("id").split("__**__"),[k,J,G,F]=(Ae=(Te=E.item)==null?void 0:Te.id)==null?void 0:Ae.split("__**__");let X=JSON.parse(JSON.stringify(s.value)),W=JSON.parse(JSON.stringify(l.value));if(X&&((Ue=X[F])==null||Ue.entity.some((ve,fe)=>{var oe;ve===J&&(X[F].entity[fe]=x,(oe=X[F].waves)==null||oe.forEach(Ie=>{var b;Ie.channel=(b=Ie.channel)==null?void 0:b.replace(J,x)}))})),y===F)return;y&&(X=zl(X,y),ar(W[+S],y)),ar(W[+G],F),W[+S]=[...W[+S]||[],F];const Q=JSON.parse(JSON.stringify(h.value));Q==null||Q.waveform_script.forEach(ve=>{var fe;ve.entity===J&&ve.layer===+G&&(ve.entity=x,ve.layer=+S,ve.channel=(fe=ve.channel)==null?void 0:fe.replace(J,x))}),l.value=W,s.value=X,h.value={space_parameter_script:(le=h.value)==null?void 0:le.space_parameter_script,waveform_script:Q.waveform_script},Rt(()=>{setTimeout(()=>{K(x,S)},200)})},P=Tt(()=>l.value.map(E=>E.map(R=>[R])));return(E,R)=>{const x=Vl,S=lo;return q(),ge("div",null,[I(S,{show:d(n).loading},{default:D(()=>{var y,k,J,G,F,X,W;return[((J=(k=(y=d(n))==null?void 0:y.expInfo)==null?void 0:k.exp)==null?void 0:J.exp_mode)==="normal"?(q(),ge(ht,{key:0},[d(u)?(q(),ge(ht,{key:1},[I(zs),I(Rs,null,{header:D(()=>[I(Ms,{layers:d(l)},null,8,["layers"])]),default:D(()=>[Y("table",{class:"table !border-t-0",size:"small",style:Zt({width:`${100+d(Nr)*d(l).length}px`})},[Y("colgroup",null,[R[0]||(R[0]=Y("col",{class:"w-[100px]"},null,-1)),(q(!0),ge(ht,null,Ut(d(l),(Q,pe)=>(q(),ge("col",{key:pe,class:ao(`w-[${d(Nr)}px]`)},null,2))),128))]),Y("tbody",Dc,[(q(!0),ge(ht,null,Ut(d(c),Q=>(q(),ge("tr",{class:"tr",key:Q.id},[Y("td",Nc,[Y("div",Pc,we(Q.value),1)]),(q(!0),ge(ht,null,Ut(d(P),(pe,ye)=>{var Te,Ae;return q(),ge("td",{key:ye,class:"td"},[I(d(Oc),{modelValue:d(P)[ye],"onUpdate:modelValue":Ue=>d(P)[ye]=Ue,onEnd:V,group:"gateGroup",handle:".gate-handle",disabled:!!((Ae=(Te=d(n))==null?void 0:Te.expInfo)!=null&&Ae.exp_id),onChange:z},{default:D(()=>[I(Ys,{qubit:Q,layer:d(Ac)(pe),"layer-idx":ye,info:d(p),"change-id":d(B),ref_for:!0,ref:Ue=>M(Ue,`${Q.value}-${ye}`),onOpenGateModal:v,onOpenEditModal:K},null,8,["qubit","layer","layer-idx","info","change-id"])]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])])}),128))]))),128))])],4)]),_:1})],64)):(q(),$e(x,{key:0,text:"",sharp:!1,size:"small",repeat:10})),(G=d(p))!=null&&G.show?(q(),$e(Ru,{key:2,ref_key:"gateModalRef",ref:m,onOk:N,info:d(p),onClose:C},null,8,["info"])):qe("",!0)],64)):((W=(X=(F=d(n))==null?void 0:F.expInfo)==null?void 0:X.exp)==null?void 0:W.exp_mode)==="batch_circuit"?(q(),$e(Gl,{key:1},{default:D(()=>R[1]||(R[1]=[Y("div",{class:"w-72 text-center"}," 当前实验为“量子电路批处理（batch_circuit）”类型，暂不支持Web GUI展示和编辑。 ",-1)])),_:1})):qe("",!0)]}),_:1},8,["show"])])}}}),Yc=Gr(Mc,[["__scopeId","data-v-bac71487"]]);export{Yc as default};
