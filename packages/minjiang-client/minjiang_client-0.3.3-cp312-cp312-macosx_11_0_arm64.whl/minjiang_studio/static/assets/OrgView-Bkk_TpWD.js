import{d as D,c as S,e as O,f as b,cH as Y,a as N,b as Me,z as K,o as H,h as t,B as A,w as o,t as _,j as e,N as te,x as j,n as y,O as X,a7 as Re,cI as Ue,r as p,C as G,I as oe,J,p as ne,k as ge,l as Q,cJ as ze,cE as Oe,bG as $e,a4 as Ee,cK as Ve,cL as ee,K as L,cx as ve,aK as se,cM as he,R as ae,aT as W,cN as Ie,cO as Le,cP as qe,cQ as le,Y as re,aL as be,a0 as ye,cR as we,cS as De,cT as _e,cU as Se,cV as Ae,cW as me,Z as Be,aM as Pe,cX as Te,cY as Ne,cZ as Ge,i as je}from"./index-KHiidVve.js";import{C as Ke}from"./ChevronBack-DgsOmJMQ.js";import{U as xe}from"./UserMultiple-CDID0maC.js";import{_ as ie,a as ce}from"./FormItem-BLErRK4c.js";import{_ as F}from"./Space-Ce3AIaud.js";import{_ as ue}from"./Alert-JPiDiWyN.js";import{A as pe}from"./Add-CUVNZISR.js";import{_ as de}from"./Popconfirm-Dt2TFIl_.js";import{a as Ce,b as ke}from"./Tabs-7QiGpSYZ.js";import{i as He}from"./json-editor-vue-CQYZvFYh.js";import"./Add-CUOykUgu.js";import"./debounce-MHG2Ws0B.js";const Fe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 12 12"},Ze=D({name:"Checkmark12Regular",render:function(w,n){return O(),S("svg",Fe,n[0]||(n[0]=[b("g",{fill:"none"},[b("path",{d:"M9.854 3.146a.5.5 0 0 1 0 .708l-4.5 4.5a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L5 7.293l4.146-4.147a.5.5 0 0 1 .708 0z",fill:"currentColor"})],-1)]))}}),Je={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Ye=D({name:"Devices",render:function(w,n){return O(),S("svg",Je,n[0]||(n[0]=[b("path",{d:"M10 30H4a2 2 0 0 1-2-2V16a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2zM4 16v12h6V16z",fill:"currentColor"},null,-1),b("path",{d:"M28 4H6a2 2 0 0 0-2 2v6h2V6h22v14H14v2h2v4h-2v2h9v-2h-5v-4h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z",fill:"currentColor"},null,-1)]))}}),Qe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},fe=D({name:"Settings",render:function(w,n){return O(),S("svg",Qe,n[0]||(n[0]=[b("path",{d:"M27 16.76V16v-.77l1.92-1.68A2 2 0 0 0 29.3 11l-2.36-4a2 2 0 0 0-1.73-1a2 2 0 0 0-.64.1l-2.43.82a11.35 11.35 0 0 0-1.31-.75l-.51-2.52a2 2 0 0 0-2-1.61h-4.68a2 2 0 0 0-2 1.61l-.51 2.52a11.48 11.48 0 0 0-1.32.75l-2.38-.86A2 2 0 0 0 6.79 6a2 2 0 0 0-1.73 1L2.7 11a2 2 0 0 0 .41 2.51L5 15.24v1.53l-1.89 1.68A2 2 0 0 0 2.7 21l2.36 4a2 2 0 0 0 1.73 1a2 2 0 0 0 .64-.1l2.43-.82a11.35 11.35 0 0 0 1.31.75l.51 2.52a2 2 0 0 0 2 1.61h4.72a2 2 0 0 0 2-1.61l.51-2.52a11.48 11.48 0 0 0 1.32-.75l2.42.82a2 2 0 0 0 .64.1a2 2 0 0 0 1.73-1l2.28-4a2 2 0 0 0-.41-2.51zM25.21 24l-3.43-1.16a8.86 8.86 0 0 1-2.71 1.57L18.36 28h-4.72l-.71-3.55a9.36 9.36 0 0 1-2.7-1.57L6.79 24l-2.36-4l2.72-2.4a8.9 8.9 0 0 1 0-3.13L4.43 12l2.36-4l3.43 1.16a8.86 8.86 0 0 1 2.71-1.57L13.64 4h4.72l.71 3.55a9.36 9.36 0 0 1 2.7 1.57L25.21 8l2.36 4l-2.72 2.4a8.9 8.9 0 0 1 0 3.13L27.57 20z",fill:"currentColor"},null,-1),b("path",{d:"M16 22a6 6 0 1 1 6-6a5.94 5.94 0 0 1-6 6zm0-10a3.91 3.91 0 0 0-4 4a3.91 3.91 0 0 0 4 4a3.91 3.91 0 0 0 4-4a3.91 3.91 0 0 0-4-4z",fill:"currentColor"},null,-1)]))}}),We={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Xe=D({name:"TwoFactorAuthentication",render:function(w,n){return O(),S("svg",We,n[0]||(n[0]=[b("path",{d:"M11 23.18l-2-2.001l-1.411 1.41L11 26l6-6l-1.41-1.41L11 23.18z",fill:"currentColor"},null,-1),b("path",{d:"M28 30h-4v-2h4V16h-4V8a4.005 4.005 0 0 0-4-4V2a6.007 6.007 0 0 1 6 6v6h2a2.002 2.002 0 0 1 2 2v12a2.002 2.002 0 0 1-2 2z",fill:"currentColor"},null,-1),b("path",{d:"M20 14h-2V8A6 6 0 0 0 6 8v6H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V16a2 2 0 0 0-2-2zM8 8a4 4 0 0 1 8 0v6H8zm12 20H4V16h16z",fill:"currentColor"},null,-1)]))}}),e0={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},t0=D({name:"UserSettings",render:function(w,n){return O(),S("svg",e0,n[0]||(n[0]=[b("path",{d:"M30 10V8h-2.101a4.968 4.968 0 0 0-.732-1.753l1.49-1.49l-1.414-1.414l-1.49 1.49A4.968 4.968 0 0 0 24 4.101V2h-2v2.101a4.968 4.968 0 0 0-1.753.732l-1.49-1.49l-1.414 1.414l1.49 1.49A4.968 4.968 0 0 0 18.101 8H16v2h2.101a4.968 4.968 0 0 0 .732 1.753l-1.49 1.49l1.414 1.414l1.49-1.49a4.968 4.968 0 0 0 1.753.732V16h2v-2.101a4.968 4.968 0 0 0 1.753-.732l1.49 1.49l1.414-1.414l-1.49-1.49A4.968 4.968 0 0 0 27.899 10zm-7 2a3 3 0 1 1 3-3a3.003 3.003 0 0 1-3 3z",fill:"currentColor"},null,-1),b("path",{d:"M16 30h-2v-5a3.003 3.003 0 0 0-3-3H7a3.003 3.003 0 0 0-3 3v5H2v-5a5.006 5.006 0 0 1 5-5h4a5.006 5.006 0 0 1 5 5z",fill:"currentColor"},null,-1),b("path",{d:"M9 10a3 3 0 1 1-3 3a3 3 0 0 1 3-3m0-2a5 5 0 1 0 5 5a5 5 0 0 0-5-5z",fill:"currentColor"},null,-1)]))}}),o0={class:"flex items-center justify-start gap-2"},n0={class:"flex flex-1 justify-center items-center gap-5"},s0={class:"text-2xl flex items-center justify-center gap-1"},a0={key:0,class:"flex items-center gap-1"},l0={class:"flex items-center gap-1"},r0={class:"flex items-center gap-1"},i0=D({__name:"OrgInfo",setup(q){const w=Y(),{t:n}=N(),g=Me(),s=K(),r=async()=>{const x=s.query.id;if(!x)return;const[f,v]=await Ue({org_id:+x});!f&&(v==null?void 0:v.status)===0&&w.$patch({info:v.data})},k=()=>{g.push({name:"orgList"})};return H(()=>{r()}),(x,f)=>{var E;const v=te,U=A,M=Re;return O(),S("div",o0,[t(U,{onClick:k,quaternary:""},{icon:o(()=>[t(v,{size:"26"},{default:o(()=>[t(e(Ke))]),_:1})]),default:o(()=>[b("span",null,_(e(n)("org.backOrgList")),1)]),_:1}),b("div",n0,[b("div",s0,[t(v,{component:e(X)},null,8,["component"]),y(" "+_((E=e(w).info)==null?void 0:E.organization_name),1)]),e(w).info?(O(),S("div",a0,[t(M,{bordered:!1,size:"small",type:"success"},{default:o(()=>[y(" ID "+_(+e(s).query.id),1)]),_:1}),t(M,{bordered:!1,type:"warning",size:"small"},{default:o(()=>{var $;return[b("div",l0,[t(v,{component:e(xe)},null,8,["component"]),y(" "+_(($=e(w).info)==null?void 0:$.member_count)+" "+_(e(n)("org.cmember")),1)])]}),_:1}),t(M,{bordered:!1,type:"info",size:"small"},{default:o(()=>{var $;return[b("div",r0,[t(v,{component:e(X)},null,8,["component"]),y(" "+_(($=e(w).info)==null?void 0:$.device_count)+" "+_(e(n)("org.cdevice")),1)])]}),_:1})])):j("",!0)])])}}}),c0={class:"flex justify-end"},u0=D({__name:"InsertMember",props:{type:{}},emits:["success"],setup(q,{expose:w,emit:n}){const g=Y(),s=p(),{t:r}=N(),k=K(),x=n,f=[{label:r("org.admin"),value:"ORG_ADMIN"},{label:r("org.member"),value:"ORG_MEMBER"}],v=p(!1),U=p(!1),M=()=>{U.value=!1,z.value={user_name:void 0,org_role:void 0}},E=()=>{U.value=!0},$=p({user_name:{required:!0,message:r("common.required")},org_role:{required:!0,message:r("common.required")}}),I=p(null),z=p({user_name:void 0,org_role:void 0}),l=()=>{var c;(c=I.value)==null||c.validate(async a=>{if(a)return;const[u,d]=await ze({...z.value,org_id:+k.query.id});!u&&(d==null?void 0:d.status)===0&&(x("success"),M())})},h=async()=>{var u;const[c,a]=await Oe();!c&&(a==null?void 0:a.status)===0&&(s.value=(u=a.data)==null?void 0:u.map(d=>({...d,label:d.user_name,value:d.user_id})))};return H(()=>{h()}),w({open:E,close:M}),(c,a)=>{const u=ce,d=ge,m=Q,C=ie,i=A,R=F,V=ne,T=oe;return O(),G(T,{show:e(U),"onUpdate:show":a[2]||(a[2]=B=>J(U)?U.value=B:null),"mask-closable":!1,"close-on-esc":!1},{default:o(()=>[t(V,{bordered:!1,"content-class":"!px-5",style:{width:"700px"}},{default:o(()=>[t(C,{ref_key:"formRef",ref:I,model:e(z),rules:e($),size:"small"},{default:o(()=>[t(u,{label:e(r)("org.orgName"),path:"name"},{default:o(()=>{var B;return[y(_((B=e(g).info)==null?void 0:B.organization_name),1)]}),_:1},8,["label"]),t(u,{label:e(r)("org.username"),path:"user_name"},{default:o(()=>[t(d,{value:e(z).user_name,"onUpdate:value":a[0]||(a[0]=B=>e(z).user_name=B)},null,8,["value"])]),_:1},8,["label"]),t(u,{label:e(r)("org.omtab.role"),path:"org_role"},{default:o(()=>[t(m,{value:e(z).org_role,"onUpdate:value":a[1]||(a[1]=B=>e(z).org_role=B),options:f},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),b("div",c0,[t(R,null,{default:o(()=>[t(i,{onClick:M,loading:e(v)},{default:o(()=>[y(_(e(r)("common.cancel")),1)]),_:1},8,["loading"]),t(i,{type:"primary",onClick:l,loading:e(v)},{default:o(()=>[y(_(e(r)("org.omtab.invite")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"])}}}),d0={class:"flex justify-end"},_0={class:"my-10 text-center"},m0={class:"flex justify-end"},p0=D({__name:"InsertUser",props:{type:{}},emits:["success"],setup(q,{expose:w,emit:n}){const g=Y(),{t:s}=N(),r=K(),k=n,x=[{label:s("org.admin"),value:"ORG_ADMIN"},{label:s("org.member"),value:"ORG_MEMBER"}],f=p(!1),v=p(!1),U=()=>{v.value=!1,I.value={user_name:void 0,org_role:void 0}},M=()=>{v.value=!0},E=p({user_name:{required:!0,message:s("common.required")},org_role:{required:!0,message:s("common.required")}}),$=p(null),I=p({user_name:void 0,org_role:void 0}),z=p(""),l=p(!1),h=()=>{l.value=!1,z.value=""},c=()=>{var a;(a=$.value)==null||a.validate(async u=>{var C;if(u)return;const[d,m]=await Ve({...I.value,org_id:+r.query.id});!d&&(m==null?void 0:m.status)===0&&(l.value=!0,z.value=(C=m.data)==null?void 0:C.token,k("success"),U())})};return $e(()=>{z.value=""}),w({open:M,close:U}),(a,u)=>{const d=ce,m=ge,C=Q,i=ie,R=F,V=ne,T=oe,B=ue;return O(),S(Ee,null,[t(T,{show:e(v),"onUpdate:show":u[2]||(u[2]=P=>J(v)?v.value=P:null),"mask-closable":!1,"close-on-esc":!1},{default:o(()=>[t(V,{bordered:!1,"content-class":"!px-5",style:{width:"700px"}},{default:o(()=>[t(i,{ref_key:"formRef",ref:$,model:e(I),rules:e(E),size:"small"},{default:o(()=>[t(d,{label:e(s)("org.orgName"),path:"name"},{default:o(()=>{var P;return[y(_((P=e(g).info)==null?void 0:P.organization_name),1)]}),_:1},8,["label"]),t(d,{label:e(s)("org.omtab.user"),path:"user_name"},{default:o(()=>[t(m,{value:e(I).user_name,"onUpdate:value":u[0]||(u[0]=P=>e(I).user_name=P)},null,8,["value"])]),_:1},8,["label"]),t(d,{label:e(s)("org.omtab.role"),path:"org_role"},{default:o(()=>[t(C,{value:e(I).org_role,"onUpdate:value":u[1]||(u[1]=P=>e(I).org_role=P),options:x},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),b("div",d0,[t(R,null,{default:o(()=>[t(e(A),{onClick:U,loading:e(f)},{default:o(()=>[y(_(e(s)("common.cancel")),1)]),_:1},8,["loading"]),t(e(A),{type:"primary",onClick:c,loading:e(f)},{default:o(()=>[y(_(e(s)("common.OK")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"]),t(T,{show:e(l),"onUpdate:show":u[3]||(u[3]=P=>J(l)?l.value=P:null),"mask-closable":!1,"close-on-esc":!1},{default:o(()=>[t(V,{bordered:!1,"content-class":"!px-5",style:{width:"500px"}},{default:o(()=>[t(B,{type:"info"},{default:o(()=>[y(_(e(s)("org.omtab.tokenTips")),1)]),_:1}),b("div",_0,_(e(z)),1),b("div",m0,[t(R,null,{default:o(()=>[t(e(A),{type:"primary",onClick:h,loading:e(f)},{default:o(()=>[y(_(e(s)("common.OK")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"])],64)}}}),f0="data:image/svg+xml,%3csvg%20viewBox='0%200%2042%2042'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='42.000000'%20height='42.000000'%20fill='none'%20clip-path='url(%23clipPath_0)'%20customFrame='url(%23clipPath_0)'%3e%3cdefs%3e%3cclipPath%20id='clipPath_0'%3e%3crect%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3cclipPath%20id='clipPath_1'%3e%3crect%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3c/defs%3e%3crect%20id='容器%2049'%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(51,49,64)'%20fill-opacity='0.5'%20/%3e%3cg%20id='Stroke%202/edit-write-alt'%20clip-path='url(%23clipPath_1)'%20customFrame='url(%23clipPath_1)'%3e%3crect%20id='Stroke%202/edit-write-alt'%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20fill='rgb(255,255,255)'%20fill-opacity='0'%20/%3e%3cpath%20id='Vector'%20d='M9.75%2032.25L32.25%2032.25'%20stroke='rgb(108,92,231)'%20stroke-width='2'%20/%3e%3cpath%20id='Vector'%20d='M24.125%2010.375C25.1605%209.3395%2026.8395%209.3395%2027.875%2010.375C28.9105%2011.4106%2028.9105%2013.0895%2027.875%2014.125L15.375%2026.625L10.375%2027.875L11.625%2022.875L24.125%2010.375Z'%20fill-rule='evenodd'%20stroke='rgb(108,92,231)'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2'%20/%3e%3c/g%3e%3c/svg%3e",g0="data:image/svg+xml,%3csvg%20viewBox='0%200%2042%2042'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='42.000000'%20height='42.000000'%20fill='none'%20clip-path='url(%23clipPath_2)'%20customFrame='url(%23clipPath_2)'%3e%3cdefs%3e%3cclipPath%20id='clipPath_2'%3e%3crect%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3cclipPath%20id='clipPath_3'%3e%3crect%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3c/defs%3e%3crect%20id='容器%2048'%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(255,0,0)'%20fill-opacity='0.25'%20/%3e%3cg%20id='Icon%20/%20delete%20user%2024%20Outline'%20clip-path='url(%23clipPath_3)'%20customFrame='url(%23clipPath_3)'%3e%3crect%20id='Icon%20/%20delete%20user%2024%20Outline'%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20/%3e%3cpath%20id='Vector'%20d='M22.625%2021.275C23.292%2020.6977%2023.8269%2019.9836%2024.1936%2019.1813C24.5602%2018.379%2024.75%2017.5071%2024.75%2016.625C24.75%2014.9674%2024.0915%2013.3777%2022.9194%2012.2056C21.7473%2011.0335%2020.1576%2010.375%2018.5%2010.375C16.8424%2010.375%2015.2527%2011.0335%2014.0806%2012.2056C12.9085%2013.3777%2012.25%2014.9674%2012.25%2016.625C12.25%2017.5071%2012.4398%2018.379%2012.8064%2019.1813C13.1731%2019.9836%2013.708%2020.6977%2014.375%2021.275C12.6252%2022.0674%2011.1406%2023.3469%2010.0987%2024.9607C9.05687%2026.5745%208.50184%2028.4541%208.5%2030.375C8.5%2030.7065%208.6317%2031.0245%208.86612%2031.2589C9.10054%2031.4933%209.41848%2031.625%209.75%2031.625C10.0815%2031.625%2010.3995%2031.4933%2010.6339%2031.2589C10.8683%2031.0245%2011%2030.7065%2011%2030.375C11%2028.3859%2011.7902%2026.4782%2013.1967%2025.0717C14.6032%2023.6652%2016.5109%2022.875%2018.5%2022.875C20.4891%2022.875%2022.3968%2023.6652%2023.8033%2025.0717C25.2098%2026.4782%2026%2028.3859%2026%2030.375C26%2030.7065%2026.1317%2031.0245%2026.3661%2031.2589C26.6005%2031.4933%2026.9185%2031.625%2027.25%2031.625C27.5815%2031.625%2027.8995%2031.4933%2028.1339%2031.2589C28.3683%2031.0245%2028.5%2030.7065%2028.5%2030.375C28.4982%2028.4541%2027.9431%2026.5745%2026.9013%2024.9607C25.8594%2023.3469%2024.3748%2022.0674%2022.625%2021.275ZM18.5%2020.375C17.7583%2020.375%2017.0333%2020.1551%2016.4166%2019.743C15.7999%2019.331%2015.3193%2018.7453%2015.0355%2018.0601C14.7516%2017.3748%2014.6774%2016.6208%2014.8221%2015.8934C14.9667%2015.166%2015.3239%2014.4978%2015.8483%2013.9734C16.3728%2013.4489%2017.041%2013.0918%2017.7684%2012.9471C18.4958%2012.8024%2019.2498%2012.8766%2019.9351%2013.1605C20.6203%2013.4443%2021.206%2013.9249%2021.618%2014.5416C22.0301%2015.1583%2022.25%2015.8833%2022.25%2016.625C22.25%2017.6196%2021.8549%2018.5734%2021.1516%2019.2767C20.4484%2019.9799%2019.4946%2020.375%2018.5%2020.375ZM32.1375%2021L33.1375%2020.0125C33.254%2019.896%2033.3465%2019.7576%2033.4096%2019.6053C33.4726%2019.453%2033.5051%2019.2898%2033.5051%2019.125C33.5051%2018.9602%2033.4726%2018.797%2033.4096%2018.6447C33.3465%2018.4924%2033.254%2018.354%2033.1375%2018.2375C33.0209%2018.121%2032.8826%2018.0285%2032.7303%2017.9654C32.578%2017.9024%2032.4148%2017.8699%2032.25%2017.8699C32.0852%2017.8699%2031.922%2017.9024%2031.7697%2017.9654C31.6174%2018.0285%2031.479%2018.121%2031.3625%2018.2375L30.375%2019.2375L29.3875%2018.2375C29.2709%2018.121%2029.1326%2018.0285%2028.9803%2017.9654C28.828%2017.9024%2028.6648%2017.8699%2028.5%2017.8699C28.1671%2017.8699%2027.8479%2018.0021%2027.6125%2018.2375C27.4959%2018.354%2027.4035%2018.4924%2027.3404%2018.6447C27.2773%2018.797%2027.2449%2018.9602%2027.2449%2019.125C27.2449%2019.4579%2027.3771%2019.7771%2027.6125%2020.0125L28.6125%2021L27.6125%2021.9875C27.4953%2022.1037%2027.4023%2022.242%2027.3389%2022.3943C27.2754%2022.5466%2027.2427%2022.71%2027.2427%2022.875C27.2427%2023.04%2027.2754%2023.2034%2027.3389%2023.3557C27.4023%2023.508%2027.4953%2023.6463%2027.6125%2023.7625C27.7287%2023.8797%2027.867%2023.9727%2028.0193%2024.0361C28.1716%2024.0996%2028.335%2024.1323%2028.5%2024.1323C28.665%2024.1323%2028.8284%2024.0996%2028.9807%2024.0361C29.133%2023.9727%2029.2713%2023.8797%2029.3875%2023.7625L30.375%2022.7625L31.3625%2023.7625C31.4787%2023.8797%2031.6169%2023.9727%2031.7693%2024.0361C31.9216%2024.0996%2032.085%2024.1323%2032.25%2024.1323C32.415%2024.1323%2032.5784%2024.0996%2032.7307%2024.0361C32.883%2023.9727%2033.0213%2023.8797%2033.1375%2023.7625C33.2547%2023.6463%2033.3476%2023.508%2033.4111%2023.3557C33.4746%2023.2034%2033.5072%2023.04%2033.5072%2022.875C33.5072%2022.71%2033.4746%2022.5466%2033.4111%2022.3943C33.3476%2022.242%2033.2547%2022.1037%2033.1375%2021.9875L32.1375%2021Z'%20fill='rgb(214,48,49)'%20fill-rule='nonzero'%20/%3e%3c/g%3e%3c/svg%3e",v0=D({__name:"OMember",setup(q){const w=Y(),n=p(!1),g=p(!1),{t:s}=N(),r=K(),k=ee("insertMemberRef"),x=ee("insertUserRef"),f=p(!1),v=p(!1),U=()=>{f.value=!0,W(()=>{var i;(i=k.value)==null||i.open()})},M=()=>{v.value=!0,W(()=>{var i;(i=x.value)==null||i.open()})},E=()=>{C()},$=()=>{C()},I=p(),z=async i=>{const[R,V]=await Ie({user_id:i,org_id:+r.query.id});!R&&(V==null?void 0:V.status)===0&&C()},l=p(),h=[{label:s("org.admin"),value:"ORG_ADMIN"},{label:s("org.member"),value:"ORG_MEMBER"}],c=i=>{const R=Le[i.value].color;return L("div",{class:"px-1 rounded-full border text-xs inline-block w-[80px] inline-flex items-center justify-center",style:{color:R,borderColor:R}},i.label)},a=(i,R)=>{l.value={userId:i,value:R}},u=i=>{l.value={...l.value,value:i}},d=async()=>{var V,T;const[i,R]=await qe({org_id:+r.query.id,user_id:(V=l.value)==null?void 0:V.userId,org_role:(T=l.value)==null?void 0:T.value});!i&&(R==null?void 0:R.status)===0&&(l.value={userId:void 0,value:void 0},C())},m=[{title:"ID",key:"user_id",width:"20%"},{title:s("org.omtab.name"),key:"user_name",width:"25%"},{title:s("org.omtab.role"),key:"org_role",width:"30%",render(i){var R;return((R=l.value)==null?void 0:R.userId)===i.user_id?L("div",{class:"flex items-center gap-2"},[L(Q,{options:h,renderLabel:c,defaultValue:l.value.value,onUpdateValue:u,style:{width:"200px"}}),L(A,{size:"small",onClick:()=>l.value={userId:void 0,value:void 0}},{default:()=>"x"}),L(A,{size:"small",onClick:d},{icon:()=>L(Ze)})]):L(ve,{role:i.org_role,classes:"w-[80px] inline-flex items-center justify-center"})}},{title:s("org.omtab.options"),key:"options",width:"25%",render(i){return L("div",{class:"flex items-center gap-2"},[L("img",{src:f0,class:"w-[30px] cursor-pointer",onClick:()=>a(i.user_id,i.org_role)}),L(de,{onPositiveClick:()=>z(i.user_id)},{default:()=>s("groupDetail.parameterManager.removeConfirm"),trigger:()=>L("img",{src:g0,class:"w-[30px] cursor-pointer"})})])}}],C=async()=>{if(n.value)return;n.value=!0;const i=+r.query.id;if(!i){n.value=!1;return}const[R,V]=await le({organization_id:i});n.value=!1,!R&&(V==null?void 0:V.status)===0&&(I.value=V.data)};return se(()=>+r.query.id,i=>{i&&C()}),H(()=>{const i=he();i!=null&&i.is_sys_admin&&(g.value=!0),C()}),(i,R)=>{const V=F,T=ae;return O(),S("div",null,[t(V,null,{default:o(()=>[t(e(A),{type:"primary",onClick:U},{icon:o(()=>[t(e(pe))]),default:o(()=>[y(" "+_(e(s)("org.omtab.insertMember")),1)]),_:1}),e(w).manager?(O(),G(e(A),{key:0,type:"primary",onClick:M},{icon:o(()=>[t(e(pe))]),default:o(()=>[y(" "+_(e(s)("org.omtab.insertUser")),1)]),_:1})):j("",!0)]),_:1}),e(f)?(O(),G(u0,{key:0,ref_key:"insertMemberRef",ref:k,type:"insert",onSuccess:E},null,512)):j("",!0),e(v)?(O(),G(p0,{key:1,ref_key:"insertUserRef",ref:x,type:"insert",onSuccess:$},null,512)):j("",!0),t(T,{lading:e(n),class:"mt-5",columns:m,data:e(I)},null,8,["lading","data"])])}}}),h0={class:"flex items-center my-4"},b0={class:"flex items-center gap-2 mr-4"},y0=D({__name:"AuthByMember",setup(q){const w=re(),{t:n}=N(),g=K(),s=p(!1),r=p(),k=l=>{r.value=l},x=async(l,h)=>{if(s.value)return;s.value=!0;const[c,a]=await we({org_id:+g.query.id,user_id:r.value,device_group_id:h,permission:l?"EDIT":"READ"});!c&&(a==null?void 0:a.status)===0?E():s.value=!1},f=[{title:n("org.oatab.device"),key:"device",render(l){return L("div",{class:""},[L("div",{class:"text-lg"},l.device_group_name),L("div",{class:""},`${n("org.deviceGroup")}: ${l.device_group_id}`)])}},{title:n("org.oatab.auth"),key:"auth",render(l){return L(be,{railStyle:({checked:h})=>{const c={};return h?c.background="#638EE2":c.background="#7964E3",c},value:l.permission==="EDIT",onUpdateValue:h=>x(h,l.device_group_id)},{checked:()=>"EDIT",unchecked:()=>"READ"})}}],v=p(),U=async()=>{const[l,h]=await le({organization_id:+g.query.id});!l&&(h==null?void 0:h.status)===0&&h.data&&(v.value=h.data.map(c=>({...c,label:c.user_name,value:c.user_id})))},M=p(),E=async()=>{s.value=!0;const[l,h]=await De({organization_id:+g.query.id,user_id:r.value});s.value=!1,!l&&h&&h.status===0&&(M.value=h.data.device_group_list)},$=async()=>{if(s.value)return;s.value=!0;const[l,h]=await _e({org_id:+g.query.id,user_id:r.value,permission:"EDIT"});!l&&(h==null?void 0:h.status)===0?E():s.value=!1},I=async()=>{if(s.value)return;s.value=!0;const[l,h]=await _e({org_id:+g.query.id,user_id:r.value,permission:"READ"});!l&&(h==null?void 0:h.status)===0?E():s.value=!1},z=()=>{};return H(()=>{U()}),se(r,l=>{l&&E()}),(l,h)=>{const c=ue,a=Q,u=A,d=de,m=F,C=ae;return O(),S("div",null,[t(c,{type:"info",class:"my-4"},{default:o(()=>[y(_(e(n)("org.oatab.tips")),1)]),_:1}),b("div",h0,[b("div",b0,[b("div",{style:ye({color:e(w).primaryColor})},_(e(n)("org.oatab.selectUser"))+": ",5),t(a,{style:{width:"200px"},onUpdateValue:k,options:e(v)},null,8,["options"])]),t(m,null,{default:o(()=>[t(d,{onPositiveClick:$,onNegativeClick:z,disabled:!e(r)},{trigger:o(()=>[t(u,{class:"!bg-[#638EE2] text-white",disabled:!e(r)},{default:o(()=>[y(_(e(n)("org.oatab.allDeviceEdit")),1)]),_:1},8,["disabled"])]),default:o(()=>[y(" "+_(e(n)("org.oatab.confirmDeviceEdit")),1)]),_:1},8,["disabled"]),t(d,{onPositiveClick:I,onNegativeClick:z,disabled:!e(r)},{trigger:o(()=>[t(u,{class:"!bg-[#7964E3] text-white",disabled:!e(r)},{default:o(()=>[y(_(e(n)("org.oatab.allDeviceRead")),1)]),_:1},8,["disabled"])]),default:o(()=>[y(" "+_(e(n)("org.oatab.confirmDeviceRead")),1)]),_:1},8,["disabled"])]),_:1})]),t(C,{loading:e(s),columns:f,data:e(M)},null,8,["loading","data"])])}}}),w0={class:"flex items-center my-2"},x0={class:"flex items-center gap-2 mr-4"},C0=D({__name:"AuthByDevice",setup(q){const w=re(),{t:n}=N(),g=p(!1),s=K(),r=p(),k=c=>{r.value=c},x=p(),f=async(c,a)=>{if(g.value)return;g.value=!0;const[u,d]=await we({org_id:+s.query.id,user_id:a,device_group_id:r.value,permission:c?"EDIT":"READ"});!u&&(d==null?void 0:d.status)===0?$():g.value=!1},v=[{title:n("org.oatab.member"),key:"user_name"},{title:n("org.oatab.role"),key:"role",render(c){return L(ve,{role:c.org_role,classes:"w-[80px] inline-flex items-center justify-center"})}},{title:n("org.oatab.auth"),key:"auth",render(c){return L(be,{railStyle:({checked:a})=>{const u={};return a?u.background="#638EE2":u.background="#7964E3",u},value:c.permission==="EDIT",onUpdateValue:a=>f(a,c.user_id)},{checked:()=>"EDIT",unchecked:()=>"READ"})}}],U=p(),M=async()=>{const[c,a]=await Se({organization_id:+s.query.id});!c&&(a==null?void 0:a.status)===0&&a.data&&(U.value=a.data.map(u=>({...u,label:u.device_group_name,value:u.device_group_id})))},E=p(),$=async()=>{g.value=!0;const[c,a]=await Ae({organization_id:+s.query.id,device_group_id:r.value});g.value=!1,!c&&a&&a.status===0&&(E.value=a.data.user_list.map(u=>{var d,m;return{...u,org_role:(m=(d=x.value)==null?void 0:d.find(C=>C.user_id===u.user_id))==null?void 0:m.org_role}}))},I=async()=>{if(g.value)return;g.value=!0;const[c,a]=await me({org_id:+s.query.id,device_group_id:r.value,permission:"EDIT"});!c&&(a==null?void 0:a.status)===0?$():g.value=!1},z=async()=>{if(g.value)return;g.value=!0;const[c,a]=await me({org_id:+s.query.id,device_group_id:r.value,permission:"READ"});!c&&(a==null?void 0:a.status)===0?$():g.value=!1},l=()=>{},h=async()=>{const[c,a]=await le({organization_id:+s.query.id});!c&&(a==null?void 0:a.status)===0&&(x.value=a.data)};return H(()=>{M(),h()}),se(r,c=>{c&&$()}),(c,a)=>{const u=Q,d=A,m=de,C=F,i=ae;return O(),S("div",null,[b("div",w0,[b("div",x0,[b("div",{style:ye({color:e(w).primaryColor})},_(e(n)("org.oatab.selectDevice"))+": ",5),t(u,{style:{width:"200px"},onUpdateValue:k,options:e(U)},null,8,["options"])]),t(C,null,{default:o(()=>[t(m,{onPositiveClick:I,onNegativeClick:l,disabled:!e(r)},{trigger:o(()=>[t(d,{class:"!bg-[#638EE2] text-white",disabled:!e(r)},{default:o(()=>[y(_(e(n)("org.oatab.allUserEdit")),1)]),_:1},8,["disabled"])]),default:o(()=>[y(" "+_(e(n)("org.oatab.confirmMemberRead")),1)]),_:1},8,["disabled"]),t(m,{onPositiveClick:z,onNegativeClick:l,disabled:!e(r)},{trigger:o(()=>[t(d,{class:"!bg-[#7964E3] text-white",disabled:!e(r)},{default:o(()=>[y(_(e(n)("org.oatab.allUserRead")),1)]),_:1},8,["disabled"])]),default:o(()=>[y(" "+_(e(n)("org.oatab.confirmMemberEdit")),1)]),_:1},8,["disabled"])]),_:1})]),t(i,{loading:e(g),columns:v,data:e(E)},null,8,["loading","data"])])}}}),k0={class:"flex items-center gap-1"},M0={class:"flex items-center gap-1"},R0=D({__name:"OAuth",setup(q){const{t:w}=N();return(n,g)=>{const s=te,r=ke,k=Ce;return O(),S("div",null,[t(k,{type:"card","pane-class":"!pl-0"},{default:o(()=>[t(r,{name:"byuser"},{tab:o(()=>[b("div",k0,[t(s,{component:e(t0)},null,8,["component"]),y(" "+_(e(w)("org.oatab.tab1")),1)])]),default:o(()=>[t(y0)]),_:1}),t(r,{name:"bydevice"},{tab:o(()=>[b("div",M0,[t(s,{component:e(Ye)},null,8,["component"]),y(" "+_(e(w)("org.oatab.tab2")),1)])]),default:o(()=>[t(C0)]),_:1})]),_:1})])}}}),U0={class:"w-full"},z0={class:"flex justify-end"},O0=D({__name:"OSSModal",props:{isGlobal:{type:Boolean}},emits:["close"],setup(q,{expose:w,emit:n}){const g=q,s=n,r=re(),k=Be(),x=Y(),{t:f}=N(),v=K(),U=p(!1),M=p(!1),E=()=>{M.value=!1,W(()=>{setTimeout(()=>{l.value={if_global:void 0,disabled:void 0,organization_id:void 0,auth_text:void 0}},200)}),s("close")},$=()=>{M.value=!0},I=p({user_id:{required:!0,message:f("common.required")},org_role:{required:!0,message:f("common.required")}}),z=p(null),l=p({if_global:void 0,disabled:void 0,organization_id:void 0,auth_text:void 0}),h=()=>{var d;(d=z.value)==null||d.validate(async m=>{if(m)return;const[C,i]=await Te({...l.value,if_global:g.isGlobal,organization_id:+v.query.id});!C&&(i==null?void 0:i.status)===0&&(k.success(f("org.ootab.successfully")),E())})},c=d=>{d||E()},a=async()=>{const[d,m]=await Ne({organization_id:+v.query.id});if(!d&&(m==null?void 0:m.status)===0){const C=m.data.auth_text;l.value={...l.value,auth_text:C}}},u=async()=>{const[d,m]=await Ge();if(!d&&(m==null?void 0:m.status)===0){const C=m.data.auth_text;l.value={...l.value,if_global:!0,auth_text:C}}};return H(()=>{g.isGlobal?u():a()}),w({open:$,close:E}),(d,m)=>{const C=ce,i=ue,R=ie,V=A,T=F,B=ne,P=oe;return O(),G(P,{show:e(M),"onUpdate:show":m[1]||(m[1]=Z=>J(M)?M.value=Z:null),"close-on-esc":!1,onUpdateShow:c},{default:o(()=>[t(B,{bordered:!1,"content-class":"!px-5",style:{width:"700px"}},{default:o(()=>[t(R,{ref_key:"formRef",ref:z,model:e(l),rules:e(I),size:"small"},{default:o(()=>[e(l).if_global?j("",!0):(O(),G(C,{key:0,label:e(f)("org.orgName"),path:"name"},{default:o(()=>{var Z;return[y(_((Z=e(x).info)==null?void 0:Z.organization_name),1)]}),_:1},8,["label"])),t(C,{label:e(f)(`org.ootab.${d.isGlobal?"globalCfg":"orgCfg"}`),path:"auth_text"},{default:o(()=>[b("div",U0,[t(i,{type:"info",title:e(f)("org.ootab.osstips"),class:"whitespace-pre-line w-full"},{default:o(()=>m[2]||(m[2]=[y(_(`{
                    "host": "oss.example.com",
                    "bucket": "minjiang",
                    "access_key": "AK",
                    "secret_key": "SK",
                    "secure": true,
                    "region": "cn-shanghai"
                }`))])),_:1},8,["title"]),t(e(He),{class:Pe(["!w-full mt-5",[e(r).baseColor==="#000"?"jse-theme-dark":""]]),style:{height:"300px"},modelValue:e(l).auth_text,"onUpdate:modelValue":m[0]||(m[0]=Z=>e(l).auth_text=Z),mode:"text"},null,8,["class","modelValue"])])]),_:1},8,["label"])]),_:1},8,["model","rules"]),b("div",z0,[t(T,null,{default:o(()=>[t(V,{type:"primary",onClick:h,loading:e(U)},{default:o(()=>[y(_(e(f)("common.OK")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"])}}}),$0=D({__name:"OOrg",setup(q){const w=ee("ossRef"),n=p(!1),{t:g}=N(),s=p(!1),r=p(!1),k=(x=!1)=>{s.value=!0,r.value=x,W(()=>{setTimeout(()=>{var f;(f=w.value)==null||f.open()},100)})};return H(()=>{const x=he();x!=null&&x.is_sys_admin&&(n.value=!0)}),(x,f)=>{const v=A,U=F;return O(),S("div",null,[t(U,null,{default:o(()=>[t(v,{type:"primary",onClick:f[0]||(f[0]=()=>k())},{icon:o(()=>[t(e(fe))]),default:o(()=>[y(" "+_(e(g)("org.ootab.setOss")),1)]),_:1}),e(n)?(O(),G(v,{key:0,type:"primary",onClick:f[1]||(f[1]=()=>k(!0))},{icon:o(()=>[t(e(fe))]),default:o(()=>[y(" "+_(e(g)("org.ootab.setGlobalOss")),1)]),_:1})):j("",!0)]),_:1}),e(s)?(O(),G(O0,{key:0,ref_key:"ossRef",ref:w,"is-global":e(r),onClose:f[2]||(f[2]=M=>s.value=!1)},null,8,["is-global"])):j("",!0)])}}}),E0={class:"flex items-center gap-1"},V0={class:"flex items-center gap-1"},I0={class:"flex items-center gap-1"},H0=D({__name:"OrgView",setup(q){const{t:w}=N(),n=p("member");return(g,s)=>{const r=je,k=te,x=ke,f=Ce;return O(),S("div",null,[t(i0),t(r),t(f,{type:"line",value:e(n),"onUpdate:value":s[0]||(s[0]=v=>J(n)?n.value=v:null),placement:"left","pane-class":"!pl-5"},{default:o(()=>[t(x,{name:"member"},{tab:o(()=>[b("div",E0,[t(k,{component:e(xe)},null,8,["component"]),y(" "+_(e(w)("org.omember")),1)])]),default:o(()=>[t(v0)]),_:1}),t(x,{name:"auth"},{tab:o(()=>[b("div",V0,[t(k,{component:e(Xe)},null,8,["component"]),y(" "+_(e(w)("org.oauth")),1)])]),default:o(()=>[t(R0)]),_:1}),t(x,{name:"organization"},{tab:o(()=>[b("div",I0,[t(k,{component:e(X)},null,8,["component"]),y(" "+_(e(w)("org.oorganization")),1)])]),default:o(()=>[t($0)]),_:1})]),_:1},8,["value"])])}}});export{H0 as default};
