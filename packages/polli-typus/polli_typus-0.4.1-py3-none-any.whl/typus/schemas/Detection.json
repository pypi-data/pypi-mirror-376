{
  "$defs": {
    "BBoxXYWHNorm": {
      "description": "Canonical TL-normalized bbox: [x, y, w, h] with invariants.",
      "properties": {
        "x": {
          "description": "Left coordinate (0-1, normalized)",
          "maximum": 1.0,
          "minimum": 0.0,
          "title": "X",
          "type": "number"
        },
        "y": {
          "description": "Top coordinate (0-1, normalized)",
          "maximum": 1.0,
          "minimum": 0.0,
          "title": "Y",
          "type": "number"
        },
        "w": {
          "description": "Width (0-1, normalized)",
          "exclusiveMinimum": 0.0,
          "maximum": 1.0,
          "title": "W",
          "type": "number"
        },
        "h": {
          "description": "Height (0-1, normalized)",
          "exclusiveMinimum": 0.0,
          "maximum": 1.0,
          "title": "H",
          "type": "number"
        }
      },
      "required": [
        "x",
        "y",
        "w",
        "h"
      ],
      "title": "BBoxXYWHNorm",
      "type": "object"
    }
  },
  "description": "Single detection within a track.\n\nRepresents one observation of an object at a specific frame,\nincluding its bounding box, confidence score, and optional\ntaxonomic identification.",
  "example": {
    "bbox_norm": {
      "h": 0.6,
      "w": 0.5,
      "x": 0.1,
      "y": 0.2
    },
    "common_name": "Western honey bee",
    "confidence": 0.95,
    "frame_number": 100,
    "scientific_name": "Apis mellifera",
    "taxon_id": 47219
  },
  "properties": {
    "frame_number": {
      "description": "Frame number in the video",
      "minimum": 0,
      "title": "Frame Number",
      "type": "integer"
    },
    "bbox_norm": {
      "anyOf": [
        {
          "$ref": "#/$defs/BBoxXYWHNorm"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "Canonical bounding box [x, y, w, h] - top-left origin, normalized [0,1]"
    },
    "bbox": {
      "anyOf": [
        {
          "items": {
            "type": "number"
          },
          "maxItems": 4,
          "minItems": 4,
          "type": "array"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "Legacy pixel bbox [x, y, width, height] - DEPRECATED, use bbox_norm",
      "title": "Bbox"
    },
    "confidence": {
      "description": "Detection confidence score",
      "maximum": 1.0,
      "minimum": 0.0,
      "title": "Confidence",
      "type": "number"
    },
    "taxon_id": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "Taxonomic ID from taxonomy service",
      "title": "Taxon Id"
    },
    "scientific_name": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "Scientific name of detected organism",
      "title": "Scientific Name"
    },
    "common_name": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "Common name of detected organism",
      "title": "Common Name"
    },
    "smoothed_bbox": {
      "anyOf": [
        {
          "items": {
            "type": "number"
          },
          "maxItems": 4,
          "minItems": 4,
          "type": "array"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "Smoothed bounding box after post-processing",
      "title": "Smoothed Bbox"
    },
    "smoothed_bbox_norm": {
      "anyOf": [
        {
          "$ref": "#/$defs/BBoxXYWHNorm"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "Smoothed canonical bbox after post-processing"
    },
    "velocity": {
      "anyOf": [
        {
          "items": {
            "type": "number"
          },
          "maxItems": 2,
          "minItems": 2,
          "type": "array"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "Velocity [vx, vy] in pixels/frame",
      "title": "Velocity"
    }
  },
  "required": [
    "frame_number",
    "confidence"
  ],
  "title": "Detection",
  "type": "object"
}
