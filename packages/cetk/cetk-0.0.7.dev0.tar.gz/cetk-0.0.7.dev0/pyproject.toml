[build-system]
requires = ["setuptools >= 77.0.3", "setuptools-scm >= 8"]
build-backend = "setuptools.build_meta"

[project]
name = "cetk"
authors = [
  { name = "Christian Asker" },
  { name = "Mattias Jakobsson" },
  { name = "David Segersson" },
  { name = "Eef van Dongen" },
]
maintainers = [
  { name = "FO Luft", email = "foluftadmin@smhi.se" },
]
description = "CLAIRs Emission ToolKit cetk"
readme = "README.md"
requires-python = ">=3.9"
license = "Apache-2.0"
license-files = ["LICENSE"]
classifiers = [
  "Programming Language :: Python :: 3",
  "Topic :: Scientific/Engineering :: Atmospheric Science",
]
dependencies = [       # Release date  Comment
  "django >=4.2,<6",   # 2023-04-03    current LTS
  "fiona >=1.8.18",    # 2020-11-17    first version with cp39 wheel
  "geopandas >=0.12",  # 2022-10-24    first version with shapely 2 support
  "netCDF4 >=1.5.4",   # 2020-07-23    first version with cp39 wheel
  "numpy >=1.20.3",    # 2021-05-10    required by pandas 2.0.0
  "openpyxl >=3.0.7",  # 2021-03-09    required by pandas 2.0.0
  "pandas >=2.0",      # 2023-04-03    cetk import test fails with earlier versions
  "pyogrio >=0.4.2",   # 2022-10-06    cetk export test fails with earlier versions
  "rastafari2 >=0.4",
  "rasterio >=1.3",    # 2022-07-06    rasterio.CRS is missing in earlier versions
  "shapely >=2.0",     # 2022-12-12    cetk calc --rasterize fails with earlier versions
]
dynamic = ["version"]

[project.scripts]
cetk = "cetk.tools.cetk_command:main"
cetkmanage = "cetk.tools.manage:main"

[tool.coverage.run]
source = ["cetk"]
branch = true
omit = [
]

[tool.mypy]
ignore_missing_imports = true

[tool.pytest.ini_options]
pythonpath = "tests"
DJANGO_SETTINGS_MODULE = "cetk.settings"
filterwarnings = [
    "error",
    "ignore:numpy\\.ndarray size changed:RuntimeWarning",
    "ignore:CheckConstraint\\.check is deprecated:DeprecationWarning",
    "ignore:coord_dim setter is deprecated:DeprecationWarning",
]

[tool.ruff.lint]
extend-select = ["I", "RUF100"]

[tool.setuptools.dynamic]
version = { attr = "cetk.__version__" }
