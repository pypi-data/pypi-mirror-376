/*! For license information please see 54654.747ad34bb52ca6e1.js.LICENSE.txt */
(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["54654"],{5778:function(e,t,n){"use strict";var o=n(40333),r=(n(39710),n(26847),n(44438),n(81738),n(94814),n(6989),n(93190),n(1455),n(64455),n(56389),n(27530),n(73742)),a=n(59048),i=n(7616),s=n(82040),c=n.n(s),l=n(39884),h=(n(41465),n(34845),n(73249),n(36330),n(38221),n(75863),n(86190));let d;const u=new(n(28773).L)(1e3),p={reType:(0,o.Z)(/((\[!(caution|important|note|tip|warning)\])(?:\s|\\n)?)/i,{input:1,type:3}),typeToHaAlert:{caution:"error",important:"info",note:"info",tip:"success",warning:"warning"}};class f extends a.fl{disconnectedCallback(){if(super.disconnectedCallback(),this.cache){const e=this._computeCacheKey();u.set(e,this.innerHTML)}}createRenderRoot(){return this}update(e){super.update(e),void 0!==this.content&&this._render()}willUpdate(e){if(!this.innerHTML&&this.cache){const e=this._computeCacheKey();u.has(e)&&(this.innerHTML=u.get(e),this._resize())}}_computeCacheKey(){return c()({content:this.content,allowSvg:this.allowSvg,allowDataUrl:this.allowDataUrl,breaks:this.breaks})}async _render(){this.innerHTML=await(async(e,t,o)=>(d||(d=(0,h.Ud)(new Worker(new URL(n.p+n.u("45845"),n.b)))),d.renderMarkdown(e,t,o)))(String(this.content),{breaks:this.breaks,gfm:!0},{allowSvg:this.allowSvg,allowDataUrl:this.allowDataUrl}),this._resize();const e=document.createTreeWalker(this,NodeFilter.SHOW_ELEMENT,null);for(;e.nextNode();){const o=e.currentNode;if(o instanceof HTMLAnchorElement&&o.host!==document.location.host)o.target="_blank",o.rel="noreferrer noopener";else if(o instanceof HTMLImageElement)this.lazyImages&&(o.loading="lazy"),o.addEventListener("load",this._resize);else if(o instanceof HTMLQuoteElement){var t;const n=(null===(t=o.firstElementChild)||void 0===t||null===(t=t.firstChild)||void 0===t?void 0:t.textContent)&&p.reType.exec(o.firstElementChild.firstChild.textContent);if(n){const{type:t}=n.groups,r=document.createElement("ha-alert");r.alertType=p.typeToHaAlert[t.toLowerCase()],r.append(...Array.from(o.childNodes).map(e=>{const t=Array.from(e.childNodes);if(!this.breaks&&t.length){var o;const e=t[0];e.nodeType===Node.TEXT_NODE&&e.textContent===n.input&&null!==(o=e.textContent)&&void 0!==o&&o.includes("\n")&&(e.textContent=e.textContent.split("\n").slice(1).join("\n"))}return t}).reduce((e,t)=>e.concat(t),[]).filter(e=>e.textContent&&e.textContent!==n.input)),e.parentNode().replaceChild(r,o)}}else o instanceof HTMLElement&&["ha-alert","ha-qr-code","ha-icon","ha-svg-icon"].includes(o.localName)&&n(23265)(`./${o.localName}`)}}constructor(...e){super(...e),this.allowSvg=!1,this.allowDataUrl=!1,this.breaks=!1,this.lazyImages=!1,this.cache=!1,this._resize=()=>(0,l.B)(this,"content-resize")}}(0,r.__decorate)([(0,i.Cb)()],f.prototype,"content",void 0),(0,r.__decorate)([(0,i.Cb)({attribute:"allow-svg",type:Boolean})],f.prototype,"allowSvg",void 0),(0,r.__decorate)([(0,i.Cb)({attribute:"allow-data-url",type:Boolean})],f.prototype,"allowDataUrl",void 0),(0,r.__decorate)([(0,i.Cb)({type:Boolean})],f.prototype,"breaks",void 0),(0,r.__decorate)([(0,i.Cb)({type:Boolean,attribute:"lazy-images"})],f.prototype,"lazyImages",void 0),(0,r.__decorate)([(0,i.Cb)({type:Boolean})],f.prototype,"cache",void 0),f=(0,r.__decorate)([(0,i.Mo)("ha-markdown-element")],f)},45861:function(e,t,n){"use strict";n(26847),n(27530);var o=n(73742),r=n(59048),a=n(7616);n(5778);let i,s,c=e=>e;class l extends r.oi{render(){return this.content?(0,r.dy)(i||(i=c`<ha-markdown-element .content="${0}" .allowSvg="${0}" .allowDataUrl="${0}" .breaks="${0}" .lazyImages="${0}" .cache="${0}"></ha-markdown-element>`),this.content,this.allowSvg,this.allowDataUrl,this.breaks,this.lazyImages,this.cache):r.Ld}constructor(...e){super(...e),this.allowSvg=!1,this.allowDataUrl=!1,this.breaks=!1,this.lazyImages=!1,this.cache=!1}}l.styles=(0,r.iv)(s||(s=c`:host{display:block}ha-markdown-element{-ms-user-select:text;-webkit-user-select:text;-moz-user-select:text}ha-markdown-element>:first-child{margin-top:0}ha-markdown-element>:last-child{margin-bottom:0}ha-alert{display:block;margin:4px 0}a{color:var(--primary-color)}img{max-width:100%}code,pre{background-color:var(--markdown-code-background-color,none);border-radius:3px}svg{background-color:var(--markdown-svg-background-color,none);color:var(--markdown-svg-color,none)}code{font-size:var(--ha-font-size-s);padding:.2em .4em}pre code{padding:0}pre{padding:16px;overflow:auto;line-height:var(--ha-line-height-condensed);font-family:var(--ha-font-family-code)}h1,h2,h3,h4,h5,h6{line-height:initial}h2{font-size:var(--ha-font-size-xl);font-weight:var(--ha-font-weight-bold)}hr{border-color:var(--divider-color);border-bottom:none;margin:16px 0}`)),(0,o.__decorate)([(0,a.Cb)()],l.prototype,"content",void 0),(0,o.__decorate)([(0,a.Cb)({attribute:"allow-svg",type:Boolean})],l.prototype,"allowSvg",void 0),(0,o.__decorate)([(0,a.Cb)({attribute:"allow-data-url",type:Boolean})],l.prototype,"allowDataUrl",void 0),(0,o.__decorate)([(0,a.Cb)({type:Boolean})],l.prototype,"breaks",void 0),(0,o.__decorate)([(0,a.Cb)({type:Boolean,attribute:"lazy-images"})],l.prototype,"lazyImages",void 0),(0,o.__decorate)([(0,a.Cb)({type:Boolean})],l.prototype,"cache",void 0),l=(0,o.__decorate)([(0,a.Mo)("ha-markdown")],l)},50870:function(e,t,n){"use strict";n.d(t,{N:function(){return o},Z:function(){return r}});n(87799);const o=(e,t,n)=>e.subscribeMessage(e=>t(e),Object.assign({type:"render_template"},n)),r=(e,t,n,o,r)=>e.connection.subscribeMessage(r,{type:"template/start_preview",flow_id:t,flow_type:n,user_input:o})},11308:function(e,t,n){"use strict";n.r(t),n.d(t,{HuiMarkdownCard:function(){return _}});n(44776),n(40777),n(26847),n(1455),n(27530);var o=n(73742),r=n(59048),a=n(7616),i=n(31733),s=n(82040),c=n.n(s),l=n(4427),h=n(39884),d=(n(12942),n(31138),n(45861),n(50870)),u=n(28773);let p,f,m,g=e=>e;const y=new u.L(1e3);class _ extends r.oi{static async getConfigElement(){return await n.e("96554").then(n.bind(n,56954)),document.createElement("hui-markdown-card-editor")}static getStubConfig(){return{type:"markdown",content:"The **Markdown** card allows you to write any text. You can style it **bold**, *italicized*, ~strikethrough~ etc. You can do images, links, and more.\n\nFor more information see the [Markdown Cheatsheet](https://commonmark.org/help)."}}getCardSize(){return void 0===this._config?3:void 0===this._config.card_size?Math.round(this._config.content.split("\n").length/2)+(this._config.title?1:0):this._config.card_size}setConfig(e){var t;if(!e.content)throw new Error("Content required");(null===(t=this._config)||void 0===t?void 0:t.content)!==e.content&&this._tryDisconnect(),this._config=e}connectedCallback(){super.connectedCallback(),this._tryConnect()}_computeCacheKey(){return c()(this._config)}disconnectedCallback(){if(super.disconnectedCallback(),this._tryDisconnect(),this._config&&this._templateResult){const e=this._computeCacheKey();y.set(e,this._templateResult)}}willUpdate(e){if(super.willUpdate(e),this._config&&!this._templateResult){const e=this._computeCacheKey();y.has(e)&&(this._templateResult=y.get(e))}}render(){var e,t,n;return this._config?(0,r.dy)(p||(p=g` ${0} <ha-card .header="${0}" class="${0}"> <ha-markdown cache breaks .content="${0}"></ha-markdown> </ha-card> `),this._error?(0,r.dy)(f||(f=g` <ha-alert .alertType="${0}"> ${0} </ha-alert> `),(null===(e=this._errorLevel)||void 0===e?void 0:e.toLowerCase())||"error",this._error):r.Ld,this._config.text_only?void 0:this._config.title,(0,i.$)({"with-header":!!this._config.title,"text-only":null!==(t=this._config.text_only)&&void 0!==t&&t}),null===(n=this._templateResult)||void 0===n?void 0:n.result):r.Ld}updated(e){if(super.updated(e),!this._config||!this.hass)return;e.has("_config")&&this._tryConnect();const t=!!this._templateResult&&!1===this._config.show_empty&&0===this._templateResult.result.length;t!==this.hidden&&(this.style.display=t?"none":"",this.toggleAttribute("hidden",t),(0,h.B)(this,"card-visibility-changed",{value:!t}));const n=e.get("hass"),o=e.get("_config");n&&o&&n.themes===this.hass.themes&&o.theme===this._config.theme||(0,l.R)(this,this.hass.themes,this._config.theme)}async _tryConnect(){if(void 0===this._unsubRenderTemplate&&this.hass&&this._config){this._error=void 0,this._errorLevel=void 0;try{this._unsubRenderTemplate=(0,d.N)(this.hass.connection,e=>{"error"in e?"ERROR"!==e.level&&"ERROR"===this._errorLevel||(this._error=e.error,this._errorLevel=e.level):this._templateResult=e},{template:this._config.content,entity_ids:this._config.entity_id,variables:{config:this._config,user:this.hass.user.name},strict:!0,report_errors:this.preview}),await this._unsubRenderTemplate}catch(e){this.preview&&(this._error=e.message,this._errorLevel=void 0),this._templateResult={result:this._config.content,listeners:{all:!1,domains:[],entities:[],time:!1}},this._unsubRenderTemplate=void 0}}}async _tryDisconnect(){this._unsubRenderTemplate&&(this._unsubRenderTemplate.then(e=>e()).catch(),this._unsubRenderTemplate=void 0,this._error=void 0,this._errorLevel=void 0)}constructor(...e){super(...e),this.preview=!1}}_.styles=(0,r.iv)(m||(m=g`ha-card{height:100%}ha-alert{margin-bottom:8px}ha-markdown{padding:16px;word-wrap:break-word;text-align:var(--card-text-align,inherit)}.with-header ha-markdown{padding:0 16px 16px}.text-only{background:0 0;box-shadow:none;border:none}.text-only ha-markdown{padding:2px 4px}`)),(0,o.__decorate)([(0,a.Cb)({attribute:!1})],_.prototype,"hass",void 0),(0,o.__decorate)([(0,a.Cb)({type:Boolean})],_.prototype,"preview",void 0),(0,o.__decorate)([(0,a.SB)()],_.prototype,"_config",void 0),(0,o.__decorate)([(0,a.SB)()],_.prototype,"_error",void 0),(0,o.__decorate)([(0,a.SB)()],_.prototype,"_errorLevel",void 0),(0,o.__decorate)([(0,a.SB)()],_.prototype,"_templateResult",void 0),_=(0,o.__decorate)([(0,a.Mo)("hui-markdown-card")],_)},28773:function(e,t,n){"use strict";n.d(t,{L:function(){return o}});n(26847),n(27530);class o{get(e){return this._cache.get(e)}set(e,t){this._cache.set(e,t),this._expiration&&window.setTimeout(()=>this._cache.delete(e),this._expiration)}has(e){return this._cache.has(e)}constructor(e){this._cache=new Map,this._expiration=e}}},23265:function(e,t,n){var o={"./ha-icon-prev":["21940","55974"],"./ha-alert":["12942","43404"],"./ha-icon-button-toggle":["68695","54472"],"./ha-svg-icon.ts":["993"],"./ha-alert.ts":["12942","43404"],"./ha-icon":["46358","82343"],"./ha-icon-next.ts":["5786","41374"],"./ha-qr-code.ts":["2183","16892","93208"],"./ha-icon-overflow-menu.ts":["65014","97103","22092","79576","25322"],"./ha-icon-button-toggle.ts":["68695","54472"],"./ha-icon-button-group":["15053","59877"],"./ha-svg-icon":["993"],"./ha-icon-button-prev":["29813","54260"],"./ha-icon-button.ts":["48017"],"./ha-icon-overflow-menu":["65014","97103","22092","79576","25322"],"./ha-icon-button-arrow-next":["51383","30113"],"./ha-icon-button-prev.ts":["29813","54260"],"./ha-icon-picker":["65981","73614","2243","97103","15601","23910"],"./ha-icon-picker.ts":["65981","73614","2243","97103","15601","23910"],"./ha-icon-button-arrow-prev.ts":["45109","86454"],"./ha-icon-button-next":["22852","8145"],"./ha-icon-next":["5786","41374"],"./ha-icon-prev.ts":["21940","55974"],"./ha-icon-button-arrow-prev":["45109","86454"],"./ha-icon-button-next.ts":["22852","8145"],"./ha-icon.ts":["46358","82343"],"./ha-qr-code":["2183","16892","93208"],"./ha-icon-button":["48017"],"./ha-icon-button-group.ts":["15053","59877"],"./ha-icon-button-arrow-next.ts":["51383","30113"]};function r(e){if(!n.o(o,e))return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=o[e],r=t[0];return Promise.all(t.slice(1).map(n.e)).then(function(){return n(r)})}r.keys=function(){return Object.keys(o)},r.id=23265,e.exports=r},77451:function(e,t,n){"use strict";var o=n(77341),r=n(30456),a=n(42749),i=n(61360),s=TypeError,c=Object.defineProperty,l=r.self!==r;try{if(i){var h=Object.getOwnPropertyDescriptor(r,"self");!l&&h&&h.get&&h.enumerable||a(r,"self",{get:function(){return r},set:function(e){if(this!==r)throw new s("Illegal invocation");c(r,"self",{value:e,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else o({global:!0,simple:!0,forced:l},{self:r})}catch(d){}},61943:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});n(84730),n(26847),n(27530);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}},86190:function(e,t,n){"use strict";n.d(t,{Ud:function(){return u}});n(84730),n(40777),n(26847),n(44438),n(13715),n(81738),n(6989),n(93190),n(87799),n(1455),n(65640),n(28660),n(64455),n(32192),n(56303),n(52530),n(27530);const o=Symbol("Comlink.proxy"),r=Symbol("Comlink.endpoint"),a=Symbol("Comlink.releaseProxy"),i=Symbol("Comlink.finalizer"),s=Symbol("Comlink.thrown"),c=e=>"object"==typeof e&&null!==e||"function"==typeof e,l=new Map([["proxy",{canHandle:e=>c(e)&&e[o],serialize(e){const{port1:t,port2:n}=new MessageChannel;return h(e,t),[n,[n]]},deserialize(e){return e.start(),u(e)}}],["throw",{canHandle:e=>c(e)&&s in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function h(e,t=globalThis,n=["*"]){t.addEventListener("message",function r(a){if(!a||!a.data)return;if(!function(e,t){for(const n of e){if(t===n||"*"===n)return!0;if(n instanceof RegExp&&n.test(t))return!0}return!1}(n,a.origin))return void console.warn(`Invalid origin '${a.origin}' for comlink proxy`);const{id:c,type:l,path:u}=Object.assign({path:[]},a.data),p=(a.data.argumentList||[]).map(w);let f;try{const t=u.slice(0,-1).reduce((e,t)=>e[t],e),n=u.reduce((e,t)=>e[t],e);switch(l){case"GET":f=n;break;case"SET":t[u.slice(-1)[0]]=w(a.data.value),f=!0;break;case"APPLY":f=n.apply(t,p);break;case"CONSTRUCT":f=function(e){return Object.assign(e,{[o]:!0})}(new n(...p));break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;h(e,n),f=function(e,t){return v.set(e,t),e}(t,[t])}break;case"RELEASE":f=void 0;break;default:return}}catch(m){f={value:m,[s]:0}}Promise.resolve(f).catch(e=>({value:e,[s]:0})).then(n=>{const[o,a]=b(n);t.postMessage(Object.assign(Object.assign({},o),{id:c}),a),"RELEASE"===l&&(t.removeEventListener("message",r),d(t),i in e&&"function"==typeof e[i]&&e[i]())}).catch(e=>{const[n,o]=b({value:new TypeError("Unserializable return value"),[s]:0});t.postMessage(Object.assign(Object.assign({},n),{id:c}),o)})}),t.start&&t.start()}function d(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function u(e,t){const n=new Map;return e.addEventListener("message",function(e){const{data:t}=e;if(!t||!t.id)return;const o=n.get(t.id);if(o)try{o(t)}finally{n.delete(t.id)}}),y(e,n,[],t)}function p(e){if(e)throw new Error("Proxy has been released and is not useable")}function f(e){return k(e,new Map,{type:"RELEASE"}).then(()=>{d(e)})}const m=new WeakMap,g="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(m.get(e)||0)-1;m.set(e,t),0===t&&f(e)});function y(e,t,n=[],o=function(){}){let i=!1;const s=new Proxy(o,{get(o,r){if(p(i),r===a)return()=>{!function(e){g&&g.unregister(e)}(s),f(e),t.clear(),i=!0};if("then"===r){if(0===n.length)return{then:()=>s};const o=k(e,t,{type:"GET",path:n.map(e=>e.toString())}).then(w);return o.then.bind(o)}return y(e,t,[...n,r])},set(o,r,a){p(i);const[s,c]=b(a);return k(e,t,{type:"SET",path:[...n,r].map(e=>e.toString()),value:s},c).then(w)},apply(o,a,s){p(i);const c=n[n.length-1];if(c===r)return k(e,t,{type:"ENDPOINT"}).then(w);if("bind"===c)return y(e,t,n.slice(0,-1));const[l,h]=_(s);return k(e,t,{type:"APPLY",path:n.map(e=>e.toString()),argumentList:l},h).then(w)},construct(o,r){p(i);const[a,s]=_(r);return k(e,t,{type:"CONSTRUCT",path:n.map(e=>e.toString()),argumentList:a},s).then(w)}});return function(e,t){const n=(m.get(t)||0)+1;m.set(t,n),g&&g.register(e,t,e)}(s,e),s}function _(e){const t=e.map(b);return[t.map(e=>e[0]),(n=t.map(e=>e[1]),Array.prototype.concat.apply([],n))];var n}const v=new WeakMap;function b(e){for(const[t,n]of l)if(n.canHandle(e)){const[o,r]=n.serialize(e);return[{type:"HANDLER",name:t,value:o},r]}return[{type:"RAW",value:e},v.get(e)||[]]}function w(e){switch(e.type){case"HANDLER":return l.get(e.name).deserialize(e.value);case"RAW":return e.value}}function k(e,t,n,o){return new Promise(r=>{const a=new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");t.set(a,r),e.start&&e.start(),e.postMessage(Object.assign({id:a},n),o)})}}}]);
//# sourceMappingURL=54654.747ad34bb52ca6e1.js.map