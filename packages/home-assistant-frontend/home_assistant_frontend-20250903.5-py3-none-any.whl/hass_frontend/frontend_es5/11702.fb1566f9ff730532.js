"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["11702"],{7214:function(t,e,i){i.d(e,{Cj:function(){return h},F7:function(){return r},Hs:function(){return w},Kd:function(){return b},Kj:function(){return f},Nw:function(){return y},PA:function(){return s},Py:function(){return c},Qm:function(){return x},Z0:function(){return S},_Y:function(){return _},_m:function(){return a},dL:function(){return u},dO:function(){return I},hN:function(){return p},h_:function(){return l},j2:function(){return v},q6:function(){return m},uR:function(){return d},yf:function(){return o}});i(39710),i(26847),i(81738),i(72489),i(56389),i(27530);var n=i(15459),r=function(t){return t[t.NONE=0]="NONE",t[t.ARITHMETIC=1]="ARITHMETIC",t[t.CIRCULAR=2]="CIRCULAR",t}({});const s=99387==i.j?["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"]:null,o=["L","gal","ft³","m³","CCF"],a=t=>t.sendMessagePromise({type:"recorder/info"}),d=(t,e)=>t.callWS({type:"recorder/list_statistic_ids",statistic_type:e}),c=(t,e)=>t.callWS({type:"recorder/get_statistics_metadata",statistic_ids:e}),u=(t,e,i,n,r="hour",s,o)=>t.callWS({type:"recorder/statistics_during_period",start_time:e.toISOString(),end_time:null==i?void 0:i.toISOString(),statistic_ids:n,period:r,units:s,types:o}),_=(t,e,i,n)=>t.callWS({type:"recorder/statistic_during_period",statistic_id:e,units:n,fixed_period:i.fixed_period?{start_time:i.fixed_period.start instanceof Date?i.fixed_period.start.toISOString():i.fixed_period.start,end_time:i.fixed_period.end instanceof Date?i.fixed_period.end.toISOString():i.fixed_period.end}:void 0,calendar:i.calendar,rolling_window:i.rolling_window}),l=t=>t.callWS({type:"recorder/validate_statistics"}),h=(t,e,i)=>t.callWS({type:"recorder/update_statistics_metadata",statistic_id:e,unit_of_measurement:i}),p=(t,e)=>t.callWS({type:"recorder/clear_statistics",statistic_ids:e}),f=t=>{let e=null;if(!t)return null;for(const i of t)null!==i.change&&void 0!==i.change&&(null===e?e=i.change:e+=i.change);return e},m=(t,e)=>{let i=null;for(const n of e){if(!(n in t))continue;const e=f(t[n]);null!==e&&(null===i?i=e:i+=e)}return i},y=(t,e)=>t.some(t=>void 0!==t[e]&&null!==t[e]),g=["mean","min","max"],C=["sum","state","change"],S=(t,e)=>!(!g.includes(e)||0===t.mean_type)||!(!C.includes(e)||!t.has_sum),v=(t,e,i,n,r)=>{const s=new Date(i).toISOString();return t.callWS({type:"recorder/adjust_sum_statistics",statistic_id:e,start_time:s,adjustment:n,adjustment_unit_of_measurement:r})},b=(t,e,i)=>{const r=t.states[e];return r?(0,n.C)(r):(null==i?void 0:i.name)||e},I=(t,e,i)=>{let n;var r;e&&(n=null===(r=t.states[e])||void 0===r?void 0:r.attributes.unit_of_measurement);return void 0===n?null==i?void 0:i.statistics_unit_of_measurement:n},w=t=>t.includes(":"),x=t=>t.callWS({type:"recorder/update_statistics_issues"})},87079:function(t,e,i){i.a(t,async function(t,n){try{i.r(e),i.d(e,{HuiEnergyCompareCard:function(){return C}});i(26847),i(27530);var r=i(73742),s=i(7722),o=i(56858),a=i(59048),d=i(7616),c=i(40142),u=i(6640),_=i(6291),l=i(93647),h=(i(12942),i(39884)),p=t([c,u]);[c,u]=p.then?(await p)():p;let f,m,y,g=t=>t;class C extends((0,_.f)(a.oi)){getCardSize(){return 1}setConfig(t){this._config=t}hassSubscribe(){return[(0,u.UB)(this.hass,{key:this._config.collection_key}).subscribe(t=>this._update(t))]}shouldUpdate(t){return(0,l.SN)(this,t)||t.size>1||!t.has("hass")}render(){if(!this._startCompare||!this._endCompare)return a.Ld;const t=(0,s.j)(this._endCompare,this._startCompare);return(0,a.dy)(f||(f=g` <ha-alert dismissable @alert-dismissed-clicked="${0}"> ${0} </ha-alert> `),this._stopCompare,this.hass.localize("ui.panel.energy.compare.info",{start:(0,a.dy)(m||(m=g`<b>${0}${0}</b>`),(0,c.p6)(this._start,this.hass.locale,this.hass.config),t>0?` -\n          ${(0,c.p6)(this._end||(0,o.i)(new Date),this.hass.locale,this.hass.config)}`:""),end:(0,a.dy)(y||(y=g`<b>${0}${0}</b>`),(0,c.p6)(this._startCompare,this.hass.locale,this.hass.config),t>0?` -\n          ${(0,c.p6)(this._endCompare,this.hass.locale,this.hass.config)}`:"")}))}_update(t){this._start=t.start,this._end=t.end,this._startCompare=t.startCompare,this._endCompare=t.endCompare;const e=this.hidden;this.hidden=!this._startCompare,e!==this.hidden&&(0,h.B)(this,"card-visibility-changed")}_stopCompare(){const t=(0,u.UB)(this.hass,{key:this._config.collection_key});t.setCompare(!1),t.refresh()}constructor(...t){super(...t),this.hidden=!0,this.connectedWhileHidden=!0,this.hassSubscribeRequiredHostProps=["_config"]}}(0,r.__decorate)([(0,d.Cb)({attribute:!1})],C.prototype,"hass",void 0),(0,r.__decorate)([(0,d.SB)()],C.prototype,"_config",void 0),(0,r.__decorate)([(0,d.SB)()],C.prototype,"_start",void 0),(0,r.__decorate)([(0,d.SB)()],C.prototype,"_end",void 0),(0,r.__decorate)([(0,d.SB)()],C.prototype,"_startCompare",void 0),(0,r.__decorate)([(0,d.SB)()],C.prototype,"_endCompare",void 0),(0,r.__decorate)([(0,d.Cb)({type:Boolean,reflect:!0})],C.prototype,"hidden",void 0),C=(0,r.__decorate)([(0,d.Mo)("hui-energy-compare-card")],C),n()}catch(f){n(f)}})}}]);
//# sourceMappingURL=11702.fb1566f9ff730532.js.map