"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["59544"],{86420:function(t,i,e){e.d(i,{D:function(){return o}});e(20655);const o=t=>{var i;return null===(i=t.name)||void 0===i?void 0:i.trim()}},39800:function(t,i,e){e.d(i,{Z:function(){return a}});e(40777),e(15519),e(64455),e(26086),e(6202);const o=t=>{const i=parseFloat(t);if(isNaN(i))throw new Error(`${t} is not a number`);return i};function a(t){if(!t)return null;try{if(t.endsWith("%"))return{w:100,h:o(t.substr(0,t.length-1))};const i=t.replace(":","x").split("x");return 0===i.length?null:1===i.length?{w:o(i[0]),h:1}:{w:o(i[0]),h:o(i[1])}}catch(i){}return null}},91823:function(t,i,e){e(26847),e(25718),e(27530);var o=e(73742),a=e(59048),r=e(7616),n=e(36180),s=e(39800);let c,l,d,h=t=>t;class u extends a.oi{willUpdate(t){(t.has("aspect_ratio")||null===this._ratio)&&(this._ratio=this.aspectRatio?(0,s.Z)(this.aspectRatio):null,(null===this._ratio||this._ratio.w<=0||this._ratio.h<=0)&&(this._ratio=(0,s.Z)("16:9")))}render(){return this.aspectRatio?(0,a.dy)(l||(l=h` <div class="ratio" style="${0}"> <slot></slot> </div> `),(0,n.V)({paddingBottom:`${(100*this._ratio.h/this._ratio.w).toFixed(2)}%`})):(0,a.dy)(c||(c=h`<slot></slot>`))}constructor(...t){super(...t),this._ratio=null}}u.styles=(0,a.iv)(d||(d=h`.ratio ::slotted(*){position:absolute;top:0;left:0;width:100%;height:100%}`)),(0,o.__decorate)([(0,r.Cb)({type:String,attribute:"aspect-ratio"})],u.prototype,"aspectRatio",void 0),u=(0,o.__decorate)([(0,r.Mo)("ha-aspect-ratio")],u)},44066:function(t,i,e){e.a(t,async function(t,o){try{e.r(i),e.d(i,{DEFAULT_ASPECT_RATIO:function(){return H},DEVICE_CLASSES:function(){return N},HuiAreaCard:function(){return R},SUM_DEVICE_CLASSES:function(){return P}});e(40777),e(39710),e(26847),e(2394),e(44438),e(18574),e(81738),e(94814),e(29981),e(6989),e(93190),e(87799),e(1455),e(56389),e(27530);var a=e(73742),r=e(59048),n=e(7616),s=e(31733),c=e(25191),l=e(36180),d=e(28105),h=e(34394),u=e(40141),p=e(86420),_=e(68626),f=e(67050),g=e(28598),v=e(27417),m=e(39800),y=(e(91823),e(31138),e(56712),e(58239),e(38255)),b=(e(46358),e(82601),e(993),e(97822),e(97985),e(484),e(16230)),x=e(91915),w=e(76815),$=t([y,x,g]);[y,x,g]=$.then?(await $)():$;let S,C,E,A,k,L,j,B,z,M,D,V,Z,O=t=>t;const I="M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z",H="16:9",N={sensor:["temperature","humidity"],binary_sensor:["motion","moisture"]},P=["power","apparent_power","reactive_power","energy","reactive_energy","current","gas","monetary","volume","water"];class R extends r.oi{static async getConfigElement(){return await Promise.all([e.e("49170"),e.e("98609")]).then(e.bind(e,91648)),document.createElement("hui-area-card-editor")}setConfig(t){if(!t.area)throw new Error("Specify an area");const i=t.display_type||(t.show_camera?"camera":"picture"),e="compact"===i&&t.vertical;this._config=Object.assign(Object.assign({},t),{},{vertical:e,display_type:i}),this._featureContext={area_id:t.area,exclude_entities:t.exclude_entities}}static async getStubConfig(t){var i;return{type:"area",area:(null===(i=Object.values(t.areas)[0])||void 0===i?void 0:i.area_id)||""}}getCardSize(){var t,i,e;const o=this._config&&this._featurePosition(this._config),a=(null===(t=this._config)||void 0===t?void 0:t.display_type)||"picture",r=(null===(i=this._config)||void 0===i||null===(i=i.features)||void 0===i?void 0:i.length)||0;return 1+("compact"===a?null!==(e=this._config)&&void 0!==e&&e.vertical?1:0:2)+("inline"===o?0:r)}getGridOptions(){var t,i,e;let o=6,a=6,r=1;const n=this._config?this._featurePosition(this._config):"bottom",s=(null===(t=this._config)||void 0===t||null===(t=t.features)||void 0===t?void 0:t.length)||0;s&&("inline"===n?(a=12,o=12):r+=s);const c=(null===(i=this._config)||void 0===i?void 0:i.display_type)||"picture";return null!==(e=this._config)&&void 0!==e&&e.vertical&&(r++,a=3),"compact"!==c&&(r+="inline"===n&&s>0?3:2),{columns:o,rows:r,min_columns:a,min_rows:r}}get _hasCardAction(){var t;return null===(t=this._config)||void 0===t?void 0:t.navigation_path}_handleAction(){var t;null!==(t=this._config)&&void 0!==t&&t.navigation_path&&(0,f.c)(this._config.navigation_path)}_computeActiveAlertStates(){var t,i,e;const o=null===(t=this._config)||void 0===t?void 0:t.area,a=o?this.hass.areas[o]:void 0,r=null===(i=this._config)||void 0===i?void 0:i.alert_classes,n=null===(e=this._config)||void 0===e?void 0:e.exclude_entities;if(!a||!r)return[];const s=this._groupedBinarySensorEntityIds(this.hass.entities,a.area_id,r,n);return r.map(t=>{const i=s.get(t)||[];return i?i.map(t=>this.hass.states[t]).filter(t=>(null==t?void 0:t.state)===u.uo):[]}).filter(t=>t.length>0).map(t=>t[0])}_renderAlertSensorBadge(){const t=this._computeActiveAlertStates();if(0===t.length)return r.Ld;const i=t[0];return(0,r.dy)(S||(S=O` <ha-tile-badge class="alert-badge"> <ha-state-icon .hass="${0}" .stateObj="${0}"></ha-state-icon> </ha-tile-badge> `),this.hass,i)}_renderAlertSensors(){const t=this._computeActiveAlertStates();return 0===t.length?r.Ld:(0,r.dy)(C||(C=O` <div class="alerts"> ${0} </div> `),t.map(t=>(0,r.dy)(E||(E=O` <div class="alert"> <ha-state-icon .hass="${0}" .stateObj="${0}"></ha-state-icon> </div> `),this.hass,t)))}_computeSensorsDisplay(){var t,i,e;const o=null===(t=this._config)||void 0===t?void 0:t.area,a=o?this.hass.areas[o]:void 0,r=null===(i=this._config)||void 0===i?void 0:i.sensor_classes,n=null===(e=this._config)||void 0===e?void 0:e.exclude_entities;if(!a||!r)return;const s=this._groupedSensorEntityIds(this.hass.entities,a.area_id,r,n);return r.map(t=>{var i;if("temperature"===t&&a.temperature_entity_id){const t=this.hass.states[a.temperature_entity_id];return!t||(0,b.rk)(t.state)?"":this.hass.formatEntityState(t)}if("humidity"===t&&a.humidity_entity_id){const t=this.hass.states[a.humidity_entity_id];return!t||(0,b.rk)(t.state)?"":this.hass.formatEntityState(t)}const e=s.get(t);if(!e)return;const o=e.map(t=>this.hass.states[t]).filter(Boolean);if(0===o.length)return;if(1===o.length){const t=o[0];return(0,b.rk)(t.state)?"":this.hass.formatEntityState(t)}const r=null===(i=o.find(t=>t.attributes.unit_of_measurement))||void 0===i?void 0:i.attributes.unit_of_measurement,n=o.filter(t=>t.attributes.unit_of_measurement===r&&(0,g.SL)(t)&&!isNaN(Number(t.state)));if(0===n.length)return;const c=P.includes(t)?this._computeSumState(n):this._computeMedianState(n);return`${(0,g.uf)(c,this.hass.locale,{maximumFractionDigits:1})}${r?`${(0,v.L)(r,this.hass.locale)}${r}`:""}`}).filter(Boolean).join(" Â· ")}_computeSumState(t){return t.reduce((t,i)=>t+Number(i.state),0)}_computeMedianState(t){const i=t.map(t=>Number(t.state)).sort((t,i)=>t-i);if(i.length%2==0){const t=i.length/2;return(i[t]+i[t-1])/2}return i[Math.floor(i.length/2)]}willUpdate(t){var i,e;(t.has("_config")||null===this._ratio)&&(this._ratio=null!==(i=this._config)&&void 0!==i&&i.aspect_ratio?(0,m.Z)(null===(e=this._config)||void 0===e?void 0:e.aspect_ratio):null,(null===this._ratio||this._ratio.w<=0||this._ratio.h<=0)&&(this._ratio=(0,m.Z)(H)))}render(){var t;if(!this._config||!this.hass)return r.Ld;const i=null===(t=this._config)||void 0===t?void 0:t.area,e=i?this.hass.areas[i]:void 0;if(!e)return(0,r.dy)(A||(A=O` <hui-warning .hass="${0}"> ${0} </hui-warning> `),this.hass,this.hass.localize("ui.card.area.area_not_found"));const o={vertical:Boolean(this._config.vertical)},a=e.icon,n=this._config.name||(0,p.D)(e),d=this._computeSensorsDisplay(),u=this._featurePosition(this._config),_=this._displayedFeatures(this._config),f="inline"===u?"horizontal":"",g=this._config.display_type||"picture",v="camera"===g?this._getCameraEntity(this.hass.entities,e.area_id):void 0,m="grid"===this.layout||"panel"===this.layout,y={"--tile-color":this._config.color?(0,h.I)(this._config.color):void 0};return(0,r.dy)(k||(k=O` <ha-card style="${0}"> <div class="background" @action="${0}" .actionHandler="${0}" role="${0}" tabindex="${0}" aria-labelledby="info"> <ha-ripple .disabled="${0}"></ha-ripple> </div> ${0} <div class="container ${0}"> <div class="content ${0}"> <ha-tile-icon> ${0} ${0} </ha-tile-icon> <ha-tile-info id="info" .primary="${0}" .secondary="${0}"></ha-tile-info> </div> ${0} </div> </ha-card> `),(0,l.V)(y),this._handleAction,(0,w.K)(),(0,c.o)(this._hasCardAction?"button":void 0),(0,c.o)(this._hasCardAction?"0":void 0),!this._hasCardAction,"compact"===g?r.Ld:(0,r.dy)(L||(L=O` <div class="header"> <div class="picture"> ${0} </div> ${0} </div> `),"picture"!==g&&"camera"!==g||!v&&!e.picture?(0,r.dy)(B||(B=O` <ha-aspect-ratio .aspectRatio="${0}"> <div class="icon-container"> ${0} </div> </ha-aspect-ratio> `),m?void 0:this._config.aspect_ratio||H,e.icon?(0,r.dy)(z||(z=O`<ha-icon .icon="${0}"></ha-icon>`),e.icon):r.Ld):(0,r.dy)(j||(j=O` <hui-image .cameraImage="${0}" .cameraView="${0}" .image="${0}" .hass="${0}" fit-mode="cover" .aspectRatio="${0}"></hui-image> `),v,this._config.camera_view,e.picture?e.picture:void 0,this.hass,m?void 0:this._config.aspect_ratio||H),this._renderAlertSensors()),f,(0,s.$)(o),"compact"===g?this._renderAlertSensorBadge():r.Ld,a?(0,r.dy)(M||(M=O`<ha-icon slot="icon" .icon="${0}"></ha-icon>`),a):(0,r.dy)(D||(D=O` <ha-svg-icon slot="icon" .path="${0}"></ha-svg-icon> `),I),n,d,_.length>0?(0,r.dy)(V||(V=O` <hui-card-features .hass="${0}" .context="${0}" .color="${0}" .features="${0}" .position="${0}"></hui-card-features> `),this.hass,this._featureContext,this._config.color,_,u):r.Ld)}constructor(...t){super(...t),this._featureContext={},this._ratio=null,this._groupEntitiesByDeviceClass=t=>t.reduce((t,i)=>{const e=this.hass.states[i],o=e.attributes.device_class;return t.has(o)||t.set(o,[]),t.get(o).push(e.entity_id),t},new Map),this._groupedSensorEntityIds=(0,d.Z)((t,i,e,o)=>{const a=(0,_.$)(this.hass,{area:i,entity_category:"none",domain:"sensor",device_class:e}),r=Object.keys(t).filter(t=>a(t)&&!(null!=o&&o.includes(t)));return this._groupEntitiesByDeviceClass(r)}),this._groupedBinarySensorEntityIds=(0,d.Z)((t,i,e,o)=>{const a=(0,_.$)(this.hass,{area:i,entity_category:"none",domain:"binary_sensor",device_class:e}),r=Object.keys(t).filter(t=>a(t)&&!(null!=o&&o.includes(t)));return this._groupEntitiesByDeviceClass(r)}),this._getCameraEntity=(0,d.Z)((t,i)=>{const e=(0,_.$)(this.hass,{area:i,entity_category:"none",domain:"camera"}),o=Object.keys(t).filter(e);return o.length>0?o[0]:void 0}),this._featurePosition=(0,d.Z)(t=>t.vertical?"bottom":t.features_position||"bottom"),this._displayedFeatures=(0,d.Z)(t=>{const i=t.features||[];return"inline"===this._featurePosition(t)?i.slice(0,1):i})}}R.styles=(0,r.iv)(Z||(Z=O`:host{--tile-color:var(--state-icon-color);-webkit-tap-highlight-color:transparent}ha-card:has(.background:focus-visible){--shadow-default:var(--ha-card-box-shadow, 0 0 0 0 transparent);--shadow-focus:0 0 0 1px var(--tile-color);border-color:var(--tile-color);box-shadow:var(--shadow-default),var(--shadow-focus)}ha-card{--ha-ripple-color:var(--tile-color);--ha-ripple-hover-opacity:0.04;--ha-ripple-pressed-opacity:0.12;height:100%;transition:box-shadow 180ms ease-in-out,border-color 180ms ease-in-out;display:flex;flex-direction:column;justify-content:space-between}[role=button]{cursor:pointer;pointer-events:auto}[role=button]:focus{outline:0}.background{position:absolute;top:0;left:0;bottom:0;right:0;border-radius:var(--ha-card-border-radius,12px);margin:calc(-1 * var(--ha-card-border-width,1px));overflow:hidden}.header{flex:1;overflow:hidden;border-radius:var(--ha-card-border-radius,12px);border-end-end-radius:0;border-end-start-radius:0;pointer-events:none}.picture{height:100%;width:100%;background-size:cover;background-position:center;position:relative}.picture hui-image{height:100%}.picture .icon-container{height:100%;width:100%;display:flex;align-items:center;justify-content:center;--mdc-icon-size:48px;color:var(--tile-color)}.picture .icon-container::before{position:absolute;content:"";width:100%;height:100%;background-color:var(--tile-color);opacity:.12}.container{margin:calc(-1 * var(--ha-card-border-width,1px));display:flex;flex-direction:column;flex:1}.header+.container{height:auto;flex:none}.container.horizontal{flex-direction:row}.content{position:relative;display:flex;flex-direction:row;align-items:center;padding:10px;flex:1;min-width:0;box-sizing:border-box;pointer-events:none;gap:10px}.vertical{flex-direction:column;text-align:center;justify-content:center}.vertical ha-tile-info{width:100%;flex:none}ha-tile-icon{--tile-icon-color:var(--tile-color);position:relative;padding:6px;margin:-6px}ha-tile-badge{position:absolute;top:3px;right:3px;inset-inline-end:3px;inset-inline-start:initial}ha-tile-info{position:relative;min-width:0;transition:background-color 180ms ease-in-out;box-sizing:border-box}hui-card-features{--feature-color:var(--tile-color);padding:0 12px 12px 12px}.container.horizontal hui-card-features{width:calc(50% - var(--column-gap,0px)/ 2 - 12px);flex:none;--feature-height:36px;padding:0 12px;padding-inline-start:0}.alert-badge{--tile-badge-background-color:var(--orange-color)}.alerts{position:absolute;top:0;left:0;display:flex;flex-direction:row;gap:8px;padding:8px;pointer-events:none;z-index:1}.alert{background-color:var(--orange-color);border-radius:12px;width:24px;height:24px;padding:2px;box-sizing:border-box;--mdc-icon-size:16px;display:flex;align-items:center;justify-content:center;color:#fff}`)),(0,a.__decorate)([(0,n.Cb)({attribute:!1})],R.prototype,"hass",void 0),(0,a.__decorate)([(0,n.Cb)({attribute:!1})],R.prototype,"layout",void 0),(0,a.__decorate)([(0,n.SB)()],R.prototype,"_config",void 0),(0,a.__decorate)([(0,n.SB)()],R.prototype,"_featureContext",void 0),R=(0,a.__decorate)([(0,n.Mo)("hui-area-card")],R),o()}catch(S){o(S)}})}}]);
//# sourceMappingURL=59544.59c99eab4b02d3d4.js.map