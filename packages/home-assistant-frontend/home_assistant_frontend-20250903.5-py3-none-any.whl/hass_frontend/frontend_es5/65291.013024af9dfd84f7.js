"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["65291"],{65136:function(t,e,i){i.a(t,async function(t,e){try{i(44776),i(40777),i(26847),i(81738),i(22960),i(27530);var s=i(73742),n=i(59048),r=i(7616),o=i(39884),a=(i(993),i(91320)),h=i(69962),l=i(78879),d=t([h]);h=(d.then?(await d)():d)[0];class c extends n.fl{load(){if(!this.config)throw new Error("Cannot build badge without config");this._loadElement(this.config)}createRenderRoot(){return this}disconnectedCallback(){super.disconnectedCallback(),this._clearMediaQueries()}connectedCallback(){super.connectedCallback(),this._listenMediaQueries(),this._updateVisibility()}_updateElement(t){this._element&&(this._element.setConfig(t),this._elementConfig=t,(0,o.B)(this,"badge-updated"))}_loadElement(t){for(this._element=(0,h.JE)(t),this._elementConfig=t,this.hass&&(this._element.hass=this.hass),this._element.addEventListener("ll-upgrade",t=>{t.stopPropagation(),this.hass&&(this._element.hass=this.hass),(0,o.B)(this,"badge-updated")},{once:!0}),this._element.addEventListener("ll-rebuild",e=>{e.stopPropagation(),this._loadElement(t),(0,o.B)(this,"badge-updated")},{once:!0});this.lastChild;)this.removeChild(this.lastChild);this._updateVisibility()}willUpdate(t){super.willUpdate(t),this._element||this.load()}update(t){if(super.update(t),this._element){if(t.has("config")){const t=this._elementConfig;if(this.config!==t&&this.config){var e;(null===(e=this.config)||void 0===e?void 0:e.type)!==(null==t?void 0:t.type)?this._loadElement(this.config):this._updateElement(this.config)}}if(t.has("hass"))try{this.hass&&(this._element.hass=this.hass)}catch(i){this._loadElement((0,l.Fr)(i.message,null))}}(t.has("hass")||t.has("preview"))&&this._updateVisibility()}_clearMediaQueries(){this._listeners.forEach(t=>t()),this._listeners=[]}_listenMediaQueries(){var t;if(this._clearMediaQueries(),null===(t=this.config)||void 0===t||!t.visibility)return;const e=this.config.visibility,i=1===e.length&&"screen"===e[0].condition&&!!e[0].media_query;this._listeners=(0,a.av)(this.config.visibility,t=>{this._updateVisibility(i&&t)})}_updateVisibility(t){var e;if(!this._element||!this.hass)return;if(this._element.hidden)return void this._setElementVisibility(!1);const i=t||this.preview||!(null!==(e=this.config)&&void 0!==e&&e.visibility)||(0,a.Ec)(this.config.visibility,this.hass);this._setElementVisibility(i)}_setElementVisibility(t){this._element&&(this.hidden!==!t&&(this.style.setProperty("display",t?"":"none"),this.toggleAttribute("hidden",!t),(0,o.B)(this,"badge-visibility-changed",{value:t})),!t&&this._element.parentElement?this.removeChild(this._element):t&&!this._element.parentElement&&this.appendChild(this._element))}constructor(...t){super(...t),this.preview=!1,this._listeners=[]}}(0,s.__decorate)([(0,r.Cb)({type:Boolean})],c.prototype,"preview",void 0),(0,s.__decorate)([(0,r.Cb)({attribute:!1})],c.prototype,"config",void 0),(0,s.__decorate)([(0,r.Cb)({attribute:!1})],c.prototype,"hass",void 0),c=(0,s.__decorate)([(0,r.Mo)("hui-badge")],c),e()}catch(c){e(c)}})},14465:function(t,e,i){i.a(t,async function(t,s){try{i.r(e),i.d(e,{HuiEntityFilterBadge:function(){return f}});i(40777),i(26847),i(2394),i(81738),i(33480),i(94814),i(6989),i(72489),i(87799),i(27530);var n=i(73742),r=i(59048),o=i(7616),a=i(41885),h=i(55577),l=i(91320),d=i(65136),c=t([d]);d=(c.then?(await c)():c)[0];class f extends r.fl{setConfig(t){if(!t.entities.length||!Array.isArray(t.entities))throw new Error("Entities must be specified");if(!(t.conditions&&Array.isArray(t.conditions)||t.state_filter&&Array.isArray(t.state_filter)||t.entities.every(t=>"object"==typeof t&&t.state_filter&&Array.isArray(t.state_filter))))throw new Error("Incorrect filter config");for(;this.lastChild;)this.removeChild(this.lastChild);this._elements=void 0,this._configEntities=(0,h.A)(t.entities),this._oldEntities=void 0,this._config=t}createRenderRoot(){return this}shouldUpdate(t){return!!(t.has("_config")||t.has("hass")&&this._haveEntitiesChanged(t.get("hass")))}update(t){if(super.update(t),!this.hass||!this._configEntities)return;if(this._elements)for(const i of this._elements)i.hass=this.hass;const e=this._configEntities.filter(t=>{var e,i;const s=this.hass.states[t.entity];if(!s)return!1;const n=null!==(e=t.conditions)&&void 0!==e?e:this._config.conditions;if(n){const e=n.map(e=>(0,l.Mo)(e,t.entity));return(0,l.Ec)(e,this.hass)}const r=null!==(i=t.state_filter)&&void 0!==i?i:this._config.state_filter;return!!r&&r.some(t=>(0,a.j)(s,t))});if(0===e.length)return this.style.display="none",void(this._oldEntities=e);if(!(this._oldEntities&&e.length===this._oldEntities.length&&e.every((t,e)=>t===this._oldEntities[e]))){this._elements=[];for(const t of e){const e=document.createElement("hui-badge");e.hass=this.hass,e.preview=this.preview,e.config=Object.assign({type:"entity"},t),e.load(),this._elements.push(e)}this._oldEntities=e}if(this._elements){for(;this.lastChild;)this.removeChild(this.lastChild);for(const t of this._elements)this.appendChild(t);this.style.display="flex",this.style.flexWrap="wrap",this.style.justifyContent="center",this.style.gap="8px"}}_haveEntitiesChanged(t){var e;if(!t)return!0;if(!this._oldEntities||this.hass.localize!==t.localize)return!0;for(const s of this._configEntities){if(this.hass.states[s.entity]!==t.states[s.entity])return!0;if(s.conditions){const e=(0,l.UK)(s.conditions);for(const i of e)if(this.hass.states[i]!==t.states[i])return!0}}if(null!==(e=this._config)&&void 0!==e&&e.conditions){var i;const e=(0,l.UK)(null===(i=this._config)||void 0===i?void 0:i.conditions);for(const i of e)if(this.hass.states[i]!==t.states[i])return!0}return!1}constructor(...t){super(...t),this.preview=!1}}(0,n.__decorate)([(0,o.Cb)({attribute:!1})],f.prototype,"preview",void 0),(0,n.__decorate)([(0,o.Cb)({attribute:!1})],f.prototype,"hass",void 0),(0,n.__decorate)([(0,o.SB)()],f.prototype,"_config",void 0),f=(0,n.__decorate)([(0,o.Mo)("hui-entity-filter-badge")],f),s()}catch(f){s(f)}})},41885:function(t,e,i){i.d(e,{j:function(){return s}});i(39710),i(81738),i(6989),i(21700),i(65640),i(28660),i(64455),i(32192),i(56303),i(56389),i(20655);const s=(t,e)=>{let i,s,n;if("object"==typeof e?(i=e.operator,s=e.value,n=e.attribute?t.attributes[e.attribute]:t.state):(i="==",s=e,n=t.state),"=="===i||"!="===i){const t="number"==typeof s||"string"==typeof s&&s.trim()&&!isNaN(Number(s)),e="number"==typeof n||"string"==typeof n&&n.trim()&&!isNaN(Number(n));t&&e&&(s=Number(s),n=Number(n))}switch(i){case"==":return n===s;case"<=":return n<=s;case"<":return n<s;case">=":return n>=s;case">":return n>s;case"!=":return n!==s;case"in":return!(!Array.isArray(s)&&"string"!=typeof s)&&(Array.isArray(s)&&(s=s.map(t=>`${t}`)),s.includes(n));case"not in":return!(!Array.isArray(s)&&"string"!=typeof s)&&(Array.isArray(s)&&(s=s.map(t=>`${t}`)),!s.includes(n));case"regex":return"string"==typeof s&&(null!==n&&"object"==typeof n?RegExp(s).test(JSON.stringify(n)):RegExp(s).test(n));default:return!1}}}}]);
//# sourceMappingURL=65291.013024af9dfd84f7.js.map