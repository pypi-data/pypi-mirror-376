"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["84428"],{37514:function(t,i,e){e.d(i,{b:function(){return s}});e(26847),e(18574),e(81738),e(22960),e(27530);var o=e(95710),a=e(9763);const r=!1;o.O._pipeline.generator.register("default",t=>{t.sort((t,i)=>i.population-t.population);const i=t[0];let e;const o=new Map,s=(t,e)=>(o.has(t)||o.set(t,(0,a.$o)(i.rgb,e)),o.get(t)>4.5);for(let a=1;a<t.length&&void 0===e;a++){if(s(t[a].hex,t[a].rgb)){r,e=t[a].rgb;break}const i=t[a];r;for(let o=a+1;o<t.length;o++){const a=t[o],n=Math.abs(i.rgb[0]-a.rgb[0])+Math.abs(i.rgb[1]-a.rgb[1])+Math.abs(i.rgb[2]-a.rgb[2]);if(!(n>150)&&s(a.hex,a.rgb)){r,e=a.rgb;break}}}return void 0===e&&(e=i.getYiq()<200?[255,255,255]:[0,0,0]),{foreground:new i.constructor(e,0),background:i}});const s=(t,i=16)=>new o.O(t,{colorCount:i}).getPalette().then(({foreground:t,background:i})=>({background:i,foreground:t}))},17088:function(t,i,e){e.d(i,{S:function(){return a}});e(26847),e(1455),e(27530);var o=e(39884);const a=(t,i)=>{(0,o.B)(t,"show-dialog",{dialogTag:"dialog-join-media-players",dialogImport:()=>Promise.all([e.e("75696"),e.e("76782"),e.e("78003")]).then(e.bind(e,1106)),dialogParams:i})}},69655:function(t,i,e){e.d(i,{B:function(){return a}});e(26847),e(1455),e(27530);var o=e(39884);const a=(t,i)=>{(0,o.B)(t,"show-dialog",{dialogTag:"dialog-media-player-browse",dialogImport:()=>Promise.all([e.e("73614"),e.e("2243"),e.e("97103"),e.e("75696"),e.e("15486"),e.e("86689"),e.e("15601"),e.e("98831"),e.e("99028"),e.e("46118"),e.e("15634"),e.e("22092"),e.e("56932"),e.e("26452"),e.e("76782"),e.e("88791"),e.e("39432"),e.e("2769"),e.e("19596"),e.e("21542"),e.e("13737"),e.e("58319")]).then(e.bind(e,97684)),dialogParams:i})}},16:function(t,i,e){e.a(t,async function(t,o){try{e.r(i),e.d(i,{HuiMediaControlCard:function(){return W}});var a=e(83788),r=(e(40777),e(26847),e(81738),e(6989),e(1455),e(27530),e(73742)),s=e(61611),n=e(59048),d=e(7616),c=e(31733),h=e(36180),l=e(4427),g=e(39884),u=e(15459),p=e(36590),_=e(37514),m=e(28350),b=e(87639),v=(e(31138),e(48017),e(73048)),f=e(69655),y=e(16230),w=e(80709),x=e(45063),k=e(93647),$=(e(48586),e(99389)),C=e(17088),A=t([a,s,v]);[a,s,v]=A.then?(await A)():A;let O,B,I,z,M,q,j,P,S,H,V,E,L=t=>t;const U="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",N="M4,6H2V20A2,2 0 0,0 4,22H18V20H4V6M20,2H8A2,2 0 0,0 6,4V16A2,2 0 0,0 8,18H20A2,2 0 0,0 22,16V4A2,2 0 0,0 20,2M12,14.5V5.5L18,10L12,14.5Z",R="M14,10A3,3 0 0,0 11,13A3,3 0 0,0 14,16A3,3 0 0,0 17,13A3,3 0 0,0 14,10M14,18A5,5 0 0,1 9,13A5,5 0 0,1 14,8A5,5 0 0,1 19,13A5,5 0 0,1 14,18M14,2A2,2 0 0,1 16,4A2,2 0 0,1 14,6A2,2 0 0,1 12,4A2,2 0 0,1 14,2M19,0H9A2,2 0 0,0 7,2V18A2,2 0 0,0 9,20H19A2,2 0 0,0 21,18V2A2,2 0 0,0 19,0M5,22H17V24H5A2,2 0 0,1 3,22V4H5";class W extends n.oi{static async getConfigElement(){return await Promise.all([e.e("73614"),e.e("86689"),e.e("15601"),e.e("15634"),e.e("26452"),e.e("2769"),e.e("19596"),e.e("80536")]).then(e.bind(e,44586)),document.createElement("hui-media-control-card-editor")}static getStubConfig(t,i,e){return{type:"media-control",entity:(0,x.j)(t,1,i,e,["media_player"])[0]||""}}getCardSize(){return 3}setConfig(t){if(!t.entity||"media_player"!==t.entity.split(".")[0])throw new Error("Specify an entity from within the media_player domain");this._config=t,this.updateComplete.then(()=>this._measureCard())}connectedCallback(){if(super.connectedCallback(),this.updateComplete.then(()=>this._attachObserver()),!this.hass||!this._config)return;const t=this._stateObj;t&&!this._progressInterval&&this._showProgressBar&&"playing"===t.state&&(this._progressInterval=window.setInterval(()=>this._updateProgressBar(),1e3))}disconnectedCallback(){super.disconnectedCallback(),this._progressInterval&&(clearInterval(this._progressInterval),this._progressInterval=void 0),this._resizeObserver&&this._resizeObserver.disconnect()}render(){var t,i;if(!this.hass||!this._config)return n.Ld;const e=this._stateObj;if(!e)return(0,n.dy)(O||(O=L` <hui-warning .hass="${0}"> ${0} </hui-warning> `),this.hass,(0,$.i)(this.hass,this._config.entity));const o={"background-image":this._image?`url(${this.hass.hassUrl(this._image)})`:"none",width:`${this._cardHeight}px`,"background-color":this._backgroundColor||""},a={"background-image":`linear-gradient(to right, ${this._backgroundColor}, ${this._backgroundColor+"00"})`,width:`${this._cardHeight}px`},r=e.state,s=!(0,m.v)(e)&&!(0,y.rk)(r),d=(0,y.rk)(r)||s&&!(0,p.e)(e,w.yZ.TURN_ON),l=!this._image,g=(0,w.xt)(e,!1),_=g&&(!this._veryNarrow||s||"idle"===r||"on"===r),b=(0,w.Mj)(e),v=(0,w.WL)(e.attributes.media_title),f=null===(t=e.attributes.group_members)||void 0===t?void 0:t.length;return(0,n.dy)(B||(B=L` <ha-card> <div class="background ${0}"> <div class="color-block" style="${0}"></div> <div class="no-img" style="${0}"></div> <div class="image" style="${0}"></div> ${0} </div> <div class="player ${0}" style="${0}"> <div class="top-info"> <div class="icon-name"> <ha-state-icon class="icon" .stateObj="${0}" .hass="${0}"></ha-state-icon> <div> ${0} </div> </div> <div> <ha-icon-button .path="${0}" .label="${0}" class="more-info" @click="${0}"></ha-icon-button> </div> </div> ${0} </div> </ha-card> `),(0,c.$)({"no-image":l,off:s||d,unavailable:d}),(0,h.V)({"background-color":this._backgroundColor||""}),(0,h.V)({"background-color":this._backgroundColor||""}),(0,h.V)(o),l?"":(0,n.dy)(I||(I=L` <div class="color-gradient" style="${0}"></div> `),(0,h.V)(a)),(0,c.$)({"no-image":l,narrow:this._narrow&&!this._veryNarrow,off:s||d,"no-progress":this._veryNarrow||!this._showProgressBar,"no-controls":!_}),(0,h.V)({color:this._foregroundColor||""}),e,this.hass,this._config.name||(0,u.C)(this.hass.states[this._config.entity]),U,this.hass.localize("ui.panel.lovelace.cards.show_more_info"),this._handleMoreInfo,!d&&(b||v||_)?(0,n.dy)(z||(z=L` <div> <div class="title-controls"> ${0} ${0} </div> ${0} </div> `),b||v?(0,n.dy)(M||(M=L` <div class="media-info"> <hui-marquee .text="${0}" .active="${0}" @mouseover="${0}" @mouseleave="${0}"></hui-marquee> ${0} </div> `),v||b,this._marqueeActive,this._marqueeMouseOver,this._marqueeMouseLeave,v?b:""):"",_?(0,n.dy)(q||(q=L` <div class="controls"> <div class="start"> ${0} </div> <div class="end"> ${0} ${0} </div> </div> `),g.map(t=>(0,n.dy)(j||(j=L` <ha-icon-button .label="${0}" .path="${0}" action="${0}" @click="${0}"> </ha-icon-button> `),this.hass.localize(`ui.card.media_player.${t.action}`),t.icon,t.action,this._handleClick)),(0,p.e)(e,w.yZ.BROWSE_MEDIA)?(0,n.dy)(P||(P=L` <ha-icon-button class="browse-media" .label="${0}" .path="${0}" @click="${0}"></ha-icon-button> `),this.hass.localize("ui.card.media_player.browse_media"),N,this._handleBrowseMedia):"",(0,p.e)(e,w.yZ.GROUPING)?(0,n.dy)(S||(S=L` <ha-icon-button class="join-media" .label="${0}" @click="${0}"> <ha-svg-icon .path="${0}"></ha-svg-icon> ${0} </ha-icon-button> `),this.hass.localize("ui.card.media_player.join"),this._handleJoinMediaPlayers,R,f&&f>1?(0,n.dy)(H||(H=L`<span class="badge"> ${0} </span>`),null===(i=e.attributes.group_members)||void 0===i?void 0:i.length):n.Ld):""):"",this._showProgressBar?(0,n.dy)(V||(V=L` <mwc-linear-progress determinate style="${0}" @click="${0}"> </mwc-linear-progress> `),(0,h.V)({"--mdc-theme-primary":this._foregroundColor||"var(--accent-color)",cursor:(0,p.e)(e,w.yZ.SEEK)?"pointer":"initial"}),this._handleSeek):""):"")}shouldUpdate(t){return(0,k.G2)(this,t)||t.size>1||!t.has("hass")}firstUpdated(){this._attachObserver(),this._measureCard()}willUpdate(t){var i,e;if(super.willUpdate(t),!this._config||!this.hass||!t.has("_config")&&!t.has("hass"))return;if(!this._stateObj)return this._progressInterval&&(clearInterval(this._progressInterval),this._progressInterval=void 0),this._foregroundColor=void 0,void(this._backgroundColor=void 0);const o=t.get("hass"),a=(null==o||null===(i=o.states[this._config.entity])||void 0===i?void 0:i.attributes.entity_picture_local)||(null==o||null===(e=o.states[this._config.entity])||void 0===e?void 0:e.attributes.entity_picture);if(!this._image)return this._foregroundColor=void 0,void(this._backgroundColor=void 0);this._image!==a&&this._setColors()}updated(t){if(!this._config||!this.hass||!this._stateObj||!t.has("_config")&&!t.has("hass"))return;const i=this._stateObj,e=t.get("hass"),o=t.get("_config");e&&o&&e.themes===this.hass.themes&&o.theme===this._config.theme||(0,l.R)(this,this.hass.themes,this._config.theme),this._updateProgressBar(),!this._progressInterval&&this._showProgressBar&&"playing"===i.state?this._progressInterval=window.setInterval(()=>this._updateProgressBar(),1e3):!this._progressInterval||this._showProgressBar&&"playing"===i.state||(clearInterval(this._progressInterval),this._progressInterval=void 0)}get _image(){if(!this.hass||!this._config)return;const t=this._stateObj;return t?t.attributes.entity_picture_local||t.attributes.entity_picture:void 0}get _showProgressBar(){if(!this.hass||!this._config||this._narrow)return!1;const t=this._stateObj;return!!t&&(("playing"===t.state||"paused"===t.state)&&"media_duration"in t.attributes&&"media_position"in t.attributes)}_measureCard(){const t=this.shadowRoot.querySelector("ha-card");t&&(this._narrow=t.offsetWidth<350,this._veryNarrow=t.offsetWidth<300,this._cardHeight=t.offsetHeight)}async _attachObserver(){this._resizeObserver||(this._resizeObserver=new ResizeObserver((0,b.D)(()=>this._measureCard(),250,!1)));const t=this.shadowRoot.querySelector("ha-card");t&&this._resizeObserver.observe(t)}_handleMoreInfo(){(0,g.B)(this,"hass-more-info",{entityId:this._config.entity})}_handleBrowseMedia(){(0,f.B)(this,{action:"play",entityId:this._config.entity,mediaPickedCallback:t=>(0,w.qV)(this.hass,this._config.entity,t.item.media_content_id,t.item.media_content_type)})}_handleJoinMediaPlayers(){(0,C.S)(this,{entityId:this._config.entity})}_handleClick(t){(0,w.kr)(this.hass,this._stateObj,t.currentTarget.getAttribute("action"))}_updateProgressBar(){var t;this._progressBar&&null!==(t=this._stateObj)&&void 0!==t&&t.attributes.media_duration&&(this._progressBar.progress=(0,w.rs)(this._stateObj)/this._stateObj.attributes.media_duration)}get _stateObj(){return this.hass.states[this._config.entity]}_handleSeek(t){const i=this._stateObj;if(!(0,p.e)(i,w.yZ.SEEK))return;const e=this._progressBar.offsetWidth,o=t.offsetX/e,a=this._stateObj.attributes.media_duration*o;this.hass.callService("media_player","media_seek",{entity_id:this._config.entity,seek_position:a})}async _setColors(){if(this._image)try{const{foreground:t,background:i}=await(0,_.b)(this.hass.hassUrl(this._image));this._backgroundColor=i.hex,this._foregroundColor=t.hex}catch(t){console.error("Error getting Image Colors",t),this._foregroundColor=void 0,this._backgroundColor=void 0}}_marqueeMouseOver(){this._marqueeActive||(this._marqueeActive=!0)}_marqueeMouseLeave(){this._marqueeActive&&(this._marqueeActive=!1)}constructor(...t){super(...t),this._narrow=!1,this._veryNarrow=!1,this._cardHeight=0,this._marqueeActive=!1}}W.styles=(0,n.iv)(E||(E=L`ha-card{overflow:hidden;height:100%}.background{display:flex;position:absolute;top:0;left:0;height:100%;width:100%;transition:filter .8s}.color-block{background-color:var(--primary-color);transition:background-color .8s;width:100%}.color-gradient{position:absolute;background-image:linear-gradient(to right,var(--primary-color),transparent);height:100%;right:0;opacity:1;transition:width .8s,opacity .8s linear .8s}.image{background-color:var(--primary-color);background-position:center;background-size:cover;background-repeat:no-repeat;position:absolute;right:0;height:100%;opacity:1;transition:width .8s,background-image .8s,background-color .8s,background-size .8s,opacity .8s linear .8s}.no-image .image{opacity:0}.no-img{background-color:var(--primary-color);background-size:initial;background-repeat:no-repeat;background-position:center center;padding-bottom:0;position:absolute;right:0;height:100%;background-image:url("/static/images/card_media_player_bg.png");width:50%;transition:opacity .8s,background-color .8s}.off .color-gradient,.off .image{opacity:0;transition:opacity 0s,width .8s;width:0}.background:not(.off):not(.no-image) .no-img,.unavailable .no-img{opacity:0}.player{position:relative;padding:16px;height:100%;box-sizing:border-box;display:flex;flex-direction:column;justify-content:space-between;color:var(--text-primary-color);transition-property:color,padding;transition-duration:.4s}.controls{padding:8px 8px 8px 0;display:flex;justify-content:flex-start;align-items:center;transition:padding,color;transition-duration:.4s;margin-left:-12px;margin-inline-start:-12px;margin-inline-end:initial;padding-inline-start:0;padding-inline-end:8px;direction:ltr}.controls>div{display:flex;align-items:center}.controls>.start{flex-grow:1}.controls ha-icon-button{--mdc-icon-button-size:44px;--mdc-icon-size:30px}ha-icon-button[action=media_pause],ha-icon-button[action=media_play],ha-icon-button[action=media_play_pause],ha-icon-button[action=media_stop],ha-icon-button[action=turn_off],ha-icon-button[action=turn_on]{--mdc-icon-button-size:56px;--mdc-icon-size:40px}ha-icon-button.browse-media{--mdc-icon-size:24px;inset-inline-end:4px;inset-inline-start:initial}ha-icon-button.join-media{--mdc-icon-size:24px;inset-inline-end:4px;inset-inline-start:initial}.top-info{display:flex;justify-content:space-between}.icon-name{display:flex;height:fit-content;align-items:center}.icon-name ha-state-icon{padding-right:8px;padding-inline-start:initial;padding-inline-end:8px;direction:var(--direction)}.more-info{position:absolute;top:4px;right:4px;inset-inline-start:initial;inset-inline-end:4px;direction:var(--direction)}.media-info{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}hui-marquee{font-size:1.2em;margin:0px 0 4px}.title-controls{padding-top:16px}mwc-linear-progress{width:100%;margin-top:4px;--mdc-linear-progress-buffer-color:rgba(200, 200, 200, 0.5)}.no-image .controls{padding:0}.off.background{filter:grayscale(1)}.narrow .controls,.no-progress .controls{padding-bottom:0}.narrow ha-icon-button{--mdc-icon-button-size:40px;--mdc-icon-size:28px}.narrow ha-icon-button[action=media_pause],.narrow ha-icon-button[action=media_play],.narrow ha-icon-button[action=media_play_pause],.narrow ha-icon-button[action=turn_on]{--mdc-icon-button-size:50px;--mdc-icon-size:36px}.narrow ha-icon-button.browse-media{--mdc-icon-size:24px}.no-progress.player:not(.no-controls){padding-bottom:0px}.badge{position:absolute;top:0;right:0;width:auto;height:auto;display:flex;justify-content:center;align-items:center;min-width:8px;min-height:16px;border-radius:10px;font-weight:var(--ha-font-weight-normal);font-size:var(--ha-font-size-xs);background-color:var(--accent-color);padding:0 4px;color:var(--text-accent-color,var(--text-primary-color))}`)),(0,r.__decorate)([(0,d.Cb)({attribute:!1})],W.prototype,"hass",void 0),(0,r.__decorate)([(0,d.SB)()],W.prototype,"_config",void 0),(0,r.__decorate)([(0,d.SB)()],W.prototype,"_foregroundColor",void 0),(0,r.__decorate)([(0,d.SB)()],W.prototype,"_backgroundColor",void 0),(0,r.__decorate)([(0,d.SB)()],W.prototype,"_narrow",void 0),(0,r.__decorate)([(0,d.SB)()],W.prototype,"_veryNarrow",void 0),(0,r.__decorate)([(0,d.SB)()],W.prototype,"_cardHeight",void 0),(0,r.__decorate)([(0,d.IO)("mwc-linear-progress")],W.prototype,"_progressBar",void 0),(0,r.__decorate)([(0,d.SB)()],W.prototype,"_marqueeActive",void 0),W=(0,r.__decorate)([(0,d.Mo)("hui-media-control-card")],W),o()}catch(O){o(O)}})},48586:function(t,i,e){e(26847),e(27530);var o=e(73742),a=e(59048),r=e(7616);let s,n,d,c=t=>t;class h extends a.oi{firstUpdated(t){super.firstUpdated(t),this.addEventListener("mouseover",()=>this.classList.add("hovering"),{capture:!0}),this.addEventListener("mouseout",()=>this.classList.remove("hovering"))}updated(t){super.updated(t),t.has("text")&&this.animating&&(this.animating=!1),t.has("active")&&this.active&&this.offsetWidth<this.scrollWidth&&(this.animating=!0)}render(){return this.text?(0,a.dy)(s||(s=c` <div class="marquee-inner" @animationiteration="${0}"> <span>${0}</span> ${0} </div> `),this._onIteration,this.text,this.animating?(0,a.dy)(n||(n=c` <span>${0}</span> `),this.text):""):a.Ld}_onIteration(){this.active||(this.animating=!1)}constructor(...t){super(...t),this.active=!1,this.animating=!1}}h.styles=(0,a.iv)(d||(d=c`:host{display:flex;position:relative;align-items:center;height:1.2em;contain:strict}.marquee-inner{position:absolute;left:0;right:0;text-overflow:ellipsis;overflow:hidden}:host(.hovering) .marquee-inner{text-overflow:initial;overflow:initial}:host([animating]) .marquee-inner{left:initial;right:initial;animation:marquee 10s linear infinite}:host([animating]) .marquee-inner span{padding-right:16px;padding-inline-end:16px;padding-inline-start:initial}@keyframes marquee{0%{transform:translateX(0%)}100%{transform:translateX(-50%)}}`)),(0,o.__decorate)([(0,r.Cb)()],h.prototype,"text",void 0),(0,o.__decorate)([(0,r.Cb)({type:Boolean})],h.prototype,"active",void 0),(0,o.__decorate)([(0,r.Cb)({reflect:!0,type:Boolean})],h.prototype,"animating",void 0),h=(0,o.__decorate)([(0,r.Mo)("hui-marquee")],h)}}]);
//# sourceMappingURL=84428.416c4269a52d0a72.js.map