/*! For license information please see 92743.d1e10bbb020595be.js.LICENSE.txt */
export const __webpack_ids__=["92743"];export const __webpack_modules__={36723:function(e,t,i){i.d(t,{O:()=>h});var a=i(73742),o=i(94068),s=i(59048),n=i(26292),r=i(31733),d=i(25191),l=i(96480);const c={fromAttribute:e=>null!==e&&(""===e||e),toAttribute:e=>"boolean"==typeof e?e?"":null:e};class h extends o.P{render(){const e=this.charCounter&&-1!==this.maxLength,t=e&&"internal"===this.charCounter,i=e&&!t,a=!!this.helper||!!this.validationMessage||i,o={"mdc-text-field--disabled":this.disabled,"mdc-text-field--no-label":!this.label,"mdc-text-field--filled":!this.outlined,"mdc-text-field--outlined":this.outlined,"mdc-text-field--end-aligned":this.endAligned,"mdc-text-field--with-internal-counter":t};return s.dy` <label class="mdc-text-field mdc-text-field--textarea ${(0,r.$)(o)}"> ${this.renderRipple()} ${this.outlined?this.renderOutline():this.renderLabel()} ${this.renderInput()} ${this.renderCharCounter(t)} ${this.renderLineRipple()} </label> ${this.renderHelperText(a,i)} `}renderInput(){const e=this.label?"label":void 0,t=-1===this.minLength?void 0:this.minLength,i=-1===this.maxLength?void 0:this.maxLength,a=this.autocapitalize?this.autocapitalize:void 0;return s.dy` <textarea aria-labelledby="${(0,d.o)(e)}" class="mdc-text-field__input" .value="${(0,l.a)(this.value)}" rows="${this.rows}" cols="${this.cols}" ?disabled="${this.disabled}" placeholder="${this.placeholder}" ?required="${this.required}" ?readonly="${this.readOnly}" minlength="${(0,d.o)(t)}" maxlength="${(0,d.o)(i)}" name="${(0,d.o)(""===this.name?void 0:this.name)}" inputmode="${(0,d.o)(this.inputMode)}" autocapitalize="${(0,d.o)(a)}" @input="${this.handleInputChange}" @blur="${this.onInputBlur}">
      </textarea>`}constructor(){super(...arguments),this.rows=2,this.cols=20,this.charCounter=!1}}(0,a.__decorate)([(0,n.IO)("textarea")],h.prototype,"formElement",void 0),(0,a.__decorate)([(0,n.Cb)({type:Number})],h.prototype,"rows",void 0),(0,a.__decorate)([(0,n.Cb)({type:Number})],h.prototype,"cols",void 0),(0,a.__decorate)([(0,n.Cb)({converter:c})],h.prototype,"charCounter",void 0)},31254:function(e,t,i){i.d(t,{W:()=>a});const a=i(59048).iv`.mdc-text-field{height:100%}.mdc-text-field__input{resize:none}`},16037:function(e,t,i){i.d(t,{V:()=>o});var a=i(53049);const o=(e,t)=>(e=>{switch(e){case"de":case"lb":return!0;default:return!1}})(t)?(0,a.f)(e):e.toLocaleLowerCase(t)},21682:function(e,t,i){i.d(t,{q:()=>a});const a=e=>{const t=window.location.pathname;return e?t+"?"+e:t}},78206:function(e,t,i){i.a(e,async function(e,t){try{var a=i(73742),o=i(59048),s=i(26292),n=i(31733),r=i(72953),d=i(6514),l=(i(993),e([r,d]));[r,d]=l.then?(await l)():l;const c="M2.2,16.06L3.88,12L2.2,7.94L6.26,6.26L7.94,2.2L12,3.88L16.06,2.2L17.74,6.26L21.8,7.94L20.12,12L21.8,16.06L17.74,17.74L16.06,21.8L12,20.12L7.94,21.8L6.26,17.74L2.2,16.06M13,17V15H11V17H13M13,13V7H11V13H13Z",h="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z";class p extends o.oi{render(){const e=this.progress||this._result?"accent":this.appearance;return o.dy` <ha-button .appearance="${e}" .disabled="${this.disabled}" .loading="${this.progress}" .variant="${"success"===this._result?"success":"error"===this._result?"danger":this.variant}" class="${(0,n.$)({result:!!this._result,success:"success"===this._result,error:"error"===this._result})}"> ${this.iconPath?o.dy`<ha-svg-icon .path="${this.iconPath}" slot="start"></ha-svg-icon>`:o.Ld} <slot>${this.label}</slot> </ha-button> ${this._result?o.dy` <div class="progress"> ${"success"===this._result?o.dy`<ha-svg-icon .path="${h}"></ha-svg-icon>`:"error"===this._result?o.dy`<ha-svg-icon .path="${c}"></ha-svg-icon>`:o.Ld} </div> `:o.Ld} `}actionSuccess(){this._setResult("success")}actionError(){this._setResult("error")}_setResult(e){this._result=e,setTimeout(()=>{this._result=void 0},2e3)}constructor(...e){super(...e),this.disabled=!1,this.progress=!1,this.appearance="accent",this.variant="brand"}}p.styles=o.iv`:host{outline:0;display:inline-block;position:relative}:host([progress]){pointer-events:none}.progress{bottom:0;display:flex;justify-content:center;align-items:center;position:absolute;top:0;width:100%}ha-button{width:100%}ha-button.result::part(caret),ha-button.result::part(end),ha-button.result::part(label),ha-button.result::part(spinner),ha-button.result::part(start){visibility:hidden}ha-svg-icon{color:var(--white-color)}`,(0,a.__decorate)([(0,s.Cb)()],p.prototype,"label",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],p.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,reflect:!0})],p.prototype,"progress",void 0),(0,a.__decorate)([(0,s.Cb)()],p.prototype,"appearance",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:!1})],p.prototype,"iconPath",void 0),(0,a.__decorate)([(0,s.Cb)()],p.prototype,"variant",void 0),(0,a.__decorate)([(0,s.SB)()],p.prototype,"_result",void 0),p=(0,a.__decorate)([(0,s.Mo)("ha-progress-button")],p),t()}catch(e){t(e)}})},8685:function(e,t,i){var a=i(73742),o=i(59048),s=i(26292),n=i(31733),r=i(25191);i(82601);class d extends o.oi{render(){const e=this.label;return o.dy` <div class="badge ${(0,n.$)({"icon-only":this.iconOnly})}" role="${(0,r.o)("button"===this.type?"button":void 0)}" tabindex="${(0,r.o)("button"===this.type?"0":void 0)}"> <ha-ripple .disabled="${"button"!==this.type}"></ha-ripple> <slot name="icon"></slot> ${this.iconOnly?o.Ld:o.dy`<span class="info"> ${e?o.dy`<span class="label">${e}</span>`:o.Ld} <span class="content"><slot></slot></span> </span>`} </div> `}constructor(...e){super(...e),this.type="badge",this.iconOnly=!1}}d.styles=o.iv`:host{--badge-color:var(--secondary-text-color);-webkit-tap-highlight-color:transparent}.badge{position:relative;--ha-ripple-color:var(--badge-color);--ha-ripple-hover-opacity:0.04;--ha-ripple-pressed-opacity:0.12;transition:box-shadow 180ms ease-in-out,border-color 180ms ease-in-out;display:flex;flex-direction:row;align-items:center;justify-content:center;gap:8px;height:var(--ha-badge-size,36px);min-width:var(--ha-badge-size,36px);padding:0px 12px;box-sizing:border-box;width:auto;border-radius:var(--ha-badge-border-radius,calc(var(--ha-badge-size,36px)/ 2));background:var(--ha-card-background,var(--card-background-color,#fff));-webkit-backdrop-filter:var(--ha-card-backdrop-filter,none);backdrop-filter:var(--ha-card-backdrop-filter,none);border-width:var(--ha-card-border-width,1px);box-shadow:var(--ha-card-box-shadow,none);border-style:solid;border-color:var(--ha-card-border-color,var(--divider-color,#e0e0e0))}.badge:focus-visible{--shadow-default:var(--ha-card-box-shadow, 0 0 0 0 transparent);--shadow-focus:0 0 0 1px var(--badge-color);border-color:var(--badge-color);box-shadow:var(--shadow-default),var(--shadow-focus)}[role=button]{cursor:pointer}[role=button]:focus{outline:0}.info{display:flex;flex-direction:column;align-items:flex-start;padding-inline-start:initial;text-align:center}.label{font-size:var(--ha-font-size-xs);font-style:normal;font-weight:var(--ha-font-weight-medium);line-height:10px;letter-spacing:.1px;color:var(--secondary-text-color)}.content{font-size:var(--ha-badge-font-size, var(--ha-font-size-s));font-style:normal;font-weight:var(--ha-font-weight-medium);line-height:var(--ha-line-height-condensed);letter-spacing:.1px;color:var(--primary-text-color)}::slotted([slot=icon]){--mdc-icon-size:var(--ha-badge-icon-size, 18px);color:var(--badge-color);line-height:0;margin-left:-4px;margin-right:0;margin-inline-start:-4px;margin-inline-end:0}::slotted(img[slot=icon]){width:30px;height:30px;border-radius:50%;object-fit:cover;overflow:hidden;margin-left:-10px;margin-right:0;margin-inline-start:-10px;margin-inline-end:0}.badge.icon-only{padding:0}.badge.icon-only ::slotted([slot=icon]){margin-left:0;margin-right:0;margin-inline-start:0;margin-inline-end:0}`,(0,a.__decorate)([(0,s.Cb)()],d.prototype,"type",void 0),(0,a.__decorate)([(0,s.Cb)()],d.prototype,"label",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,attribute:"icon-only"})],d.prototype,"iconOnly",void 0),d=(0,a.__decorate)([(0,s.Mo)("ha-badge")],d)},81010:function(e,t,i){i(81738),i(94814),i(6989);var a=i(73742),o=i(59048),s=i(26292),n=i(28105),r=i(39884),d=i(98921),l=i(36221),c=i(80972);i(69760),i(86633);class h extends o.oi{open(){const e=this.shadowRoot?.querySelector("ha-select");e&&(e.menuOpen=!0)}render(){return this.hass?o.dy` <ha-select .label="${this.label||this.hass.localize("ui.components.blueprint-picker.select_blueprint")}" fixedMenuPosition naturalMenuWidth .value="${this.value}" .disabled="${this.disabled}" @selected="${this._blueprintChanged}" @closed="${d.U}"> ${this._processedBlueprints(this.blueprints).map(e=>o.dy` <ha-list-item .value="${e.path}"> ${e.name} </ha-list-item> `)} </ha-select> `:o.Ld}firstUpdated(e){super.firstUpdated(e),void 0===this.blueprints&&(0,c.wc)(this.hass,this.domain).then(e=>{this.blueprints=e})}_blueprintChanged(e){const t=e.target.value;t!==this.value&&(this.value=t,setTimeout(()=>{(0,r.B)(this,"value-changed",{value:t}),(0,r.B)(this,"change")},0))}constructor(...e){super(...e),this.value="",this.domain="automation",this.disabled=!1,this._processedBlueprints=(0,n.Z)(e=>{if(!e)return[];return Object.entries(e).filter(e=>!("error"in e[1])).map(([e,t])=>({...t.metadata,path:e})).sort((e,t)=>(0,l.$K)(e.name,t.name,this.hass.locale.language))})}}h.styles=o.iv`:host{display:inline-block}ha-select{width:100%;min-width:200px;display:block}`,(0,a.__decorate)([(0,s.Cb)()],h.prototype,"label",void 0),(0,a.__decorate)([(0,s.Cb)()],h.prototype,"value",void 0),(0,a.__decorate)([(0,s.Cb)()],h.prototype,"domain",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:!1})],h.prototype,"blueprints",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],h.prototype,"disabled",void 0),h=(0,a.__decorate)([(0,s.Mo)("ha-blueprint-picker")],h)},65958:function(e,t,i){var a=i(73742),o=i(59048),s=i(26292),n=i(36180),r=i(39884);class d extends o.oi{render(){return o.dy`<dialog open @transitionend="${this._handleTransitionEnd}" style="${(0,n.V)({height:this._dialogViewportHeight?`${this._dialogViewportHeight}vh`:"auto",maxHeight:`${this._dialogMaxViewpointHeight}vh`,minHeight:`${this._dialogMinViewpointHeight}vh`})}"> <div class="handle-wrapper"> <div @mousedown="${this._handleMouseDown}" @touchstart="${this._handleTouchStart}" class="handle"></div> </div> <slot></slot> </dialog>`}firstUpdated(e){super.firstUpdated(e),this._openSheet()}_openSheet(){requestAnimationFrame(()=>{this._dialog.classList.add("show")})}closeSheet(){requestAnimationFrame(()=>{this._dialog.classList.remove("show")})}_handleTransitionEnd(){this._dialog.classList.contains("show")?(this._dialogViewportHeight=this._dialog.offsetHeight/window.innerHeight*100,this._dialogMaxViewpointHeight=90,this._dialogMinViewpointHeight=20):(this._dialog.close(),(0,r.B)(this,"bottom-sheet-closed"))}connectedCallback(){super.connectedCallback(),document.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp),document.addEventListener("touchmove",this._handleTouchMove,{passive:!1}),document.addEventListener("touchend",this._handleTouchEnd),document.addEventListener("touchcancel",this._handleTouchEnd)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),document.removeEventListener("touchmove",this._handleTouchMove),document.removeEventListener("touchend",this._handleTouchEnd),document.removeEventListener("touchcancel",this._handleTouchEnd)}_startDrag(e){this._dragging=!0,this._dragStartY=e,this._initialSize=this._dialog.offsetHeight/window.innerHeight*100,document.body.style.setProperty("cursor","grabbing")}_updateSize(e){const t=this._dragStartY-e,i=t/window.innerHeight*100;let a=this._initialSize+i;if(a=Math.max(10,Math.min(90,a)),a<20&&t<0)return this._endDrag(),void this.closeSheet();this._dialogViewportHeight=a}_endDrag(){this._dragging&&(this._dragging=!1,document.body.style.removeProperty("cursor"))}constructor(...e){super(...e),this._dragging=!1,this._dragStartY=0,this._initialSize=0,this._dialogMaxViewpointHeight=70,this._dialogMinViewpointHeight=55,this._handleMouseDown=e=>{this._startDrag(e.clientY)},this._handleTouchStart=e=>{e.preventDefault(),this._startDrag(e.touches[0].clientY)},this._handleMouseMove=e=>{this._dragging&&this._updateSize(e.clientY)},this._handleTouchMove=e=>{this._dragging&&(e.preventDefault(),this._updateSize(e.touches[0].clientY))},this._handleMouseUp=()=>{this._endDrag()},this._handleTouchEnd=()=>{this._endDrag()}}}d.styles=o.iv`.handle-wrapper{position:absolute;top:0;width:100%;padding-bottom:2px;display:flex;justify-content:center;align-items:center;cursor:grab;touch-action:none}.handle-wrapper .handle{height:20px;width:200px;display:flex;justify-content:center;align-items:center;z-index:7;padding-bottom:76px}.handle-wrapper .handle::after{content:"";border-radius:8px;height:4px;background:var(--divider-color,#e0e0e0);width:80px}.handle-wrapper .handle:active::after{cursor:grabbing}dialog{height:auto;max-height:70vh;min-height:30vh;background-color:var(--ha-dialog-surface-background,var(--mdc-theme-surface,#fff));display:flex;flex-direction:column;top:0;inset-inline-start:0;position:fixed;width:calc(100% - 4px);max-width:100%;border:none;box-shadow:var(--wa-shadow-l);padding:0;margin:0;top:auto;inset-inline-end:auto;bottom:0;inset-inline-start:0;box-shadow:0px -8px 16px rgba(0,0,0,.2);border-top-left-radius:var(--ha-dialog-border-radius,var(--ha-border-radius-2xl));border-top-right-radius:var(--ha-dialog-border-radius,var(--ha-border-radius-2xl));transform:translateY(100%);transition:transform ${300}ms ease;border-top-width:var(--ha-bottom-sheet-border-width);border-right-width:var(--ha-bottom-sheet-border-width);border-left-width:var(--ha-bottom-sheet-border-width);border-bottom-width:0;border-style:var(--ha-bottom-sheet-border-style);border-color:var(--ha-bottom-sheet-border-color)}dialog.show{transform:translateY(0)}`,(0,a.__decorate)([(0,s.IO)("dialog")],d.prototype,"_dialog",void 0),(0,a.__decorate)([(0,s.SB)()],d.prototype,"_dialogMaxViewpointHeight",void 0),(0,a.__decorate)([(0,s.SB)()],d.prototype,"_dialogMinViewpointHeight",void 0),(0,a.__decorate)([(0,s.SB)()],d.prototype,"_dialogViewportHeight",void 0),d=(0,a.__decorate)([(0,s.Mo)("ha-bottom-sheet")],d)},42946:function(e,t,i){i(2394),i(81738),i(22960),i(6989),i(67886),i(65451),i(46015),i(38334),i(94880),i(75643),i(29761);var a=i(73742),o=i(59048),s=i(26292),n=i(39884),r=i(80972),d=i(2528),l=i(95814),c=(i(93673),i(19515),i(48017),i(64881),i(65829));class h extends o.oi{willUpdate(e){super.willUpdate(e),e.has("value")&&!(0,c.v)(this.value,e.get("value"))&&this._findRelated()}render(){return o.dy` <ha-expansion-panel left-chevron .expanded="${this.expanded}" @expanded-will-change="${this._expandedWillChange}" @expanded-changed="${this._expandedChanged}"> <div slot="header" class="header"> ${this.hass.localize("ui.panel.config.blueprint.caption")} ${this.value?.length?o.dy`<div class="badge">${this.value?.length}</div> <ha-icon-button .path="${"M21 8H3V6H21V8M13.81 16H10V18H13.09C13.21 17.28 13.46 16.61 13.81 16M18 11H6V13H18V11M21.12 15.46L19 17.59L16.88 15.46L15.47 16.88L17.59 19L15.47 21.12L16.88 22.54L19 20.41L21.12 22.54L22.54 21.12L20.41 19L22.54 16.88L21.12 15.46Z"}" @click="${this._clearFilter}"></ha-icon-button>`:o.Ld} </div> ${this._blueprints&&this._shouldRender?o.dy` <ha-list @selected="${this._blueprintsSelected}" multi class="ha-scrollbar"> ${Object.entries(this._blueprints).map(([e,t])=>"error"in t?o.Ld:o.dy`<ha-check-list-item .value="${e}" .selected="${(this.value||[]).includes(e)}"> ${t.metadata.name||e} </ha-check-list-item>`)} </ha-list> `:o.Ld} </ha-expansion-panel> `}async firstUpdated(){this.type&&(this._blueprints=await(0,r.wc)(this.hass,this.type))}updated(e){e.has("expanded")&&this.expanded&&setTimeout(()=>{!this.narrow&&this.expanded&&(this.renderRoot.querySelector("ha-list").style.height=this.clientHeight-49+"px")},300)}_expandedWillChange(e){this._shouldRender=e.detail.expanded}_expandedChanged(e){this.expanded=e.detail.expanded}async _blueprintsSelected(e){const t=this._blueprints;if(!e.detail.index.size)return(0,n.B)(this,"data-table-filter-changed",{value:[],items:void 0}),void(this.value=[]);const i=[];for(const a of e.detail.index){const e=Object.keys(t)[a];i.push(e)}this.value=i}async _findRelated(){if(!this.value?.length)return this.value=[],void(0,n.B)(this,"data-table-filter-changed",{value:[],items:void 0});const e=[];for(const t of this.value)this.type&&e.push((0,d.K)(this.hass,`${this.type}_blueprint`,t));const t=await Promise.all(e),i=new Set;for(const e of t)e[this.type]&&e[this.type].forEach(e=>i.add(e));(0,n.B)(this,"data-table-filter-changed",{value:this.value,items:this.type?i:void 0})}_clearFilter(e){e.preventDefault(),this.value=void 0,(0,n.B)(this,"data-table-filter-changed",{value:void 0,items:void 0})}static get styles(){return[l.$c,o.iv`:host{border-bottom:1px solid var(--divider-color)}:host([expanded]){flex:1;height:0}ha-expansion-panel{--ha-card-border-radius:0;--expansion-panel-content-padding:0}.header{display:flex;align-items:center}.header ha-icon-button{margin-inline-start:auto;margin-inline-end:8px}.badge{display:inline-block;margin-left:8px;margin-inline-start:8px;margin-inline-end:0;min-width:16px;box-sizing:border-box;border-radius:50%;font-size:var(--ha-font-size-xs);font-weight:var(--ha-font-weight-normal);background-color:var(--primary-color);line-height:var(--ha-line-height-normal);text-align:center;padding:0px 2px;color:var(--text-primary-color)}`]}constructor(...e){super(...e),this.narrow=!1,this.expanded=!1,this._shouldRender=!1}}(0,a.__decorate)([(0,s.Cb)({attribute:!1})],h.prototype,"hass",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:!1})],h.prototype,"value",void 0),(0,a.__decorate)([(0,s.Cb)()],h.prototype,"type",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],h.prototype,"narrow",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,reflect:!0})],h.prototype,"expanded",void 0),(0,a.__decorate)([(0,s.SB)()],h.prototype,"_shouldRender",void 0),(0,a.__decorate)([(0,s.SB)()],h.prototype,"_blueprints",void 0),h=(0,a.__decorate)([(0,s.Mo)("ha-filter-blueprints")],h)},5778:function(e,t,i){i(81738),i(94814),i(6989),i(93190);var a=i(73742),o=i(59048),s=i(26292),n=i(82040),r=i.n(n),d=i(39884),l=(i(36330),i(38221),i(75863),i(86190));let c;const h=new(i(28773).L)(1e3),p={reType:/(?<input>(\[!(?<type>caution|important|note|tip|warning)\])(?:\s|\\n)?)/i,typeToHaAlert:{caution:"error",important:"info",note:"info",tip:"success",warning:"warning"}};class u extends o.fl{disconnectedCallback(){if(super.disconnectedCallback(),this.cache){const e=this._computeCacheKey();h.set(e,this.innerHTML)}}createRenderRoot(){return this}update(e){super.update(e),void 0!==this.content&&this._render()}willUpdate(e){if(!this.innerHTML&&this.cache){const e=this._computeCacheKey();h.has(e)&&(this.innerHTML=h.get(e),this._resize())}}_computeCacheKey(){return r()({content:this.content,allowSvg:this.allowSvg,allowDataUrl:this.allowDataUrl,breaks:this.breaks})}async _render(){this.innerHTML=await(async(e,t,a)=>(c||(c=(0,l.Ud)(new Worker(new URL(i.p+i.u("45845"),i.b)))),c.renderMarkdown(e,t,a)))(String(this.content),{breaks:this.breaks,gfm:!0},{allowSvg:this.allowSvg,allowDataUrl:this.allowDataUrl}),this._resize();const e=document.createTreeWalker(this,NodeFilter.SHOW_ELEMENT,null);for(;e.nextNode();){const t=e.currentNode;if(t instanceof HTMLAnchorElement&&t.host!==document.location.host)t.target="_blank",t.rel="noreferrer noopener";else if(t instanceof HTMLImageElement)this.lazyImages&&(t.loading="lazy"),t.addEventListener("load",this._resize);else if(t instanceof HTMLQuoteElement){const i=t.firstElementChild?.firstChild?.textContent&&p.reType.exec(t.firstElementChild.firstChild.textContent);if(i){const{type:a}=i.groups,o=document.createElement("ha-alert");o.alertType=p.typeToHaAlert[a.toLowerCase()],o.append(...Array.from(t.childNodes).map(e=>{const t=Array.from(e.childNodes);if(!this.breaks&&t.length){const e=t[0];e.nodeType===Node.TEXT_NODE&&e.textContent===i.input&&e.textContent?.includes("\n")&&(e.textContent=e.textContent.split("\n").slice(1).join("\n"))}return t}).reduce((e,t)=>e.concat(t),[]).filter(e=>e.textContent&&e.textContent!==i.input)),e.parentNode().replaceChild(o,t)}}else t instanceof HTMLElement&&["ha-alert","ha-qr-code","ha-icon","ha-svg-icon"].includes(t.localName)&&i(23265)(`./${t.localName}`)}}constructor(...e){super(...e),this.allowSvg=!1,this.allowDataUrl=!1,this.breaks=!1,this.lazyImages=!1,this.cache=!1,this._resize=()=>(0,d.B)(this,"content-resize")}}(0,a.__decorate)([(0,s.Cb)()],u.prototype,"content",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:"allow-svg",type:Boolean})],u.prototype,"allowSvg",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:"allow-data-url",type:Boolean})],u.prototype,"allowDataUrl",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],u.prototype,"breaks",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,attribute:"lazy-images"})],u.prototype,"lazyImages",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],u.prototype,"cache",void 0),u=(0,a.__decorate)([(0,s.Mo)("ha-markdown-element")],u)},45861:function(e,t,i){var a=i(73742),o=i(59048),s=i(26292);i(5778);class n extends o.oi{render(){return this.content?o.dy`<ha-markdown-element .content="${this.content}" .allowSvg="${this.allowSvg}" .allowDataUrl="${this.allowDataUrl}" .breaks="${this.breaks}" .lazyImages="${this.lazyImages}" .cache="${this.cache}"></ha-markdown-element>`:o.Ld}constructor(...e){super(...e),this.allowSvg=!1,this.allowDataUrl=!1,this.breaks=!1,this.lazyImages=!1,this.cache=!1}}n.styles=o.iv`:host{display:block}ha-markdown-element{-ms-user-select:text;-webkit-user-select:text;-moz-user-select:text}ha-markdown-element>:first-child{margin-top:0}ha-markdown-element>:last-child{margin-bottom:0}ha-alert{display:block;margin:4px 0}a{color:var(--primary-color)}img{max-width:100%}code,pre{background-color:var(--markdown-code-background-color,none);border-radius:3px}svg{background-color:var(--markdown-svg-background-color,none);color:var(--markdown-svg-color,none)}code{font-size:var(--ha-font-size-s);padding:.2em .4em}pre code{padding:0}pre{padding:16px;overflow:auto;line-height:var(--ha-line-height-condensed);font-family:var(--ha-font-family-code)}h1,h2,h3,h4,h5,h6{line-height:initial}h2{font-size:var(--ha-font-size-xl);font-weight:var(--ha-font-weight-bold)}hr{border-color:var(--divider-color);border-bottom:none;margin:16px 0}`,(0,a.__decorate)([(0,s.Cb)()],n.prototype,"content",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:"allow-svg",type:Boolean})],n.prototype,"allowSvg",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:"allow-data-url",type:Boolean})],n.prototype,"allowDataUrl",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],n.prototype,"breaks",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,attribute:"lazy-images"})],n.prototype,"lazyImages",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],n.prototype,"cache",void 0),n=(0,a.__decorate)([(0,s.Mo)("ha-markdown")],n)},85775:function(e,t,i){var a=i(73742),o=i(72134),s=i(48758),n=i(59048),r=i(26292);class d extends o.W{async show(){super.show(),this.menu.hasOverflow=!1}}d.styles=[s.W,n.iv`:host{--ha-icon-display:block;--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-primary:var(--primary-text-color);--md-sys-color-secondary:var(--secondary-text-color);--md-sys-color-surface:var(--card-background-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--secondary-text-color);--md-sys-color-secondary-container:rgba(
          var(--rgb-primary-color),
          0.15
        );--md-sys-color-on-secondary-container:var(--text-primary-color);--mdc-icon-size:16px;--md-sys-color-on-primary-container:var(--primary-text-color);--md-sys-color-on-secondary-container:var(--primary-text-color)}`],d=(0,a.__decorate)([(0,r.Mo)("ha-sub-menu")],d)},80972:function(e,t,i){i.d(t,{Bp:()=>s,E2:()=>r,Uk:()=>d,Zt:()=>n,fQ:()=>o,wc:()=>a});const a=(e,t)=>e.callWS({type:"blueprint/list",domain:t}),o=(e,t)=>e.callWS({type:"blueprint/import",url:t}),s=(e,t,i,a,o,s)=>e.callWS({type:"blueprint/save",domain:t,path:i,yaml:a,source_url:o,allow_override:s}),n=(e,t,i)=>e.callWS({type:"blueprint/delete",domain:t,path:i}),r=e=>{const t=e.metadata.source_url;return t?t.includes("github.com/home-assistant")?"homeassistant":"community":"local"},d=(e,t,i,a)=>e.callWS({type:"blueprint/substitute",domain:t,path:i,input:a})},69992:function(e,t,i){i.d(t,{B:()=>a,l:()=>o});i(81738),i(22960),i(67886),i(65451),i(46015),i(38334),i(94880),i(75643),i(29761);const a=e=>{const t={};return Object.entries(e).forEach(([e,i])=>{t[e]={value:i.value,items:i.items instanceof Set?Array.from(i.items):i.items}}),t},o=e=>{const t={};return Object.entries(e).forEach(([e,i])=>{t[e]={value:i.value,items:Array.isArray(i.items)?new Set(i.items):i.items}}),t}},43563:function(e,t,i){i.d(t,{MY:()=>_,Yc:()=>u,hb:()=>m,jV:()=>l,o1:()=>g,ri:()=>b,sS:()=>h});var a=i(40141),o=i(44272),s=i(6219),n=i(16037),r=i(16230);const d="ui.components.logbook.messages",l=["counter","proximity","sensor","zone"],c={triggered_by_numeric_state_of:"numeric state of",triggered_by_state_of:"state of",triggered_by_event:"event",triggered_by_time_pattern:"time pattern",triggered_by_time:"time",triggered_by_homeassistant_stopping:"Home Assistant stopping",triggered_by_homeassistant_starting:"Home Assistant starting"},h=async(e,t,i)=>p(e,t,void 0,void 0,i),p=(e,t,i,a,o,s)=>{if((a||s)&&(!a||0===a.length)&&(!s||0===s.length))return Promise.resolve([]);const n={type:"logbook/get_events",start_time:t};return i&&(n.end_time=i),a?.length&&(n.entity_ids=a),s?.length&&(n.device_ids=s),o&&(n.context_id=o),e.callWS(n)},u=(e,t,i,a,o,s,n)=>{if((s||n)&&(!s||0===s.length)&&(!n||0===n.length))return Promise.reject("No entities or devices");const r={type:"logbook/event_stream",start_time:i,end_time:a};return s?.length&&(r.entity_ids=s),n?.length&&(r.device_ids=n),e.connection.subscribeMessage(e=>t(e,o),r)},g=(e,t)=>({entity_id:e.entity_id,state:t,attributes:{device_class:e?.attributes.device_class,source_type:e?.attributes.source_type,has_date:e?.attributes.has_date,has_time:e?.attributes.has_time,entity_picture_local:a.iY.has((0,o.M)(e.entity_id))?void 0:e?.attributes.entity_picture_local,entity_picture:a.iY.has((0,o.M)(e.entity_id))?void 0:e?.attributes.entity_picture}}),m=(e,t)=>{for(const i of Object.keys(c)){const a=c[i];if(t.startsWith(a))return t.replace(a,`${e(`ui.components.logbook.${i}`)}`)}return t},b=(e,t,i,o,s)=>{switch(s){case"device_tracker":case"person":return"not_home"===i?t(`${d}.was_away`):"home"===i?t(`${d}.was_at_home`):t(`${d}.was_at_state`,{state:i});case"sun":return t("above_horizon"===i?`${d}.rose`:`${d}.set`);case"binary_sensor":{const s=i===a.uo,r=i===a.lC,l=o.attributes.device_class;if(l&&(s||r))return t(`${d}.${s?"detected_device_classes":"cleared_device_classes"}.${l}`,{device_class:(0,n.V)(t(`component.binary_sensor.entity_component.${l}.name`)||l,e.language)})||t(`${d}.${s?"detected_device_class":"cleared_device_class"}`,{device_class:(0,n.V)(t(`component.binary_sensor.entity_component.${l}.name`)||l,e.language)});break}case"cover":switch(i){case"open":return t(`${d}.was_opened`);case"opening":return t(`${d}.is_opening`);case"closing":return t(`${d}.is_closing`);case"closed":return t(`${d}.was_closed`)}break;case"event":return t(`${d}.detected_event_no_type`);case"lock":switch(i){case"unlocked":return t(`${d}.was_unlocked`);case"locking":return t(`${d}.is_locking`);case"unlocking":return t(`${d}.is_unlocking`);case"opening":return t(`${d}.is_opening`);case"open":return t(`${d}.is_opened`);case"locked":return t(`${d}.was_locked`);case"jammed":return t(`${d}.is_jammed`)}}return i===a.uo?t(`${d}.turned_on`):i===a.lC?t(`${d}.turned_off`):i===r.lz?t(`${d}.became_unknown`):i===r.nZ?t(`${d}.became_unavailable`):e.localize(`${d}.changed_to_state`,{state:o?e.formatEntityState(o,i):i})},_=e=>"sensor"!==(0,s.N)(e)||void 0===e.attributes.unit_of_measurement&&void 0===e.attributes.state_class},60958:function(e,t,i){i.d(t,{u:()=>a});const a=["condition","action"]},70233:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{Fb:()=>y,Gt:()=>f,Og:()=>p,PG:()=>v,kh:()=>c,l:()=>m,oA:()=>h,tm:()=>b,uq:()=>g});var o=i(37528),s=i(44272),n=i(45064),r=i(43563),d=i(89166),l=e([d]);d=(l.then?(await l)():l)[0];const c=["camera","configurator"],h=["scene","automation"],p=["script"],u=["alarm_control_panel","cover","climate","conversation","fan","humidifier","input_boolean","light","lock","siren","script","switch","valve","water_heater","weather"],g=["update"],m=["alarm_control_panel","automation","camera","climate","configurator","conversation","counter","cover","date","datetime","fan","group","humidifier","image","input_boolean","input_datetime","lawn_mower","light","lock","media_player","person","remote","script","scene","siren","sun","switch","time","timer","update","vacuum","valve","water_heater","weather"],b=["input_number","input_select","input_text","number","scene","select","text","update","event"],_=["camera","configurator"],v=(e,t)=>(0,o.p)(e,"history")&&!_.includes((0,s.M)(t)),y=(e,t,i=[])=>{if(!(0,o.p)(e,"logbook"))return!1;const a=e.states[t];if(!a)return!1;const n=(0,s.M)(t);return!(r.jV.includes(n)&&(0,d.zP)(n,a,void 0,i)||_.includes(n))},f=e=>{const t=(0,s.M)(e.entity_id);if("group"===t){const t=(0,n.W)(e);return null!=t&&"group"!==t&&u.includes(t)}return u.includes(t)};a()}catch(e){a(e)}})},48346:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{S:()=>d,ST:()=>c,n3:()=>l});var o=i(6219),s=i(70233),n=e([s]);s=(n.then?(await n)():n)[0];const r={alarm_control_panel:()=>i.e("52494").then(i.bind(i,31196)),automation:()=>i.e("46846").then(i.bind(i,81863)),camera:()=>i.e("84982").then(i.bind(i,88773)),climate:()=>Promise.all([i.e("86689"),i.e("98306")]).then(i.bind(i,71990)),configurator:()=>Promise.all([i.e("73614"),i.e("43086"),i.e("35202")]).then(i.bind(i,23156)),conversation:()=>Promise.all([i.e("73614"),i.e("39558"),i.e("95947")]).then(i.bind(i,49543)),counter:()=>i.e("88637").then(i.bind(i,69342)),cover:()=>i.e("4380").then(i.bind(i,18847)),date:()=>Promise.all([i.e("73614"),i.e("86689"),i.e("44111")]).then(i.bind(i,80835)),datetime:()=>Promise.all([i.e("73614"),i.e("86689"),i.e("88688"),i.e("81856"),i.e("99989")]).then(i.bind(i,62334)),fan:()=>i.e("53734").then(i.bind(i,22498)),group:()=>Promise.all([i.e("73614"),i.e("86689"),i.e("22092"),i.e("89195"),i.e("16230")]).then(i.bind(i,40043)),humidifier:()=>i.e("30869").then(i.bind(i,17934)),image:()=>i.e("44226").then(i.bind(i,82276)),input_boolean:()=>i.e("1303").then(i.bind(i,34366)),input_datetime:()=>Promise.all([i.e("73614"),i.e("86689"),i.e("21509")]).then(i.bind(i,99166)),lawn_mower:()=>i.e("63555").then(i.bind(i,75509)),light:()=>i.e("23681").then(i.bind(i,44543)),lock:()=>i.e("49296").then(i.bind(i,15767)),media_player:()=>Promise.all([i.e("86689"),i.e("75017")]).then(i.bind(i,21088)),person:()=>Promise.all([i.e("12488"),i.e("75556"),i.e("40329")]).then(i.bind(i,43211)),remote:()=>Promise.all([i.e("86689"),i.e("33699")]).then(i.bind(i,3999)),script:()=>Promise.all([i.e("73614"),i.e("51679"),i.e("15634"),i.e("22092"),i.e("43086"),i.e("96713"),i.e("89112"),i.e("96859"),i.e("13373")]).then(i.bind(i,82184)),siren:()=>i.e("53478").then(i.bind(i,69609)),sun:()=>i.e("59908").then(i.bind(i,14817)),switch:()=>i.e("62543").then(i.bind(i,44940)),time:()=>Promise.all([i.e("73614"),i.e("86689"),i.e("47218"),i.e("23254")]).then(i.bind(i,1570)),timer:()=>i.e("21130").then(i.bind(i,2842)),update:()=>Promise.all([i.e("43086"),i.e("2884"),i.e("29326"),i.e("22172"),i.e("8076")]).then(i.bind(i,31512)),vacuum:()=>Promise.all([i.e("86689"),i.e("96884")]).then(i.bind(i,71243)),valve:()=>i.e("25479").then(i.bind(i,7238)),water_heater:()=>i.e("95857").then(i.bind(i,94548)),weather:()=>Promise.all([i.e("22092"),i.e("61523"),i.e("76405")]).then(i.bind(i,64118))},d=e=>{const t=(0,o.N)(e);return l(t)},l=e=>s.l.includes(e)?e:s.tm.includes(e)?"hidden":"default",c=e=>{e in r&&r[e]()};a()}catch(e){a(e)}})},27295:function(e,t,i){i.d(t,{C:()=>o});var a=i(16954);const o=e=>class extends e{_removeListeners(){window.removeEventListener("click",this._handleClick,!0),window.removeEventListener("beforeunload",this._handleUnload)}willUpdate(e){super.willUpdate(e),this.isDirty?(window.addEventListener("click",this._handleClick,!0),window.addEventListener("beforeunload",this._handleUnload)):this._removeListeners()}disconnectedCallback(){super.disconnectedCallback(),this._removeListeners()}get isDirty(){return!1}async promptDiscardChanges(){return!0}constructor(...e){super(...e),this._handleClick=async e=>{const t=e.composedPath()[0];if(!(0,a.J)(e))return;if(await this.promptDiscardChanges()&&(this._removeListeners(),t)){const i=new MouseEvent(e.type,e);t.dispatchEvent(i)}},this._handleUnload=e=>e.preventDefault()}}},2609:function(e,t,i){i.d(t,{E:()=>s,O:()=>o});var a=i(39884);const o=()=>Promise.all([i.e("73614"),i.e("2243"),i.e("75696"),i.e("51679"),i.e("15634"),i.e("26452"),i.e("76782"),i.e("67024"),i.e("39432"),i.e("89112"),i.e("19596"),i.e("81670")]).then(i.bind(i,14065)),s=(e,t)=>{(0,a.B)(e,"show-dialog",{dialogTag:"dialog-area-registry-detail",dialogImport:o,dialogParams:t})}},71541:function(e,t,i){i.d(t,{q:()=>s});var a=i(39884);const o=()=>Promise.all([i.e("20278"),i.e("88737")]).then(i.bind(i,93999)),s=(e,t)=>{(0,a.B)(e,"show-dialog",{dialogTag:"ha-dialog-automation-mode",dialogImport:o,dialogParams:t})}},18942:function(e,t,i){i.d(t,{h:()=>s});var a=i(39884);const o=()=>i.e("3450").then(i.bind(i,59833)),s=(e,t)=>{(0,a.B)(e,"show-dialog",{dialogTag:"ha-dialog-automation-save",dialogImport:o,dialogParams:t})}},35081:function(e,t,i){i.a(e,async function(e,t){try{var a=i(73742),o=i(59048),s=i(26292),n=(i(65958),i(10142)),r=i(27497),d=i(6961),l=i(63279),c=(i(60649),i(40135)),h=i(74630),p=i(4478),u=e([d,l,c,h,p]);[d,l,c,h,p]=u.then?(await u)():u;class g extends o.oi{_renderContent(){const e=this._getType();return"trigger"===e?o.dy` <ha-automation-sidebar-trigger class="sidebar-content" .hass="${this.hass}" .config="${this.config}" .isWide="${this.isWide}" .narrow="${this.narrow}" .disabled="${this.disabled}" .yamlMode="${this._yamlMode}" .sidebarKey="${this.sidebarKey}" @toggle-yaml-mode="${this._toggleYamlMode}" @close-sidebar="${this.triggerCloseSidebar}"></ha-automation-sidebar-trigger> `:"condition"===e?o.dy` <ha-automation-sidebar-condition class="sidebar-content" .hass="${this.hass}" .config="${this.config}" .isWide="${this.isWide}" .narrow="${this.narrow}" .disabled="${this.disabled}" .yamlMode="${this._yamlMode}" .sidebarKey="${this.sidebarKey}" @toggle-yaml-mode="${this._toggleYamlMode}" @close-sidebar="${this.triggerCloseSidebar}"></ha-automation-sidebar-condition> `:"action"===e?o.dy` <ha-automation-sidebar-action class="sidebar-content" .hass="${this.hass}" .config="${this.config}" .isWide="${this.isWide}" .narrow="${this.narrow}" .disabled="${this.disabled}" .yamlMode="${this._yamlMode}" .sidebarKey="${this.sidebarKey}" @toggle-yaml-mode="${this._toggleYamlMode}" @close-sidebar="${this.triggerCloseSidebar}"></ha-automation-sidebar-action> `:"option"===e?o.dy` <ha-automation-sidebar-option class="sidebar-content" .hass="${this.hass}" .config="${this.config}" .isWide="${this.isWide}" .narrow="${this.narrow}" .disabled="${this.disabled}" @close-sidebar="${this.triggerCloseSidebar}"></ha-automation-sidebar-option> `:"script-field-selector"===e?o.dy` <ha-automation-sidebar-script-field-selector class="sidebar-content" .hass="${this.hass}" .config="${this.config}" .isWide="${this.isWide}" .narrow="${this.narrow}" .disabled="${this.disabled}" .yamlMode="${this._yamlMode}" .sidebarKey="${this.sidebarKey}" @toggle-yaml-mode="${this._toggleYamlMode}" @close-sidebar="${this.triggerCloseSidebar}"></ha-automation-sidebar-script-field-selector> `:"script-field"===e?o.dy` <ha-automation-sidebar-script-field class="sidebar-content" .hass="${this.hass}" .config="${this.config}" .isWide="${this.isWide}" .narrow="${this.narrow}" .disabled="${this.disabled}" .yamlMode="${this._yamlMode}" .sidebarKey="${this.sidebarKey}" @toggle-yaml-mode="${this._toggleYamlMode}" @close-sidebar="${this.triggerCloseSidebar}"></ha-automation-sidebar-script-field> `:o.Ld}render(){return this.config?this.narrow?o.dy` <ha-bottom-sheet @bottom-sheet-closed="${this._closeSidebar}"> ${this._renderContent()} </ha-bottom-sheet> `:this._renderContent():o.Ld}_getType(){return this.config?.config&&((0,n.Jd)(this.config?.config)||(0,r.j2)(this.config?.config))?"trigger":(0,n.T5)(this.config?.config)?"condition":this.config?.config&&(0,n.Cb)(this.config?.config)?this.config?.config.selector?"script-field-selector":"script-field":this.config&&!this.config?.config?"option":this.config?.config.action?"action":void 0}triggerCloseSidebar(e){e?.stopPropagation(),this.narrow?this._bottomSheetElement?.closeSheet():this._closeSidebar()}_closeSidebar(){this.config?.close(!0)}constructor(...e){super(...e),this.isWide=!1,this.disabled=!1,this.narrow=!1,this._yamlMode=!1,this._toggleYamlMode=()=>{this.config?.toggleYamlMode()}}}g.styles=o.iv`:host{z-index:6;outline:0;height:100%;--ha-card-border-radius:var(
        --ha-dialog-border-radius,
        var(--ha-border-radius-2xl)
      );border-radius:var(--ha-card-border-radius);--ha-bottom-sheet-border-width:2px;--ha-bottom-sheet-border-style:solid;--ha-bottom-sheet-border-color:var(--primary-color)}@media all and (max-width:870px){.sidebar-content{max-height:100%}}`,(0,a.__decorate)([(0,s.Cb)({attribute:!1})],g.prototype,"hass",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:!1})],g.prototype,"config",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,attribute:"wide"})],g.prototype,"isWide",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],g.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],g.prototype,"narrow",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:"sidebar-key"})],g.prototype,"sidebarKey",void 0),(0,a.__decorate)([(0,s.SB)()],g.prototype,"_yamlMode",void 0),(0,a.__decorate)([(0,s.IO)("ha-bottom-sheet")],g.prototype,"_bottomSheetElement",void 0),g=(0,a.__decorate)([(0,s.Mo)("ha-automation-sidebar")],g),t()}catch(e){t(e)}})},96346:function(e,t,i){i.d(t,{J:()=>s});var a=i(39884);const o=()=>i.e("33386").then(i.bind(i,97646)),s=(e,t)=>{(0,a.B)(e,"show-dialog",{dialogTag:"ha-dialog-paste-replace",dialogImport:o,dialogParams:t})}},74380:function(e,t,i){i.d(t,{X:()=>s});var a=i(39884);const o=()=>Promise.all([i.e("75696"),i.e("87646")]).then(i.bind(i,51901)),s=(e,t)=>{(0,a.B)(e,"show-dialog",{dialogTag:"ha-dialog-new-automation",dialogImport:o,dialogParams:t})}},6961:function(e,t,i){i.a(e,async function(e,t){try{var a=i(73742),o=i(59048),s=i(26292),n=i(5290),r=i(39884),d=i(72645),l=(i(57701),i(92952),i(31264)),c=i(2913),h=i(82789),p=i(68178),u=i(90197),g=i(67321),m=(i(40529),e([g,h,p]));[g,h,p]=m.then?(await m)():m;const b="M6,2A4,4 0 0,1 10,6V8H14V6A4,4 0 0,1 18,2A4,4 0 0,1 22,6A4,4 0 0,1 18,10H16V14H18A4,4 0 0,1 22,18A4,4 0 0,1 18,22A4,4 0 0,1 14,18V16H10V18A4,4 0 0,1 6,22A4,4 0 0,1 2,18A4,4 0 0,1 6,14H8V10H6A4,4 0 0,1 2,6A4,4 0 0,1 6,2M16,18A2,2 0 0,0 18,20A2,2 0 0,0 20,18A2,2 0 0,0 18,16H16V18M14,10H10V14H14V10M6,16A2,2 0 0,0 4,18A2,2 0 0,0 6,20A2,2 0 0,0 8,18V16H6M8,6A2,2 0 0,0 6,4A2,2 0 0,0 4,6A2,2 0 0,0 6,8H8V6M18,8A2,2 0 0,0 20,6A2,2 0 0,0 18,4A2,2 0 0,0 16,6V8H18Z",_="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",v="M19,3L13,9L15,11L22,4V3M12,12.5A0.5,0.5 0 0,1 11.5,12A0.5,0.5 0 0,1 12,11.5A0.5,0.5 0 0,1 12.5,12A0.5,0.5 0 0,1 12,12.5M6,20A2,2 0 0,1 4,18C4,16.89 4.9,16 6,16A2,2 0 0,1 8,18C8,19.11 7.1,20 6,20M6,8A2,2 0 0,1 4,6C4,4.89 4.9,4 6,4A2,2 0 0,1 8,6C8,7.11 7.1,8 6,8M9.64,7.64C9.87,7.14 10,6.59 10,6A4,4 0 0,0 6,2A4,4 0 0,0 2,6A4,4 0 0,0 6,10C6.59,10 7.14,9.87 7.64,9.64L10,12L7.64,14.36C7.14,14.13 6.59,14 6,14A4,4 0 0,0 2,18A4,4 0 0,0 6,22A4,4 0 0,0 10,18C10,17.41 9.87,16.86 9.64,16.36L12,14L19,21H22V20L9.64,7.64Z",y="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",f="M8,5.14V19.14L19,12.14L8,5.14Z",$="M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5L16,12L10,7.5V16.5Z",w="M3 6V8H14V6H3M3 10V12H14V10H3M20 10.1C19.9 10.1 19.7 10.2 19.6 10.3L18.6 11.3L20.7 13.4L21.7 12.4C21.9 12.2 21.9 11.8 21.7 11.6L20.4 10.3C20.3 10.2 20.2 10.1 20 10.1M18.1 11.9L12 17.9V20H14.1L20.2 13.9L18.1 11.9M3 14V16H10V14H3Z",C="M16,8H14V11H11V13H14V16H16V13H19V11H16M2,12C2,9.21 3.64,6.8 6,5.68V3.5C2.5,4.76 0,8.09 0,12C0,15.91 2.5,19.24 6,20.5V18.32C3.64,17.2 2,14.79 2,12M15,3C10.04,3 6,7.04 6,12C6,16.96 10.04,21 15,21C19.96,21 24,16.96 24,12C24,7.04 19.96,3 15,3M15,19C11.14,19 8,15.86 8,12C8,8.14 11.14,5 15,5C18.86,5 22,8.14 22,12C22,15.86 18.86,19 15,19Z",A="M18,17H10.5L12.5,15H18M6,17V14.5L13.88,6.65C14.07,6.45 14.39,6.45 14.59,6.65L16.35,8.41C16.55,8.61 16.55,8.92 16.35,9.12L8.47,17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z",M="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4M9,9V15H15V9";class x extends o.oi{willUpdate(e){e.has("config")&&(this._warnings=void 0,this.config&&(this.yamlMode=this.config.yamlMode,this.yamlMode&&this.editor?.yamlEditor?.setValue(this.config.config.action)))}render(){const e=this.config.config.action,t=this.disabled||"enabled"in e&&!1===e.enabled,i=(0,h.W2)(e),a="repeat"!==i?i:`repeat_${(0,p.T)(e.repeat)}`,s=l.Fr.includes(a||""),r=this.hass.localize("ui.panel.config.automation.editor.actions.action"),d=this.hass.localize(`ui.panel.config.automation.editor.actions.type.${a}.label`)||a,u=s?this.hass.localize(`ui.panel.config.automation.editor.actions.type.${a}.description.picker`):"";return o.dy`<ha-automation-sidebar-card .hass="${this.hass}" .isWide="${this.isWide}" .yamlMode="${this.yamlMode}" .warnings="${this._warnings}" .narrow="${this.narrow}"> <span slot="title">${d}</span> <span slot="subtitle">${r}</span> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.run}"> <ha-svg-icon slot="start" .path="${f}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions.run")} <span class="shortcut-placeholder ${c.V?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.rename}" .disabled="${!!t}"> <ha-svg-icon slot="start" .path="${A}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.rename")} <span class="shortcut-placeholder ${c.V?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-divider slot="menu-items" role="separator" tabindex="-1"></ha-md-divider> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.duplicate}" .disabled="${this.disabled}"> <ha-svg-icon slot="start" .path="${C}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions.duplicate")} <span class="shortcut-placeholder ${c.V?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.copy}" .disabled="${this.disabled}"> <ha-svg-icon slot="start" .path="${_}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.copy")} ${this.narrow?o.Ld:o.dy`<span class="shortcut"> <span>${c.V?o.dy`<ha-svg-icon slot="start" .path="${b}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>C</span> </span>`} </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.cut}" .disabled="${this.disabled}"> <ha-svg-icon slot="start" .path="${v}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.cut")} ${this.narrow?o.Ld:o.dy`<span class="shortcut"> <span>${c.V?o.dy`<ha-svg-icon slot="start" .path="${b}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>X</span> </span>`} </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this._toggleYamlMode}" .disabled="${!this.config.uiSupported||!!this._warnings}"> <ha-svg-icon slot="start" .path="${w}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.edit_"+(this.yamlMode?"ui":"yaml"))} <span class="shortcut-placeholder ${c.V?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-divider slot="menu-items" role="separator" tabindex="-1"></ha-md-divider> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.disable}"> <ha-svg-icon slot="start" .path="${this.disabled?$:M}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions."+(t?"enable":"disable"))} <span class="shortcut-placeholder ${c.V?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.delete}" .disabled="${this.disabled}" class="warning"> <ha-svg-icon slot="start" .path="${y}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions.delete")} ${this.narrow?o.Ld:o.dy`<span class="shortcut"> <span>${c.V?o.dy`<ha-svg-icon slot="start" .path="${b}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>${this.hass.localize("ui.panel.config.automation.editor.del")}</span> </span>`} </div> </ha-md-menu-item> ${u&&!this.yamlMode?o.dy`<div class="description">${u}</div>`:(0,n.U)(this.sidebarKey,o.dy`<ha-automation-action-editor class="sidebar-editor" .hass="${this.hass}" .action="${e}" .yamlMode="${this.yamlMode}" .uiSupported="${this.config.uiSupported}" @value-changed="${this._valueChangedSidebar}" @yaml-changed="${this._yamlChangedSidebar}" sidebar narrow .disabled="${this.disabled}" @ui-mode-not-available="${this._handleUiModeNotAvailable}"></ha-automation-action-editor>`)} </ha-automation-sidebar-card>`}_handleUiModeNotAvailable(e){this._warnings=(0,d.p)(this.hass,e.detail).warnings,this.yamlMode||(this.yamlMode=!0)}_valueChangedSidebar(e){e.stopPropagation(),this.config?.save?.(e.detail.value),this.config&&(0,r.B)(this,"value-changed",{value:{...this.config,config:{action:e.detail.value}}})}_yamlChangedSidebar(e){e.stopPropagation(),this.config?.save?.(e.detail.value)}constructor(...e){super(...e),this.isWide=!1,this.disabled=!1,this.yamlMode=!1,this.narrow=!1,this._toggleYamlMode=()=>{(0,r.B)(this,"toggle-yaml-mode")}}}x.styles=u.kr,(0,a.__decorate)([(0,s.Cb)({attribute:!1})],x.prototype,"hass",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:!1})],x.prototype,"config",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,attribute:"wide"})],x.prototype,"isWide",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],x.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,attribute:"yaml-mode"})],x.prototype,"yamlMode",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],x.prototype,"narrow",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:"sidebar-key"})],x.prototype,"sidebarKey",void 0),(0,a.__decorate)([(0,s.SB)()],x.prototype,"_warnings",void 0),(0,a.__decorate)([(0,s.IO)(".sidebar-editor")],x.prototype,"editor",void 0),x=(0,a.__decorate)([(0,s.Mo)("ha-automation-sidebar-action")],x),t()}catch(e){t(e)}})},40529:function(e,t,i){var a=i(73742),o=i(64346),s=i(59048),n=i(26292),r=i(31733),d=i(39884),l=i(98921);i(31138),i(67101),i(48017),i(36963),i(57701),i(92952),i(54518);class c extends s.oi{firstUpdated(e){this._contentSize.observe(this._contentElement)}render(){return s.dy` <ha-card outlined class="${(0,r.$)({mobile:!this.isWide,yaml:this.yamlMode})}"> <ha-dialog-header class="${(0,r.$)({scrolled:this._contentScrolled})}"> <ha-icon-button slot="navigationIcon" .label="${this.hass.localize("ui.common.close")}" .path="${"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}" @click="${this._closeSidebar}"></ha-icon-button> <slot slot="title" name="title"></slot> <slot slot="subtitle" name="subtitle"></slot> <slot name="overflow-menu" slot="actionItems"> <ha-md-button-menu quick @click="${this._openOverflowMenu}" @keydown="${l.U}" @closed="${l.U}" .positioning="${this.narrow?"absolute":"fixed"}" anchor-corner="end-end" menu-corner="start-end"> <ha-icon-button slot="trigger" .label="${this.hass.localize("ui.common.menu")}" .path="${"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z"}"></ha-icon-button> <slot name="menu-items"></slot> </ha-md-button-menu> </slot> </ha-dialog-header> ${this.warnings?s.dy`<ha-automation-editor-warning .localize="${this.hass.localize}" .warnings="${this.warnings}"> </ha-automation-editor-warning>`:s.Ld} <div class="card-content" @scroll="${this._onScroll}"> <slot></slot> </div> ${this.narrow?s.dy` <div class="fade ${this._contentScrollable?"scrollable":""}"></div> `:s.Ld} </ha-card> `}_onScroll(e){const t=e.target.scrollTop??0;this._contentScrolled=t>0,this._canScrollDown(e.target)}_canScrollDown(e){this._contentScrollable=(e.scrollHeight??0)-(e.clientHeight??0)>(e.scrollTop??0)}_closeSidebar(){(0,d.B)(this,"close-sidebar")}_openOverflowMenu(e){e.stopPropagation(),e.preventDefault()}constructor(...e){super(...e),this.isWide=!1,this.yamlMode=!1,this.narrow=!1,this._contentScrolled=!1,this._contentScrollable=!1,this._contentSize=new o.Z(this,{target:null,callback:e=>{e[0]?.target&&this._canScrollDown(e[0].target)}})}}c.styles=s.iv`ha-card{height:100%;width:100%;border-color:var(--primary-color);border-width:2px;display:block}@media all and (max-width:870px){ha-card.mobile{border:none;box-shadow:none}ha-card.mobile{border-bottom-right-radius:var(--ha-border-radius-square);border-bottom-left-radius:var(--ha-border-radius-square)}}ha-dialog-header{border-radius:var(--ha-card-border-radius);box-shadow:none;transition:box-shadow 180ms ease-in-out;border-bottom-left-radius:0;border-bottom-right-radius:0;position:relative;background-color:var(--ha-dialog-surface-background,var(--mdc-theme-surface,#fff))}ha-dialog-header.scrolled{box-shadow:var(--bar-box-shadow)}.fade{position:fixed;bottom:-12px;left:0;right:0;height:12px;pointer-events:none;transition:box-shadow 180ms ease-in-out}.fade.scrollable{box-shadow:var(--bar-box-shadow);transform:rotate(180deg)}.card-content{max-height:calc(100% - 80px);overflow:auto;margin-top:0}@media (min-width:450px) and (min-height:500px){.card-content{max-height:calc(100% - 104px);overflow:auto}}`,(0,a.__decorate)([(0,n.Cb)({attribute:!1})],c.prototype,"hass",void 0),(0,a.__decorate)([(0,n.Cb)({type:Boolean,attribute:"wide"})],c.prototype,"isWide",void 0),(0,a.__decorate)([(0,n.Cb)({type:Boolean,attribute:"yaml-mode"})],c.prototype,"yamlMode",void 0),(0,a.__decorate)([(0,n.Cb)({attribute:!1})],c.prototype,"warnings",void 0),(0,a.__decorate)([(0,n.Cb)({type:Boolean})],c.prototype,"narrow",void 0),(0,a.__decorate)([(0,n.SB)()],c.prototype,"_contentScrolled",void 0),(0,a.__decorate)([(0,n.SB)()],c.prototype,"_contentScrollable",void 0),(0,a.__decorate)([(0,n.IO)(".card-content")],c.prototype,"_contentElement",void 0),(0,a.__decorate)([(0,n.hO)({passive:!0})],c.prototype,"_onScroll",null),c=(0,a.__decorate)([(0,n.Mo)("ha-automation-sidebar-card")],c)},63279:function(e,t,i){i.a(e,async function(e,t){try{var a=i(73742),o=i(59048),s=i(26292),n=i(31733),r=i(5290),d=i(39884),l=i(72645),c=i(10142),h=i(39058),p=i(13080),u=i(2913),g=i(60164),m=i(95339),b=i(90197),_=(i(40529),e([m,g]));[m,g]=_.then?(await _)():_;const v="M6,2A4,4 0 0,1 10,6V8H14V6A4,4 0 0,1 18,2A4,4 0 0,1 22,6A4,4 0 0,1 18,10H16V14H18A4,4 0 0,1 22,18A4,4 0 0,1 18,22A4,4 0 0,1 14,18V16H10V18A4,4 0 0,1 6,22A4,4 0 0,1 2,18A4,4 0 0,1 6,14H8V10H6A4,4 0 0,1 2,6A4,4 0 0,1 6,2M16,18A2,2 0 0,0 18,20A2,2 0 0,0 20,18A2,2 0 0,0 18,16H16V18M14,10H10V14H14V10M6,16A2,2 0 0,0 4,18A2,2 0 0,0 6,20A2,2 0 0,0 8,18V16H6M8,6A2,2 0 0,0 6,4A2,2 0 0,0 4,6A2,2 0 0,0 6,8H8V6M18,8A2,2 0 0,0 20,6A2,2 0 0,0 18,4A2,2 0 0,0 16,6V8H18Z",y="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",f="M19,3L13,9L15,11L22,4V3M12,12.5A0.5,0.5 0 0,1 11.5,12A0.5,0.5 0 0,1 12,11.5A0.5,0.5 0 0,1 12.5,12A0.5,0.5 0 0,1 12,12.5M6,20A2,2 0 0,1 4,18C4,16.89 4.9,16 6,16A2,2 0 0,1 8,18C8,19.11 7.1,20 6,20M6,8A2,2 0 0,1 4,6C4,4.89 4.9,4 6,4A2,2 0 0,1 8,6C8,7.11 7.1,8 6,8M9.64,7.64C9.87,7.14 10,6.59 10,6A4,4 0 0,0 6,2A4,4 0 0,0 2,6A4,4 0 0,0 6,10C6.59,10 7.14,9.87 7.64,9.64L10,12L7.64,14.36C7.14,14.13 6.59,14 6,14A4,4 0 0,0 2,18A4,4 0 0,0 6,22A4,4 0 0,0 10,18C10,17.41 9.87,16.86 9.64,16.36L12,14L19,21H22V20L9.64,7.64Z",$="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",w="M6,22A3,3 0 0,1 3,19C3,18.4 3.18,17.84 3.5,17.37L9,7.81V6A1,1 0 0,1 8,5V4A2,2 0 0,1 10,2H14A2,2 0 0,1 16,4V5A1,1 0 0,1 15,6V7.81L20.5,17.37C20.82,17.84 21,18.4 21,19A3,3 0 0,1 18,22H6M5,19A1,1 0 0,0 6,20H18A1,1 0 0,0 19,19C19,18.79 18.93,18.59 18.82,18.43L16.53,14.47L14,17L8.93,11.93L5.18,18.43C5.07,18.59 5,18.79 5,19M13,10A1,1 0 0,0 12,11A1,1 0 0,0 13,12A1,1 0 0,0 14,11A1,1 0 0,0 13,10Z",C="M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5L16,12L10,7.5V16.5Z",A="M3 6V8H14V6H3M3 10V12H14V10H3M20 10.1C19.9 10.1 19.7 10.2 19.6 10.3L18.6 11.3L20.7 13.4L21.7 12.4C21.9 12.2 21.9 11.8 21.7 11.6L20.4 10.3C20.3 10.2 20.2 10.1 20 10.1M18.1 11.9L12 17.9V20H14.1L20.2 13.9L18.1 11.9M3 14V16H10V14H3Z",M="M16,8H14V11H11V13H14V16H16V13H19V11H16M2,12C2,9.21 3.64,6.8 6,5.68V3.5C2.5,4.76 0,8.09 0,12C0,15.91 2.5,19.24 6,20.5V18.32C3.64,17.2 2,14.79 2,12M15,3C10.04,3 6,7.04 6,12C6,16.96 10.04,21 15,21C19.96,21 24,16.96 24,12C24,7.04 19.96,3 15,3M15,19C11.14,19 8,15.86 8,12C8,8.14 11.14,5 15,5C18.86,5 22,8.14 22,12C22,15.86 18.86,19 15,19Z",x="M18,17H10.5L12.5,15H18M6,17V14.5L13.88,6.65C14.07,6.45 14.39,6.45 14.59,6.65L16.35,8.41C16.55,8.61 16.55,8.92 16.35,9.12L8.47,17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z",V="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4M9,9V15H15V9";class H extends o.oi{willUpdate(e){e.has("config")&&(this._warnings=void 0,this.config&&(this.yamlMode=this.config.yamlMode,this.yamlMode&&this.editor?.yamlEditor?.setValue(this.config.config))),e.has("sidebarKey")&&(this._testing=!1)}render(){const e=this.disabled||"enabled"in this.config.config&&!1===this.config.config.enabled,t=this.config.config.condition,i=h.GL.includes(t),a=this.hass.localize("ui.panel.config.automation.editor.conditions.condition"),s=this.hass.localize(`ui.panel.config.automation.editor.conditions.type.${t}.label`)||t,d=i?this.hass.localize(`ui.panel.config.automation.editor.conditions.type.${t}.description.picker`):"";return o.dy`<ha-automation-sidebar-card .hass="${this.hass}" .isWide="${this.isWide}" .yamlMode="${this.yamlMode}" .warnings="${this._warnings}" .narrow="${this.narrow}"> <span slot="title">${s}</span> <span slot="subtitle">${a}</span> <ha-md-menu-item slot="menu-items" .clickAction="${this._testCondition}"> <ha-svg-icon slot="start" .path="${w}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.conditions.test")} <span class="shortcut-placeholder ${u.V?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.rename}" .disabled="${!!e}"> <ha-svg-icon slot="start" .path="${x}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.rename")} <span class="shortcut-placeholder ${u.V?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-divider slot="menu-items" role="separator" tabindex="-1"></ha-md-divider> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.duplicate}" .disabled="${this.disabled}"> <ha-svg-icon slot="start" .path="${M}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions.duplicate")} <span class="shortcut-placeholder ${u.V?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.copy}" .disabled="${this.disabled}"> <ha-svg-icon slot="start" .path="${y}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.copy")} ${this.narrow?o.Ld:o.dy`<span class="shortcut"> <span>${u.V?o.dy`<ha-svg-icon slot="start" .path="${v}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>C</span> </span>`} </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.cut}" .disabled="${this.disabled}"> <ha-svg-icon slot="start" .path="${f}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.cut")} ${this.narrow?o.Ld:o.dy`<span class="shortcut"> <span>${u.V?o.dy`<ha-svg-icon slot="start" .path="${v}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>X</span> </span>`} </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this._toggleYamlMode}" .disabled="${!this.config.uiSupported||!!this._warnings}"> <ha-svg-icon slot="start" .path="${A}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.edit_"+(this.yamlMode?"ui":"yaml"))} <span class="shortcut-placeholder ${u.V?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-divider slot="menu-items" role="separator" tabindex="-1"></ha-md-divider> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.disable}"> <ha-svg-icon slot="start" .path="${this.disabled?C:V}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions."+(e?"enable":"disable"))} <span class="shortcut-placeholder ${u.V?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.delete}" .disabled="${this.disabled}" class="warning"> <ha-svg-icon slot="start" .path="${$}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions.delete")} ${this.narrow?o.Ld:o.dy`<span class="shortcut"> <span>${u.V?o.dy`<ha-svg-icon slot="start" .path="${v}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>${this.hass.localize("ui.panel.config.automation.editor.del")}</span> </span>`} </div> </ha-md-menu-item> ${d&&!this.yamlMode?o.dy`<div class="description">${d}</div>`:(0,r.U)(this.sidebarKey,o.dy`<ha-automation-condition-editor class="sidebar-editor" .hass="${this.hass}" .condition="${this.config.config}" .yamlMode="${this.yamlMode}" .uiSupported="${this.config.uiSupported}" @value-changed="${this._valueChangedSidebar}" @yaml-changed="${this._yamlChangedSidebar}" .disabled="${this.disabled}" @ui-mode-not-available="${this._handleUiModeNotAvailable}" sidebar></ha-automation-condition-editor>`)} <div class="testing-wrapper"> <div class="testing ${(0,n.$)({active:this._testing,pass:!0===this._testingResult,error:!1===this._testingResult,narrow:this.narrow})}"> ${void 0===this._testingResult?o.Ld:this.hass.localize("ui.panel.config.automation.editor.conditions.testing_"+(this._testingResult?"pass":"error"))} </div> </div> </ha-automation-sidebar-card>`}_handleUiModeNotAvailable(e){this._warnings=(0,l.p)(this.hass,e.detail).warnings,this.yamlMode||(this.yamlMode=!0)}_valueChangedSidebar(e){e.stopPropagation(),this.config?.save?.(e.detail.value),this.config&&(0,d.B)(this,"value-changed",{value:{...this.config,config:e.detail.value}})}_yamlChangedSidebar(e){e.stopPropagation(),this.config?.save?.(e.detail.value)}constructor(...e){super(...e),this.isWide=!1,this.disabled=!1,this.yamlMode=!1,this.narrow=!1,this._testing=!1,this._testCondition=async()=>{if(this._testing)return;this._testingResult=void 0,this._testing=!0;const e=this.config.config;try{const t=await(0,p.w)(this.hass,{conditions:e});if(this.config.config!==e)return void(this._testing=!1);if(!t.conditions.valid)return(0,g.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.automation.editor.conditions.invalid_condition"),text:t.conditions.error}),void(this._testing=!1);let i;try{i=await(0,c.J8)(this.hass,e)}catch(t){return this.config.config!==e||(0,g.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.automation.editor.conditions.test_failed"),text:t.message}),void(this._testing=!1)}this._testingResult=i.result}finally{setTimeout(()=>{this._testing=!1},2500)}},this._toggleYamlMode=()=>{(0,d.B)(this,"toggle-yaml-mode")}}}H.styles=[b.kr,o.iv`ha-automation-sidebar-card{position:relative}.testing-wrapper{position:absolute;top:0px;right:0px;left:0px;margin:-1px;overflow:hidden;border-top-right-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg));border-top-left-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg));pointer-events:none;height:100px}.testing{--testing-color:var(--divider-color, #e0e0e0);text-transform:uppercase;font-size:var(--ha-font-size-m);font-weight:var(--ha-font-weight-bold);background-color:var(--testing-color);color:var(--text-primary-color);max-height:0px;transition:max-height .3s ease-in-out,padding-top .3s ease-in-out;text-align:center}.testing.active.narrow{padding-top:16px}.testing.active{max-height:100%}.testing.error{--testing-color:var(--accent-color)}.testing.pass{--testing-color:var(--success-color)}`],(0,a.__decorate)([(0,s.Cb)({attribute:!1})],H.prototype,"hass",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:!1})],H.prototype,"config",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,attribute:"wide"})],H.prototype,"isWide",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],H.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,attribute:"yaml-mode"})],H.prototype,"yamlMode",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],H.prototype,"narrow",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:"sidebar-key"})],H.prototype,"sidebarKey",void 0),(0,a.__decorate)([(0,s.SB)()],H.prototype,"_warnings",void 0),(0,a.__decorate)([(0,s.SB)()],H.prototype,"_testing",void 0),(0,a.__decorate)([(0,s.SB)()],H.prototype,"_testingResult",void 0),(0,a.__decorate)([(0,s.IO)(".sidebar-editor")],H.prototype,"editor",void 0),H=(0,a.__decorate)([(0,s.Mo)("ha-automation-sidebar-condition")],H),t()}catch(e){t(e)}})},60649:function(e,t,i){var a=i(73742),o=i(59048),s=i(26292),n=i(2913),r=i(90197);i(40529);class d extends o.oi{render(){const e=this.disabled,t=this.hass.localize("ui.panel.config.automation.editor.actions.type.choose.label"),i=this.hass.localize(`ui.panel.config.automation.editor.actions.type.choose.${this.config.defaultOption?"default_":""}option_label`),a=this.hass.localize(`ui.panel.config.automation.editor.actions.type.choose.${this.config.defaultOption?"default_":""}option_description`);return o.dy`<ha-automation-sidebar-card .hass="${this.hass}" .isWide="${this.isWide}" .narrow="${this.narrow}"> <span slot="title">${i}</span> <span slot="subtitle">${t}</span> ${this.config.defaultOption?o.dy`<span slot="overflow-menu"></span>`:o.dy` <ha-md-menu-item slot="menu-items" .clickAction="${this.config.rename}" .disabled="${!!e}"> <ha-svg-icon slot="start" .path="${"M18,17H10.5L12.5,15H18M6,17V14.5L13.88,6.65C14.07,6.45 14.39,6.45 14.59,6.65L16.35,8.41C16.55,8.61 16.55,8.92 16.35,9.12L8.47,17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.rename")} <span class="shortcut-placeholder ${n.V?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" @click="${this.config.duplicate}" .disabled="${this.disabled}"> <ha-svg-icon slot="start" .path="${"M16,8H14V11H11V13H14V16H16V13H19V11H16M2,12C2,9.21 3.64,6.8 6,5.68V3.5C2.5,4.76 0,8.09 0,12C0,15.91 2.5,19.24 6,20.5V18.32C3.64,17.2 2,14.79 2,12M15,3C10.04,3 6,7.04 6,12C6,16.96 10.04,21 15,21C19.96,21 24,16.96 24,12C24,7.04 19.96,3 15,3M15,19C11.14,19 8,15.86 8,12C8,8.14 11.14,5 15,5C18.86,5 22,8.14 22,12C22,15.86 18.86,19 15,19Z"}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions.duplicate")} <span class="shortcut-placeholder ${n.V?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-divider slot="menu-items" role="separator" tabindex="-1"></ha-md-divider> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.delete}" .disabled="${this.disabled}" class="warning"> <ha-svg-icon slot="start" .path="${"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions.type.choose.remove_option")} ${this.narrow?o.Ld:o.dy`<span class="shortcut"> <span>${n.V?o.dy`<ha-svg-icon slot="start" .path="${"M6,2A4,4 0 0,1 10,6V8H14V6A4,4 0 0,1 18,2A4,4 0 0,1 22,6A4,4 0 0,1 18,10H16V14H18A4,4 0 0,1 22,18A4,4 0 0,1 18,22A4,4 0 0,1 14,18V16H10V18A4,4 0 0,1 6,22A4,4 0 0,1 2,18A4,4 0 0,1 6,14H8V10H6A4,4 0 0,1 2,6A4,4 0 0,1 6,2M16,18A2,2 0 0,0 18,20A2,2 0 0,0 20,18A2,2 0 0,0 18,16H16V18M14,10H10V14H14V10M6,16A2,2 0 0,0 4,18A2,2 0 0,0 6,20A2,2 0 0,0 8,18V16H6M8,6A2,2 0 0,0 6,4A2,2 0 0,0 4,6A2,2 0 0,0 6,8H8V6M18,8A2,2 0 0,0 20,6A2,2 0 0,0 18,4A2,2 0 0,0 16,6V8H18Z"}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>${this.hass.localize("ui.panel.config.automation.editor.del")}</span> </span>`} </div> </ha-md-menu-item> `} <div class="description">${a}</div> </ha-automation-sidebar-card>`}constructor(...e){super(...e),this.isWide=!1,this.disabled=!1,this.narrow=!1}}d.styles=r.kr,(0,a.__decorate)([(0,s.Cb)({attribute:!1})],d.prototype,"hass",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:!1})],d.prototype,"config",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,attribute:"wide"})],d.prototype,"isWide",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],d.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],d.prototype,"narrow",void 0),(0,a.__decorate)([(0,s.IO)(".sidebar-editor")],d.prototype,"editor",void 0),d=(0,a.__decorate)([(0,s.Mo)("ha-automation-sidebar-option")],d)},74630:function(e,t,i){i.a(e,async function(e,t){try{var a=i(73742),o=i(59048),s=i(26292),n=i(5290),r=i(39884),d=i(2913),l=i(38487),c=i(90197),h=(i(40529),e([l]));l=(h.then?(await h)():h)[0];const p="M6,2A4,4 0 0,1 10,6V8H14V6A4,4 0 0,1 18,2A4,4 0 0,1 22,6A4,4 0 0,1 18,10H16V14H18A4,4 0 0,1 22,18A4,4 0 0,1 18,22A4,4 0 0,1 14,18V16H10V18A4,4 0 0,1 6,22A4,4 0 0,1 2,18A4,4 0 0,1 6,14H8V10H6A4,4 0 0,1 2,6A4,4 0 0,1 6,2M16,18A2,2 0 0,0 18,20A2,2 0 0,0 20,18A2,2 0 0,0 18,16H16V18M14,10H10V14H14V10M6,16A2,2 0 0,0 4,18A2,2 0 0,0 6,20A2,2 0 0,0 8,18V16H6M8,6A2,2 0 0,0 6,4A2,2 0 0,0 4,6A2,2 0 0,0 6,8H8V6M18,8A2,2 0 0,0 20,6A2,2 0 0,0 18,4A2,2 0 0,0 16,6V8H18Z",u="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",g="M3 6V8H14V6H3M3 10V12H14V10H3M20 10.1C19.9 10.1 19.7 10.2 19.6 10.3L18.6 11.3L20.7 13.4L21.7 12.4C21.9 12.2 21.9 11.8 21.7 11.6L20.4 10.3C20.3 10.2 20.2 10.1 20 10.1M18.1 11.9L12 17.9V20H14.1L20.2 13.9L18.1 11.9M3 14V16H10V14H3Z";class m extends o.oi{willUpdate(e){e.has("config")&&(this._warnings=void 0,this.config&&(this.yamlMode=this.config.yamlMode,this.yamlMode&&this.editor?.yamlEditor?.setValue(this.config.config)))}render(){const e=this.hass.localize("ui.panel.config.script.editor.field.field_selector"),t=this.hass.localize(`ui.components.selectors.selector.types.${Object.keys(this.config.config.field.selector)[0]}`)||Object.keys(this.config.config.field.selector)[0];return o.dy`<ha-automation-sidebar-card .hass="${this.hass}" .isWide="${this.isWide}" .yamlMode="${this.yamlMode}" .warnings="${this._warnings}" .narrow="${this.narrow}"> <span slot="title">${t}</span> <span slot="subtitle">${e}</span> <ha-md-menu-item slot="menu-items" .clickAction="${this._toggleYamlMode}" .disabled="${!!this._warnings}"> <ha-svg-icon slot="start" .path="${g}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.edit_"+(this.yamlMode?"ui":"yaml"))} <span class="shortcut-placeholder ${d.V?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.delete}" .disabled="${this.disabled}" class="warning"> <ha-svg-icon slot="start" .path="${u}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions.delete")} ${this.narrow?o.Ld:o.dy`<span class="shortcut"> <span>${d.V?o.dy`<ha-svg-icon slot="start" .path="${p}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>${this.hass.localize("ui.panel.config.automation.editor.del")}</span> </span>`} </div> </ha-md-menu-item> ${(0,n.U)(this.sidebarKey,o.dy`<ha-script-field-selector-editor class="sidebar-editor" .hass="${this.hass}" .field="${this.config.config.field}" .disabled="${this.disabled}" @value-changed="${this._valueChangedSidebar}" @yaml-changed="${this._yamlChangedSidebar}" .yamlMode="${this.yamlMode}"></ha-script-field-selector-editor>`)} </ha-automation-sidebar-card>`}_valueChangedSidebar(e){e.stopPropagation(),this.config?.save?.({...this.config.config.field,key:this.config.config.key,...e.detail.value}),this.config&&(0,r.B)(this,"value-changed",{value:{...this.config,config:{field:e.detail.value,key:this.config.config.key,excludeKeys:this.config.config.excludeKeys,selector:!0}}})}_yamlChangedSidebar(e){e.stopPropagation(),this.config?.save?.(e.detail.value)}constructor(...e){super(...e),this.isWide=!1,this.disabled=!1,this.yamlMode=!1,this.narrow=!1,this._toggleYamlMode=()=>{(0,r.B)(this,"toggle-yaml-mode")}}}m.styles=c.kr,(0,a.__decorate)([(0,s.Cb)({attribute:!1})],m.prototype,"hass",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:!1})],m.prototype,"config",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,attribute:"wide"})],m.prototype,"isWide",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],m.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,attribute:"yaml-mode"})],m.prototype,"yamlMode",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],m.prototype,"narrow",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:"sidebar-key"})],m.prototype,"sidebarKey",void 0),(0,a.__decorate)([(0,s.SB)()],m.prototype,"_warnings",void 0),(0,a.__decorate)([(0,s.IO)(".sidebar-editor")],m.prototype,"editor",void 0),m=(0,a.__decorate)([(0,s.Mo)("ha-automation-sidebar-script-field-selector")],m),t()}catch(e){t(e)}})},40135:function(e,t,i){i.a(e,async function(e,t){try{var a=i(73742),o=i(59048),s=i(26292),n=i(5290),r=i(39884),d=i(2913),l=i(21893),c=i(90197),h=(i(40529),e([l]));l=(h.then?(await h)():h)[0];const p="M6,2A4,4 0 0,1 10,6V8H14V6A4,4 0 0,1 18,2A4,4 0 0,1 22,6A4,4 0 0,1 18,10H16V14H18A4,4 0 0,1 22,18A4,4 0 0,1 18,22A4,4 0 0,1 14,18V16H10V18A4,4 0 0,1 6,22A4,4 0 0,1 2,18A4,4 0 0,1 6,14H8V10H6A4,4 0 0,1 2,6A4,4 0 0,1 6,2M16,18A2,2 0 0,0 18,20A2,2 0 0,0 20,18A2,2 0 0,0 18,16H16V18M14,10H10V14H14V10M6,16A2,2 0 0,0 4,18A2,2 0 0,0 6,20A2,2 0 0,0 8,18V16H6M8,6A2,2 0 0,0 6,4A2,2 0 0,0 4,6A2,2 0 0,0 6,8H8V6M18,8A2,2 0 0,0 20,6A2,2 0 0,0 18,4A2,2 0 0,0 16,6V8H18Z",u="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",g="M3 6V8H14V6H3M3 10V12H14V10H3M20 10.1C19.9 10.1 19.7 10.2 19.6 10.3L18.6 11.3L20.7 13.4L21.7 12.4C21.9 12.2 21.9 11.8 21.7 11.6L20.4 10.3C20.3 10.2 20.2 10.1 20 10.1M18.1 11.9L12 17.9V20H14.1L20.2 13.9L18.1 11.9M3 14V16H10V14H3Z";class m extends o.oi{willUpdate(e){e.has("config")&&(this._warnings=void 0,this.config&&(this.yamlMode=this.config.yamlMode,this.yamlMode&&this.editor?.yamlEditor?.setValue(this.config.config)))}render(){const e=this.hass.localize("ui.panel.config.script.editor.field.label");return o.dy`<ha-automation-sidebar-card .hass="${this.hass}" .isWide="${this.isWide}" .yamlMode="${this.yamlMode}" .warnings="${this._warnings}" .narrow="${this.narrow}"> <span slot="title">${e}</span> <ha-md-menu-item slot="menu-items" .clickAction="${this._toggleYamlMode}" .disabled="${!!this._warnings}"> <ha-svg-icon slot="start" .path="${g}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.edit_"+(this.yamlMode?"ui":"yaml"))} <span class="shortcut-placeholder ${d.V?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.delete}" .disabled="${this.disabled}" class="warning"> <ha-svg-icon slot="start" .path="${u}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions.delete")} ${this.narrow?o.Ld:o.dy`<span class="shortcut"> <span>${d.V?o.dy`<ha-svg-icon slot="start" .path="${p}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>${this.hass.localize("ui.panel.config.automation.editor.del")}</span> </span>`} </div> </ha-md-menu-item> ${(0,n.U)(this.sidebarKey,o.dy`<ha-script-field-editor class="sidebar-editor" .hass="${this.hass}" .field="${this.config.config.field}" .key="${this.config.config.key}" .excludeKeys="${this.config.config.excludeKeys}" .disabled="${this.disabled}" .yamlMode="${this.yamlMode}" @value-changed="${this._valueChangedSidebar}" @yaml-changed="${this._yamlChangedSidebar}"></ha-script-field-editor>`)} </ha-automation-sidebar-card>`}_valueChangedSidebar(e){e.stopPropagation(),this.config?.save?.({...this.config.config.field,key:e.detail.value.key??this.config.config.key,...e.detail.value}),this.config&&(0,r.B)(this,"value-changed",{value:{...this.config,config:{field:e.detail.value,key:e.detail.value.key??this.config.config.key,excludeKeys:this.config.config.excludeKeys}}})}_yamlChangedSidebar(e){e.stopPropagation(),this.config?.save?.(e.detail.value)}constructor(...e){super(...e),this.isWide=!1,this.disabled=!1,this.yamlMode=!1,this.narrow=!1,this._toggleYamlMode=()=>{(0,r.B)(this,"toggle-yaml-mode")}}}m.styles=c.kr,(0,a.__decorate)([(0,s.Cb)({attribute:!1})],m.prototype,"hass",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:!1})],m.prototype,"config",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,attribute:"wide"})],m.prototype,"isWide",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],m.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,attribute:"yaml-mode"})],m.prototype,"yamlMode",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],m.prototype,"narrow",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:"sidebar-key"})],m.prototype,"sidebarKey",void 0),(0,a.__decorate)([(0,s.SB)()],m.prototype,"_warnings",void 0),(0,a.__decorate)([(0,s.IO)(".sidebar-editor")],m.prototype,"editor",void 0),m=(0,a.__decorate)([(0,s.Mo)("ha-automation-sidebar-script-field")],m),t()}catch(e){t(e)}})},4478:function(e,t,i){i.a(e,async function(e,t){try{var a=i(73742),o=i(59048),s=i(26292),n=i(5290),r=i(39884),d=i(72645),l=i(27497),c=i(2913),h=i(90197),p=i(67321),u=(i(40529),e([p]));p=(u.then?(await u)():u)[0];const g="M6,2A4,4 0 0,1 10,6V8H14V6A4,4 0 0,1 18,2A4,4 0 0,1 22,6A4,4 0 0,1 18,10H16V14H18A4,4 0 0,1 22,18A4,4 0 0,1 18,22A4,4 0 0,1 14,18V16H10V18A4,4 0 0,1 6,22A4,4 0 0,1 2,18A4,4 0 0,1 6,14H8V10H6A4,4 0 0,1 2,6A4,4 0 0,1 6,2M16,18A2,2 0 0,0 18,20A2,2 0 0,0 20,18A2,2 0 0,0 18,16H16V18M14,10H10V14H14V10M6,16A2,2 0 0,0 4,18A2,2 0 0,0 6,20A2,2 0 0,0 8,18V16H6M8,6A2,2 0 0,0 6,4A2,2 0 0,0 4,6A2,2 0 0,0 6,8H8V6M18,8A2,2 0 0,0 20,6A2,2 0 0,0 18,4A2,2 0 0,0 16,6V8H18Z",m="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",b="M19,3L13,9L15,11L22,4V3M12,12.5A0.5,0.5 0 0,1 11.5,12A0.5,0.5 0 0,1 12,11.5A0.5,0.5 0 0,1 12.5,12A0.5,0.5 0 0,1 12,12.5M6,20A2,2 0 0,1 4,18C4,16.89 4.9,16 6,16A2,2 0 0,1 8,18C8,19.11 7.1,20 6,20M6,8A2,2 0 0,1 4,6C4,4.89 4.9,4 6,4A2,2 0 0,1 8,6C8,7.11 7.1,8 6,8M9.64,7.64C9.87,7.14 10,6.59 10,6A4,4 0 0,0 6,2A4,4 0 0,0 2,6A4,4 0 0,0 6,10C6.59,10 7.14,9.87 7.64,9.64L10,12L7.64,14.36C7.14,14.13 6.59,14 6,14A4,4 0 0,0 2,18A4,4 0 0,0 6,22A4,4 0 0,0 10,18C10,17.41 9.87,16.86 9.64,16.36L12,14L19,21H22V20L9.64,7.64Z",_="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",v="M10 7V9H9V15H10V17H6V15H7V9H6V7H10M16 7C17.11 7 18 7.9 18 9V15C18 16.11 17.11 17 16 17H12V7M16 9H14V15H16V9Z",y="M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5L16,12L10,7.5V16.5Z",f="M3 6V8H14V6H3M3 10V12H14V10H3M20 10.1C19.9 10.1 19.7 10.2 19.6 10.3L18.6 11.3L20.7 13.4L21.7 12.4C21.9 12.2 21.9 11.8 21.7 11.6L20.4 10.3C20.3 10.2 20.2 10.1 20 10.1M18.1 11.9L12 17.9V20H14.1L20.2 13.9L18.1 11.9M3 14V16H10V14H3Z",$="M16,8H14V11H11V13H14V16H16V13H19V11H16M2,12C2,9.21 3.64,6.8 6,5.68V3.5C2.5,4.76 0,8.09 0,12C0,15.91 2.5,19.24 6,20.5V18.32C3.64,17.2 2,14.79 2,12M15,3C10.04,3 6,7.04 6,12C6,16.96 10.04,21 15,21C19.96,21 24,16.96 24,12C24,7.04 19.96,3 15,3M15,19C11.14,19 8,15.86 8,12C8,8.14 11.14,5 15,5C18.86,5 22,8.14 22,12C22,15.86 18.86,19 15,19Z",w="M18,17H10.5L12.5,15H18M6,17V14.5L13.88,6.65C14.07,6.45 14.39,6.45 14.59,6.65L16.35,8.41C16.55,8.61 16.55,8.92 16.35,9.12L8.47,17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z",C="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4M9,9V15H15V9";class A extends o.oi{willUpdate(e){e.has("config")&&(this._requestShowId=!1,this._warnings=void 0,this.config&&(this.yamlMode=this.config.yamlMode,this.yamlMode&&this.editor?.yamlEditor?.setValue(this.config.config)))}render(){const e=this.disabled||"enabled"in this.config.config&&!1===this.config.config.enabled,t=(0,l.j2)(this.config.config)?"list":this.config.config.trigger,i=this.hass.localize("ui.panel.config.automation.editor.triggers.trigger"),a=this.hass.localize(`ui.panel.config.automation.editor.triggers.type.${t}.label`);return o.dy` <ha-automation-sidebar-card .hass="${this.hass}" .isWide="${this.isWide}" .yamlMode="${this.yamlMode}" .warnings="${this._warnings}" .narrow="${this.narrow}"> <span slot="title">${a}</span> <span slot="subtitle">${i}</span> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.rename}" .disabled="${e||"list"===t}"> <ha-svg-icon slot="start" .path="${w}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.rename")} <span class="shortcut-placeholder ${c.V?"mac":""}"></span> </div> </ha-md-menu-item> ${this.yamlMode||"id"in this.config.config||this._requestShowId?o.Ld:o.dy`<ha-md-menu-item slot="menu-items" .clickAction="${this._showTriggerId}" .disabled="${e||"list"===t}"> <ha-svg-icon slot="start" .path="${v}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.edit_id")} <span class="shortcut-placeholder ${c.V?"mac":""}"></span> </div> </ha-md-menu-item>`} <ha-md-divider slot="menu-items" role="separator" tabindex="-1"></ha-md-divider> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.duplicate}" .disabled="${this.disabled}"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.duplicate")} <ha-svg-icon slot="start" .path="${$}"></ha-svg-icon> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.copy}" .disabled="${this.disabled}"> <ha-svg-icon slot="start" .path="${m}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.copy")} ${this.narrow?o.Ld:o.dy`<span class="shortcut"> <span>${c.V?o.dy`<ha-svg-icon slot="start" .path="${g}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>C</span> </span>`} </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.cut}" .disabled="${this.disabled}"> <ha-svg-icon slot="start" .path="${b}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.cut")} ${this.narrow?o.Ld:o.dy`<span class="shortcut"> <span>${c.V?o.dy`<ha-svg-icon slot="start" .path="${g}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>X</span> </span>`} </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this._toggleYamlMode}" .disabled="${!this.config.uiSupported||!!this._warnings}"> <ha-svg-icon slot="start" .path="${f}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.edit_"+(this.yamlMode?"ui":"yaml"))} <span class="shortcut-placeholder ${c.V?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-divider slot="menu-items" role="separator" tabindex="-1"></ha-md-divider> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.disable}" .disabled="${"list"===t}"> <ha-svg-icon slot="start" .path="${this.disabled?y:C}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions."+(e?"enable":"disable"))} <span class="shortcut-placeholder ${c.V?"mac":""}"></span> </div> </ha-md-menu-item> <ha-md-menu-item slot="menu-items" .clickAction="${this.config.delete}" .disabled="${this.disabled}" class="warning"> <ha-svg-icon slot="start" .path="${_}"></ha-svg-icon> <div class="overflow-label"> ${this.hass.localize("ui.panel.config.automation.editor.actions.delete")} ${this.narrow?o.Ld:o.dy`<span class="shortcut"> <span>${c.V?o.dy`<ha-svg-icon slot="start" .path="${g}"></ha-svg-icon>`:this.hass.localize("ui.panel.config.automation.editor.ctrl")}</span> <span>+</span> <span>${this.hass.localize("ui.panel.config.automation.editor.del")}</span> </span>`} </div> </ha-md-menu-item> ${(0,n.U)(this.sidebarKey,o.dy`<ha-automation-trigger-editor class="sidebar-editor" .hass="${this.hass}" .trigger="${this.config.config}" @value-changed="${this._valueChangedSidebar}" @yaml-changed="${this._yamlChangedSidebar}" .uiSupported="${this.config.uiSupported}" .showId="${this._requestShowId}" .yamlMode="${this.yamlMode}" .disabled="${this.disabled}" @ui-mode-not-available="${this._handleUiModeNotAvailable}" sidebar></ha-automation-trigger-editor>`)} </ha-automation-sidebar-card> `}_handleUiModeNotAvailable(e){this._warnings=(0,d.p)(this.hass,e.detail).warnings,this.yamlMode||(this.yamlMode=!0)}_valueChangedSidebar(e){e.stopPropagation(),this.config?.save?.(e.detail.value),this.config&&(0,r.B)(this,"value-changed",{value:{...this.config,config:e.detail.value}})}_yamlChangedSidebar(e){e.stopPropagation(),this.config?.save?.(e.detail.value)}constructor(...e){super(...e),this.isWide=!1,this.disabled=!1,this.yamlMode=!1,this.narrow=!1,this._requestShowId=!1,this._toggleYamlMode=()=>{(0,r.B)(this,"toggle-yaml-mode")},this._showTriggerId=()=>{this._requestShowId=!0}}}A.styles=h.kr,(0,a.__decorate)([(0,s.Cb)({attribute:!1})],A.prototype,"hass",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:!1})],A.prototype,"config",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,attribute:"wide"})],A.prototype,"isWide",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],A.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,attribute:"yaml-mode"})],A.prototype,"yamlMode",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],A.prototype,"narrow",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:"sidebar-key"})],A.prototype,"sidebarKey",void 0),(0,a.__decorate)([(0,s.SB)()],A.prototype,"_requestShowId",void 0),(0,a.__decorate)([(0,s.SB)()],A.prototype,"_warnings",void 0),(0,a.__decorate)([(0,s.IO)(".sidebar-editor")],A.prototype,"editor",void 0),A=(0,a.__decorate)([(0,s.Mo)("ha-automation-sidebar-trigger")],A),t()}catch(e){t(e)}})},44139:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{k:()=>h});i(81738),i(6989),i(72489);var o=i(73742),s=i(59048),n=i(26292),r=i(39884),d=(i(81010),i(31138),i(6514)),l=(i(45861),i(52658),i(55245),i(95814)),c=e([d]);d=(c.then?(await c)():c)[0];class h extends s.oi{firstUpdated(e){super.firstUpdated(e),this._getBlueprints()}get _blueprint(){if(this._blueprints)return this._blueprints[this._config.use_blueprint.path]}renderCard(){const e=this._blueprint;let t=!0;return s.dy` <ha-card outlined class="blueprint" .header="${this.hass.localize("ui.panel.config.automation.editor.blueprint.header")}"> <div class="blueprint-picker-container"> ${this._blueprints?Object.keys(this._blueprints).length?s.dy` <ha-blueprint-picker .hass="${this.hass}" .label="${this.hass.localize("ui.panel.config.automation.editor.blueprint.blueprint_to_use")}" .blueprints="${this._blueprints}" .value="${this._config.use_blueprint.path}" .disabled="${this.disabled}" @value-changed="${this._blueprintChanged}"></ha-blueprint-picker> `:this.hass.localize("ui.panel.config.automation.editor.blueprint.no_blueprints"):s.dy`<ha-spinner></ha-spinner>`} </div> ${this._config.use_blueprint.path?e&&"error"in e?s.dy`<p class="warning padding"> There is an error in this Blueprint: ${e.error} </p>`:s.dy`${e?.metadata.description?s.dy`<ha-markdown class="card-content" breaks .content="${e.metadata.description}"></ha-markdown>`:""} ${e?.metadata?.input&&Object.keys(e.metadata.input).length?Object.entries(e.metadata.input).map(([e,i])=>{if(i&&"input"in i){const a=this._renderSection(e,i);return t=!1,a}const a=this._renderSettingRow(e,i,t);return t=!0,a}):s.dy`<p class="padding"> ${this.hass.localize("ui.panel.config.automation.editor.blueprint.no_inputs")} </p>`}`:""} </ha-card> `}_renderSection(e,t){const i=t?.name||e,a=t.input&&Object.values(t.input).some(e=>null===e||void 0===e.default),o=!t.collapsed||a;return s.dy`<ha-expansion-panel outlined .expanded="${o}" .noCollapse="${a}"> ${t?.icon?s.dy` <ha-icon slot="leading-icon" class="section-header" .icon="${t.icon}"></ha-icon> `:s.Ld} <div slot="header" role="heading" aria-level="3" class="section-header"> <ha-markdown .content="${i}"></ha-markdown> </div> <div class="content"> ${t?.description?s.dy`<ha-markdown .content="${t.description}"></ha-markdown>`:s.Ld} ${t.input?Object.entries(t.input).map(([e,t])=>this._renderSettingRow(e,t,!0)):s.Ld} </div> </ha-expansion-panel>`}_renderSettingRow(e,t,i){const a=t?.selector??{text:void 0};return s.dy`<ha-settings-row .narrow="${this.narrow}" class="${i?"border":""}"> <span slot="heading">${t?.name||e}</span> <ha-markdown slot="description" class="card-content" breaks .content="${t?.description}"></ha-markdown> ${s.dy`<ha-selector narrow .hass="${this.hass}" .selector="${a}" .key="${e}" .disabled="${this.disabled}" .required="${void 0===t?.default}" .placeholder="${t?.default}" .value="${this._config.use_blueprint.input&&e in this._config.use_blueprint.input?this._config.use_blueprint.input[e]:t?.default}" @value-changed="${this._inputChanged}"></ha-selector>`} </ha-settings-row>`}_blueprintChanged(e){e.stopPropagation(),this._config.use_blueprint.path!==e.detail.value&&(0,r.B)(this,"value-changed",{value:{...this._config,use_blueprint:{path:e.detail.value}}})}_inputChanged(e){e.stopPropagation();const t=e.target,i=t.key,a=e.detail?e.detail.value:t.value;if(this._config.use_blueprint.input&&this._config.use_blueprint.input[i]===a||!this._config.use_blueprint.input&&""===a)return;const o={...this._config.use_blueprint.input,[i]:a};(0,r.B)(this,"value-changed",{value:{...this._config,use_blueprint:{...this._config.use_blueprint,input:o}}})}static get styles(){return[l.Qx,s.iv`:host{display:block}ha-card.blueprint{margin:0 auto;margin-bottom:64px}.padding{padding:16px}.link-button-row{padding:14px}.blueprint-picker-container{padding:0 16px 16px}ha-blueprint-picker,ha-textfield{display:block}h3{margin:16px}.introduction{margin-top:0;margin-bottom:12px}.introduction a{color:var(--primary-color)}p{margin-bottom:0}.description{margin-bottom:16px}ha-settings-row{--settings-row-content-width:100%;--settings-row-prefix-display:contents}ha-settings-row.border{border-top:1px solid var(--divider-color)}ha-expansion-panel{margin:8px;margin-left:8px;margin-right:8px}div.section-header{display:flex;vertical-align:middle}ha-icon.section-header{padding-right:10px}ha-alert{display:block;margin-bottom:16px}`]}constructor(...e){super(...e),this.isWide=!1,this.disabled=!1,this.narrow=!1}}(0,o.__decorate)([(0,n.Cb)({attribute:!1})],h.prototype,"hass",void 0),(0,o.__decorate)([(0,n.Cb)({attribute:"is-wide",type:Boolean})],h.prototype,"isWide",void 0),(0,o.__decorate)([(0,n.Cb)({type:Boolean})],h.prototype,"disabled",void 0),(0,o.__decorate)([(0,n.Cb)({type:Boolean,reflect:!0})],h.prototype,"narrow",void 0),(0,o.__decorate)([(0,n.SB)()],h.prototype,"_blueprints",void 0),h=(0,o.__decorate)([(0,n.Mo)("blueprint-generic-editor")],h),a()}catch(e){a(e)}})},21893:function(e,t,i){i.a(e,async function(e,t){try{var a=i(73742),o=i(59048),s=i(26292),n=i(28105),r=i(39884),d=i(14778),l=(i(12942),i(87979),i(43109)),c=i(95814),h=e([l]);l=(h.then?(await h)():h)[0];class p extends o.oi{render(){const e=this._schema(),t={...this.field,key:this._errorKey??this.key},i={[this.key]:this.field};return o.dy` ${this.yamlMode?o.dy`${this._yamlError?o.dy`<ha-alert alert-type="error"> ${this.hass.localize(`ui.panel.config.script.editor.field.${this._yamlError}`)} </ha-alert>`:o.Ld} <ha-yaml-editor .hass="${this.hass}" .defaultValue="${i}" @value-changed="${this._onYamlChange}"></ha-yaml-editor>`:o.dy`<ha-form .schema="${e}" .data="${t}" .error="${this._uiError}" .hass="${this.hass}" .disabled="${this.disabled}" .computeLabel="${this._computeLabelCallback}" .computeError="${this._computeError}" @value-changed="${this._valueChanged}"></ha-form>`} `}_maybeSetKey(e){const t=e.name!==this.field.name,i=e.key!==this.key;if(!t||i)return;const a=this.field.name?(0,d.l)(this.field.name):this.hass.localize("ui.panel.config.script.editor.field.field")||"field";if(new RegExp(`^${a}(_\\d)?$`).test(this.key)){let t=e.name?(0,d.l)(e.name):this.hass.localize("ui.panel.config.script.editor.field.field")||"field";if(this.excludeKeys.includes(t)){let e=t,i=2;do{e=`${t}_${i}`,i++}while(this.excludeKeys.includes(e));t=e}e.key=t}}_valueChanged(e){e.stopPropagation();const t={...e.detail.value};if(this._maybeSetKey(t),!t.key||this.excludeKeys.includes(t.key))return this._uiError=t.key?{key:"key_not_unique"}:{key:"key_not_null"},void(this._errorKey=t.key??"");this._errorKey=void 0,this._uiError=void 0,Object.keys(this.field.selector)[0]!==Object.keys(t.selector)[0]&&delete t.default,(0,r.B)(this,"value-changed",{value:t})}_onYamlChange(e){e.stopPropagation();const t={...e.detail.value};if(1!==Object.keys(t).length||!t[Object.keys(t)[0]]||!t[Object.keys(t)[0]].selector)return void(this._yamlError="yaml_error");const i=Object.keys(t)[0];if(this.excludeKeys.includes(i))return void(this._yamlError="key_not_unique");this._yamlError=void 0;const a={...t[i],key:i};(0,r.B)(this,"yaml-changed",{value:a})}constructor(...e){super(...e),this.excludeKeys=[],this.disabled=!1,this.yamlMode=!1,this._schema=(0,n.Z)(()=>[{name:"name",selector:{text:{}}},{name:"key",selector:{text:{}}},{name:"description",selector:{text:{}}},{name:"required",selector:{boolean:{}}}]),this._computeLabelCallback=e=>this.hass.localize(`ui.panel.config.script.editor.field.${e.name}`),this._computeError=e=>this.hass.localize(`ui.panel.config.script.editor.field.${e}`)||e}}p.styles=c.Qx,(0,a.__decorate)([(0,s.Cb)({attribute:!1})],p.prototype,"hass",void 0),(0,a.__decorate)([(0,s.Cb)()],p.prototype,"key",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:!1,type:Array})],p.prototype,"excludeKeys",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:!1})],p.prototype,"field",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],p.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,attribute:"yaml-mode"})],p.prototype,"yamlMode",void 0),(0,a.__decorate)([(0,s.SB)()],p.prototype,"_uiError",void 0),(0,a.__decorate)([(0,s.SB)()],p.prototype,"_yamlError",void 0),p=(0,a.__decorate)([(0,s.Mo)("ha-script-field-editor")],p),t()}catch(e){t(e)}})},38487:function(e,t,i){i.a(e,async function(e,t){try{i(2394),i(81738),i(22960);var a=i(73742),o=i(59048),s=i(26292),n=i(28105),r=i(39884),d=(i(12942),i(87979),i(43109)),l=i(60958),c=i(95814),h=i(90197),p=e([d]);d=(p.then?(await p)():p)[0];class u extends o.oi{render(){const e=this._schema(this.field.selector),t={selector:this.field.selector,default:this.field.default};return o.dy` ${this.yamlMode?o.dy`${this._yamlError?o.dy`<ha-alert alert-type="error"> ${this.hass.localize(`ui.panel.config.script.editor.field.${this._yamlError}`)} </ha-alert>`:o.Ld} <ha-yaml-editor .hass="${this.hass}" .defaultValue="${t}" @value-changed="${this._onYamlChange}"></ha-yaml-editor>`:o.dy`<ha-form .schema="${e}" .data="${t}" .error="${this._uiError}" .hass="${this.hass}" .disabled="${this.disabled}" .computeLabel="${this._computeLabelCallback}" .computeError="${this._computeError}" @value-changed="${this._valueChanged}" .narrow="${this.narrow}"></ha-form>`} `}_valueChanged(e){e.stopPropagation();const t={...e.detail.value};this._uiError=void 0,this.indent||Object.keys(this.field.selector)[0]===Object.keys(t.selector)[0]||(t.default=void 0),(0,r.B)(this,"value-changed",{value:t})}_onYamlChange(e){e.stopPropagation();const t={...e.detail.value};2===Object.keys(t).length?(0,r.B)(this,"yaml-changed",{value:t}):this._yamlError="yaml_error"}_getSelectorElements(){if(this._formElement){const e=this._formElement.shadowRoot?.querySelectorAll("ha-selector"),t=[];return e?.forEach(e=>{t.push(...Array.from(e.shadowRoot?.querySelectorAll("ha-selector-condition, ha-selector-action")||[]))}),t}return[]}expandAll(){this._getSelectorElements().forEach(e=>{e.expandAll?.()})}collapseAll(){this._getSelectorElements().forEach(e=>{e.collapseAll?.()})}static get styles(){return[c.Qx,h.uY,o.iv`:host([indent]) ha-form{display:block;margin-left:12px;padding:12px 20px 16px 16px;margin-right:-4px}`]}constructor(...e){super(...e),this.narrow=!1,this.selected=!1,this.disabled=!1,this.indent=!1,this.yamlMode=!1,this._schema=(0,n.Z)(e=>[...this.indent?[]:[{name:"selector",selector:{selector:{}}}],...!e||"object"!=typeof e||!this.indent&&l.u.includes(Object.keys(e)[0])?[]:[{name:"default",selector:this.indent?{[Object.keys(e)[0]]:{...e[Object.keys(e)[0]],optionsInSidebar:!0}}:e}]]),this._computeLabelCallback=e=>this.hass.localize(`ui.panel.config.script.editor.field.${e.name}`)??e.name,this._computeError=e=>this.hass.localize(`ui.panel.config.script.editor.field.${e}`)||e}}(0,a.__decorate)([(0,s.Cb)({attribute:!1})],u.prototype,"hass",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:!1})],u.prototype,"field",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],u.prototype,"narrow",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,reflect:!0})],u.prototype,"selected",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],u.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],u.prototype,"indent",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,attribute:"yaml-mode"})],u.prototype,"yamlMode",void 0),(0,a.__decorate)([(0,s.SB)()],u.prototype,"_uiError",void 0),(0,a.__decorate)([(0,s.SB)()],u.prototype,"_yamlError",void 0),(0,a.__decorate)([(0,s.IO)("ha-form")],u.prototype,"_formElement",void 0),u=(0,a.__decorate)([(0,s.Mo)("ha-script-field-selector-editor")],u),t()}catch(e){t(e)}})},91593:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{K1:()=>H,ak:()=>M,fp:()=>V,g5:()=>x});var o=i(73742),s=i(59048),n=i(26292),r=i(31733),d=i(36180),l=i(28105),c=i(34394),h=i(45657),p=i(44272),u=i(6219),g=i(15459),m=i(28350),b=i(87409),_=(i(8685),i(82601),i(73048)),v=(i(993),i(36925)),y=i(76815),f=i(45063),$=i(88887),w=i(37807),C=e([_]);_=(C.then?(await C)():C)[0];const A="M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",M=["minimal","standard","complete"],x={type:"entity",show_name:!1,show_state:!0,show_icon:!0},V=e=>{const t={...e};return e.display_type&&(void 0===e.show_name&&"complete"===e.display_type&&(t.show_name=!0),void 0===e.show_state&&"minimal"===e.display_type&&(t.show_state=!1),delete t.display_type),t};class H extends s.oi{static async getConfigElement(){return await Promise.all([i.e("16367"),i.e("75663"),i.e("49170"),i.e("85727")]).then(i.bind(i,26250)),document.createElement("hui-entity-badge-editor")}static getStubConfig(e,t,i){return{type:"entity",entity:(0,f.j)(e,1,t,i,["sensor","light","switch"])[0]||""}}setConfig(e){this._config={...x,...V(e)}}get hasAction(){return!this._config?.tap_action||(0,w._)(this._config?.tap_action)||(0,w._)(this._config?.hold_action)||(0,w._)(this._config?.double_tap_action)}_getImageUrl(e){const t=e.attributes.entity_picture_local||e.attributes.entity_picture;if(!t)return;let i=this.hass.hassUrl(t);return"camera"===(0,u.N)(e)&&(i=(0,v.Ch)(i,32,32)),i}render(){if(!this._config||!this.hass)return s.Ld;const e=this._config.entity,t=e?this.hass.states[e]:void 0;if(!t)return s.dy` <ha-badge .label="${e}" class="error"> <ha-svg-icon slot="icon" .hass="${this.hass}" .path="${A}"></ha-svg-icon> ${this.hass.localize("ui.badge.entity.not_found")} </ha-badge> `;const i=(0,m.v)(t),a={"--badge-color":this._computeStateColor(t,this._config.color)},o=s.dy` <state-display .stateObj="${t}" .hass="${this.hass}" .content="${this._config.state_content}" .name="${this._config.name}"> </state-display> `,n=this._config.name||(0,g.C)(t),l=this._config.show_state,c=this._config.show_name,h=this._config.show_icon,p=this._config.show_entity_picture?this._getImageUrl(t):void 0,u=l&&c?n:void 0,b=l?o:c?n:void 0;return s.dy` <ha-badge .type="${this.hasAction?"button":"badge"}" @action="${this._handleAction}" .actionHandler="${(0,y.K)({hasHold:(0,w._)(this._config.hold_action),hasDoubleClick:(0,w._)(this._config.double_tap_action)})}" .label="${u}" .iconOnly="${!b}" style="${(0,d.V)(a)}" class="${(0,r.$)({active:i})}"> ${h?p?s.dy`<img slot="icon" src="${p}" aria-hidden>`:s.dy` <ha-state-icon slot="icon" .hass="${this.hass}" .stateObj="${t}" .icon="${this._config.icon}"></ha-state-icon> `:s.Ld} ${b} </ha-badge> `}_handleAction(e){(0,$.G)(this,this.hass,this._config,e.detail.action)}constructor(...e){super(...e),this._computeStateColor=(0,l.Z)((e,t)=>{if(t)return(0,m.v)(e)?(0,c.I)(t):void 0;if("light"===(0,p.M)(e.entity_id)&&e.attributes.rgb_color){const t=(0,h.DM)(e.attributes.rgb_color);return t[1]<.4&&(t[1]<.1?t[2]=225:t[1]=.4),(0,h.CO)((0,h.XG)(t))}return(0,b.Hh)(e)})}}H.styles=s.iv`ha-badge{--badge-color:var(--state-inactive-color)}ha-badge.error{--badge-color:var(--red-color)}ha-badge.active{--badge-color:var(--primary-color)}`,(0,o.__decorate)([(0,n.Cb)({attribute:!1})],H.prototype,"hass",void 0),(0,o.__decorate)([(0,n.SB)()],H.prototype,"_config",void 0),H=(0,o.__decorate)([(0,n.Mo)("hui-entity-badge")],H),a()}catch(e){a(e)}})},69962:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{JE:()=>c,Sm:()=>h,t5:()=>l});i(67886),i(65451),i(46015),i(38334),i(94880),i(75643),i(29761);var o=i(91593),s=i(78879),n=e([o]);o=(n.then?(await n)():n)[0];const r=new Set(["error","entity"]),d={"entity-filter":()=>i.e("65291").then(i.bind(i,14465)),"state-label":()=>i.e("56838").then(i.bind(i,25190))},l=e=>(0,s.Xm)("badge",e,r,d,void 0,"entity"),c=e=>(0,s.Tw)("badge",e,r,d,void 0,"entity"),h=e=>(0,s.ED)(e,"badge",r,d);a()}catch(e){a(e)}})},39179:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{w:()=>p});i(67886),i(65451),i(46015),i(38334),i(94880),i(75643),i(29761);var o=i(14698),s=(i(95952),i(26577)),n=i(25297),r=i(43289),d=i(46109),l=(i(17931),i(78879)),c=e([o,s,n,r,d]);[o,s,n,r,d]=c.then?(await c)():c;const h=new Set(["conditional","icon","image","service-button","state-badge","state-icon","state-label"]),p=e=>("action-button"===e.type&&(e={...e,type:"service-button"}),(0,l.Tw)("element",e,h));a()}catch(e){a(e)}})},60164:function(e,t,i){i.a(e,async function(e,a){try{i.r(t),i.d(t,{createBadgeElement:()=>r.JE,createCardElement:()=>d.Z6,createHeaderFooterElement:()=>l.t,createHuiElement:()=>c.w,createRowElement:()=>h.m,importMoreInfoControl:()=>n.ST,showAlertDialog:()=>s.showAlertDialog,showConfirmationDialog:()=>s.showConfirmationDialog,showEnterCodeDialog:()=>o.t,showPromptDialog:()=>s.showPromptDialog});var o=i(35025),s=i(72242),n=i(48346),r=i(69962),d=i(24349),l=i(35942),c=i(39179),h=i(9874),p=e([n,r,d,c,h]);[n,r,d,c,h]=p.then?(await p)():p,a()}catch(e){a(e)}})},28773:function(e,t,i){i.d(t,{L:()=>a});class a{get(e){return this._cache.get(e)}set(e,t){this._cache.set(e,t),this._expiration&&window.setTimeout(()=>this._cache.delete(e),this._expiration)}has(e){return this._cache.has(e)}constructor(e){this._cache=new Map,this._expiration=e}}},2913:function(e,t,i){i.d(t,{V:()=>a});const a=/Mac/i.test(navigator.userAgent)},23265:function(e,t,i){var a={"./ha-icon-prev":["21940","55974"],"./ha-alert":["12942","43404"],"./ha-icon-button-toggle":["68695","54472"],"./ha-svg-icon.ts":["993"],"./ha-alert.ts":["12942","43404"],"./ha-icon":["46358","82343"],"./ha-icon-next.ts":["5786","41374"],"./ha-qr-code.ts":["2183","16892","93208"],"./ha-icon-overflow-menu.ts":["65014","97103","22092","79576","51810"],"./ha-icon-button-toggle.ts":["68695","54472"],"./ha-icon-button-group":["15053","59877"],"./ha-svg-icon":["993"],"./ha-icon-button-prev":["29813","54260"],"./ha-icon-button.ts":["48017"],"./ha-icon-overflow-menu":["65014","97103","22092","79576","51810"],"./ha-icon-button-arrow-next":["51383","30113"],"./ha-icon-button-prev.ts":["29813","54260"],"./ha-icon-picker":["65981","73614","2243","97103","51679","31314"],"./ha-icon-picker.ts":["65981","73614","2243","97103","51679","31314"],"./ha-icon-button-arrow-prev.ts":["45109","86454"],"./ha-icon-button-next":["22852","8145"],"./ha-icon-next":["5786","41374"],"./ha-icon-prev.ts":["21940","55974"],"./ha-icon-button-arrow-prev":["45109","86454"],"./ha-icon-button-next.ts":["22852","8145"],"./ha-icon.ts":["46358","82343"],"./ha-qr-code":["2183","16892","93208"],"./ha-icon-button":["48017"],"./ha-icon-button-group.ts":["15053","59877"],"./ha-icon-button-arrow-next.ts":["51383","30113"]};function o(e){if(!i.o(a,e))return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=a[e],o=t[0];return Promise.all(t.slice(1).map(i.e)).then(function(){return i(o)})}o.keys=()=>Object.keys(a),o.id=23265,e.exports=o},58104:function(e,t,i){i.d(t,{p:()=>s});var a=i(40246),o=i(7722);function s(e,t,i){const s=(0,o.j)(e,t,i)/7;return(0,a.u)(i?.roundingMethod)(s)}},86253:function(e,t,i){i.d(t,{l:()=>n});i(81738),i(33480);var a=i(35340),o=i(83522);const s={},n=(0,o.XM)(class extends o.Xe{render(e,t){return t()}update(e,[t,i]){if(Array.isArray(t)){if(Array.isArray(this.ot)&&this.ot.length===t.length&&t.every((e,t)=>e===this.ot[t]))return a.Jb}else if(this.ot===t)return a.Jb;return this.ot=Array.isArray(t)?Array.from(t):t,this.render(t,i)}constructor(){super(...arguments),this.ot=s}})},5290:function(e,t,i){i.d(t,{U:()=>n});var a=i(35340),o=i(83522),s=i(5277);const n=(0,o.XM)(class extends o.Xe{render(e,t){return this.key=e,t}update(e,[t,i]){return t!==this.key&&((0,s.hl)(e),this.key=t),i}constructor(){super(...arguments),this.key=a.Ld}})}};
//# sourceMappingURL=92743.d1e10bbb020595be.js.map