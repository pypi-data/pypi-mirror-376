export const __webpack_ids__=["38880"];export const __webpack_modules__={79639:function(a,e,i){i.d(e,{I:()=>t,r:()=>s});const t=async a=>a.callWS({type:"hassio/update/config/info"}),s=async(a,e)=>a.callWS({type:"hassio/update/config/update",...e})},51583:function(a,e,i){var t=i(73742),s=i(59048),n=i(26292),o=i(39884);i(62223),i(53898),i(19369),i(4103),i(35171);class c extends s.oi{render(){return s.dy` <ha-md-list> <ha-md-list-item> <span slot="headline"> ${this.hass.localize("ui.panel.config.backup.schedule.update_preference.label")} </span> <span slot="supporting-text"> ${this.hass.localize("ui.panel.config.backup.schedule.update_preference.supporting_text")} </span> <ha-md-select slot="end" @change="${this._updatePreferenceChanged}" .value="${this.supervisorUpdateConfig?.add_on_backup_before_update?.toString()||"false"}"> <ha-md-select-option value="false"> <div slot="headline"> ${this.hass.localize("ui.panel.config.backup.schedule.update_preference.skip_backups")} </div> </ha-md-select-option> <ha-md-select-option value="true"> <div slot="headline"> ${this.hass.localize("ui.panel.config.backup.schedule.update_preference.backup_before_update")} </div> </ha-md-select-option> </ha-md-select> </ha-md-list-item> <ha-md-list-item> <span slot="headline"> ${this.hass.localize("ui.panel.config.backup.schedule.retention")} </span> <span slot="supporting-text"> ${this.hass.localize("ui.panel.config.backup.settings.addon_update_backup.retention_description")} </span> <ha-md-textfield slot="end" @change="${this._backupRetentionChanged}" .value="${this.supervisorUpdateConfig?.add_on_backup_retain_copies?.toString()||"1"}" type="number" min="${1..toString()}" step="1" .suffixText="${this.hass.localize("ui.panel.config.backup.schedule.retention_units.copies")}"> </ha-md-textfield> </ha-md-list-item> </ha-md-list> `}_updatePreferenceChanged(a){a.stopPropagation();const e="true"===a.currentTarget.value;(0,o.B)(this,"update-config-changed",{value:{add_on_backup_before_update:e}})}_backupRetentionChanged(a){const e=a.currentTarget,i=Number(e.value);i>=1&&(0,o.B)(this,"update-config-changed",{value:{add_on_backup_retain_copies:i}})}}c.styles=s.iv`ha-md-list{background:0 0;--md-list-item-leading-space:0;--md-list-item-trailing-space:0}ha-md-list-item{--md-item-overflow:visible}ha-md-select{min-width:210px}ha-md-textfield{width:210px}@media all and (max-width:450px){ha-md-select{min-width:160px;width:160px;--md-filled-field-content-space:0}ha-md-textfield{width:160px}}`,(0,t.__decorate)([(0,n.Cb)({attribute:!1})],c.prototype,"hass",void 0),(0,t.__decorate)([(0,n.Cb)({attribute:!1})],c.prototype,"supervisorUpdateConfig",void 0),c=(0,t.__decorate)([(0,n.Mo)("ha-backup-config-addon")],c)},3:function(a,e,i){i.a(a,async function(a,e){try{var t=i(73742),s=i(59048),n=i(26292),o=i(39884),c=(i(62223),i(53898),i(92282)),d=i(5919),l=i(76609),r=i(66698),h=a([l]);l=(h.then?(await h)():h)[0];const p="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z";class u extends s.oi{get _value(){return this.value??""}render(){return this._value?s.dy` <ha-md-list> <ha-md-list-item> <span slot="headline"> ${this.hass.localize("ui.panel.config.backup.encryption_key.download_emergency_kit")} </span> <span slot="supporting-text"> ${this.hass.localize("ui.panel.config.backup.encryption_key.download_emergency_kit_description")} </span> <ha-button appearance="plain" slot="end" @click="${this._download}" size="small"> <ha-svg-icon .path="${p}" slot="start"></ha-svg-icon> ${this.hass.localize("ui.panel.config.backup.encryption_key.download_emergency_kit_action")} </ha-button> </ha-md-list-item> <ha-md-list-item> <span slot="headline"> ${this.hass.localize("ui.panel.config.backup.encryption_key.show_encryption_key")} </span> <span slot="supporting-text"> ${this.hass.localize("ui.panel.config.backup.encryption_key.show_encryption_key_description")} </span> <ha-button appearance="plain" slot="end" @click="${this._show}" size="small"> ${this.hass.localize("ui.panel.config.backup.encryption_key.show_encryption_key_action")} </ha-button> </ha-md-list-item> <ha-md-list-item> <span slot="headline"> ${this.hass.localize("ui.panel.config.backup.encryption_key.change_encryption_key")} </span> <span slot="supporting-text"> ${this.hass.localize("ui.panel.config.backup.encryption_key.change_encryption_key_description")} </span> <ha-button appearance="plain" variant="danger" size="small" slot="end" @click="${this._change}"> ${this.hass.localize("ui.panel.config.backup.encryption_key.change_encryption_key_action")} </ha-button> </ha-md-list-item> </ha-md-list> `:s.dy` <ha-md-list> <ha-md-list-item> <span slot="headline"> ${this.hass.localize("ui.panel.config.backup.encryption_key.set_encryption_key")}</span> <span slot="supporting-text"> ${this.hass.localize("ui.panel.config.backup.encryption_key.set_encryption_key_description")} </span> <ha-button slot="end" @click="${this._set}"> ${this.hass.localize("ui.panel.config.backup.encryption_key.set_encryption_key_action")}</ha-button> </ha-md-list-item> </ha-md-list> `}_download(){this._value&&(0,l.VY)(this.hass,this._value)}_show(){(0,r.i)(this,{currentKey:this._value})}_change(){(0,c.k)(this,{currentKey:this._value,saveKey:a=>{(0,o.B)(this,"value-changed",{value:a})}})}_set(){(0,d.S)(this,{saveKey:a=>{(0,o.B)(this,"value-changed",{value:a})}})}}u.styles=s.iv`ha-md-list{background:0 0;--md-list-item-leading-space:0;--md-list-item-trailing-space:0}ha-md-list-item{--md-item-overflow:visible}ha-button[size=small] ha-svg-icon{--mdc-icon-size:16px}`,(0,t.__decorate)([(0,n.Cb)({attribute:!1})],u.prototype,"hass",void 0),(0,t.__decorate)([(0,n.SB)()],u.prototype,"value",void 0),u=(0,t.__decorate)([(0,n.Mo)("ha-backup-config-encryption-key")],u),e()}catch(a){e(a)}})},92282:function(a,e,i){i.d(e,{k:()=>n});var t=i(39884);const s=()=>Promise.all([i.e("5055"),i.e("10170")]).then(i.bind(i,8231)),n=(a,e)=>new Promise(i=>{const n=e?.cancel,o=e?.submit;(0,t.B)(a,"show-dialog",{dialogTag:"ha-dialog-change-backup-encryption-key",dialogImport:s,dialogParams:{...e,cancel:()=>{i(!1),n&&n()},submit:a=>{i(a),o&&o(a)}}})})},78158:function(a,e,i){i.d(e,{s:()=>s});var t=i(39884);const s=(a,e)=>{(0,t.B)(a,"show-dialog",{dialogTag:"dialog-local-backup-location",dialogImport:()=>i.e("65559").then(i.bind(i,98416)),dialogParams:e})}},5919:function(a,e,i){i.d(e,{S:()=>n});var t=i(39884);const s=()=>Promise.all([i.e("5055"),i.e("34878")]).then(i.bind(i,80295)),n=(a,e)=>new Promise(i=>{const n=e?.cancel,o=e?.submit;(0,t.B)(a,"show-dialog",{dialogTag:"ha-dialog-set-backup-encryption-key",dialogImport:s,dialogParams:{...e,cancel:()=>{i(!1),n&&n()},submit:a=>{i(a),o&&o(a)}}})})},66698:function(a,e,i){i.d(e,{i:()=>n});var t=i(39884);const s=()=>Promise.all([i.e("5055"),i.e("1002")]).then(i.bind(i,79434)),n=(a,e)=>(0,t.B)(a,"show-dialog",{dialogTag:"ha-dialog-show-backup-encryption-key",dialogImport:s,dialogParams:e})},32708:function(a,e,i){i.a(a,async function(a,t){try{i.r(e);var s=i(73742),n=i(59048),o=i(26292),c=i(37528),d=i(39884),l=i(84213),r=i(87639),h=i(65863),p=(i(12942),i(72953)),u=(i(41037),i(31138),i(48017),i(5786),i(69760),i(56161),i(993),i(76609)),g=i(79639),_=(i(51869),i(42399)),f=(i(51583),i(73767)),b=i(64592),v=i(3),k=i(25851),m=i(78158),y=i(35580),$=a([p,f,b,v,k,u]);[p,f,b,v,k,u]=$.then?(await $)():$;const C="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",w="M6,2H18A2,2 0 0,1 20,4V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V4A2,2 0 0,1 6,2M12,4A6,6 0 0,0 6,10C6,13.31 8.69,16 12.1,16L11.22,13.77C10.95,13.29 11.11,12.68 11.59,12.4L12.45,11.9C12.93,11.63 13.54,11.79 13.82,12.27L15.74,14.69C17.12,13.59 18,11.9 18,10A6,6 0 0,0 12,4M12,9A1,1 0 0,1 13,10A1,1 0 0,1 12,11A1,1 0 0,1 11,10A1,1 0 0,1 12,9M7,18A1,1 0 0,0 6,19A1,1 0 0,0 7,20A1,1 0 0,0 8,19A1,1 0 0,0 7,18M12.09,13.27L14.58,19.58L17.17,18.08L12.95,12.77L12.09,13.27Z",z="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z";class x extends n.oi{willUpdate(a){super.willUpdate(a),a.has("config")&&!this._config&&(this._config=this.config),!this.hasUpdated&&(0,c.p)(this.hass,"hassio")&&this._getSupervisorUpdateConfig()}connectedCallback(){super.connectedCallback(),this._scrollToSection(),this._config=this.config}async _getSupervisorUpdateConfig(){try{this._supervisorUpdateConfig=await(0,g.I)(this.hass)}catch(a){console.error(a),this._supervisorUpdateConfigError=this.hass.localize("ui.panel.config.backup.settings.addon_update_backup.error_load",{error:a?.message||a})}}async _scrollToSection(){if("locations"===window.location.hash.substring(1)&&(0,c.p)(this.hass,"hassio")&&!this._config?.create_backup.include_all_addons&&this._config?.create_backup.include_addons?.length)return this.addEventListener("backup-addons-fetched",async()=>{await(0,h.y)(),this._scrolltoHash()}),void setTimeout(()=>{this._clearHash()},500);await(0,h.y)(),this._scrolltoHash()}_scrolltoHash(){const a=window.location.hash.substring(1);if(a){const e=this.shadowRoot.getElementById(a);e?.scrollIntoView(),this._clearHash()}}_clearHash(){history.replaceState(null,"",window.location.pathname)}render(){if(!this._config)return n.Ld;const a=(0,c.p)(this.hass,"hassio");return n.dy` <hass-subpage back-path="/config/backup" .hass="${this.hass}" .narrow="${this.narrow}" .header="${this.hass.localize("ui.panel.config.backup.settings.header")}"> ${a?n.dy` <ha-button-menu slot="toolbar-icon"> <ha-icon-button slot="trigger" .label="${this.hass.localize("ui.common.menu")}" .path="${C}"></ha-icon-button> <ha-list-item graphic="icon" @request-selected="${this._changeLocalLocation}"> <ha-svg-icon slot="graphic" .path="${w}"></ha-svg-icon> ${this.hass.localize("ui.panel.config.backup.settings.menu.change_default_location")} </ha-list-item> </ha-button-menu> `:n.Ld} <div class="content"> <ha-card id="schedule"> <div class="card-header"> ${this.hass.localize("ui.panel.config.backup.settings.schedule.title")} </div> <div class="card-content"> <p> ${this.hass.localize("ui.panel.config.backup.settings.schedule.description")} </p> ${this._supervisorUpdateConfigError?n.dy`<ha-alert alert-type="error"> ${this._supervisorUpdateConfigError} </ha-alert>`:n.Ld} <ha-backup-config-schedule .hass="${this.hass}" .value="${this._config}" .supervisor="${a}" .supervisorUpdateConfig="${this._supervisorUpdateConfig}" @update-config-changed="${this._supervisorUpdateConfigChanged}" @value-changed="${this._scheduleConfigChanged}"></ha-backup-config-schedule> </div> </ha-card> <ha-card id="data"> <div class="card-header"> ${this.hass.localize("ui.panel.config.backup.settings.data.title")} </div> <div class="card-content"> <ha-backup-config-data .hass="${this.hass}" .value="${this._dataConfig}" @value-changed="${this._dataConfigChanged}" force-home-assistant hide-addon-version></ha-backup-config-data> </div> </ha-card> <ha-card class="agents" id="locations"> <div class="card-header"> ${this.hass.localize("ui.panel.config.backup.settings.locations.title")} </div> <div class="card-content"> <p> ${this.hass.localize("ui.panel.config.backup.settings.locations.description")} </p> <ha-backup-config-agents .hass="${this.hass}" .value="${this._config.create_backup.agent_ids}" .agentsConfig="${this._config.agents}" .cloudStatus="${this.cloudStatus}" .agents="${this.agents}" @value-changed="${this._agentsConfigChanged}" show-settings></ha-backup-config-agents> ${this._config.create_backup.agent_ids.length?n.Ld:n.dy` <ha-alert alert-type="warning" .title="${this.hass.localize("ui.panel.config.backup.settings.locations.no_location")}"> ${this.hass.localize("ui.panel.config.backup.settings.locations.no_location_description")} </ha-alert> <br> `} </div> ${this.cloudStatus?.logged_in?n.Ld:n.dy`<ha-card class="cloud-info"> <div class="cloud-header"> <img .src="${(0,y.X1)({domain:"cloud",type:"icon",useFallback:!0,darkOptimized:this.hass.themes?.darkMode})}" crossorigin="anonymous" referrerpolicy="no-referrer" alt="Nabu Casa logo" slot="start"> <span>${this.hass.localize("ui.panel.config.backup.settings.locations.ha_cloud_backup",{home_assistant_cloud:"Home Assistant Cloud"})}</span> </div> <div class="card-content"> ${this.hass.localize("ui.panel.config.backup.settings.locations.ha_cloud_description")} </div> <div class="card-actions"> <ha-button appearance="plain" href="/config/cloud/login"> ${this.hass.localize("ui.panel.config.voice_assistants.assistants.cloud.sign_in")} </ha-button> <ha-button href="/config/cloud/register"> ${this.hass.localize("ui.panel.config.voice_assistants.assistants.cloud.try_one_month")} </ha-button> </div> </ha-card>`} <div class="card-actions"> <ha-button size="small" href="${(0,_.R)(this.hass,"/integrations/#backup")}" target="_blank" rel="noreferrer" appearance="plain"> <ha-svg-icon slot="start" .path="${z}"></ha-svg-icon> ${this.hass.localize("ui.panel.config.backup.settings.locations.more_locations")} </ha-button> ${a?n.dy`<ha-button size="small" appearance="plain" href="/config/storage"> ${this.hass.localize("ui.panel.config.backup.settings.locations.manage_network_storage")} </ha-button>`:n.Ld} </div> </ha-card> ${a?n.dy`<ha-card> <div class="card-header"> ${this.hass.localize("ui.panel.config.backup.settings.addon_update_backup.title")} </div> <div class="card-content"> <p> ${this.hass.localize("ui.panel.config.backup.settings.addon_update_backup.description")} </p> <p> ${this.hass.localize("ui.panel.config.backup.settings.addon_update_backup.local_only")} </p> ${this._supervisorUpdateConfigError?n.dy`<ha-alert alert-type="error"> ${this._supervisorUpdateConfigError} </ha-alert>`:n.Ld} <ha-backup-config-addon .hass="${this.hass}" .supervisorUpdateConfig="${this._supervisorUpdateConfig}" @update-config-changed="${this._supervisorUpdateConfigChanged}"></ha-backup-config-addon> </div> </ha-card>`:n.Ld} <ha-card> <div class="card-header"> ${this.hass.localize("ui.panel.config.backup.settings.encryption_key.title")} </div> <div class="card-content"> <p> ${this.hass.localize("ui.panel.config.backup.settings.encryption_key.description")} </p> <ha-backup-config-encryption-key .hass="${this.hass}" .value="${this._config.create_backup.password}" @value-changed="${this._encryptionKeyChanged}"></ha-backup-config-encryption-key> </div> </ha-card> </div> </hass-subpage> `}async _changeLocalLocation(a){(0,l.Q)(a)&&(0,m.s)(this,{})}async _supervisorUpdateConfigChanged(a){const e=a.detail.value;this._supervisorUpdateConfig={...this._supervisorUpdateConfig,...e},this._debounceSaveSupervisorUpdateConfig()}_scheduleConfigChanged(a){const e=a.detail.value;this._config={...this._config,schedule:e.schedule,retention:e.retention},this._debounceSave()}get _dataConfig(){const{include_addons:a,include_all_addons:e,include_database:i,include_folders:t}=this._config.create_backup;return{include_homeassistant:!0,include_database:i,include_folders:t||void 0,include_all_addons:e,include_addons:a||void 0}}_dataConfigChanged(a){const e=a.detail.value;this._config={...this._config,create_backup:{...this.config.create_backup,include_database:e.include_database,include_folders:e.include_folders||null,include_all_addons:e.include_all_addons,include_addons:e.include_addons||null}},this._debounceSave()}_agentsConfigChanged(a){const e=a.detail.value;this._config={...this._config,create_backup:{...this._config.create_backup,agent_ids:e}},this._debounceSave()}_encryptionKeyChanged(a){const e=a.detail.value;this._config={...this._config,create_backup:{...this._config.create_backup,password:e}},this._debounceSave()}async _saveSupervisorUpdateConfig(){if(this._supervisorUpdateConfig)try{await(0,g.r)(this.hass,this._supervisorUpdateConfig)}catch(a){console.error(a),this._supervisorUpdateConfigError=this.hass.localize("ui.panel.config.backup.settings.addon_update_backup.error_save",{error:a?.message||a?.toString()})}}async _save(){await(0,u._r)(this.hass,{create_backup:{agent_ids:this._config.create_backup.agent_ids,include_folders:this._config.create_backup.include_folders??[],include_database:this._config.create_backup.include_database,include_addons:this._config.create_backup.include_addons??[],include_all_addons:this._config.create_backup.include_all_addons,password:this._config.create_backup.password},retention:this._config.retention,schedule:this._config.schedule}),(0,d.B)(this,"ha-refresh-backup-config")}constructor(...a){super(...a),this.narrow=!1,this.agents=[],this._debounceSaveSupervisorUpdateConfig=(0,r.D)(()=>this._saveSupervisorUpdateConfig(),500),this._debounceSave=(0,r.D)(()=>this._save(),500)}}x.styles=n.iv`ha-card{scroll-margin-top:16px}p{color:var(--secondary-text-color)}p.error{color:var(--error-color)}.content{padding:28px 20px 0;max-width:690px;margin:0 auto;gap:24px;display:flex;flex-direction:column;margin-bottom:24px}.alert{--mdc-theme-primary:var(--error-color)}.card-header{padding-bottom:8px}.card-content{padding-bottom:0}a{text-decoration:none}.cloud-info{margin:0 16px 16px}.cloud-info .cloud-header{display:flex;gap:16px;font-size:var(--ha-font-size-xl);align-items:center;padding:16px}.cloud-info .cloud-header img{width:48px}.cloud-info .card-content{padding-bottom:16px}.cloud-info .card-actions{display:flex;justify-content:space-between}ha-button[size=small] ha-svg-icon{--mdc-icon-size:16px}`,(0,s.__decorate)([(0,o.Cb)({attribute:!1})],x.prototype,"hass",void 0),(0,s.__decorate)([(0,o.Cb)({attribute:!1})],x.prototype,"cloudStatus",void 0),(0,s.__decorate)([(0,o.Cb)({type:Boolean})],x.prototype,"narrow",void 0),(0,s.__decorate)([(0,o.Cb)({attribute:!1})],x.prototype,"config",void 0),(0,s.__decorate)([(0,o.Cb)({attribute:!1})],x.prototype,"agents",void 0),(0,s.__decorate)([(0,o.SB)()],x.prototype,"_config",void 0),(0,s.__decorate)([(0,o.SB)()],x.prototype,"_supervisorUpdateConfig",void 0),(0,s.__decorate)([(0,o.SB)()],x.prototype,"_supervisorUpdateConfigError",void 0),x=(0,s.__decorate)([(0,o.Mo)("ha-config-backup-settings")],x),t()}catch(a){t(a)}})}};
//# sourceMappingURL=38880.e6bbfb29e3e97a92.js.map