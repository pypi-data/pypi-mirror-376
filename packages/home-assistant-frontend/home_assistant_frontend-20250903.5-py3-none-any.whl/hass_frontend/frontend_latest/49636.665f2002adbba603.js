export const __webpack_ids__=["49636"];export const __webpack_modules__={10388:function(e,t,n){n.a(e,async function(e,i){try{n.d(t,{c:()=>_,computeStateDisplay:()=>b});var s=n(16230),a=n(38763),r=n(93836),o=n(40142),c=n(74266),l=n(45691),u=n(28598),d=n(27417),m=n(44272),h=e([r,u,o,l,c]);[r,u,o,l,c]=h.then?(await h)():h;const b=(e,t,n,i,s,a,r)=>{const o=a?.[t.entity_id];return _(e,n,i,s,o,t.entity_id,t.attributes,void 0!==r?r:t.state)},_=(e,t,n,i,h,b,_,f)=>{if(f===s.lz||f===s.nZ)return e(`state.default.${f}`);const y=(0,m.M)(b),g="counter"===y||"number"===y||"input_number"===y;if((0,u.sJ)(_,"sensor"===y?n:[])||g){if("duration"===_.device_class&&_.unit_of_measurement&&r.a_.includes(_.unit_of_measurement))try{return(0,r.LU)(t,f,_.unit_of_measurement,h?.display_precision)}catch(e){}if("monetary"===_.device_class)try{return(0,u.uf)(f,t,{style:"currency",currency:_.unit_of_measurement,minimumFractionDigits:2,...(0,u.l4)({state:f,attributes:_},h)})}catch(e){}const n=(0,u.uf)(f,t,(0,u.l4)({state:f,attributes:_},h)),i=h?.translation_key&&e(`component.${h.platform}.entity.${y}.${h.translation_key}.unit_of_measurement`)||_.unit_of_measurement;return i?`${n}${(0,d.L)(i,t)}${i}`:n}if(["date","input_datetime","time"].includes(y))try{const e=f.split(" ");if(2===e.length)return(0,c.o0)(new Date(e.join("T")),{...t,time_zone:a.c_.local},i);if(1===e.length){if(f.includes("-"))return(0,o.p6)(new Date(`${f}T00:00`),{...t,time_zone:a.c_.local},i);if(f.includes(":")){const e=new Date;return(0,l.mr)(new Date(`${e.toISOString().split("T")[0]}T${f}`),{...t,time_zone:a.c_.local},i)}}return f}catch(e){return f}if(["ai_task","button","conversation","event","image","input_button","notify","scene","stt","tag","tts","wake_word","datetime"].includes(y)||"sensor"===y&&"timestamp"===_.device_class)try{return(0,c.o0)(new Date(f),t,i)}catch(e){return f}return h?.translation_key&&e(`component.${h.platform}.entity.${y}.${h.translation_key}.state.${f}`)||_.device_class&&e(`component.${y}.entity_component.${_.device_class}.state.${f}`)||e(`component.${y}.entity_component._.state.${f}`)||f};i()}catch(e){i(e)}})},89166:function(e,t,n){n.a(e,async function(e,i){try{n.d(t,{Nu:()=>S,V3:()=>j,Vk:()=>m,YA:()=>k,xS:()=>b,zP:()=>O});n(2394),n(81738),n(94814),n(29981),n(22960),n(6989),n(72489),n(67886),n(65451),n(46015),n(38334),n(94880),n(75643),n(29761);var s=n(44272),a=n(10388),r=n(15459),o=e([a]);a=(o.then?(await o)():o)[0];const c=["climate","humidifier","water_heater"],l=["climate","humidifier","input_datetime","water_heater","person","device_tracker"],u=["temperature","current_temperature","target_temp_low","target_temp_high","hvac_action","humidity","mode","action","current_humidity"],d=(e,t)=>!e.states[t]||l.includes((0,s.M)(t)),m=(e,t,n,i,s)=>{const a={type:"history/stream",entity_ids:s,start_time:n.toISOString(),end_time:i.toISOString(),minimal_response:!0,no_attributes:!s.some(t=>d(e,t))},r=new h(e);return e.connection.subscribeMessage(e=>t(r.processMessage(e)),a)};class h{processMessage(e){if(!this.combinedHistory||!Object.keys(this.combinedHistory).length)return this.combinedHistory=e.states,this.combinedHistory;if(!Object.keys(e.states).length)return this.combinedHistory;const t=this.hoursToShow?((new Date).getTime()-3600*this.hoursToShow*1e3)/1e3:void 0,n={};for(const e of Object.keys(this.combinedHistory))n[e]=[];for(const t of Object.keys(e.states))n[t]=[];for(const i of Object.keys(n)){if(i in this.combinedHistory&&i in e.states){const t=this.combinedHistory[i],s=t[t.length-1];n[i]=t.concat(e.states[i]),e.states[i][0].lu<s.lu&&(n[i]=n[i].sort((e,t)=>e.lu-t.lu))}else i in this.combinedHistory?n[i]=this.combinedHistory[i]:n[i]=e.states[i];if(t&&i in this.combinedHistory){const e=n[i].filter(e=>e.lu<t);if(!e.length)continue;if(n[i]=n[i].filter(e=>e.lu>=t),n[i].length&&n[i][0].lu===t)continue;const s=e[e.length-1];s.lu=t,n[i].unshift(s)}}return this.combinedHistory=n,this.combinedHistory}constructor(e,t){this.hass=e,this.hoursToShow=t,this.combinedHistory={}}}const b=(e,t,n,i,s,a=!0,r=!0)=>{const o={type:"history/stream",entity_ids:i,start_time:new Date((new Date).getTime()-3600*n*1e3).toISOString(),minimal_response:a,significant_changes_only:r,no_attributes:s??!i.some(t=>d(e,t))},c=new h(e,n);return e.connection.subscribeMessage(e=>t(c.processMessage(e)),o)},_=(e,t)=>e.state===t.state&&(!e.attributes||!t.attributes||u.every(n=>e.attributes[n]===t.attributes[n])),f=(e,t,n,i,s,o,c)=>{const l=[],u=o[0];for(const r of o){if(l.length>0&&r.s===l[l.length-1].state)continue;const o={};c?.attributes.device_class&&(o.device_class=c?.attributes.device_class),l.push({state_localize:(0,a.c)(e,t,[],n,i[s],s,{...r.a||u.a,...o},r.s),state:r.s,last_changed:1e3*(r.lc?r.lc:r.lu)})}return{name:(0,r.a)(s,c?.attributes||u.a),entity_id:s,data:l}},y=(e,t,n,i)=>{const a=[];return Object.keys(n).forEach(e=>{const t=n[e],o=t[0],l=(0,s.M)(e),d=[];for(const e of t){let t;if(c.includes(l)){t={state:e.s,last_changed:1e3*e.lu,attributes:{}};for(const n of u)n in e.a&&(t.attributes[n]=e.a[n])}else t={state:e.s,last_changed:1e3*(e.lc?e.lc:e.lu),attributes:{}};d.length>1&&_(t,d[d.length-1])&&_(t,d[d.length-2])||d.push(t)}const m=e in i?i[e].attributes:"friendly_name"in o.a?o.a:void 0;a.push({domain:l,name:(0,r.a)(e,m||{}),entity_id:e,states:d})}),{unit:e,device_class:t,identifier:Object.keys(n).join(""),data:a}},g=["counter","input_number","number"],p=e=>g.includes(e),v=e=>"unit_of_measurement"in e||"state_class"in e,w=(e,t)=>null!=e.attributes.device_class&&t.includes(e.attributes.device_class),P=" ",k=(e,t,n,i,s=!1)=>{const a={};n.forEach(e=>{e in t&&(a[e]=t[e])});const r={};Object.entries(a).forEach(([e,t])=>{const n=t.map(e=>({s:null!=e.mean?e.mean.toString():e.state.toString(),lc:e.start/1e3,a:{},lu:e.start/1e3}));r[e]=n});const o=S(e,r,[],e.localize,i,s,!0);return(o?.line||[]).forEach(e=>{e.data.forEach(e=>{e.statistics=e.states,e.states=[]})}),o},S=(e,t,n,i,a,r=!1,o=!1)=>{const c={},l=[],u={};if(new Set([...n,...Object.keys(t)]).forEach(n=>{n in t?u[n]=t[n]:e.states[n]&&(u[n]=[{s:e.states[n].state,a:e.states[n].attributes,lu:new Date(e.states[n].last_updated).getTime()/1e3}])}),!u)return{line:[],timeline:[]};Object.keys(u).forEach(t=>{const n=u[t];if(0===n.length)return;const d=(0,s.M)(t),m=t in e.states?e.states[t]:void 0,h=m||p(d)?void 0:n.find(e=>e.a&&v(e.a));let b;b=O(d,m,h,a,o)?m?.attributes.unit_of_measurement||h?.a.unit_of_measurement||P:{zone:i("ui.dialogs.more_info_control.zone.graph_unit"),climate:e.config.unit_system.temperature,humidifier:"%",water_heater:e.config.unit_system.temperature}[d];const _=$(b,{climate:"temperature",humidifier:"humidity",water_heater:"temperature"}[d]||(m?.attributes||h?.a)?.device_class,r);b?_&&_ in c&&t in c[_]?c[_][t].push(...n):_&&(_ in c||(c[_]={}),c[_][t]=n):l.push(f(i,e.locale,e.config,e.entities,t,n,m))});return{line:Object.keys(c).map(t=>{const n=t.split("_"),i=n[0],s=n.slice(1).join("_")||void 0;return y(i,s,c[t],e.states)}),timeline:l}},$=(e,t,n)=>n?`${e}_${t||""}`:e,O=(e,t,n,i,s=!1)=>s||p(e)||null!=t&&v(t.attributes)||null!=t&&"sensor"===e&&w(t,i)||null!=n,j=(e,t,n=!0)=>{if(!t)return e;const i={...e,line:[]},s={};for(const t of e.line){const e=$(t.unit,t.device_class,n);e&&(s[e]={historyItem:t})}for(const i of t.line){i.unit===P&&(i.unit=e.line.find(e=>e.identifier===i.identifier)?.unit??P);const t=$(i.unit,i.device_class,n);t&&(t in s?s[t].ltsItem=i:s[t]={ltsItem:i})}for(const{historyItem:e,ltsItem:t}of Object.values(s)){if(!e||!t){i.line.push(e||t);continue}const n={...e,data:[]},s=new Set([...e.data.map(e=>e.entity_id),...t.data.map(e=>e.entity_id)]);for(const i of s){const s=e.data.find(e=>e.entity_id===i),a=t.data.find(e=>e.entity_id===i);if(!s||!a){n.data.push(s||a);continue}const r=s.states[0]?.last_changed||a.statistics[a.statistics.length-1].last_changed+1,o=[];for(const e of a.statistics){if(e.last_changed>=r)break;o.push(e)}n.data.push(0===o.length?s:{...s,statistics:o})}i.line.push(n)}return i};i()}catch(e){i(e)}})},96241:function(e,t,n){n.d(t,{HD:()=>s,jt:()=>o,oO:()=>a,p6:()=>r,u1:()=>l});n(81738),n(29981);var i=n(6219);const s=e=>e.callWS({type:"person/list"}),a=(e,t)=>e.callWS({type:"person/create",...t}),r=(e,t,n)=>e.callWS({type:"person/update",person_id:t,...n}),o=(e,t)=>e.callWS({type:"person/delete",person_id:t}),c={},l=e=>{if(!e.user?.id)return;const t=c[e.user.id];if(t){const n=e.states[t];if(n&&n.attributes.user_id===e.user.id)return n}const n=Object.values(e.states).find(t=>t.attributes.user_id===e.user.id&&"person"===(0,i.N)(t));return n&&(c[e.user.id]=n.entity_id),n}},24349:function(e,t,n){n.a(e,async function(e,i){try{n.d(t,{Do:()=>v,Z6:()=>p,l$:()=>g});n(67886),n(65451),n(46015),n(38334),n(94880),n(75643),n(29761);var s=n(58994),a=n(56206),r=(n(56922),n(86366),n(78265)),o=n(17275),c=n(20369),l=n(88352),u=n(20480),d=n(32172),m=n(62987),h=n(72803),b=n(78879),_=e([s,a,r,o,c,l,u,d,m,h]);[s,a,r,o,c,l,u,d,m,h]=_.then?(await _)():_;const f=new Set(["entity","entities","button","entity-button","glance","grid","section","light","sensor","thermostat","weather-forecast","tile","heading"]),y={"alarm-panel":()=>Promise.all([n.e("73614"),n.e("47294")]).then(n.bind(n,81724)),area:()=>n.e("59544").then(n.bind(n,44066)),calendar:()=>Promise.all([n.e("56932"),n.e("2884"),n.e("4172"),n.e("33118"),n.e("2015"),n.e("17508")]).then(n.bind(n,40801)),conditional:()=>n.e("61868").then(n.bind(n,7460)),"empty-state":()=>n.e("47700").then(n.bind(n,35296)),"energy-compare":()=>Promise.all([n.e("88688"),n.e("10868"),n.e("62958"),n.e("39280"),n.e("11702")]).then(n.bind(n,87079)),"energy-carbon-consumed-gauge":()=>Promise.all([n.e("22092"),n.e("88688"),n.e("10868"),n.e("62958"),n.e("39280"),n.e("52157")]).then(n.bind(n,89078)),"energy-date-selection":()=>Promise.all([n.e("73614"),n.e("88688"),n.e("10868"),n.e("62958"),n.e("83510"),n.e("39280"),n.e("46091"),n.e("66367")]).then(n.bind(n,25316)),"energy-devices-graph":()=>Promise.all([n.e("88688"),n.e("10868"),n.e("62958"),n.e("39280"),n.e("68973"),n.e("12697")]).then(n.bind(n,68669)),"energy-devices-detail-graph":()=>Promise.all([n.e("88688"),n.e("10868"),n.e("62958"),n.e("13805"),n.e("39280"),n.e("68973"),n.e("39149")]).then(n.bind(n,99153)),"energy-distribution":()=>Promise.all([n.e("88688"),n.e("10868"),n.e("62958"),n.e("39280"),n.e("42159")]).then(n.bind(n,12532)),"energy-gas-graph":()=>Promise.all([n.e("88688"),n.e("10868"),n.e("62958"),n.e("13805"),n.e("39280"),n.e("68973"),n.e("92464")]).then(n.bind(n,89316)),"energy-water-graph":()=>Promise.all([n.e("88688"),n.e("10868"),n.e("62958"),n.e("13805"),n.e("39280"),n.e("68973"),n.e("48869")]).then(n.bind(n,73369)),"energy-grid-neutrality-gauge":()=>Promise.all([n.e("22092"),n.e("88688"),n.e("10868"),n.e("62958"),n.e("39280"),n.e("16881")]).then(n.bind(n,74314)),"energy-solar-consumed-gauge":()=>Promise.all([n.e("88688"),n.e("10868"),n.e("62958"),n.e("39280"),n.e("97755")]).then(n.bind(n,56849)),"energy-self-sufficiency-gauge":()=>Promise.all([n.e("22092"),n.e("88688"),n.e("10868"),n.e("62958"),n.e("39280"),n.e("90478")]).then(n.bind(n,58623)),"energy-solar-graph":()=>Promise.all([n.e("88688"),n.e("10868"),n.e("62958"),n.e("13805"),n.e("39280"),n.e("68973"),n.e("50189")]).then(n.bind(n,35839)),"energy-sources-table":()=>Promise.all([n.e("88688"),n.e("10868"),n.e("62958"),n.e("66018"),n.e("39280"),n.e("79274")]).then(n.bind(n,49859)),"energy-usage-graph":()=>Promise.all([n.e("88688"),n.e("10868"),n.e("62958"),n.e("13805"),n.e("39280"),n.e("68973"),n.e("67993")]).then(n.bind(n,49639)),"energy-sankey":()=>Promise.all([n.e("88688"),n.e("10868"),n.e("62958"),n.e("97657"),n.e("50239"),n.e("46110"),n.e("39280"),n.e("68973"),n.e("40825")]).then(n.bind(n,8528)),"entity-filter":()=>n.e("11600").then(n.bind(n,94884)),error:()=>Promise.resolve().then(n.bind(n,46772)),"home-summary":()=>n.e("19176").then(n.bind(n,10005)),gauge:()=>n.e("62298").then(n.bind(n,43309)),"history-graph":()=>Promise.all([n.e("97657"),n.e("37181"),n.e("37192"),n.e("68973"),n.e("90749"),n.e("96101")]).then(n.bind(n,69782)),"horizontal-stack":()=>n.e("69521").then(n.bind(n,45662)),humidifier:()=>n.e("44607").then(n.bind(n,41068)),iframe:()=>n.e("38748").then(n.bind(n,63055)),logbook:()=>Promise.all([n.e("29425"),n.e("26263"),n.e("95010")]).then(n.bind(n,52202)),map:()=>Promise.all([n.e("12488"),n.e("75556"),n.e("92353")]).then(n.bind(n,70963)),markdown:()=>Promise.all([n.e("43086"),n.e("96911")]).then(n.bind(n,11308)),clock:()=>n.e("6677").then(n.bind(n,13863)),"media-control":()=>Promise.all([n.e("75263"),n.e("84428")]).then(n.bind(n,16)),"picture-elements":()=>Promise.all([n.e("16367"),n.e("75663"),n.e("14525"),n.e("79121")]).then(n.bind(n,64606)),"picture-entity":()=>Promise.all([n.e("16367"),n.e("16145")]).then(n.bind(n,97166)),"picture-glance":()=>Promise.all([n.e("16367"),n.e("69595")]).then(n.bind(n,40362)),picture:()=>n.e("31954").then(n.bind(n,3320)),"plant-status":()=>n.e("6425").then(n.bind(n,19187)),"recovery-mode":()=>Promise.all([n.e("79576"),n.e("70918"),n.e("54206"),n.e("40516")]).then(n.bind(n,26743)),"todo-list":()=>Promise.all([n.e("73614"),n.e("86689"),n.e("43086"),n.e("65811")]).then(n.bind(n,9501)),"shopping-list":()=>Promise.all([n.e("73614"),n.e("86689"),n.e("43086"),n.e("65811"),n.e("48874")]).then(n.bind(n,71858)),starting:()=>n.e("59226").then(n.bind(n,15692)),"statistics-graph":()=>Promise.all([n.e("88688"),n.e("10868"),n.e("62958"),n.e("39280"),n.e("37034")]).then(n.bind(n,75382)),statistic:()=>Promise.all([n.e("88688"),n.e("10868"),n.e("62958"),n.e("39280"),n.e("55286")]).then(n.bind(n,36383)),"vertical-stack":()=>n.e("85086").then(n.bind(n,50334))},g=e=>(0,b.Xm)("card",e,f,y,void 0,void 0),p=e=>(0,b.Tw)("card",e,f,y,void 0,void 0),v=e=>(0,b.ED)(e,"card",f,y);i()}catch(e){i(e)}})},35942:function(e,t,n){n.d(t,{Q:()=>r,t:()=>a});var i=n(78879);const s={picture:()=>n.e("23878").then(n.bind(n,37432)),buttons:()=>Promise.all([n.e("80572"),n.e("43393")]).then(n.bind(n,45818)),graph:()=>n.e("24729").then(n.bind(n,8833))},a=e=>(0,i.Tw)("header-footer",e,void 0,s,void 0,void 0),r=e=>(0,i.ED)(e,"header-footer",void 0,s)}};
//# sourceMappingURL=49636.665f2002adbba603.js.map