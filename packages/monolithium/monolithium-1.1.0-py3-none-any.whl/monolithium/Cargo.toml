[package]
name        = "monolithium"
version     = "1.1.0"
authors     = ["Tremeschin"]
description = "Finding the Largest Minecraft Infdev/Alpha Monoliths"
repository  = "https://github.com/Tremeschin/Monolithium"
readme      = "../.github/readme.md"
license     = "MIT"
edition     = "2024"

# ---------------------------------------------------------------------------- #

[lib]
name = "monolithium"
path = "monolithium/lib.rs"

[[bin]]
name = "monolithium"
path = "monolithium/main.rs"

# ---------------------------------------------------------------------------- #

[dependencies]
ahash         = "0.8.12"
clap          = {version="4.5.47", features=["derive"]}
indicatif     = {version="0.18.0", features=["rayon"]}
microbench    = "0.5.0"
png           = "0.18.0"
rand          = "0.9.2"
rayon         = "1.11.0"
smart-default = "0.7.1"

# ---------------------------------------------------------------------------- #

[features]

default = ["grad-lookup"]

# ------------------------------------ #
# Accurate optimizations

# Use a lookup table for `utils::grad()`
grad-lookup = []

# ------------------------------------ #
# Lossy optimizations

# Assumes `JavaRNG::next_i32_bound()` never rejects values, skipping
# three math operations check per call (low error for perlin values)
# â€¢ Monte Carlo says 0.03474% error rates for minecraft values
skip-rejection = []

# Use a Skip Table for fast LCN stepping, same loss as `skip-rejection`
skip-table = []

# ------------------------------------ #
# Groups

fast = [
    "grad-lookup",
    "skip-rejection",
    "skip-table",
]

# ---------------------------------------------------------------------------- #

[profile.dev]
strip = true

[profile.release]
overflow-checks = false
codegen-units = 1
opt-level = 3
panic = "abort"
lto = "fat"
