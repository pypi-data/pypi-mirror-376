"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[7367],{10405:function(e,t,s){s.d(t,{i:function(){return h}});var r=s(89555),a=(s(31014),s(92509)),i=s(88464),n=s(27705),l=s(68254),o=s(50111);var d={name:"1k6747e",styles:"font-size:20px!important"};function h(e){const{title:t,forceOpen:s,showServerError:h,defaultCollapsed:u,onChange:c}=e,m=s&&{activeKey:["1"]},f=u?null:["1"],{formatMessage:g}=(0,i.A)(),{theme:x}=(0,l.u)();return(0,o.Y)(a.A,{className:"collapsible-section",css:p.wrapper,bordered:!1,...m,defaultActiveKey:f,expandIcon:e=>{let{isActive:s}=e;return(0,o.Y)(l.b,{"aria-label":g(s?{id:"iaomsd",defaultMessage:"collapse {title}"}:{id:"dTLq6E",defaultMessage:"expand {title}"},{title:t}),css:d,rotate:s?90:0})},onChange:c,children:(0,o.Y)(a.A.Panel,{className:"collapsible-panel",header:t,css:(0,r.AH)({"&, .ant-collapse-header, .ant-collapse-content":(0,l.i)({color:x.colors.textPrimary})},""),children:(0,o.Y)(n.g,{showServerError:h,children:e.children})},"1")})}const p={wrapper:{".collapsible-panel":{position:"relative"},'& > .collapsible-panel > [role="button"]:focus':{outline:"revert"}}};h.defaultProps={forceOpen:!1}},80993:function(e,t,s){s.r(t),s.d(t,{default:function(){return O}});var r=s(31014),a=s(51079),i=s.n(a),n=s(10811),l=s(44240),o=s(3769),d=s(88443),h=s(64912),p=s(82589),u=s(9101),c=(s(61602),s(51882)),m=s(7871),f=s(87234),g=s(58481),x=s(48624),b=s(85017),y=s(24406),Y=s(76010),E=s(55406),R=s(77481),M=s(10405),v=s(91144),w=s(50111);const{TabPane:N}=p.tUM;var D={name:"m4bh15",styles:"max-height:500px"},S={name:"1o6wc9k",styles:"padding-left:6px"},T={name:"1f6izsi",styles:"max-height:300px"},A={name:"m4bh15",styles:"max-height:500px"};class I extends r.Component{constructor(e){super(e),this.compareRunViewRef=void 0,this.runDetailsTableRef=void 0,this.state={tableWidth:null,onlyShowParamDiff:!1,onlyShowTagDiff:!1,onlyShowMetricDiff:!1},this.onResizeHandler=this.onResizeHandler.bind(this),this.onCompareRunTableScrollHandler=this.onCompareRunTableScrollHandler.bind(this),this.runDetailsTableRef=r.createRef(),this.compareRunViewRef=r.createRef()}onResizeHandler(e){const t=this.runDetailsTableRef.current;if(null!==t){const e=t.clientWidth;this.setState({tableWidth:e})}}onCompareRunTableScrollHandler(e){const t=this.compareRunViewRef.current.querySelectorAll(".compare-run-table");t.forEach(((s,r)=>{const a=t[r];a!==e.target&&(a.scrollLeft=e.target.scrollLeft)}))}componentDidMount(){const e=this.props.intl.formatMessage({id:"ufamzi",defaultMessage:"Comparing {runs} MLflow Runs"},{runs:this.props.runInfos.length});Y.A.updatePageTitle(e),window.addEventListener("resize",this.onResizeHandler,!0),window.dispatchEvent(new Event("resize"))}componentWillUnmount(){window.removeEventListener("resize",this.onResizeHandler,!0)}getTableColumnWidth(){let e=200;return null!==this.state.tableWidth&&(e=Math.round(this.state.tableWidth/(this.props.runInfos.length+1)),e<200&&(e=200)),e}renderExperimentNameRowItems(){const{experiments:e}=this.props,t=Y.A.getExperimentNameMap(Y.A.sortExperimentsById(e));return this.props.runInfos.map((e=>{let{experimentId:s,runUuid:r}=e;const{name:a,basename:i}=t[s];return(0,w.Y)("td",{className:"meta-info",children:(0,w.Y)(x.N_,{to:g.h.getExperimentPageRoute(s),title:a,children:i})},r)}))}hasMultipleExperiments(){return this.props.experimentIds.length>1}shouldShowExperimentNameRow(){return this.props.hasComparedExperimentsBefore||this.hasMultipleExperiments()}getExperimentPageLink(e,t){return(0,w.Y)(x.N_,{to:g.h.getExperimentPageRoute(e),children:t})}getCompareExperimentsPageLinkText(e){return(0,w.Y)(d.A,{id:"YkcoeV",defaultMessage:"Displaying Runs from {numExperiments} Experiments",values:{numExperiments:e}})}getCompareExperimentsPageLink(e){return(0,w.Y)(x.N_,{to:g.h.getCompareExperimentsPageRoute(e),children:this.getCompareExperimentsPageLinkText(e.length)})}getExperimentLink(){const{comparedExperimentIds:e,hasComparedExperimentsBefore:t,experimentIds:s,experiments:r}=this.props;return t?this.getCompareExperimentsPageLink(e):this.hasMultipleExperiments()?this.getCompareExperimentsPageLink(s):this.getExperimentPageLink(s[0],r[0].name)}getTitle(){return this.hasMultipleExperiments()?(0,w.Y)(d.A,{id:"IEORCP",defaultMessage:"Comparing {numRuns} Runs from {numExperiments} Experiments",values:{numRuns:this.props.runInfos.length,numExperiments:this.props.experimentIds.length}}):(0,w.Y)(d.A,{id:"NN0ScV",defaultMessage:"Comparing {numRuns} Runs from 1 Experiment",values:{numRuns:this.props.runInfos.length}})}renderParamTable(e){const t=this.renderDataRows(this.props.paramLists,e,this.state.onlyShowParamDiff,!0);return 0===t.length?(0,w.Y)("h2",{children:(0,w.Y)(d.A,{id:"lNO3kK",defaultMessage:"No parameters to display."})}):(0,w.Y)("table",{className:"table compare-table compare-run-table",css:D,onScroll:this.onCompareRunTableScrollHandler,children:(0,w.Y)("tbody",{children:t})})}renderMetricTable(e,t){const s=this.renderDataRows(this.props.metricLists,e,this.state.onlyShowMetricDiff,!1,((e,s)=>(0,w.FD)(x.N_,{to:g.h.getMetricPageRoute(this.props.runInfos.map((e=>e.runUuid)).filter(((e,t)=>void 0!==s[t])),e,t),title:"Plot chart",children:[e,(0,w.Y)("i",{className:"fas fa-chart-line",css:S})]})),Y.A.formatMetric);return 0===s.length?(0,w.Y)("h2",{children:(0,w.Y)(d.A,{id:"eBGO2d",defaultMessage:"No metrics to display."})}):(0,w.Y)("table",{className:"table compare-table compare-run-table",css:T,onScroll:this.onCompareRunTableScrollHandler,children:(0,w.Y)("tbody",{children:s})})}renderTagTable(e){const t=this.renderDataRows(this.props.tagLists,e,this.state.onlyShowTagDiff,!0);return 0===t.length?(0,w.Y)("h2",{children:(0,w.Y)(d.A,{id:"m9e01X",defaultMessage:"No tags to display."})}):(0,w.Y)("table",{className:"table compare-table compare-run-table",css:A,onScroll:this.onCompareRunTableScrollHandler,children:(0,w.Y)("tbody",{children:t})})}renderTimeRows(e){const t=(0,w.Y)(d.A,{id:"Zc48NC",defaultMessage:"(unknown)"}),s=this.props.runInfos.map((e=>{const s=e.startTime,r=e.endTime;return{runUuid:e.runUuid,startTime:s?Y.A.formatTimestamp(s):t,endTime:r?Y.A.formatTimestamp(r):t,duration:s&&r?Y.A.getDuration(s,r):t}}));return[{key:"startTime",title:(0,w.Y)(d.A,{id:"O9r1RR",defaultMessage:"Start Time:"}),data:s.map((e=>{let{runUuid:t,startTime:s}=e;return[t,s]}))},{key:"endTime",title:(0,w.Y)(d.A,{id:"G0gYkS",defaultMessage:"End Time:"}),data:s.map((e=>{let{runUuid:t,endTime:s}=e;return[t,s]}))},{key:"duration",title:(0,w.Y)(d.A,{id:"7kUi8J",defaultMessage:"Duration:"}),data:s.map((e=>{let{runUuid:t,duration:s}=e;return[t,s]}))}].map((t=>{let{key:s,title:r,data:a}=t;return(0,w.FD)("tr",{children:[(0,w.Y)("th",{scope:"row",className:"head-value sticky-header",css:e,children:r}),a.map((t=>{let[s,r]=t;return(0,w.Y)("td",{className:"data-value",css:e,children:(0,w.Y)(p.m_M,{title:r,color:"gray",placement:"topLeft",overlayStyle:{maxWidth:"400px"},dangerouslySetAntdProps:{mouseEnterDelay:1},children:r})},s)}))]},s)}))}render(){const{experimentIds:e}=this.props,{runInfos:t,runNames:s,paramLists:r,metricLists:a,runUuids:i}=this.props,n=this.getTableColumnWidth(),l=this.genWidthStyle(n),o=this.getTitle();let h=[this.getExperimentLink()];const u=this.props.intl.formatMessage({id:"eOxs/C",defaultMessage:"Parameters"}),b=this.props.intl.formatMessage({id:"frPtD/",defaultMessage:"Metrics"}),y=this.props.intl.formatMessage({id:"9KXBFn",defaultMessage:"Tags"}),Y=this.props.intl.formatMessage({id:"VP+qFF",defaultMessage:"Show diff only"}),D=!(0,v.g$)();return(0,w.FD)("div",{className:"CompareRunView",ref:this.compareRunViewRef,children:[(0,w.Y)(R.z,{title:o,breadcrumbs:h}),D&&(0,w.Y)(M.i,{title:this.props.intl.formatMessage({id:"S7ESYH",defaultMessage:"Visualizations"}),children:(0,w.FD)(p.tUM,{children:[(0,w.Y)(N,{tab:(0,w.Y)(d.A,{id:"sTp/V3",defaultMessage:"Parallel Coordinates Plot"}),children:(0,w.Y)(E.Ay,{runUuids:this.props.runUuids})},"parallel-coordinates-plot"),(0,w.Y)(N,{tab:(0,w.Y)(d.A,{id:"OimAJb",defaultMessage:"Scatter Plot"}),children:(0,w.Y)(c.J,{runUuids:this.props.runUuids,runDisplayNames:this.props.runDisplayNames})},"scatter-plot"),(0,w.Y)(N,{tab:(0,w.Y)(d.A,{id:"iXb99e",defaultMessage:"Box Plot"}),children:(0,w.Y)(m.e,{runUuids:i,runInfos:t,paramLists:r,metricLists:a})},"box-plot"),(0,w.Y)(N,{tab:(0,w.Y)(d.A,{id:"B80MC6",defaultMessage:"Contour Plot"}),children:(0,w.Y)(f.A,{runUuids:this.props.runUuids,runDisplayNames:this.props.runDisplayNames})},"contour-plot")]})}),(0,w.Y)(M.i,{title:this.props.intl.formatMessage({id:"lISqyJ",defaultMessage:"Run details"}),children:(0,w.FD)("table",{className:"table compare-table compare-run-table",ref:this.runDetailsTableRef,onScroll:this.onCompareRunTableScrollHandler,children:[(0,w.Y)("thead",{children:(0,w.FD)("tr",{children:[(0,w.Y)("th",{scope:"row",className:"head-value sticky-header",css:l,children:(0,w.Y)(d.A,{id:"/2MZix",defaultMessage:"Run ID:"})}),this.props.runInfos.map((e=>{var t,s;return(0,w.Y)("th",{scope:"row",className:"data-value",css:l,children:(0,w.Y)(p.m_M,{title:e.runUuid,color:"gray",placement:"topLeft",overlayStyle:{maxWidth:"400px"},mouseEnterDelay:1,children:(0,w.Y)(x.N_,{to:g.h.getRunPageRoute(null!==(t=e.experimentId)&&void 0!==t?t:"0",null!==(s=e.runUuid)&&void 0!==s?s:""),children:e.runUuid})})},e.runUuid)}))]})}),(0,w.FD)("tbody",{children:[(0,w.FD)("tr",{children:[(0,w.Y)("th",{scope:"row",className:"head-value sticky-header",css:l,children:(0,w.Y)(d.A,{id:"DUnrWL",defaultMessage:"Run Name:"})}),s.map(((e,s)=>(0,w.Y)("td",{className:"data-value",css:l,children:(0,w.Y)("div",{className:"truncate-text single-line",children:(0,w.Y)(p.m_M,{title:e,color:"gray",placement:"topLeft",overlayStyle:{maxWidth:"400px"},mouseEnterDelay:1,children:e})})},t[s].runUuid)))]}),this.renderTimeRows(l),this.shouldShowExperimentNameRow()&&(0,w.FD)("tr",{children:[(0,w.Y)("th",{scope:"row",className:"data-value",children:(0,w.Y)(d.A,{id:"Qsgg+9",defaultMessage:"Experiment Name:"})}),this.renderExperimentNameRowItems()]})]})]})}),(0,w.FD)(M.i,{title:u,children:[(0,w.Y)(p.dOG,{label:Y,"aria-label":[u,Y].join(" - "),checked:this.state.onlyShowParamDiff,onChange:(e,t)=>this.setState({onlyShowParamDiff:e})}),(0,w.Y)(p.hKd,{size:"lg"}),this.renderParamTable(n)]}),(0,w.FD)(M.i,{title:b,children:[(0,w.Y)(p.dOG,{label:Y,"aria-label":[b,Y].join(" - "),checked:this.state.onlyShowMetricDiff,onChange:(e,t)=>this.setState({onlyShowMetricDiff:e})}),(0,w.Y)(p.hKd,{size:"lg"}),this.renderMetricTable(n,e)]}),(0,w.FD)(M.i,{title:y,children:[(0,w.Y)(p.dOG,{label:Y,"aria-label":[y,Y].join(" - "),checked:this.state.onlyShowTagDiff,onChange:(e,t)=>this.setState({onlyShowTagDiff:e})}),(0,w.Y)(p.hKd,{size:"lg"}),this.renderTagTable(n)]})]})}genWidthStyle(e){return{width:`${e}px`,minWidth:`${e}px`,maxWidth:`${e}px`}}renderDataRows(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(e,t)=>e,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e=>e;const n=y.A.getKeys(e),l={};n.forEach((t=>l[t]={values:Array(e.length).fill(void 0)})),e.forEach(((e,t)=>{e.forEach((e=>l[e.key].values[t]=e.value))})),n.forEach((e=>{return l[e].hasDiff=(t=l[e].values).some((e=>e!==t[0]));var t}));const o=this.genWidthStyle(t);return n.filter((e=>!s||l[e].hasDiff)).map((e=>{const{values:t,hasDiff:s}=l[e],n=r&&s?"diff-row":void 0;return(0,w.FD)("tr",{className:n,children:[(0,w.Y)("th",{scope:"row",className:"head-value sticky-header",css:o,children:a(e,t)}),t.map(((e,t)=>{const s=void 0===e?"":i(e);return(0,w.Y)("td",{className:"data-value",css:o,children:(0,w.Y)(p.m_M,{title:s,color:"gray",placement:"topLeft",overlayStyle:{maxWidth:"400px"},mouseEnterDelay:1,children:(0,w.Y)("span",{className:"truncate-text single-line",children:s})})},this.props.runInfos[t].runUuid)}))]},e)}))}}var C=(0,n.Ng)(((e,t)=>{const{comparedExperimentIds:s,hasComparedExperimentsBefore:r}=e.compareExperiments,a=[],i=[],n=[],l=[],o=[],d=[],{experimentIds:h,runUuids:p}=t,c=h.map((t=>(0,u._m)(t,e)));return p.forEach((t=>{const s=(0,u.K4)(t,e);a.push(s),i.push(Object.values((0,b.d0)(t,e))),n.push(Object.values((0,u.tI)(t,e)));const r=(0,u.X3)(t,e),h=Y.A.getVisibleTagValues(r).map((e=>{let[t,s]=e;return{key:t,value:s}}));l.push(h),d.push(Y.A.getRunDisplayName(s,t)),o.push(Y.A.getRunName(s))})),{experiments:c,runInfos:a,metricLists:i,paramLists:n,tagLists:l,runNames:o,runDisplayNames:d,comparedExperimentIds:s,hasComparedExperimentsBefore:r}}))((0,h.Ay)(I)),k=s(7204),P=s(48588),U=s(25869),L=s(26645),W=s(62448);class z extends r.Component{constructor(e){super(e),this.requestIds=void 0,this.requestIds=[]}fetchExperiments(){return this.props.experimentIds.map((e=>{const t=(0,k.yk)();return this.props.dispatch((0,l.yc)(e,t)),t}))}componentDidMount(){this.requestIds.push(...this.fetchExperiments()),this.props.runUuids.forEach((e=>{const t=(0,k.yk)();this.requestIds.push(t),this.props.dispatch((0,l.aO)(e,t))}))}render(){return(0,w.Y)(P.L,{children:(0,w.Y)(o.Ay,{requestIds:this.requestIds,children:(0,w.Y)(C,{runUuids:this.props.runUuids,experimentIds:this.props.experimentIds})})})}}const F=(0,U.h)((0,n.Ng)(((e,t)=>{const{location:s}=t,r=i().parse(s.search),a=JSON.parse(r["?runs"]);return{experimentIds:JSON.parse(r.experiments),runUuids:a}}))(z));var O=(0,L.X)(W.A.mlflowServices.RUN_TRACKING,F)}}]);