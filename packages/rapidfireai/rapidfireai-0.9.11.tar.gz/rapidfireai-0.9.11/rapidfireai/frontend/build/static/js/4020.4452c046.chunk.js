"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[4020],{10405:function(e,t,s){s.d(t,{i:function(){return c}});var i=s(89555),a=(s(31014),s(92509)),n=s(88464),l=s(27705),o=s(68254),r=s(50111);var d={name:"1k6747e",styles:"font-size:20px!important"};function c(e){const{title:t,forceOpen:s,showServerError:c,defaultCollapsed:h,onChange:u}=e,p=s&&{activeKey:["1"]},g=h?null:["1"],{formatMessage:f}=(0,n.A)(),{theme:v}=(0,o.u)();return(0,r.Y)(a.A,{className:"collapsible-section",css:m.wrapper,bordered:!1,...p,defaultActiveKey:g,expandIcon:e=>{let{isActive:s}=e;return(0,r.Y)(o.b,{"aria-label":f(s?{id:"iaomsd",defaultMessage:"collapse {title}"}:{id:"dTLq6E",defaultMessage:"expand {title}"},{title:t}),css:d,rotate:s?90:0})},onChange:u,children:(0,r.Y)(a.A.Panel,{className:"collapsible-panel",header:t,css:(0,i.AH)({"&, .ant-collapse-header, .ant-collapse-content":(0,o.i)({color:v.colors.textPrimary})},""),children:(0,r.Y)(l.g,{showServerError:c,children:e.children})},"1")})}const m={wrapper:{".collapsible-panel":{position:"relative"},'& > .collapsible-panel > [role="button"]:focus':{outline:"revert"}}};c.defaultProps={forceOpen:!1}},90925:function(e,t,s){s.d(t,{K:function(){return n}});var i=s(68254),a=(s(31014),s(50111));const n=e=>{let{children:t,columns:s}=e;const i=s?o.descriptionsArea(s):o.autoFitArea;return(0,a.Y)("div",{css:i,children:t})};var l={name:"1bmnxg7",styles:"white-space:nowrap"};n.Item=e=>{let{label:t,labelSize:s="sm",children:n,span:r}=e;return(0,a.FD)("div",{"data-test-id":"descriptions-item",css:o.descriptionItem(r||1),children:[(0,a.Y)("div",{"data-test-id":"descriptions-item-label",css:l,children:(0,a.Y)(i.T.Text,{size:s,color:"secondary",children:t})}),(0,a.Y)("div",{"data-test-id":"descriptions-item-colon",css:o.colon,children:(0,a.Y)(i.T.Text,{size:s,color:"secondary",children:":"})}),(0,a.Y)("div",{"data-test-id":"descriptions-item-content",children:n})]})};const o={descriptionsArea:e=>t=>({display:"grid",gridTemplateColumns:`repeat(${e}, minmax(100px, 1fr))`,columnGap:t.spacing.sm,rowGap:t.spacing.md,marginBottom:t.spacing.lg}),autoFitArea:e=>({display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gridGap:e.spacing.md}),descriptionItem:e=>({display:"flex",gridColumn:`span ${e}`}),colon:{margin:"0 8px 0 0"}}},85392:function(e,t,s){s.d(t,{V:function(){return v}});var i=s(89555),a=s(31014),n=s(68254),l=s(82589),o=s(48624);const r=e=>{let{when:t,message:s}=e;const i=a.useContext(o.jb).navigator.block;return a.useEffect((()=>{if(!t)return;return null===i||void 0===i?void 0:i((()=>window.confirm(s)))}),[s,i,t]),null};var d=s(75703),c=s(11473),m=s(88443),h=s(64912),u=s(50111);class p extends a.Component{constructor(){super(...arguments),this.state={markdown:this.props.defaultMarkdown,selectedTab:this.props.defaultSelectedTab,error:null},this.converter=(0,c.T7)(),this.handleMdeValueChange=e=>{this.setState({markdown:e})},this.handleTabChange=e=>{this.setState({selectedTab:e})},this.handleSubmitClick=()=>{const{onSubmit:e}=this.props,{markdown:t}=this.state;return this.setState({confirmLoading:!0}),e?Promise.resolve(e(t)).then((()=>{this.setState({confirmLoading:!1,error:null})})).catch((e=>{this.setState({confirmLoading:!1,error:e&&e.getMessageField?e.getMessageField():this.props.intl.formatMessage({id:"SzvvXl",defaultMessage:"Failed to submit"})})})):null},this.handleCancelClick=()=>{this.setState({markdown:this.props.defaultMarkdown,selectedTab:this.props.defaultSelectedTab});const{onCancel:e}=this.props;e&&e()}}contentHasChanged(){return this.state.markdown!==this.props.defaultMarkdown}renderActions(){const{confirmLoading:e}=this.state;return(0,u.Y)("div",{className:"editable-note-actions",children:(0,u.FD)("div",{children:[(0,u.Y)(n.B,{componentId:"codegen_mlflow_app_src_common_components_editablenote.tsx_114",type:"primary",className:"editable-note-save-button",onClick:this.handleSubmitClick,disabled:!this.contentHasChanged()||e,loading:e,"data-testid":"editable-note-save-button",children:this.props.saveText}),(0,u.Y)(n.B,{componentId:"codegen_mlflow_app_src_common_components_editablenote.tsx_124",htmlType:"button",className:"editable-note-cancel-button",onClick:this.handleCancelClick,disabled:e,children:(0,u.Y)(m.A,{id:"17k196",defaultMessage:"Cancel"})})]})})}getSanitizedHtmlContent(){const{markdown:e}=this.state;if(e){const t=(0,c.NW)(this.converter.makeHtml(e));return(0,c.Yc)(t)}return null}render(){const{showEditor:e}=this.props,{markdown:t,selectedTab:s,error:i}=this.state,n=this.getSanitizedHtmlContent();return(0,u.Y)("div",{className:"note-view-outer-container",children:e?(0,u.FD)(a.Fragment,{children:[(0,u.Y)("div",{className:"note-view-text-area",children:(0,u.Y)(d.default,{value:t,minEditorHeight:this.props.minEditorHeight,maxEditorHeight:this.props.maxEditorHeight,minPreviewHeight:50,childProps:this.props.childProps,toolbarCommands:this.props.toolbarCommands,onChange:this.handleMdeValueChange,selectedTab:s,onTabChange:this.handleTabChange,generateMarkdownPreview:e=>Promise.resolve(this.getSanitizedHtmlContent(e)),getIcon:e=>(0,u.Y)(g,{name:e})})}),i&&(0,u.Y)(l.FcD,{type:"error",message:this.props.intl.formatMessage({id:"79dD5F",defaultMessage:"There was an error submitting your note."}),description:i,closable:!0}),this.renderActions(),(0,u.Y)(r,{when:this.contentHasChanged(),message:this.props.intl.formatMessage({id:"dwTTNK",defaultMessage:"Are you sure you want to navigate away? Your pending text changes will be lost."})})]}):(0,u.Y)(f,{content:n})})}}function g(e){const{theme:t}=(0,n.u)(),{name:s}=e;return(0,u.Y)(l.m_M,{position:"top",title:s,children:(0,u.Y)("span",{css:(0,i.AH)({color:t.colors.textPrimary},""),children:(0,u.Y)(d.SvgIcon,{icon:s})})})}function f(e){const{content:t}=e;return t?(0,u.Y)("div",{className:"note-view-outer-container",children:(0,u.Y)("div",{className:"note-view-text-area",children:(0,u.Y)("div",{className:"note-view-preview note-editor-preview",children:(0,u.Y)("div",{className:"note-editor-preview-content","data-testid":"note-editor-preview-content",dangerouslySetInnerHTML:{__html:e.content}})})})}):(0,u.Y)("div",{children:(0,u.Y)(m.A,{id:"PRe/8y",defaultMessage:"None"})})}p.defaultProps={defaultMarkdown:"",defaultSelectedTab:"write",showEditor:!1,saveText:(0,u.Y)(m.A,{id:"Shv28w",defaultMessage:"Save"}),confirmLoading:!1,toolbarCommands:[["header","bold","italic","strikethrough"],["link","quote","code","image"],["unordered-list","ordered-list","checked-list"]],maxEditorHeight:500,minEditorHeight:200,childProps:{}};const v=(0,h.Ay)(p)},41287:function(e,t,s){s.d(t,{A:function(){return b}});var i=s(31014),a=s(76010),n=s(82589),l=s(68254),o=s(88443),r=s(50111);const d=i.createContext();class c extends i.Component{constructor(){super(...arguments),this.handleKeyPress=e=>{const{save:t,recordKey:s,cancel:i}=this.props;"Enter"===e.key?t(s):"Escape"===e.key&&i()}}render(){const{editing:e,dataIndex:t,record:s,children:i}=this.props;return(0,r.Y)(d.Consumer,{children:a=>{let{formRef:o}=a;return(0,r.Y)("div",{className:e?"editing-cell":"",children:e?(0,r.Y)(n.lVW,{ref:o,children:(0,r.Y)(n.lVW.Item,{style:{margin:0},name:t,initialValue:s[t],children:(0,r.Y)(l.f,{onKeyDown:this.handleKeyPress,"data-testid":"editable-table-edited-input"})})}):i})}})}}class m extends i.Component{constructor(e){super(e),this.columns=void 0,this.form=void 0,this.initColumns=()=>[...this.props.columns.map((e=>e.editable?{...e,render:(t,s)=>(0,r.Y)(c,{record:s,dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(s),save:this.save,cancel:this.cancel,recordKey:s.key,children:t})}:e)),{title:(0,r.Y)(o.A,{id:"cBDYla",defaultMessage:"Actions"}),dataIndex:"operation",render:(e,t)=>{const{editingKey:s,isRequestPending:i}=this.state,a=this.isEditing(t);return a&&i?(0,r.Y)(l.S,{size:"small"}):a?(0,r.FD)("span",{children:[(0,r.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_components_tables_editableformtable.tsx_120",type:"link",onClick:()=>this.save(t.key),style:{marginRight:10},"data-testid":"editable-table-button-save",children:(0,r.Y)(o.A,{id:"E7mv3b",defaultMessage:"Save"})}),(0,r.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_components_tables_editableformtable.tsx_131",type:"link",onClick:()=>this.cancel(t.key),"data-testid":"editable-table-button-cancel",children:(0,r.Y)(o.A,{id:"peyOdH",defaultMessage:"Cancel"})})]}):(0,r.FD)("span",{children:[(0,r.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_components_tables_editableformtable.tsx_145",icon:(0,r.Y)(n.R2l,{}),disabled:""!==s,onClick:()=>this.edit(t.key),"data-testid":"editable-table-button-edit"}),(0,r.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_components_tables_editableformtable.tsx_151",icon:(0,r.Y)(n.ucK,{}),disabled:""!==s,onClick:()=>this.setState({deletingKey:t.key}),"data-testid":"editable-table-button-delete"})]})}}],this.isEditing=e=>e.key===this.state.editingKey,this.cancel=()=>{this.setState({editingKey:""})},this.save=e=>{this.form.current.validateFields().then((t=>{const s=this.props.data.find((t=>t.key===e));s&&(this.setState({isRequestPending:!0}),this.props.onSaveEdit({...s,...t}).then((()=>{this.setState({editingKey:"",isRequestPending:!1})})))}))},this.delete=async e=>{try{const t=this.props.data.find((t=>t.key===e));t&&(this.setState({isRequestPending:!0}),await this.props.onDelete({...t}))}finally{this.setState({deletingKey:"",isRequestPending:!1})}},this.edit=e=>{this.setState({editingKey:e})},this.state={editingKey:"",isRequestPending:!1,deletingKey:""},this.columns=this.initColumns(),this.form=i.createRef()}render(){const{data:e}=this.props;return(0,r.FD)(d.Provider,{value:{formRef:this.form},children:[(0,r.Y)(n.qXK,{className:"editable-table","data-testid":"editable-table",dataSource:e,columns:this.columns,size:"middle",tableLayout:"fixed",pagination:!1,locale:{emptyText:(0,r.Y)(o.A,{id:"0ja5l/",defaultMessage:"No tags found."})},scroll:{y:280}}),(0,r.Y)(n.aFV,{"data-testid":"editable-form-table-remove-modal",title:(0,r.Y)(o.A,{id:"pBUaAK",defaultMessage:"Are you sure you want to delete this tag\uff1f"}),visible:this.state.deletingKey,okText:(0,r.Y)(o.A,{id:"vlxeiA",defaultMessage:"Confirm"}),cancelText:(0,r.Y)(o.A,{id:"aIP7Kb",defaultMessage:"Cancel"}),confirmLoading:this.state.isRequestPending,onOk:()=>this.delete(this.state.deletingKey),onCancel:()=>this.setState({deletingKey:""})})]})}}const h=m;var u=s(9133),p=s.n(u),g=s(64912);class f extends i.Component{constructor(){super(...arguments),this.tableColumns=[{title:this.props.intl.formatMessage({id:"cI+F/q",defaultMessage:"Name"}),dataIndex:"name",width:200},{title:this.props.intl.formatMessage({id:"oBKd1E",defaultMessage:"Value"}),dataIndex:"value",width:200,editable:!0}],this.getData=()=>p().sortBy(a.A.getVisibleTagValues(this.props.tags).map((e=>({key:e[0],name:e[0],value:e[1]}))),"name"),this.getTagNamesAsSet=()=>new Set(a.A.getVisibleTagValues(this.props.tags).map((e=>e[0]))),this.tagNameValidator=(e,t,s)=>{s(this.getTagNamesAsSet().has(t)?this.props.intl.formatMessage({id:"gVxisd",defaultMessage:'Tag "{value}" already exists.'},{value:t}):void 0)}}render(){const{isRequestPending:e,handleSaveEdit:t,handleDeleteTag:s,handleAddTag:i,innerRef:a}=this.props;return(0,r.FD)(r.FK,{children:[(0,r.Y)(h,{columns:this.tableColumns,data:this.getData(),onSaveEdit:t,onDelete:s}),(0,r.Y)(n.hKd,{size:"sm"}),(0,r.Y)("div",{children:(0,r.FD)(n.lVW,{ref:a,layout:"inline",onFinish:i,css:v.form,children:[(0,r.Y)(n.lVW.Item,{name:"name",rules:[{required:!0,message:this.props.intl.formatMessage({id:"ubGTUL",defaultMessage:"Name is required."})},{validator:this.tagNameValidator}],children:(0,r.Y)(l.f,{"aria-label":"tag name","data-testid":"tags-form-input-name",placeholder:this.props.intl.formatMessage({id:"0gGMZm",defaultMessage:"Name"})})}),(0,r.Y)(n.lVW.Item,{name:"value",rules:[],children:(0,r.Y)(l.f,{"aria-label":"tag value","data-testid":"tags-form-input-value",placeholder:this.props.intl.formatMessage({id:"8XbTnl",defaultMessage:"Value"})})}),(0,r.Y)(n.lVW.Item,{children:(0,r.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_components_editabletagstableview.tsx_127",loading:e,htmlType:"submit","data-testid":"add-tag-button",children:(0,r.Y)(o.A,{id:"4idqpX",defaultMessage:"Add"})})})]})})]})}}const v={form:e=>({"& > div":{marginRight:e.spacing.sm}})},b=(0,g.Ay)(f)},30311:function(e,t,s){s.d(t,{o:function(){return Y}});var i=s(89555),a=s(9133),n=s(31014),l=s(82589),o=s(68254),r=s(64756),d=s(88464),c=s(88443),m=s(50111);var h={name:"1d3w5wq",styles:"width:100%"},u={name:"s079uh",styles:"margin-top:2px"},p={name:"82a6rk",styles:"flex:1"},g={name:"82a6rk",styles:"flex:1"};const f=e=>{let{renderKey:t,setDraftAliases:s,existingAliases:a,draftAliases:f,version:v,aliasToVersionMap:b,disabled:y}=e;const Y=(0,d.A)(),[w,_]=(0,n.useState)(!1),{theme:C}=(0,o.u)(),x=(0,n.useCallback)((e=>{s((t=>t.filter((t=>t!==e))))}),[s]),A=(0,n.useCallback)((e=>{const t=e.map((e=>e.replace(/[^\w-]/g,"").toLowerCase().substring(0,255))).filter((e=>e.length>0)),i=Array.from(new Set(t));s(i),_(!1)}),[s]);return(0,m.FD)(l._vn,{disabled:y,filterOption:(e,t)=>null===t||void 0===t?void 0:t.value.toLowerCase().startsWith(e.toLowerCase()),placeholder:Y.formatMessage({id:"bQZDSv",defaultMessage:"Enter aliases (champion, challenger, etc)"}),allowClear:!0,css:h,mode:"tags",onChange:A,dangerouslySetAntdProps:{dropdownMatchSelectWidth:!0,tagRender:e=>{let{value:t}=e;return(0,m.Y)(r.m,{compact:!0,css:u,closable:!0,onClose:()=>x(t.toString()),value:t.toString()})}},onDropdownVisibleChange:_,open:w,value:f||[],children:[a.map((e=>(0,m.Y)(l._vn.Option,{value:e,"data-testid":"model-alias-option",children:(0,m.FD)("div",{css:(0,i.AH)({display:"flex",marginRight:C.spacing.xs},""),children:[(0,m.Y)("div",{css:p,children:e}),(0,m.Y)("div",{children:(0,m.Y)(c.A,{id:"4OcdLd",defaultMessage:"This version"})})]},e)},e))),Object.entries(b).filter((e=>{let[,t]=e;return t!==v})).map((e=>{let[t,s]=e;return(0,m.Y)(l._vn.Option,{value:t,"data-testid":"model-alias-option",children:(0,m.FD)("div",{css:(0,i.AH)({display:"flex",marginRight:C.spacing.xs},""),children:[(0,m.Y)("div",{css:g,children:t}),(0,m.Y)("div",{children:(0,m.Y)(c.A,{id:"Boj6Fm",defaultMessage:"Version {version}",values:{version:s}})})]},t)},t)}))]},JSON.stringify(t))};var v=s(10811),b=s(69708),y=s(81866);const Y=e=>{let{model:t,onSuccess:s}=e;const[r,d]=(0,n.useState)(!1),[h]=l.lVW.useForm(),[u,p]=(0,n.useState)(""),{theme:g}=(0,o.u)(),[Y,w]=(0,n.useState)([]),[_,C]=(0,n.useState)([]),[x,A]=(0,n.useState)("0"),M=(0,v.wA)(),k=(0,n.useCallback)((e=>{var s;if(!t)return;const i=(null===(s=t.aliases)||void 0===s?void 0:s.filter((t=>{let{version:s}=t;return s===e})).map((e=>{let{alias:t}=e;return t})))||[];e&&(w(i),C(i),A(e),d(!0))}),[t]),S=(0,n.useMemo)((()=>{if(null===t||void 0===t||!t.aliases)return[];const e=t.aliases.reduce(((e,t)=>{var s;return e.some((e=>{let{version:s}=e;return s===t.version}))?(null===(s=e.find((e=>{let{version:s}=e;return s===t.version})))||void 0===s||s.aliases.push(t.alias),e):[...e,{version:t.version,aliases:[t.alias]}]}),[]),s=e.filter((e=>{let{version:t}=e;return t!==x}));return _.map((e=>({alias:e,otherVersion:s.find((t=>{var s;return null===(s=t.aliases)||void 0===s?void 0:s.find((t=>t===e))}))}))).filter((e=>{let{otherVersion:t}=e;return t}))}),[null===t||void 0===t?void 0:t.aliases,_,x]),T=(0,n.useMemo)((()=>{var e;return(null===t||void 0===t||null===(e=t.aliases)||void 0===e?void 0:e.reduce(((e,t)=>{let{alias:s,version:i}=t;return{...e,[s]:i}}),{}))||{}}),[t]),V=(0,a.isEqual)(Y.slice().sort(),_.slice().sort()),F=_.length>10,D=V||F;return{EditAliasesModal:(0,m.FD)(l.aFV,{visible:r,footer:(0,m.FD)("div",{children:[(0,m.Y)(o.B,{componentId:"codegen_mlflow_app_src_model-registry_hooks_useeditregisteredmodelaliasesmodal.tsx_131",onClick:()=>d(!1),children:(0,m.Y)(c.A,{id:"97hGxL",defaultMessage:"Cancel"})}),(0,m.Y)(o.B,{componentId:"codegen_mlflow_app_src_model-registry_hooks_useeditregisteredmodelaliasesmodal.tsx_137",loading:!1,type:"primary",disabled:D,onClick:()=>{t&&(p(""),M((0,b.mq)(t.name,x,Y,_)).then((()=>{d(!1),null===s||void 0===s||s()})).catch((e=>{const t=e.getMessageField()||e.getUserVisibleError().toString()||e.text;p(t)})))},children:(0,m.Y)(c.A,{id:"cruwL4",defaultMessage:"Save aliases"})})]}),destroyOnClose:!0,title:(0,m.Y)(c.A,{id:"4Jyn2b",defaultMessage:"Add/Edit alias for model version {version}",values:{version:x}}),onCancel:()=>d(!1),confirmLoading:!1,children:[(0,m.Y)(o.T.Paragraph,{children:(0,m.Y)(c.A,{id:"2DNVN4",defaultMessage:"Aliases allow you to assign a mutable, named reference to a particular model version. <link>Learn more</link>",values:{link:e=>(0,m.Y)("a",{href:y.Tm,rel:"noreferrer",target:"_blank",children:e})}})}),(0,m.FD)(l.lVW,{form:h,layout:"vertical",children:[(0,m.Y)(l.lVW.Item,{children:(0,m.Y)(f,{disabled:!1,renderKey:S,aliasToVersionMap:T,version:x,draftAliases:_,existingAliases:Y,setDraftAliases:C})}),(0,m.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:g.spacing.xs},""),children:[F&&(0,m.Y)(l.FcD,{role:"alert",message:(0,m.Y)(c.A,{id:"q/Z61H",defaultMessage:"You are exceeding a limit of {limit} aliases assigned to the single model version",values:{limit:10}}),type:"error",closable:!1}),S.map((e=>{let{alias:t,otherVersion:s}=e;return(0,m.Y)(l.FcD,{role:"alert",message:(0,m.Y)(c.A,{id:"EBQwqu",defaultMessage:'The "{alias}" alias is also being used on version {otherVersion}. Adding it to this version will remove it from version {otherVersion}.',values:{otherVersion:null===s||void 0===s?void 0:s.version,alias:t}}),type:"info",closable:!1},t)})),u&&(0,m.Y)(l.FcD,{role:"alert",message:u,type:"error",closable:!1})]})]})]}),showEditAliasesModal:k}}}}]);