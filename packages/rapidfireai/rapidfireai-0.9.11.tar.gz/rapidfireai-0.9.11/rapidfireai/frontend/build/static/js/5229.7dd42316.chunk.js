"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[5229],{17142:function(e,t,i){i.d(t,{ev:function(){return r}});i(9133),i(76010),i(44240),i(25866),i(17111),i(57392);var s=i(60669),n=i(7204);i(65795);const r=()=>async e=>e({type:"SEARCH_MLFLOW_DEPLOYMENTS_MODEL_ROUTES",payload:s.x.gatewayProxyGet({gateway_path:"api/2.0/endpoints/"}),meta:{id:(0,n.yk)()}})},5746:function(e,t,i){i.r(t),i.d(t,{default:function(){return B},setupAndFetchExperiments:function(){return A}});var s=i(89555),n=i(31014),r=i(10811),a=i(9133),d=i(44240),p=i(7204),l=i(24947),h=i(76010),o=i(58481),m=i(13644),c=i(48624),x=i(3769),g=i(82589),u=i(68254),E=i(55794),f=i(35576),y=(i(63286),i(5452)),v=i(89690),w=i(50063),C=i(25869),I=i(50111);class S extends n.Component{constructor(){super(...arguments),this.list=void 0,this.state={checkedKeys:this.props.activeExperimentIds,hidden:!1,searchInput:"",showCreateExperimentModal:!1,showDeleteExperimentModal:!1,showRenameExperimentModal:!1,selectedExperimentId:"0",selectedExperimentName:""},this.bindListRef=e=>{this.list=e},this.componentDidUpdate=()=>{this.list&&this.list.forceUpdateGrid()},this.filterExperiments=e=>{const{experiments:t}=this.props,i=e.toLowerCase();return""===i?this.props.experiments:t.filter((e=>{let{name:t}=e;return t.toLowerCase().includes(i)}))},this.handleSearchInputChange=e=>{this.setState({searchInput:e.target.value})},this.updateSelectedExperiment=(e,t)=>{this.setState({selectedExperimentId:e,selectedExperimentName:t})},this.handleCreateExperiment=()=>{this.setState({showCreateExperimentModal:!0})},this.handleDeleteExperiment=(e,t)=>()=>{this.setState({showDeleteExperimentModal:!0}),this.updateSelectedExperiment(e,t)},this.handleRenameExperiment=(e,t)=>()=>{this.setState({showRenameExperimentModal:!0}),this.updateSelectedExperiment(e,t)},this.handleCloseCreateExperimentModal=()=>{this.setState({showCreateExperimentModal:!1})},this.handleCloseDeleteExperimentModal=()=>{this.setState({showDeleteExperimentModal:!1}),this.updateSelectedExperiment("0","")},this.handleCloseRenameExperimentModal=()=>{this.setState({showRenameExperimentModal:!1}),this.updateSelectedExperiment("0","")},this.handleCheck=(e,t)=>{this.setState(((i,s)=>{let{checkedKeys:n}=i;return!0!==e||s.activeExperimentIds.includes(t)||(n=[t,...s.activeExperimentIds]),!1===e&&1!==s.activeExperimentIds.length&&(n=s.activeExperimentIds.filter((e=>e!==t))),{checkedKeys:n}}),this.pushExperimentRoute)},this.pushExperimentRoute=()=>{if(this.state.checkedKeys.length>0){const e=1===this.state.checkedKeys.length?o.h.getExperimentPageRoute(this.state.checkedKeys[0]):o.h.getCompareExperimentsPageRoute(this.state.checkedKeys);this.props.navigate(e)}},this.activeExperimentListItem=Y.getExperimentListItemContainer(!0,this.props.designSystemThemeApi.theme),this.inactiveExperimentListItem=Y.getExperimentListItemContainer(!1,this.props.designSystemThemeApi.theme),this.renderListItem=e=>{let{index:t,key:i,style:s,isScrolling:n,parent:r}=e;const a=r.props.data[t],{activeExperimentIds:d}=this.props,p=d.includes(a.experimentId),l=p?"active-experiment-list-item":"experiment-list-item";return(0,I.Y)("div",{css:p?this.activeExperimentListItem:this.inactiveExperimentListItem,"data-testid":l,style:s,children:(0,I.Y)(E.Ay.Item,{bordered:"false",prefixCls:"experiment-list-meta",css:Y.experimentListItem,actions:[(0,I.Y)(g.Sc0,{id:a.experimentId,onChange:e=>this.handleCheck(e,a.experimentId),isChecked:p,"data-testid":`${l}-check-box`},a.experimentId),(0,I.Y)(c.N_,{className:"experiment-link",to:o.h.getExperimentPageRoute(a.experimentId),onClick:()=>this.setState({checkedKeys:[a.experimentId]}),title:a.name,"data-testid":`${l}-link`,children:a.name})]},a.experimentId)},i)},this.isRowLoaded=e=>{let{index:t}=e;return!!this.props.experiments[t]},this.unHide=()=>this.setState({hidden:!1}),this.hide=()=>this.setState({hidden:!0})}render(){const{hidden:e}=this.state,{activeExperimentIds:t,designSystemThemeApi:i}=this.props,{theme:s}=i;if(e)return(0,I.Y)(g.iTX,{rotate:-90,onClick:this.unHide,css:Y.icon(s),title:"Show experiment list"});const{searchInput:n}=this.state,r=this.filterExperiments(n);return(0,I.FD)("div",{id:"experiment-list-outer-container",css:Y.experimentListOuterContainer,children:[(0,I.Y)(y.D,{isOpen:this.state.showCreateExperimentModal,onClose:this.handleCloseCreateExperimentModal}),(0,I.Y)(v.K,{isOpen:this.state.showDeleteExperimentModal,onClose:this.handleCloseDeleteExperimentModal,activeExperimentIds:t,experimentId:this.state.selectedExperimentId,experimentName:this.state.selectedExperimentName}),(0,I.Y)(w.x,{isOpen:this.state.showRenameExperimentModal,onClose:this.handleCloseRenameExperimentModal,experimentId:this.state.selectedExperimentId,experimentName:this.state.selectedExperimentName}),(0,I.FD)("div",{css:Y.experimentTitleContainer,children:[(0,I.Y)(u.T.Title,{level:2,style:{margin:0},children:"Experiments"}),(0,I.Y)("div",{children:(0,I.Y)(g.iTX,{onClick:this.hide,rotate:90,css:Y.icon(s),title:"Hide experiment list"})})]}),(0,I.Y)(u.f,{placeholder:"Search Experiments","aria-label":"search experiments",value:n,onChange:this.handleSearchInputChange,"data-testid":"search-experiment-input"}),(0,I.Y)("div",{children:(0,I.Y)(f.t$,{children:e=>{let{width:t,height:i}=e;return(0,I.Y)(f.B8,{rowRenderer:this.renderListItem,data:r,ref:this.bindListRef,rowHeight:32,overscanRowCount:10,height:i,width:t,rowCount:r.length})}})})]})}}const Y={experimentListOuterContainer:{name:"ddhbat",styles:"box-sizing:border-box;height:100%;margin-left:24px;margin-right:8px;padding-right:16px;width:100%;min-width:max(280px, 20vw);max-width:20vw;display:grid;grid-template-rows:auto auto 1fr"},experimentTitleContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},experimentTitle:{margin:0},experimentSearchContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2px"},experimentSearchInput:{margin:0,flex:"6 1 0"},experimentSearchIcon:{fontSize:"24px",marginLeft:"auto",flex:"1 1 0"},experimentListContainer:{marginTop:"12px"},getExperimentListItemContainer:(e,t)=>(0,s.AH)({display:"flex",marginRight:"8px",paddingRight:"5px",borderLeft:e?`solid ${t.colors.primary}`:"solid transparent",borderLeftWidth:4,backgroundColor:e?t.colors.actionDefaultBackgroundPress:"transparent"},""),experimentListItem:{name:"1d2tbd2",styles:"display:grid;width:100%;.experiment-list-meta-item-action{display:grid;grid-template-columns:auto 1fr auto auto;padding-left:0px;margin-bottom:4px;margin-top:4px;li{padding-right:4px;padding-left:4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:left;font-size:13px;}}"},renameExperiment:{justifySelf:"end"},deleteExperiment:{justifySelf:"end",marginRight:"10px"},icon:e=>({color:e.colors.actionDefaultTextDefault,fontSize:e.general.iconSize,marginLeft:e.spacing.xs})};var L=(0,C.h)((0,u.U)(S)),k=i(89736),R=i(28789),D=i(19805);const b={setExperimentTagApi:d.EJ,getExperimentApi:d.yc,setCompareExperiments:d.I_},A=e=>async t=>{const i=await(0,m.r)(),s=await(0,m.W)();i?await t((0,d.vF)(e)):t((0,d.Pv)({isValid:!1,uri:""})),s||t((0,d.bS)({isValid:!1,uri:""}))};var M={name:"1s36c6h",styles:"display:flex;height:calc(100% - 60px)"},T={name:"ro6tv3",styles:"width:100px;height:32px"};const _=()=>{const{theme:e}=(0,u.u)();return(0,I.FD)("div",{css:M,children:[(0,I.FD)("div",{css:(0,s.AH)({width:"250px",height:"100%",paddingTop:24,borderRight:`1px solid ${e.colors.borderDecorative}`,padding:e.spacing.md},""),children:[(0,I.Y)(g.oud,{}),[...Array(5)].map(((t,i)=>(0,I.Y)("div",{css:(0,s.AH)({marginBottom:e.spacing.md},""),children:(0,I.Y)(g.I_K,{seed:`exp-${i}`})},i)))]}),(0,I.FD)("div",{css:(0,s.AH)({flex:1,padding:e.spacing.md,paddingTop:e.spacing.lg},""),children:[(0,I.FD)("div",{css:(0,s.AH)({marginBottom:e.spacing.lg},""),children:[(0,I.Y)(g.oud,{}),(0,I.Y)(g.I_K,{seed:"header-desc"})]}),(0,I.Y)("div",{css:(0,s.AH)({display:"flex",gap:e.spacing.md,marginBottom:e.spacing.lg},""),children:[...Array(3)].map(((e,t)=>(0,I.Y)(g.PLz,{css:T},t)))}),[...Array(5)].map(((t,i)=>(0,I.Y)("div",{css:(0,s.AH)({marginBottom:e.spacing.lg},""),children:(0,I.Y)(g.I_K,{seed:`row-${i}`})},i)))]})]})};var H={name:"13udsys",styles:"height:100%"},F={name:"1ichkjj",styles:"height:100%;display:flex;justify-content:center;align-items:center"},K={name:"1s36c6h",styles:"display:flex;height:calc(100% - 60px)"},O={name:"tby1uk",styles:"height:100%;padding-top:24px;display:flex"};var B=()=>{const e=(0,r.wA)(),{theme:t}=(0,u.u)(),i=(0,n.useRef)((0,p.yk)()),[d,m]=(0,n.useState)(!0),[E,f]=(0,g.oL1)(),y=(0,l.z)(),v=(0,r.d4)((e=>(0,a.values)(e.entities.experimentsById))),w=(0,r.d4)((e=>e.clusters.mlflowServer.status)),C=v.length>0;if((0,n.useEffect)((()=>{(async()=>{m(!0);try{await e(A(i.current))}finally{m(!1)}})()}),[e]),!w.isValid)return(0,I.FD)("div",{css:H,children:[(0,I.Y)(_,{}),f]});if(!y.length){const e=(e=>[...e].sort(h.A.compareExperiments).find((e=>{let{lifecycleStage:t}=e;return"active"===t})))(v);if(e)return(0,I.Y)(c.C5,{to:o.h.getExperimentPageRoute(e.experimentId),replace:!0})}const S=(0,I.Y)("div",{css:F,children:(0,I.Y)(u.S,{size:"large"})});return(0,I.FD)(x.Ay,{requestIds:[i.current],customSpinner:S,children:[(0,I.FD)("div",{css:K,children:[(0,I.Y)("div",{css:O,children:(0,I.Y)(L,{activeExperimentIds:y||[],experiments:v})}),(0,I.Y)("div",{css:(0,s.AH)({height:"100%",flex:1,padding:t.spacing.md,paddingTop:t.spacing.lg},""),children:(0,I.Y)(k.Z,{actions:b,children:C?(0,I.Y)(R.n,{}):(0,I.Y)(D.O,{})})})]}),f]})}}}]);