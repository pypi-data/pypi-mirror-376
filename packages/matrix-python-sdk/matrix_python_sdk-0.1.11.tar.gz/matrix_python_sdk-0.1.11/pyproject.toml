# =====================================================================
#  pyproject.toml — Matrix Python SDK
# =====================================================================

[build-system]
requires = ["setuptools>=68", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "matrix-python-sdk"
version = "0.1.11"
description = "Python SDK for Matrix Hub — catalog search, entity detail, install, and remote management for agents, tools, and MCP servers."
readme = "README.md"
requires-python = ">=3.11,<3.13"
license = "Apache-2.0"  

classifiers = [
  "Development Status :: 3 - Alpha",
  "Intended Audience :: Developers",
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3 :: Only",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "Typing :: Typed",
]

authors = [
  { name = "Ruslan Magana Vsevolodovna", email = "contact@ruslanmv.com" }
]

# Core runtime dependencies (truststore is now a hard dep)
dependencies = [
  "httpx>=0.28,<0.29",
  "pydantic>=2.0,<3.0",
  "python-dotenv>=1.1,<2.0",
  "truststore>=0.8",
  "tomli>=2.0.1; python_version < '3.11'",
]

[project.urls]
Homepage = "https://github.com/agent-matrix/matrix-python-sdk"
Issues = "https://github.com/agent-matrix/matrix-python-sdk/issues"
Repository = "https://github.com/agent-matrix/matrix-python-sdk"
Documentation = "https://agent-matrix.github.io/matrix-python-sdk/"

[tool.setuptools.packages.find]
# This replaces the old `packages` key and tells setuptools to automatically
# find all packages and subpackages (like `matrix_sdk.installer`).
where = ["."]
include = ["matrix_sdk*"]

[tool.ruff]
line-length = 100
target-version = "py311"

[tool.ruff.lint]
select = ["E", "F", "W", "I", "C90"]

# Optional extras for users (keep existing ones)
[project.optional-dependencies]
cli = ["typer>=0.9,<0.10", "rich>=13.0,<14.0"]
dev = [
  "pytest>=8.0,<9.0",
  "pytest-asyncio>=1.0,<2.0",
  "ruff>=0.12,<0.13",
  "black",
  "mypy",
  "build",
  "twine",
  "mkdocs",
  "pre-commit>=2.20,<3.0",
]

[project.scripts]
matrix-servers = "matrix_sdk.cli.commands:app"

# Badges (docs-only)
[badges]
pypi = { image = "https://img.shields.io/pypi/v/matrix-python-sdk.svg", url = "https://pypi.org/project/matrix-python-sdk/" }
python-versions = { image = "https://img.shields.io/pypi/pyversions/matrix-python-sdk.svg", url = "https://pypi.org/project/matrix-python-sdk/" }
ci = { image = "https://github.com/agent-matrix/matrix-python-sdk/actions/workflows/ci.yml/badge.svg", url = "https://github.com/agent-matrix/matrix-python-sdk/actions" }
license = { image = "https://img.shields.io/pypi/l/matrix-python-sdk.svg", url = "https://github.com/agent-matrix/matrix-python-sdk/blob/main/LICENSE" }

[tool.mypy]
namespace_packages = true
explicit_package_bases = true

[[tool.mypy.overrides]]
module = [
  "tomli",
  "matrix_sdk.bulk.probe",
]
ignore_missing_imports = true

[tool.flake8]
max-complexity = 15

[tool.ruff.lint.mccabe]
# Increase the maximum complexity from the default of 10
max-complexity = 15
