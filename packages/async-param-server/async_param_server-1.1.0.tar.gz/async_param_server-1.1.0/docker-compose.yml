services:
  param-server:
    build:
      dockerfile: Dockerfile
    ports:
      - "8888:8888"
    volumes:
      - ./config/params.yml:/app/config/params.yml:ro
    env_file:
      - .env
    command: ["uv", "run", "-m", "param_server.server", "--host", "0.0.0.0", "--port", "8888", "--config", "/app/config/params.yml"]
    restart: unless-stopped
    
    healthcheck:
      test: ["CMD", "param-cli", "--host", "localhost", "--port", "8888", "ping"]
      interval: 10s
      timeout: 1s
      retries: 1
      start_period: 10s