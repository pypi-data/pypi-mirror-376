Metadata-Version: 2.4
Name: funimage
Version: 1.0.18
Summary: A powerful Python library for image format conversion and processing
Author-email: ç‰›å“¥ <niuliangtao@qq.com>, farfarfun <farfarfun@qq.com>
Maintainer-email: ç‰›å“¥ <niuliangtao@qq.com>, farfarfun <farfarfun@qq.com>
License: MIT
Project-URL: Organization, https://github.com/farfarfun
Project-URL: Repository, https://github.com/farfarfun/funimage
Project-URL: Releases, https://github.com/farfarfun/funimage/releases
Keywords: image,conversion,PIL,opencv,base64,processing
Classifier: Development Status :: 5 - Production/Stable
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: Multimedia :: Graphics
Requires-Python: >=3.8
Description-Content-Type: text/markdown
Requires-Dist: funfake>=1.0.3
Requires-Dist: funutil>=1.0.14
Requires-Dist: pillow>=9.0.0
Requires-Dist: pillow-avif-plugin>=1.4.6
Requires-Dist: numpy>=1.20.0
Requires-Dist: requests>=2.25.0
Requires-Dist: opencv-python>=4.0
Provides-Extra: opencv
Requires-Dist: opencv-python>=4.5.0; extra == "opencv"
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-cov>=4.0.0; extra == "dev"
Requires-Dist: black>=22.0.0; extra == "dev"
Requires-Dist: isort>=5.10.0; extra == "dev"
Requires-Dist: flake8>=5.0.0; extra == "dev"
Requires-Dist: mypy>=1.0.0; extra == "dev"

# FunImage

[![PyPI version](https://badge.fury.io/py/funimage.svg)](https://badge.fury.io/py/funimage)
[![Python Support](https://img.shields.io/pypi/pyversions/funimage.svg)](https://pypi.org/project/funimage/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)


ä¸€ä¸ªå¼ºå¤§çš„ Python å›¾åƒæ ¼å¼è½¬æ¢å’Œå¤„ç†åº“ã€‚FunImage æä¾›äº† PIL å›¾åƒã€OpenCV æ•°ç»„ã€å­—èŠ‚ã€base64ã€URL å’Œæ–‡ä»¶è·¯å¾„ä¹‹é—´çš„æ— ç¼è½¬æ¢åŠŸèƒ½ã€‚

A powerful Python library for image format conversion and processing. FunImage provides seamless conversion between various image formats including PIL Images, OpenCV arrays, bytes, base64, URLs, and file paths.

## ç‰¹æ€§ Features

- ğŸ”„ **é€šç”¨å›¾åƒè½¬æ¢ Universal Image Conversion**: æ”¯æŒ PILã€OpenCVã€å­—èŠ‚ã€base64ã€URL å’Œæ–‡ä»¶ä¹‹é—´çš„è½¬æ¢ Convert between PIL, OpenCV, bytes, base64, URLs, and files
- ğŸŒ **URL æ”¯æŒ URL Support**: ç›´æ¥ä» HTTP/HTTPS URL åŠ è½½å›¾åƒ Direct image loading from HTTP/HTTPS URLs
- ğŸ¯ **ç±»å‹æ£€æµ‹ Type Detection**: è‡ªåŠ¨å›¾åƒç±»å‹æ£€æµ‹ Automatic image type detection
- ğŸ“¦ **å¤šæ ¼å¼æ”¯æŒ Multiple Formats**: æ”¯æŒ JPEGã€PNGã€WEBPã€AVIF ç­‰æ ¼å¼ Support for JPEG, PNG, WEBP, AVIF, and more
- ğŸ›¡ï¸ **é”™è¯¯å¤„ç† Error Handling**: å¥å£®çš„é”™è¯¯å¤„ç†å’Œå›é€€æœºåˆ¶ Robust error handling with fallback mechanisms
- ğŸš€ **é«˜æ€§èƒ½ Performance**: é’ˆå¯¹é€Ÿåº¦å’Œå†…å­˜æ•ˆç‡ä¼˜åŒ– Optimized for speed and memory efficiency
- ğŸ”§ **ç±»å‹æç¤º Type Hints**: å®Œæ•´çš„ç±»å‹æ³¨è§£æ”¯æŒ Full type annotation support
- ğŸ“ **å®Œæ•´æ–‡æ¡£ Documentation**: è¯¦ç»†çš„ API æ–‡æ¡£å’Œç¤ºä¾‹ Comprehensive API documentation and examples

## å®‰è£… Installation

```bash
pip install funimage
```

### å¯é€‰ä¾èµ– Optional Dependencies

å®‰è£… OpenCV æ”¯æŒ For OpenCV support:
```bash
pip install funimage[opencv]
```

å¼€å‘ç¯å¢ƒ For development:
```bash
pip install funimage[dev]
```

## å¿«é€Ÿå¼€å§‹ Quick Start

```python
import funimage

# Convert URL to PIL Image
pil_img = funimage.convert_to_pilimg("https://example.com/image.jpg")

# Convert PIL Image to bytes
img_bytes = funimage.convert_to_bytes(pil_img)

# Convert to base64 string
base64_str = funimage.convert_to_base64_str(img_bytes)

# Save to file
funimage.convert_to_file("https://example.com/image.jpg", "output.jpg")
```

## æ”¯æŒçš„è¾“å…¥ç±»å‹ Supported Input Types

| Type | Description | Example |
|------|-------------|---------|
| **URL** | HTTP/HTTPS image URLs | `"https://example.com/image.jpg"` |
| **File Path** | Local file paths | `"/path/to/image.jpg"` |
| **PIL Image** | PIL Image objects | `PIL.Image.open("image.jpg")` |
| **Bytes** | Raw image bytes | `open("image.jpg", "rb").read()` |
| **Base64** | Base64 encoded strings | `"data:image/jpeg;base64,..."` |
| **NumPy Array** | OpenCV/NumPy arrays | `cv2.imread("image.jpg")` |
| **BytesIO** | BytesIO objects | `BytesIO(image_bytes)` |

## API å‚è€ƒ API Reference

### æ ¸å¿ƒè½¬æ¢å‡½æ•° Core Conversion Functions

#### `convert_to_pilimg(image, image_type=None)`
Convert any supported image format to PIL Image.

```python
# From URL
pil_img = funimage.convert_to_pilimg("https://example.com/image.jpg")

# From file
pil_img = funimage.convert_to_pilimg("/path/to/image.jpg")

# From bytes
pil_img = funimage.convert_to_pilimg(image_bytes)
```

#### `convert_to_bytes(image, image_type=None)`
Convert any supported image format to bytes.

```python
# From PIL Image
img_bytes = funimage.convert_to_bytes(pil_image)

# From URL
img_bytes = funimage.convert_to_bytes("https://example.com/image.jpg")
```

#### `convert_to_cvimg(image, image_type=None)`
Convert any supported image format to OpenCV numpy array.

```python
# From PIL Image
cv_img = funimage.convert_to_cvimg(pil_image)

# From URL
cv_img = funimage.convert_to_cvimg("https://example.com/image.jpg")
```

#### `convert_to_base64_str(image, image_type=None)`
Convert any supported image format to base64 string.

```python
# From PIL Image
b64_str = funimage.convert_to_base64_str(pil_image)

# From file
b64_str = funimage.convert_to_base64_str("/path/to/image.jpg")
```

#### `convert_to_file(image, output_path, image_type=None)`
Save any supported image format to file.

```python
# From URL to file
funimage.convert_to_file("https://example.com/image.jpg", "local_copy.jpg")

# From PIL Image to file
funimage.convert_to_file(pil_image, "output.png")
```

### å·¥å…·å‡½æ•° Utility Functions

#### `parse_image_type(image, image_type=None)`
Detect the type of input image.

```python
from funimage import ImageType, parse_image_type

img_type = parse_image_type("https://example.com/image.jpg")
print(img_type)  # ImageType.URL
```

### å›¾åƒç±»å‹ Image Types

```python
from funimage import ImageType

ImageType.URL          # HTTP/HTTPS URLs
ImageType.FILE         # Local file paths  
ImageType.PIL          # PIL Image objects
ImageType.BYTES        # Raw bytes
ImageType.BASE64_STR   # Base64 strings
ImageType.NDARRAY      # NumPy arrays
ImageType.BYTESIO      # BytesIO objects
```

## é«˜çº§ç”¨æ³• Advanced Usage

### æ˜¾å¼ç±»å‹æŒ‡å®š Explicit Type Specification

```python
from funimage import ImageType

# Explicitly specify input type
pil_img = funimage.convert_to_pilimg(
    image_data, 
    image_type=ImageType.BYTES
)
```

### é”™è¯¯å¤„ç† Error Handling

```python
try:
    pil_img = funimage.convert_to_pilimg("https://invalid-url.com/image.jpg")
except Exception as e:
    print(f"Conversion failed: {e}")
```

### æ‰¹é‡å¤„ç† Batch Processing

```python
urls = [
    "https://example.com/image1.jpg",
    "https://example.com/image2.jpg", 
    "https://example.com/image3.jpg"
]

for i, url in enumerate(urls):
    funimage.convert_to_file(url, f"image_{i}.jpg")
```

## ç¤ºä¾‹ Examples

### ç½‘é¡µå›¾åƒæŠ“å– Web Scraping Images

```python
import requests
from bs4 import BeautifulSoup
import funimage

# Scrape images from a webpage
response = requests.get("https://example.com")
soup = BeautifulSoup(response.content, 'html.parser')

for i, img in enumerate(soup.find_all('img')):
    img_url = img.get('src')
    if img_url:
        try:
            funimage.convert_to_file(img_url, f"scraped_image_{i}.jpg")
            print(f"Saved image {i}")
        except Exception as e:
            print(f"Failed to save image {i}: {e}")
```

### å›¾åƒæ ¼å¼è½¬æ¢ Image Format Conversion

```python
import funimage

# Convert PNG to JPEG
png_image = funimage.convert_to_pilimg("input.png")
funimage.convert_to_file(png_image, "output.jpg")

# Convert to WebP
funimage.convert_to_file("input.jpg", "output.webp")
```

### API é›†æˆ API Integration

```python
import funimage
import requests

def upload_image_to_api(image_path):
    # Convert image to base64 for API
    b64_str = funimage.convert_to_base64_str(image_path)
    
    payload = {
        "image": b64_str,
        "format": "jpeg"
    }
    
    response = requests.post("https://api.example.com/upload", json=payload)
    return response.json()
```

## ä¾èµ–è¦æ±‚ Requirements

- Python >= 3.8
- PIL/Pillow >= 9.0.0
- NumPy >= 1.20.0
- Requests >= 2.25.0

## è´¡çŒ® Contributing

æ¬¢è¿è´¡çŒ®ï¼è¯·éšæ—¶æäº¤ Pull Requestã€‚Contributions are welcome! Please feel free to submit a Pull Request.

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## è®¸å¯è¯ License

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯ - è¯¦æƒ…è¯·æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶ã€‚This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## æ›´æ–°æ—¥å¿— Changelog

### v1.0.13
- æ·»åŠ å®Œæ•´çš„ç±»å‹æç¤º Added comprehensive type hints
- æ”¹è¿›é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½• Improved error handling and logging

## æ”¯æŒ Support

å¦‚æœæ‚¨é‡åˆ°ä»»ä½•é—®é¢˜æˆ–æœ‰ç–‘é—®ï¼Œè¯·åœ¨ GitHub ä¸Š [æäº¤ issue](https://github.com/farfarfun/funimage/issues)ã€‚If you encounter any issues or have questions, please [open an issue](https://github.com/farfarfun/funimage/issues) on GitHub.
