import pytest

from pytest_jsonschema_snapshot import SchemaShot


@pytest.mark.asyncio
async def test_something(schemashot: SchemaShot):
    data = {
        "обязательная": "строка",
        "необязательная": None,
        "словарь": {
            "ключ": "значение",
            "число": 123,
            "булево": True,
            "список": [1, 2, 3],
            "вложенный_словарь": {
                "пустое": None,
            },
            "пустой_словарь": {},
            "пустой_список": [],
            "пустое_значение": "",
            "пустое_число": 0,
            # Добавляем новое поле для обновления схемы
            "дополнительное_поле": "для обновления",
        },
        "сложная_структура": [
            {
                "id": 1,
                "имя": "Иван",
                "почта": "ivan@example.com",
                "возраст": 25,
                "дата": "2023-01-01T12:00:00Z",
                "вложенный_объект": {"ключ": "значение"},
            },
            {
                "id": 2,
                "имя": ["Мария", "Анна"],
                "возраст": 30.5,
                "вложенный_объект": {"ключ": "значение", "лишний_ключ": None},
            },
        ],
        "разнотипный_массив": [None, "строка", {"ключ": "значение"}],
    }
    schemashot.assert_json_match(data, "some_schema")
