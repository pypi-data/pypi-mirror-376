# Example script to convert a npz to a JSON scan result.

import argparse
from skyreader import SkyScanResult


def main() -> None:
    """Make plots."""
    parser = argparse.ArgumentParser(
        description="Convert a SkyScanResult npz to JSON format",
        formatter_class=argparse.ArgumentDefaultsHelpFormatter,
    )
    parser.add_argument("--input-file", help="input file", required=True)
    parser.add_argument(
        "--output-dir", help="output directory (filename autogenerated)", default="."
    )
    args = parser.parse_args()

    result = SkyScanResult.read_npz(args.input_file)
    result.to_json(result.get_event_metadata(), output_dir=args.output_dir)

    return


if __name__ == "__main__":
    main()
