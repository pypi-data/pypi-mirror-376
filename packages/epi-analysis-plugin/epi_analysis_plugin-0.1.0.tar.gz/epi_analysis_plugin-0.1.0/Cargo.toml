[workspace]
resolver = "2"

[workspace.dependencies]
faer = { version = "0.22.6", features = ["serde", "perf-warn"] }
dyn-stack = "0.13.0"
arrow = "56"
arrow-csv = "56"
arrow-schema = "56"
parquet = "56"
statrs = "0.18"
rayon = "1.10"
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
csv = "1.3"
rand = "0.9"
rand_distr = "0.4"
anyhow = "1.0"
thiserror = "2.0"
itertools = "0.14"
num-traits = "0.2.19"
log = { version = "0.4", features = ["std", "serde"] }
rstest = "0.26"

[package]
name = "cdef-scd-matching-plugin"
version = "0.1.0"
edition = "2021"
readme = "README.md"

[lib]
name = "matching_plugin"
crate-type = ["cdylib"]

[dependencies]
# Python bindings
pyo3 = { version = "0.25.0", features = [
    "extension-module",
    "abi3-py39",
] }
pyo3-polars = { version = "0.23.1", features = ["derive"] }

# Serialization
serde = { workspace = true, features = ["derive"] }
serde_json = { workspace = true }

# DID integration (local workspace)
did-core = { path = "DID-RS-PLUGIN/crates/did-core" }
arrow = { workspace = true }

# Polars core (plugin-compatible versions)
polars       = { version = "0.50.0", default-features = false, features = [
    "lazy",
    "parquet",
    "dtype-categorical",
    "temporal",
    "polars-ops",
    "strings",
    "regex",
    "timezones",
] }
polars-arrow = { version = "0.50.0", default-features = false }
polars-python = { version = "0.50.0" }

# Core algorithm utilities
chrono     = { version = "0.4", default-features = false, features = ["std"] }
rand       = "0.8"
rayon      = "1.11"   # Parallel processing
rustc-hash = "2.0"    # Faster hashmap implementation
smallvec   = "1.13"   # Stack-allocated vectors

# Temporal extractor utilities
glob        = "0.3"
regex       = "1"
once_cell   = "1"
parking_lot = "0.12"
anyhow      = "1"
lru         = "0.12"
