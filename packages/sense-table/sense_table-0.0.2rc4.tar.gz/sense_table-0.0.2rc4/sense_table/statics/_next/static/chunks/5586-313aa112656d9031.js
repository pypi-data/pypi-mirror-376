"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5586],{31874:(e,t,a)=>{a.d(t,{Ay:()=>y,Np:()=>p,SR:()=>d});var n=a(46020),o=a(37835),r=a(88453),c=a(66848),i=a.n(c);let l=async(e,t)=>{let{boxPlotColumns:a,boxPlotBreakdownColumn:o,filePath:c,filterCondition:l}=e;if(0===a.length)return[];let s="\n    WITH filtered AS (\n      SELECT ".concat(i()(o)?"NULL":(0,r.r)(o)," AS breakdown, \n      ").concat(a.map(r.r).join(", "),"\n      ").concat("FROM '".concat(c,"'"),"\n      ").concat(l?"WHERE ".concat(l):"","\n    ) SELECT breakdown, COUNT(*) AS count, ").concat(a.map(e=>(e=>{let t=(0,r.r)(e);return"{\n      'min' : MIN(".concat(t,"),\n      'max' : MAX(").concat(t,"),\n      'std' : STDDEV_POP(").concat(t,"),\n      'skewness': SKEWNESS(").concat(t,"),\n      'avg' : AVG(").concat(t,"),\n      'q25' : QUANTILE_CONT(").concat(t,", 0.25),\n      'q50' : QUANTILE_CONT(").concat(t,", 0.5),\n      'q75' : QUANTILE_CONT(").concat(t,", 0.75)\n    } AS ").concat(t)})(e)).join(", "),"\n    FROM filtered\n    GROUP BY breakdown\n  ");return await (0,n.l4)(s,"boxPlot",t)},s=(0,o.b)({name:"boxPlot",fetchFunction:l,shouldWait:e=>!!(e.boxPlotColumns.length>0&&e.filePath),errorMessage:"Failed to fetch box plot data"});s.slice;let p=s.fetchThunk,{clearBoxPlot:u,setBoxPlotError:b,setNeedRefresh:d}=s.actions,y=s.reducer},31929:(e,t,a)=>{a.d(t,{Ay:()=>f,Bb:()=>l,Rw:()=>d,SR:()=>h});var n=a(46020),o=a(37835),r=a(88453),c=a(46336),i=a.n(c);let l="__y__label__value__",s=e=>({min:i().min(e)||0,max:i().max(e)||0,sum:i().sum(e)}),p=async(e,t)=>{let{heatmapXColumn:a,heatmapYColumn:o,filePath:c,filterCondition:p}=e;if(!a||!o||!c)throw Error("Missing required parameters for heatmap");let u=p?"WHERE ".concat(p):"",b="\nWITH filtered AS (\n      SELECT \n        ".concat((0,r.r)(a)," AS x, \n        ").concat((0,r.r)(o)," AS y\n      FROM '").concat(c,"'\n      ").concat(u?"".concat(u," AND"):"WHERE"," x IS NOT NULL AND y IS NOT NULL\n  ) SELECT x, y, COUNT(*) AS cnt \n   FROM filtered\n   GROUP BY x, y\n  ");return(e=>{let t=i()(e).map("x").uniq().map(String).value(),a=i()(e).groupBy("y").map((e,t)=>({...i()(e).map(e=>[e.x,e]).fromPairs().value(),[l]:t})).value(),n=s(i().map(e,"cnt")),o=i().fromPairs(i().map(a,e=>{let t=i()(e).values().map(e=>null==e?void 0:e.cnt).filter(e=>"number"==typeof e).value();return[e[l],s(t)]})),r=i().fromPairs(i().map(t,e=>{let t=i().map(a,t=>{let a=t[e];return null==a?void 0:a.cnt}).filter(e=>"number"==typeof e);return[e,s(t)]}));return{xLabels:t,rowData:i().map(a,e=>({rowTotal:o[e[l]].sum,...e})),xStats:r,yStats:o,allStats:n}})(await (0,n.l4)(b,"heatMap",t))},u=(0,o.b)({name:"heatmap",fetchFunction:p,shouldWait:e=>!!(e.heatmapXColumn&&e.heatmapYColumn&&e.filePath),errorMessage:"Failed to fetch heatmap data"}),b=u.slice,d=u.fetchThunk,{clearHeatmap:y,setHeatmapError:m,setNeedRefresh:h}=u.actions,f=b.reducer},35484:(e,t,a)=>{a.d(t,{Ay:()=>u,Pj:()=>i});var n=a(58976),o=a(69984),r=a(81876);let c=(0,n.Z0)({name:"aiQuickActions",initialState:{actions:[],initialized:!1},reducers:{initializeQuickActions:(e,t)=>{let{fileName:a}=t.payload;e.actions=function(e){var t;let a=[];return"bbox.parquet"===((null==(t=e.split("/").pop())?void 0:t.toLowerCase())||"")&&a.push({name:"Abnormally small bbox",confirmation:"Great! I've switched to Table view. \n      Only related columns are shown, sorted by smallest bbox area.\n      You can see more details in the interactive GUI. \n      ",actions:[{type:o.YF.type,payload:"Table"},{type:r.tG.type,payload:["bbox_area","bbox_viz","image_url","category_name","bbox_width","bbox_height"]},{type:r.J_.type,payload:[{field:"bbox_area",direction:"asc"}]}]},{name:"Show bounding boxes with uncommon width-height ratio.",confirmation:"You can analyze it in Bubble Plot with width vs height. Drag-select interesting areas to see samples.",actions:[{type:o.YF.type,payload:"Plot"},{type:o.$r.type,payload:"BubblePlot"},{type:o.y.type,payload:"bbox_width"},{type:o.TO.type,payload:"bbox_height"},{type:o.Ub.type,payload:"category_name"},{type:o.uX.type,payload:"bbox_viz"}]},{name:"Which category has big variation in bounding box sizes?",confirmation:"Box Plot is perfect for this purpose. You can click on a boxplot cell and see samples.",actions:[{type:o.YF.type,payload:"Plot"},{type:o.$r.type,payload:"BoxPlot"},{type:o.qw.type,payload:"category_name"},{type:o.mD.type,payload:"std"},{type:o.KL.type,payload:["bbox_area","bbox_percentage"]},{type:o.pi.type,payload:[{field:"bbox_percentage",direction:"desc"}]},{type:o.Ub.type,payload:"category_name"},{type:o.uX.type,payload:"bbox_viz"}]}),a}(a),e.initialized=!0},addQuickAction:(e,t)=>{let a=e.actions.findIndex(e=>e.name===t.payload.name);-1!==a?e.actions[a]=t.payload:e.actions.push(t.payload)},removeQuickAction:(e,t)=>{e.actions=e.actions.filter(e=>e.name!==t.payload)},reset:e=>{e.actions=[],e.initialized=!1}}}),{initializeQuickActions:i,addQuickAction:l,removeQuickAction:s,reset:p}=c.actions,u=c.reducer},43462:(e,t,a)=>{a.d(t,{Ay:()=>f,F$:()=>d,SR:()=>h});var n=a(46020),o=a(37835),r=a(88453),c=a(28602),i=a(66848),l=a.n(i),s=a(46336),p=a.n(s);let u=async(e,t)=>{let{histogramColumn:a,histogramBreakdownColumn:o,filePath:i,filterCondition:s,histogramStatsData:u}=e;if(!(null==u?void 0:u.bin))throw Error("Missing histogram bin data");let{min:b,step:d,round_to:y}=u.bin,m=s?"WHERE ".concat(s):"",h="\n    WITH filtered AS (\n      SELECT \n        ".concat((0,r.r)(a)," AS value, \n        ").concat(l()(o)?"NULL":(0,r.r)(o)," AS breakdown\n      FROM '").concat(i,"'\n      ").concat(m?"".concat(m," AND"):"WHERE"," value IS NOT NULL  \n    )\n    SELECT breakdown, FLOOR((value - ").concat(b,") / ").concat(d,") AS binIdx, \n        COUNT(*) AS cnt\n    FROM filtered\n    GROUP BY 1, 2\n    ORDER BY 1, 2\n  "),f=await (0,n.l4)(h,"histogram",t);return p()(f).groupBy("breakdown").toPairs().map(e=>{let[t,n]=e,i=(0,c.G)({min:b,step:d,round_to:y,cntValues:n}),s=p().map(i,"value"),u=p().map(i,"cnt"),m=p().map(i,e=>({condExpr:["".concat((0,r.r)(a)," >= ").concat(e.binMin),"".concat((0,r.r)(a)," < ").concat(e.binMax),...l()(o)?[]:["".concat((0,r.r)(o)," = '").concat(t,"'")]].join(" AND ")}));return{name:t||"All",x:s,y:u,customdata:m}}).value()},b=(0,o.b)({name:"histogram",fetchFunction:u,shouldWait:e=>{var t;return!!(e.histogramColumn&&e.filePath&&(null==(t=e.histogramStatsData)?void 0:t.bin))},errorMessage:"Failed to fetch histogram data"});b.slice;let d=b.fetchThunk,{clearHistogram:y,setHistogramError:m,setNeedRefresh:h}=b.actions,f=b.reducer},44558:(e,t,a)=>{a.d(t,{Ay:()=>h,SR:()=>m,wk:()=>b});var n=a(46020),o=a(37835),r=a(88453),c=a(66848),i=a.n(c),l=a(46336),s=a.n(l);let p=async(e,t)=>{let{bubblePlotXColumn:a,bubblePlotYColumn:o,bubblePlotBreakdownColumn:c,filePath:l,filterCondition:p,xBin:u,yBin:b}=e,d=p?"WHERE ".concat(p):"",y="\n    WITH filtered AS (\n      SELECT \n        ".concat((0,r.r)(a)," AS x,\n        ").concat((0,r.r)(o)," AS y,\n        ").concat(i()(c)?"NULL":(0,r.r)(c)," AS breakdown\n      FROM '").concat(l,"'\n      ").concat(d?"".concat(d," AND"):"WHERE"," x IS NOT NULL AND y IS NOT NULL\n    ), binned AS (\n      SELECT\n        p.*,\n        FLOOR((p.x - ").concat(u.min,") / ").concat(u.step,")::INT AS bin_x,\n        FLOOR((p.y - ").concat(b.min,") / ").concat(b.step,')::INT AS bin_y\n      FROM filtered AS p\n    )\n    SELECT breakdown, bin_x, bin_y,\n      -- Compute the "bubble" center as the average x and y within that bin\n      AVG(x) AS x,\n      AVG(y) AS y,\n      COUNT(*) AS count\n    FROM binned\n    GROUP BY 1, 2, 3\n    ORDER BY 1, 2, 3\n  '),m=await (0,n.l4)(y,"bubblePlot",t);return s()(m).groupBy("breakdown").toPairs().map(e=>{let[t,n]=e,l=s().map(n,"x"),p=s().map(n,"y"),d=s().map(n,e=>{let n=e.bin_x*u.step+u.min,l=n+u.step,s=e.bin_y*b.step+b.min,p=s+b.step,d=(0,r.r)(a),y=(0,r.r)(o),m=(0,r.r)(c);return{condExpr:["".concat(d," >= ").concat(n),"".concat(d," < ").concat(l),"".concat(y," >= ").concat(s),"".concat(y," < ").concat(p),...i()(c)?[]:["".concat(m," = '").concat(t,"'")]].join(" AND "),count:e.count}});return{name:t||"All",x:l,y:p,customdata:d}}).value()},u=(0,o.b)({name:"bubblePlot",fetchFunction:p,shouldWait:e=>!!(e.bubblePlotXColumn&&e.bubblePlotYColumn&&e.filePath&&e.xBin&&e.yBin),errorMessage:"Failed to fetch bubble plot data"});u.slice;let b=u.fetchThunk,{clearBubblePlot:d,setBubblePlotError:y,setNeedRefresh:m}=u.actions,h=u.reducer},91161:(e,t,a)=>{a.d(t,{Ay:()=>w,hb:()=>S,SR:()=>E});var n=a(37835),o=a(16023),r=a(44159),c=a.n(r),i=a(17017),l=a.n(i),s=a(82721),p=a.n(s),u=a(67051),b=a.n(u);let d=async e=>{let{expr:t,singleRowData:a}=e,n=await c()(t).evaluate(a);return"object"==typeof n?JSON.stringify(n):String(n||"")},y=async e=>{let{params:t,singleRowData:a}=e,n=l()(t),o=p()(n,e=>d({expr:t[e],singleRowData:a})),r=await Promise.all(o);return b()(n,r)},m=e=>{let{baseUrl:t,params:a}=e;if(!a||0===Object.keys(a).length)return t;let n=new URL(t);return Object.entries(a).forEach(e=>{let[t,a]=e;n.searchParams.set(t,a)}),n.toString()};async function h(e){let{derivedColumns:t,rowData:a}=e;if(!t||0===t.length)return a;for(let e of a)for(let a of t)if(a.expression)try{let t=await d({expr:a.expression,singleRowData:e});e[a.name]=t}catch(t){console.error("Error evaluating JSONata expression:",a.expression,t),e[a.name]=""}else if(a.params&&a.baseUrl)try{let t=await y({params:a.params,singleRowData:e}),n=m({baseUrl:a.baseUrl,params:t});e[a.name]=n}catch(t){console.error("Error evaluating derived column parameters:",a.params,t),e[a.name]=a.baseUrl||""}else e[a.name]="";return a}let f=async(e,t,a)=>{let{rawData:n,urlColumns:r}=e;if(!n||0===n.length)return[];let c=[...n];if(r&&r.length>0&&(c=await (0,o.po)({rowData:c,urlColumns:r})),a){var i;let e=(null==(i=a().derivedColumns)?void 0:i.columns)||[];e.length>0&&(c=await h({derivedColumns:e,rowData:c}))}return c},x=(0,n.b)({name:"processedRowData",fetchFunction:f,shouldWait:e=>{let{rawData:t}=e;return!!(t&&t.length>0)},errorMessage:"Failed to process row data"});x.slice;let S=x.fetchThunk,{clearProcessedRowData:g,setProcessedRowDataError:A,setNeedRefresh:E}=x.actions,w=x.reducer}}]);