import{g as ke,p as he,f as ot,t as $,u as ye,b as m,n as re,d as N,L as Re,a_ as $e,_ as T,z as f,w as l,X as Ve,B as ue,y as C,m as Z,a7 as Ne,a as u,G as B,a$ as lt,O as L,v as p,I as h,C as w,ax as ut,af as Te,b0 as dt,b1 as ct,aA as mt,x as _,D as de,b2 as ht,b3 as ft,b4 as pt,b5 as Fe,q as vt,H as gt,b6 as bt,ac as kt,V as yt,a1 as Le,A as F,b7 as _t,F as me,ah as St,ad as wt,ae as Ct,aa as Ue,Z as Tt,c as g,b8 as De,aE as Ie,aV as Ee,r as be,b9 as Mt,ba as Me,aZ as Bt,aY as Rt,i as qe,bb as Vt,h as ie,U as ze,aS as Nt,e as Lt}from"./main-d46UvpG6.js";import{A as It,V as _e,k as ne,n as xt,t as Pt,j as $t,R as Oe,s as Ft,u as Dt,c as Be,i as Et,f as zt}from"./forwardRefs-BXEe8ItZ.js";import{c as Ot,d as At}from"./VSelect-DIXHkKJm.js";import{a as Gt,c as jt,d as Ut,V as qt}from"./VDialog-BFf48e97.js";import{C as Ht}from"./change-password-dialog-DoBLv9WU.js";import{d as Kt,f as Wt,u as Yt,g as Ae,m as Zt,h as Xt,i as Qt}from"./VSelectionControl-xYnmeS9J.js";import{V as He}from"./VTable-BK7gXlps.js";import{C as Ke}from"./confirm-dialog-WKjj039l.js";import{P as Jt,V as ea}from"./unauthorized-B0KN5ef3.js";const ta=he({...Re(),...It({variant:"text"})},"VToolbarItems"),pi=ke()({name:"VToolbarItems",props:ta(),setup(e,t){let{slots:a}=t;return ot({VBtn:{color:$(()=>e.color),height:"inherit",variant:$(()=>e.variant)}}),ye(()=>m("div",{class:N(["v-toolbar-items",e.class]),style:re(e.style)},[a.default?.()])),{}}}),Ce=new Set(["",$e,$e.toString(),void 0]),aa=function(e){let t;if(Ce.has(e))t=e;else if(e instanceof Object)if("ids"in e){const a=new Set(e.ids);Ce.intersection(a).size>0?t=void 0:t={value:e.ids.join(","),title:e.name}}else Ce.has(e.pk)?t=void 0:t={value:e.pk,title:e.name};else t={value:e,title:e.toString()};return e?.url&&(t.url=e.url),t},sa=function(e,t){return e.title.localeCompare(t.title)},ia=function(e,t){return Number.parseFloat(e.title)-Number.parseFloat(t.title)},Ge=function({items:e,filter:t,numeric:a=!1,sort:r=!0}){const n=e||[],s=t&&t.toLowerCase();let i=[];for(const o of n){const d=aa(o);d!=null&&(!s||d?.title?.toLowerCase().includes(s))&&i.push(d)}if(r){const o=a?ia:sa;i=i.sort(o)}return i},na={name:"ToolbarSelect",props:{selectLabel:{type:String,default:""},maxSelectLen:{type:Number,default:0}},computed:{style(){if(this.maxSelectLen){const e=this.$vuetify.display.xs?"max-width":"width",t=this.maxSelectLen*.7+"em";return`${e}: ${t}`}return""}}};function ra(e,t,a,r,n,s){return l(),f(Ot,Z(e.$attrs,{label:a.selectLabel,"aria-label":a.selectLabel,class:"toolbarSelect",density:"compact","full-width":"","menu-props":{maxHeight:void 0},"hide-details":"auto",style:s.style,variant:"plain"}),Ve({item:C(({item:i,props:o})=>[u(Gt,Z(o,{density:"compact",variant:"plain",title:i.title,value:i.value}),null,16,["title","value"])]),_:2},[ue(e.$slots,(i,o)=>({name:o,fn:C(d=>[Ne(e.$slots,o,Z({props:i},d),void 0,!0)])}))]),1040,["label","aria-label","style"])}const vi=T(na,[["render",ra],["__scopeId","data-v-cda2da63"]]),gi=jt("v-spacer","div","VSpacer"),oa={name:"BookCover",props:{group:{type:String,required:!0},pks:{type:Array,required:!0},childCount:{type:Number,default:1},finished:{type:Boolean},mtime:{type:Number,default:Date.now()}},data(){return{showPlaceholder:!1}},computed:{...B(L,["coverSettings"]),coverSrc(){return lt({group:this.group,pks:this.pks},this.coverSettings,this.mtime)},multiPkClasses(){const e=this.pks.length,t={};return e>=4?t.stack4=!0:e>1&&(t[`stack${e}`]=!0),t}},mounted:function(){this.delayPlaceholder()},methods:{delayPlaceholder:function(){setTimeout(()=>{this.showPlaceholder=!0},2e3)}}},la={class:"bookCover"},ua={key:1,class:"childCount"};function da(e,t,a,r,n,s){return l(),p("div",la,[u(Ut,{src:s.coverSrc,class:N(["coverImg",s.multiPkClasses])},null,8,["src","class"]),a.finished!==!0?(l(),p("div",{key:0,class:N({unreadFlag:!0,mixedreadFlag:a.finished===null})},null,2)):h("",!0),a.group!=="c"?(l(),p("span",ua,w(a.childCount),1)):h("",!0)])}const ca=T(oa,[["render",da],["__scopeId","data-v-8e8f21d5"]]),ma=10,ha={name:"DownloadButton",components:{ConfirmDialog:Ke},props:{button:{type:Boolean,default:!1},item:{type:Object,required:!0}},data(){return{mdiDownload:mt}},computed:{...B(L,["filterOnlySettings","groupNames"]),show(){return this.item?.ids?.length>0&&!this.item.ids.includes(0)},isOneComic(){return this.item?.group==="c"&&this.item?.ids?.length===1},downloadFn(){return this.isOneComic?this.item.name:`${this.groupNames[this.item?.group]} - ${this.item.name} Comics.zip`},downloadURL(){let e="";if(this.isOneComic){const t=this.item.ids[0];e=dt({pk:t},this.downloadFn,this.item?.mtime)}else{const t=this.item?.group,a=this.item?.ids,r=this.filterOnlySettings;e=ct({group:t,pks:a},this.downloadFn,r,this.item?.mtime)}return e},formattedChildren(){return Te.format(this.item?.childCount)},title(){let e="Download";return e+=this.isOneComic?" Book":` ${this.formattedChildren} Books`,e},confirm(){return this.item?.childCount>ma},confirmText(){return this.confirm?`Download ${this.formattedChildren} books`:""}},methods:{download(){const e=this.downloadURL,t=this.downloadFn;if(this.isOneComic)ut(e,t);else{const a=document.createElement("a");a.download=this.downloadFn,a.href=this.downloadURL,a.click(),a.remove()}}}};function fa(e,t,a,r,n,s){const i=_("ConfirmDialog");return s.show?(l(),f(i,{key:0,button:a.button,"button-text":s.title,confirm:s.confirm,"confirm-text":"Download","prepend-icon":n.mdiDownload,"title-text":s.title,text:"May take a while",onConfirm:s.download},null,8,["button","button-text","confirm","prepend-icon","title-text","onConfirm"])):h("",!0)}const pa=T(ha,[["render",fa],["__scopeId","data-v-4c14087b"]]),va=1,ga={name:"MarkReadButton",components:{ConfirmDialog:Ke},props:{button:{type:Boolean,default:!1},item:{type:Object,required:!0}},computed:{...B(L,["groupNames"]),verb(){return this.item.finished?"Unread":"Read"},confirm(){return this.item.children>va},show(){return this.item?.ids?.length>0&&!this.item.ids.includes(0)},icon(){return this.item.finished?ht:ft},confirmText(){return this.confirm?`Mark ${this.verb}`:""},markReadText(){const e=["Mark"];this.item.group!="c"&&e.push("Entire");const t=this.groupNames[this.item.group];return e.push(t,this.verb),e.join(" ")},itemName(){return this.item.name||"(Empty)"}},methods:{...de(L,["setBookmarkFinished"]),toggleRead:function(){this.setBookmarkFinished(this.item,!this.item.finished)}}};function ba(e,t,a,r,n,s){const i=_("ConfirmDialog");return s.show?(l(),f(i,{key:0,button:a.button,"button-text":s.markReadText,confirm:s.confirm,"confirm-text":s.confirmText,"prepend-icon":s.icon,"title-text":s.markReadText,text:s.itemName,onConfirm:s.toggleRead},null,8,["button","button-text","confirm","confirm-text","prepend-icon","title-text","text","onConfirm"])):h("",!0)}const ka=T(ga,[["render",ba],["__scopeId","data-v-7b148c61"]]),We=["writer","author","plotter","plot","script","scripter","story","interviewer","translator","artist","penciller","breakdowns","pencils","illustrator","layouts","inker","finishes","inks","embellisher","inkAssists","colorist","colorer","colourer","colors","colours","colorDesigner","colorFlats","colorSeparations","designer","digitalArtTechnician","grayTone","letterer","cover","covers","coverArtist","editor","edits","editing"];Object.freeze(We);const Ye=["genres","characters","teams","locations","seriesGroups","stories","storyArcNumbers","tags","universes"];Object.freeze(Ye);const Ze=new Set(["Characters","Teams"]);Object.freeze(Ze);function ya(e,t){const a=e.name.split(" ").pop(),r=t.name.split(" ").pop();return a.localeCompare(r)}const z=pt("metadata",{state:()=>({md:void 0}),getters:{roleMap(e){const t={};for(const{role:a}of e.md.credits){const r=a?.name?a.name:"Other";t[r]=a}return t},_mappedCredits(e){const t={};if(!e?.md?.credits)return t;for(const{role:a,person:r}of e.md.credits){const n=a?.name?a.name:"Other";n in t||(t[n]=[]),t[n].push(r)}for(const[a,r]of Object.entries(t))t[a]=r.sort(ya);return t},_sortedRoles(e){const t=Object.keys(e._mappedCredits),a={};for(const n of t)a[n.toLowerCase()]=n;const r=[];for(const n of We){const s=a[n];if(s&&(r.push(s),delete a[n],!Object.keys(a).length))break}return t.sort(),r.push(t),r},credits(e){return this.mapTag(e._mappedCredits,e._sortedRoles)},identifiers(e){const t=[];if(!e.md?.identifiers)return t;for(const a of e.md.identifiers){const r=a.name.split(":"),n=r[0],s=r[1],i=L().identifierSourceTitle(n);let o="";i&&i!=="None"&&(o+=i+":"),o+=s;const d={pk:a.pk,url:a.url,name:o};t.push(d)}return t},tags(e){const t=e.mapTag(e.md,Ye);e.identifiers?.length&&(t.Identifiers={filter:"identifiers",tags:this.identifiers});for(const a of Object.values(t))a.tags=a.tags.sort((r,n)=>r.name.localeCompare(n.name));return t}},actions:{async loadMetadata({group:e,pks:t}){await Fe.getMetadata({group:e,pks:t},L().metadataSettings).then(a=>{const r={...a.data};return r.loaded=!0,this.md=r,!0}).catch(a=>{console.error(a),this.clearMetadata()})},clearMetadata(){this.md=void 0},getTagName(e){var t;return e==="storyArcNumbers"?t="Story Arcs":t=vt(e),t},markTagMain(e,t){const a="main"+e.slice(0,-1),r=this.md[a]?.pk,n=[];var s=[];for(const i of t)r===i.pk?s.push(i):n.push(i);return{mainTags:s,regularTags:n}},mapTag(e,t){const a={};for(const s of t){const i=e[s];if(!i?.length)continue;const o=this.getTagName(s);var r=[],n=[];Ze.has(o)?{mainTags:r,regularTags:n}=this.markTagMain(o,i):n=i,a[o]={filter:s,tags:n,mainTags:r}}return a},lazyImport({group:e,ids:t}){return Fe.getLazyImport({group:e,pks:t})}}}),_a={name:"MetadataActivator",props:{book:{type:Object,required:!0},toolbar:{type:Boolean,require:!0}},data(){return{mdiTagOutline:bt}},computed:{...B(gt,{lazyImportEnabled:e=>e.adminFlags.lazyImportMetadata}),variant(){return this.toolbar?"plain":"text"}},methods:{...de(z,["lazyImport"]),onMouseEnter(){if(this.lazyImportEnabled&&this.book.group==="c"&&!this.book.hasMetadata){const e=this.book.ids||[this.book.pk];this.lazyImport({group:this.book.group,ids:e}),this.book.hasMetadata=!0}}}};function Sa(e,t,a,r,n,s){return l(),f(_e,{onMouseenter:s.onMouseEnter,"aria-label":"tags",class:"tagButton cardControlButton",variant:s.variant,icon:n.mdiTagOutline,title:"Tags",onClick:t[0]||(t[0]=kt(()=>{},["prevent"]))},null,8,["onMouseenter","variant","icon"])}const wa=T(_a,[["render",Sa]]),Ca=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],Ta=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],Ma=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],Ba=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],je=(e,t,a)=>{let r=e;return typeof t=="string"||Array.isArray(t)?r=e.toLocaleString(t,a):(t===!0||a!==void 0)&&(r=e.toLocaleString(void 0,a)),r},Xe=e=>{if(typeof e=="number")return Math.log10(e);const t=e.toString(10);return t.length+Math.log10("0."+t.slice(0,15))},Ra=e=>typeof e=="number"?Math.log(e):Xe(e)*Math.log(10),Va=(e,t)=>{if(typeof e=="number")return e/t;const a=e/BigInt(t),r=e%BigInt(t);return Number(a)+Number(r)/t};function Qe(e,t){if(typeof e!="bigint"&&!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);t={bits:!1,binary:!1,space:!0,...t};const a=t.bits?t.binary?Ba:Ma:t.binary?Ta:Ca,r=t.space?" ":"";if(t.signed&&(typeof e=="number"?e===0:e===0n))return` 0${r}${a[0]}`;const n=e<0,s=n?"-":t.signed?"+":"";n&&(e=-e);let i;if(t.minimumFractionDigits!==void 0&&(i={minimumFractionDigits:t.minimumFractionDigits}),t.maximumFractionDigits!==void 0&&(i={maximumFractionDigits:t.maximumFractionDigits,...i}),e<1){const M=je(e,t.locale,i);return s+M+r+a[0]}const o=Math.min(Math.floor(t.binary?Ra(e)/Math.log(1024):Xe(e)/3),a.length-1);if(e=Va(e,(t.binary?1024:1e3)**o),!i){const M=Math.max(3,Number.parseInt(e,10).toString().length);e=e.toPrecision(M)}const d=je(Number(e),t.locale,i),k=a[o];return s+d+r+k}const Na={name:"MetadataExpandButton"};function La(e,t,a,r,n,s){return l(),f(_e,{density:"compact",text:"...expand",variant:"text"})}const Ia=T(Na,[["render",La]]),xa={name:"MetadataTextBox",components:{ExpandButton:Ia},props:{group:{type:String,default:""},highlight:{type:Boolean,default:!1},label:{type:String,default:""},maxHeight:{type:Number,default:0},value:{type:[Object,String,Number,Boolean],default:void 0}},data(){return{mdiOpenInNew:Le,expanded:!1,mounted:!1}},computed:{...B(L,["groupNames"]),...B(L,{browserShow:e=>e.settings.show,browserTopGroup:e=>e.settings.topGroup,folderViewEnabled:e=>e.page.adminFlags.folderView}),computedValue(){return this.value&&this.value.name!==void 0?this.value.name:this.value},lastSlashIndex(){return this.computedValue.lastIndexOf("/")+1},displayValue(){let e;return this.group==="f"&&this.computedValue?e=this.computedValue.slice(0,Math.max(0,this.lastSlashIndex)):this.group==="v"&&this.computedValue?e=yt(this.computedValue,this.value.numberTo):e=this.computedValue,e},textValueStyles(){const e=this.maxHeight>0&&!this.expanded?this.maxHeight:0;return e?"max-height: "+e+"px;":""},textValueRefName(){return"mdTextValue"+this.label.replaceAll(" ","")},isOverflow(){if(!this.mounted)return!1;const e=this.$refs[this.textValueRefName];return e?e.clientHeight<e.scrollHeight:!1},showExpandButton(){return!this.expanded&&this.maxHeight>0&&this.isOverflow},linkPks(){return(this.value.ids||[this.value.pk]).join(",")},clickable(){const e=this.$router.currentRoute.value.params;return!this.group||e.group===this.group||this.group==="f"&&!this.folderViewEnabled||!["a","f"].includes(this.group)&&!this.browserShow[this.group]?!1:!!this.linkPks?.length},classes(){return{clickable:this.clickable,highlight:this.highlight}},toRoute(){if(!this.clickable)return"";const e=this.group,t=this.linkPks;return{name:"browser",params:{group:e,pks:t,page:1}}},linkSettings(){return{topGroup:this.getTopGroup(this.group)}},title(){let e;return this.label?e=this.label:this.group?e=this.groupNames[this.group]:e="",this.toRoute?`Browse to ${e}`:e},baseName(){return this.group==="f"?this.computedValue.slice(Math.max(0,this.lastSlashIndex)):""}},mounted(){this.mounted=!0},methods:{...de(L,["routeWithSettings","getTopGroup"]),onClick(){this.clickable&&this.routeWithSettings(this.linkSettings,this.toRoute)}}},Pa={key:0,class:"text"},$a={key:0,class:"textLabel"},Fa=["title"],Da={key:0,class:"textContent"};function Ea(e,t,a,r,n,s){const i=_("ExpandButton");return s.displayValue?(l(),p("div",Pa,[a.label?(l(),p("div",$a,[F(w(a.label)+" ",1),s.showExpandButton?(l(),f(i,{key:0,class:"expandButton",onClick:t[0]||(t[0]=o=>n.expanded=!0)})):h("",!0)])):h("",!0),u(Kt,null,{default:C(()=>[m("div",null,[m("div",{ref:s.textValueRefName,class:"textValue",style:re(s.textValueStyles)},[m("span",{class:N(["textContent",s.classes]),title:s.title,onClick:t[1]||(t[1]=(...o)=>s.onClick&&s.onClick(...o))},w(s.displayValue),11,Fa),s.baseName?(l(),p("span",Da,w(s.baseName),1)):h("",!0)],4),s.showExpandButton&&!a.label?(l(),f(i,{key:0,class:"expandButton",onClick:t[2]||(t[2]=o=>n.expanded=!0)})):h("",!0)])]),_:1})])):h("",!0)}const xe=T(xa,[["render",Ea],["__scopeId","data-v-847af0f1"]]),za={name:"MetadataRatings",components:{MetadataText:xe},computed:{...B(z,{md:e=>e.md}),show(){return this.md?.criticRating!==void 0||this.md?.ageRating}}},Oa={key:0},Aa={key:1};function Ga(e,t,a,r,n,s){const i=_("MetadataText");return s.show?(l(),f(He,{key:0},{default:C(()=>[m("tbody",null,[e.md.criticalRating?(l(),p("tr",Oa,[t[0]||(t[0]=m("td",{class:"key"},"Critical Rating",-1)),m("td",null,[u(i,{value:e.md.criticalRating},null,8,["value"])])])):h("",!0),e.md.ageRating?(l(),p("tr",Aa,[t[1]||(t[1]=m("td",{class:"key"},"Age Rating",-1)),m("td",null,[u(i,{value:e.md.ageRating.name},null,8,["value"])])])):h("",!0)])]),_:1})):h("",!0)}const ja=T(za,[["render",Ga],["__scopeId","data-v-8b5cb217"]]),Ua=new Set(["p","i","s","v"]),qa={name:"MetadataTags",props:{item:{type:Object,required:!0},filter:{type:String,default:""},main:{type:Boolean,default:!1}},data(){return{mdiStar:_t,mdiOpenInNew:Le}},computed:{...B(L,{browserShow:e=>e.settings.show,filterValues(e){return e.settings.filters[this.filter]},topGroup:e=>e.settings.topGroup}),...B(z,{mdGroup:e=>e.md.group,mdIds:e=>e.md.ids}),groupMode(){return Ua.has(this.filter)},clickable(){return this.filter&&this.item.value&&(!this.groupMode||this.browserShow[this.filter])},classes(){return{clickable:(this.clickable||this.item.url)&&!this.highlight}},highlight(){return!!(this.groupMode&&this.filter===this.mdGroup&&this.mdIds.includes(this.item.value)||this.filterValues?.includes(this.item.value))},variant(){return this.highlight?"flat":"tonal"},color(){const e=this.$vuetify.theme.current.colors;return this.highlight?e["primary-darken-1"]:""},linkGroup(){let e;return this.groupMode?e=this.filter:e=["f","s"].includes(this.topGroup)?this.topGroup:"r",e},linkPks(){return this.groupMode||this.linkGroup!=="a"&&this.filter==="storyArcs"?this.item.value.toString():"0"},toRoute(){if(!this.clickable)return"";const e=this.linkGroup,t=this.linkPks;return{name:"browser",params:{group:e,pks:t,page:1}}},linkSettings(){let e;return this.linkPks==="0"?e={filters:{[this.filter]:[this.item.value]}}:e={topGroup:this.getTopGroup(this.linkGroup)},e},title(){return this.filter==="identifiers"?this.identifierSourceTitle(this.item.title):this.item.title}},methods:{...de(L,["routeWithSettings","getTopGroup","identifierSourceTitle"]),async onClick(){this.clickable&&this.routeWithSettings(this.linkSettings,this.toRoute)}}},Ha=["href"],Ka={key:1};function Wa(e,t,a,r,n,s){return l(),f(At,{class:N(s.classes),color:s.color,value:a.item.value,variant:s.variant,onClick:s.onClick},{default:C(()=>[a.item.url?(l(),p("a",{key:0,href:a.item.url,target:"_blank"},[a.main?(l(),f(ne,{key:0,class:"mainStar"},{default:C(()=>[F(w(n.mdiStar),1)]),_:1})):h("",!0),F(w(s.title)+" ",1),a.main?(l(),f(ne,{key:1,class:"mainStar"},{default:C(()=>[F(w(n.mdiStar),1)]),_:1})):h("",!0),u(ne,null,{default:C(()=>[F(w(n.mdiOpenInNew),1)]),_:1})],8,Ha)):(l(),p("span",Ka,[a.main?(l(),f(ne,{key:0,class:"mainStar"},{default:C(()=>[F(w(n.mdiStar),1)]),_:1})):h("",!0),F(" "+w(s.title)+" ",1),a.main?(l(),f(ne,{key:1,class:"mainStar"},{default:C(()=>[F(w(n.mdiStar),1)]),_:1})):h("",!0)]))]),_:1},8,["class","color","value","variant","onClick"])}const Ya=T(qa,[["render",Wa],["__scopeId","data-v-1da1eb5b"]]),Za={name:"MetadataTags",components:{MetadataChip:Ya},props:{label:{type:String,default:""},values:{type:Array,default(){return[]}},mainValues:{type:Array,default(){return[]}},filter:{type:String,required:!1,default:void 0}},computed:{mainItems(){return Ge({items:this.mainValues,sort:!1})},items(){let e;return this.filter==="universes"?e=this.fixUniverseTitles(this.values):e=this.values,Ge({items:e,sort:!1})}},methods:{...de(L,["fixUniverseTitles"])}},Xa={key:0},Qa={key:0,class:"chipGroupLabel"};function Ja(e,t,a,r,n,s){const i=_("MetadataChip");return s.items?.length>0?(l(),p("div",Xa,[a.label?(l(),p("div",Qa,w(a.label),1)):h("",!0),m("div",null,[(l(!0),p(me,null,ue(s.mainItems,o=>(l(),f(i,{key:`${a.filter}/${o.value}`,filter:a.filter,item:o,main:!0},null,8,["filter","item"]))),128)),(l(!0),p(me,null,ue(s.items,o=>(l(),f(i,{key:`${a.filter}/${o.value}`,filter:a.filter,item:o},null,8,["filter","item"]))),128))])])):h("",!0)}const Je=T(Za,[["render",Ja],["__scopeId","data-v-0011fa82"]]),es={name:"MetadataTagsTable",components:{MetadataTags:Je},data(){return{mdiOpenInNew:Le}},props:{keyMap:{type:Object,default:void 0},tagMap:{type:Object,required:!0}},computed:{show(){return Object.keys(this.tagMap).length>0}}},ts={key:0,class:"key keyLink"},as={href:"keyMap[key].url"},ss={key:1,class:"key"},is={class:"tags"};function ns(e,t,a,r,n,s){const i=_("MetadataTags");return s.show?(l(),f(He,{key:0},{default:C(()=>[m("tbody",null,[(l(!0),p(me,null,ue(Object.entries(a.tagMap),([o,{filter:d,tags:k,mainTags:M}])=>(l(),p("tr",{key:o},[a.keyMap&&a.keyMap[o]&&a.keyMap[o].url?(l(),p("td",ts,[m("a",as,[F(w(o),1),u(ne,null,{default:C(()=>[F(w(n.mdiOpenInNew),1)]),_:1})])])):(l(),p("td",ss,w(o),1)),m("td",is,[u(i,{filter:d,values:k,mainValues:M},null,8,["filter","values","mainValues"])])]))),128))])]),_:1})):h("",!0)}const rs=T(es,[["render",ns],["__scopeId","data-v-dd36bea8"]]),os={name:"MetadataBody",components:{MetadataRatings:ja,MetadataTagsTable:rs,MetadataText:xe},props:{book:{type:Object,required:!0}},computed:{...B(z,["credits","ratings","tags"]),...B(L,{twentyFourHourTime:e=>e.settings?.twentyFourHourTime,readingDirectionTitles:e=>e.choices.static.readingDirection}),...B(z,{md:e=>e.md,roleMap:e=>e.roleMap}),readingDirectionText(){return this.md?this.readingDirectionTitles[this.md.readingDirection]:"Unknown"},size(){return this?.md?.size>0?Qe(this.md.size):0},sizeLabel(){return this?.md?.group==="c"?"Size":"Total Size"},fileType(){return this?.md?.fileType||"Unknown"}},methods:{formatDateTime(e){return St(e,this.twentyFourHourTime)}}},ls={id:"metadataBody"},us={class:"mdSection"},ds={class:"mdSection"},cs={class:"quarterRow"},ms={class:"thirdRow"},hs={class:"lastSmallRow"},fs={key:0,class:"halfRow mdSection"},ps={class:"mdSection"},vs={class:"inlineRow"},gs={class:"inlineRow"};function bs(e,t,a,r,n,s){const i=_("MetadataText"),o=_("MetadataTagsTable"),d=_("MetadataRatings");return l(),p("div",ls,[m("section",us,[u(i,{value:e.md.summary,"max-height":100},null,8,["value"]),u(i,{value:e.md.review,label:"Review","max-height":100},null,8,["value"])]),u(o,{"key-map":e.roleMap,"tag-map":e.credits,class:"mdSection"},null,8,["key-map","tag-map"]),m("section",ds,[m("div",cs,[e.md.createdAt?(l(),f(i,{key:0,value:s.formatDateTime(e.md.createdAt),label:"Created at",class:"mtime"},null,8,["value"])):h("",!0),e.md.updatedAt?(l(),f(i,{key:1,value:s.formatDateTime(e.md.updatedAt),label:"Updated at",class:"mtime"},null,8,["value"])):h("",!0),u(i,{value:s.size,label:s.sizeLabel},null,8,["value","label"]),u(i,{value:s.fileType,label:"File Type"},null,8,["value"])]),m("div",ms,[u(i,{label:"Reading Direction",value:s.readingDirectionText},null,8,["value"]),u(i,{value:e.md.originalFormat?.name,label:"Original Format"},null,8,["value"]),u(i,{value:(!!e.md.monochrome).toString(),label:"Monochrome"},null,8,["value"])]),m("div",hs,[u(i,{group:"f",value:{pk:e.md.parentFolderId,name:e.md.path},label:"Path"},null,8,["value"])])]),e.md?.country||e.md?.language?(l(),p("section",fs,[u(i,{value:e.md.country?.name,label:"Country"},null,8,["value"]),u(i,{value:e.md.language?.name,label:"Language"},null,8,["value"])])):h("",!0),u(d,{class:"mdSection"}),u(o,{"tag-map":e.tags,class:"mdSection"},null,8,["tag-map"]),m("section",ps,[m("section",vs,[u(i,{value:e.md.notes,label:"Notes"},null,8,["value"])]),m("section",gs,[u(i,{value:e.md.tagger,label:"Tagger"},null,8,["value"]),u(i,{value:e.md.scanInfo,label:"Scan"},null,8,["value"])])])])}const ks=T(os,[["render",bs],["__scopeId","data-v-e65fff8f"]]),et=new Set("rtl","btt");Object.freeze(et);const tt=({ids:e,page:t,readingDirection:a,pageCount:r},n)=>{if(e.length===0||n&&!r)return"";const s=e[0];if(t)t=Number(t);else if(et.has(a)){const i=Number(r)-1;t=Math.max(i,0)}else t=0;return{name:"reader",params:{pk:s,page:t}}},at={p:"publisher",i:"imprint",s:"series",v:"volume",f:"folder",a:"storyArc"};Object.freeze(at);const ys={name:"MetadataControls",components:{DownloadButton:pa,MarkReadButton:ka},props:{group:{type:String,required:!0}},computed:{...B(z,{md:e=>e.md}),...B(L,{importMetadata:e=>e.page?.adminFlags?.importMetadata}),downloadName(){const e=this.md;let t;if(!e)t="Unknown.cbz";else if(e.fileName)t=e.fileName;else{if(this.md.group==="f")return[this.firstNameFromList(e.folderList)];if(this.md.group==="a")return[this.firstNameFromList(e.storyArcList)];t=[this.firstNameFromList(e.publisherList),this.firstNameFromList(e.imprintList),this.firstNameFromList(e.seriesList),this.firstNameFromList(e.volumeList),Ue(this.md,3),this.md.name].filter(Boolean).join(" ")}return t},downloadItem(){return{group:this.md?.group,ids:this.md?.ids,childCount:this.md?.childCount,mtime:this.md?.mtime,name:this.downloadName}},isReadButtonShown(){return this.group==="c"&&this.$route.name!="reader"},isReadButtonEnabled(){return!!this.readerRoute},markReadItem(){let e="";const t=at[this.md.group];return t?e=(this.md[t+"List"]||[]).map(({name:n})=>n).join(", "):e=this.md.name,{group:this.md.group,ids:this.md.ids,finished:this.md.finished,name:e,children:this.md.childCount||1}},readButtonIcon(){return this.isReadButtonEnabled?wt:Ct},readerRoute(){return this.md?.ids?tt(this.md,this.importMetadata):{}},size(){return this.$vuetify.display.smAndDown?"x-small":"default"}},methods:{firstNameFromList(e){let t="";if(!e)return t;for(const a of Object.values(e))if(a.name){t=a.name;break}return t}}},_s={class:"controlRow"};function Ss(e,t,a,r,n,s){const i=_("DownloadButton"),o=_("MarkReadButton");return l(),p("section",_s,[u(i,{id:"downloadButton",button:!0,item:s.downloadItem,size:s.size},null,8,["item","size"]),u(o,{id:"markReadButton",button:!0,item:s.markReadItem,size:s.size},null,8,["item","size"]),s.isReadButtonShown?(l(),f(_e,{key:0,id:"readButton",title:"Read Comic",disabled:!s.isReadButtonEnabled,size:s.size,to:s.readerRoute},{default:C(()=>[u(ne,null,{default:C(()=>[F(w(s.readButtonIcon),1)]),_:1}),t[0]||(t[0]=F(" Read ",-1))]),_:1},8,["disabled","size","to"])):h("",!0)])}const ws=T(ys,[["render",Ss],["__scopeId","data-v-d254bb05"]]),Cs={name:"MetadataBookCover",components:{BookCover:ca},props:{group:{type:String,required:!0}},computed:{...B(z,{md:e=>e.md})}},Ts={class:"bookCoverWrapper"};function Ms(e,t,a,r,n,s){const i=_("BookCover");return l(),p("div",Ts,[u(i,{id:"bookCover",group:a.group,pks:e.md.ids,"child-count":e.md.childCount,finished:e.md.finished,mtime:e.md.mtime},null,8,["group","pks","child-count","finished","mtime"]),u(xt,{class:"bookCoverProgress","model-value":e.md.progress,rounded:"","background-color":"inherit",height:"2","aria-label":"% read"},null,8,["model-value"])])}const Bs=T(Cs,[["render",Ms],["__scopeId","data-v-3a0db03b"]]),Rs={name:"MetadataHeader",components:{MetadataBookCover:Bs,MetadataControls:ws,MetadataTags:Je,MetadataText:xe},props:{group:{type:String,required:!0}},computed:{...B(L,{importMetadata:e=>e.page?.adminFlags?.importMetadata,q:e=>e.settings.q}),...B(z,{md:e=>e.md}),collectionTitle(){if(this.md.collectionTitle)return`${this.md.collectionTitle}:`},date(){if(!this.md.year&&!this.md.month&&!this.md.day)return"";const e=new Date(this.md.year||1970,this.md.month||1,this.md.day||1),t={};return this.md.year&&(t.year="numeric"),this.md.month&&(t.month=this.$vuetify.display.smAndDown?"short":"long"),this.md.day&&(t.day="numeric"),e.toLocaleDateString("default",t)},readerRoute(){return this.md?.ids?tt(this.md,this.importMetadata):{}},formattedIssueNumber(){if(!this.md)return"Unknown";if(!((this.md.issueNumber===null||this.md.issueNumber===void 0)&&!this.md.issueSuffix))return"#"+Ue(this.md)},pages(){let e="";if(!this.md)return e;if(this.md.page){const a=Te.format(this.md.page);e+=this.$vuetify.display.smAndDown?`${a} / `:`Read ${a} of `}const t=Te.format(this.md.pageCount);return e+=`${t} page`,this.md.pageCount!==1&&(e+="s"),this.$vuetify.display.smAndUp&&this.md.progress>0&&(e+=` (${Math.round(this.md.progress)}%)`),e},size(){return this?.md?.size>0?Qe(this.md.size):0},fileType(){return this?.md?.fileType||"Unknown"},seriesVolumeCount(){const e=this.md.seriesVolumeCount;return e?`of ${e}`:""},volumeIssueCount(){const e=this.md.volumeIssueCount;return e?`/ ${e}`:""}}},Vs={id:"metadataHeader"},Ns={key:1,id:"seriesHeader"},Ls={id:"seriesRow",class:"inlineRow"},Is={key:2,id:"titleRow"},xs={key:4,id:"publisherRow",class:"inlineRow"},Ps={key:7,id:"pageDateRow",class:"inlineRow"};function $s(e,t,a,r,n,s){const i=_("MetadataText"),o=_("MetadataBookCover"),d=_("MetadataTags"),k=_("MetadataControls");return l(),p(me,null,[m("header",Vs,[e.q?(l(),f(i,{key:0,id:"search",value:e.q,label:"Search Query",highlight:!0},null,8,["value"])):h("",!0),u(o,{id:"metadataBookCover",group:a.group},null,8,["group"]),e.md.seriesList?.length===1?(l(),p("section",Ns,[m("div",Ls,[(l(),f(i,{id:"series",key:e.md.seriesList[0].ids,value:e.md.seriesList[0],group:"s",highlight:e.md.group==="s"},null,8,["value","highlight"])),e.md.volumeList?.length===1?(l(),f(i,{id:"volume",key:e.md.volumeList[0].ids,value:e.md.volumeList[0],group:"v",highlight:e.md.group==="v"},null,8,["value","highlight"])):h("",!0),u(i,{value:s.seriesVolumeCount,class:"subdued"},null,8,["value"]),u(i,{id:"issue",value:s.formattedIssueNumber,group:"c",highlight:e.md.group==="c"},null,8,["value","highlight"]),u(i,{value:s.volumeIssueCount,class:"subdued"},null,8,["value"])])])):h("",!0),e.md.name?(l(),p("span",Is,w(s.collectionTitle)+" "+w(e.md.name),1)):h("",!0),e.md.seriesList?.length>1?(l(),f(d,{key:3,id:"seriesTags",class:"groupTags",label:"Series",values:e.md.seriesList,filter:"s"},null,8,["values"])):h("",!0),m("div",null,[e.md.volumeList?.length>1?(l(),f(d,{key:0,id:"volumeTags",class:"groupTags",label:"Volumes",values:e.md.volumeList,filter:"v"},null,8,["values"])):h("",!0)]),e.md.publisherList?.length===1?(l(),p("div",xs,[(l(),f(i,{id:"publisher",key:e.md.publisherList[0].ids,group:"p",highlight:e.md.group==="p",value:e.md.publisherList[0]},null,8,["highlight","value"])),e.md.imprintList?.length===1?(l(),f(i,{id:"imprint",key:e.md.imprintList[0].ids,group:"i",highlight:e.md.group==="i",value:e.md.imprintList[0]},null,8,["highlight","value"])):h("",!0)])):h("",!0),e.md.publisherList?.length>1?(l(),f(d,{key:5,id:"publisherTags",class:"groupTags",label:"Publishers",values:e.md.publisherList,filter:"p"},null,8,["values"])):h("",!0),e.md.imprintList?.length>1?(l(),f(d,{key:6,id:"imprintTags",class:"groupTags",label:"Imprints",values:e.md.imprintList,filter:"i"},null,8,["values"])):h("",!0),s.pages||e.md.year||e.md.month||e.md.day?(l(),p("div",Ps,[u(i,{value:s.pages},null,8,["value"]),u(i,{value:s.date,class:"datePicker"},null,8,["value"])])):h("",!0)]),u(k,{id:"controls",group:a.group},null,8,["group"])],64)}const Fs=T(Rs,[["render",$s],["__scopeId","data-v-a05541e5"]]),Ds=1160,Es=.05,zs=250,Os={name:"MetadataButton",components:{CloseButton:Ht,MetadataActivator:wa,MetadataBody:ks,MetadataHeader:Fs,PlaceholderLoading:Jt},props:{book:{type:Object,required:!0},toolbar:{type:Boolean,default:!1}},data(){return{dialog:!1,progress:0}},computed:{...B(z,{md:e=>e.md}),showContainer(){return this.md?.loaded||!1},children(){return this.book.childCount||0}},watch:{dialog(e){e?this.dialogOpened():this.clearMetadata()}},methods:{...de(z,["clearMetadata","loadMetadata"]),dialogOpened(){const e=this.book.ids||[this.book.pk],t={group:this.book.group,pks:e};this.loadMetadata(t),this.startProgress()},startProgress(){this.startTime=Date.now(),this.estimatedMS=Math.max(Es,this.children/Ds)*1e3,this.updateProgress()},updateProgress(){const e=Date.now()-this.startTime;this.progress=e/this.estimatedMS*100,!(this.progress>=100||this.md)&&setTimeout(()=>{this.updateProgress()},zs)}}},As={key:1,id:"placeholderContainer"};function Gs(e,t,a,r,n,s){const i=_("MetadataActivator"),o=_("CloseButton"),d=_("MetadataHeader"),k=_("MetadataBody"),M=_("PlaceholderLoading");return l(),f(qt,{modelValue:n.dialog,"onUpdate:modelValue":t[2]||(t[2]=y=>n.dialog=y),fullscreen:"",transition:"dialog-bottom-transition"},{activator:C(({props:y})=>[u(i,Z(y,{book:a.book,toolbar:a.toolbar}),null,16,["book","toolbar"])]),default:C(()=>[u(o,{class:"closeButton",title:"Close Metadata (esc)",onClick:t[0]||(t[0]=y=>n.dialog=!1)}),s.showContainer?(l(),p("div",{key:0,id:"metadataContainer",onKeyup:t[1]||(t[1]=Tt(y=>n.dialog=!1,["esc"]))},[u(d,{group:a.book.group},null,8,["group"]),u(k,{book:a.book},null,8,["book"])],32)):(l(),p("div",As,[t[3]||(t[3]=m("div",{id:"placeholderTitle"},"Tags Loading",-1)),u(M,{"model-value":n.progress,indeterminate:n.progress>=100,class:"placeholder"},null,8,["model-value","indeterminate"])]))]),_:1},8,["modelValue"])}const bi=T(Os,[["render",Gs],["__scopeId","data-v-d554fe5b"]]),js={name:"PaginationNavButton",props:{narrow:{type:Boolean,default:!0}},computed:{classes(){return{narrowButton:this.narrow}}}};function Us(e,t,a,r,n,s){return l(),f(_e,{variant:"plain",density:"compact",class:N(["paginationNavButton",s.classes]),size:"medium"},Ve({_:2},[ue(e.$slots,(i,o)=>({name:o,fn:C(d=>[Ne(e.$slots,o,Z({props:i},d),void 0,!0)])}))]),1032,["class"])}const ki=T(js,[["render",Us],["__scopeId","data-v-cf061c30"]]),Pe=Symbol.for("vuetify:v-slider");function qs(e,t,a){const r=a==="vertical",n=t.getBoundingClientRect(),s="touches"in e?e.touches[0]:e;return r?s.clientY-(n.top+n.height/2):s.clientX-(n.left+n.width/2)}function Hs(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const Ks=he({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,noKeyboard:Boolean,...$t(),...Pt({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),Ws=e=>{const t=g(()=>parseFloat(e.min)),a=g(()=>parseFloat(e.max)),r=g(()=>Number(e.step)>0?parseFloat(e.step):0),n=g(()=>Math.max(De(r.value),De(t.value)));function s(i){if(i=parseFloat(i),r.value<=0)return i;const o=Me(i,t.value,a.value),d=t.value%r.value;let k=Math.round((o-d)/r.value)*r.value+d;return o>k&&k+r.value>a.value&&(k=a.value),parseFloat(Math.min(k,a.value).toFixed(n.value))}return{min:t,max:a,step:r,decimals:n,roundValue:s}},Ys=e=>{let{props:t,steps:a,onSliderStart:r,onSliderMove:n,onSliderEnd:s,getActiveThumb:i}=e;const{isRtl:o}=Ie(),d=$(()=>t.reverse),k=g(()=>t.direction==="vertical"),M=g(()=>k.value!==d.value),{min:y,max:I,step:D,decimals:O,roundValue:K}=a,X=g(()=>parseInt(t.thumbSize,10)),Q=g(()=>parseInt(t.tickSize,10)),A=g(()=>parseInt(t.trackSize,10)),G=g(()=>(I.value-y.value)/D.value),j=$(()=>t.disabled),U=g(()=>t.error||t.disabled?void 0:t.thumbColor??t.color),q=g(()=>t.error||t.disabled?void 0:t.thumbColor),W=g(()=>t.error||t.disabled?void 0:t.trackColor??t.color),x=g(()=>t.error||t.disabled?void 0:t.trackFillColor??t.color),P=Ee(!1),S=Ee(0),Y=be(),b=be();function E(c){const v=Y.value?.$el;if(!v)return;const se=t.direction==="vertical",ve=se?"top":"left",ge=se?"height":"width",st=se?"clientY":"clientX",{[ve]:it,[ge]:nt}=v.getBoundingClientRect(),rt=Hs(c,st);let we=Me((rt-it-S.value)/nt)||0;return(se?M.value:M.value!==o.value)&&(we=1-we),K(y.value+we*(I.value-y.value))}const J=c=>{const v=E(c);v!=null&&s({value:v}),P.value=!1,S.value=0},ce=c=>{const v=E(c);b.value=i(c),b.value&&(P.value=!0,b.value.contains(c.target)?S.value=qs(c,b.value,t.direction):(S.value=0,v!=null&&n({value:v})),v!=null&&r({value:v}),Bt(()=>b.value?.focus()))},ee={passive:!0,capture:!0};function H(c){const v=E(c);v!=null&&n({value:v})}function te(c){c.stopPropagation(),c.preventDefault(),J(c),window.removeEventListener("mousemove",H,ee),window.removeEventListener("mouseup",te)}function oe(c){J(c),window.removeEventListener("touchmove",H,ee),c.target?.removeEventListener("touchend",oe)}function ae(c){ce(c),window.addEventListener("touchmove",H,ee),c.target?.addEventListener("touchend",oe,{passive:!1})}function Se(c){c.button===0&&(c.preventDefault(),ce(c),window.addEventListener("mousemove",H,ee),window.addEventListener("mouseup",te,{passive:!1}))}const le=c=>{const v=(c-y.value)/(I.value-y.value)*100;return Me(isNaN(v)?0:v,0,100)},fe=$(()=>t.showTicks),pe=g(()=>fe.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(c=>({value:c,position:le(c),label:c.toString()})):Object.keys(t.ticks).map(c=>({value:parseFloat(c),position:le(parseFloat(c)),label:t.ticks[c]})):G.value!==1/0?Mt(G.value+1).map(c=>{const v=y.value+c*D.value;return{value:v,position:le(v)}}):[]:[]),V=g(()=>pe.value.some(c=>{let{label:v}=c;return!!v})),R={activeThumbRef:b,color:$(()=>t.color),decimals:O,disabled:j,direction:$(()=>t.direction),elevation:$(()=>t.elevation),hasLabels:V,isReversed:d,indexFromEnd:M,min:y,max:I,mousePressed:P,noKeyboard:$(()=>t.noKeyboard),numTicks:G,onSliderMousedown:Se,onSliderTouchstart:ae,parsedTicks:pe,parseMouseMove:E,position:le,readonly:$(()=>t.readonly),rounded:$(()=>t.rounded),roundValue:K,showTicks:fe,startOffset:S,step:D,thumbSize:X,thumbColor:U,thumbLabelColor:q,thumbLabel:$(()=>t.thumbLabel),ticks:$(()=>t.ticks),tickSize:Q,trackColor:W,trackContainerRef:Y,trackFillColor:x,trackSize:A,vertical:k};return Rt(Pe,R),R},Zs=he({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},name:String,noKeyboard:Boolean,...Re()},"VSliderThumb"),Xs=ke()({name:"VSliderThumb",directives:{vRipple:Oe},props:Zs(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a,emit:r}=t;const n=qe(Pe),{isRtl:s,rtlClasses:i}=Ie();if(!n)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{min:o,max:d,thumbColor:k,thumbLabelColor:M,step:y,disabled:I,thumbSize:D,thumbLabel:O,direction:K,isReversed:X,vertical:Q,readonly:A,elevation:G,mousePressed:j,decimals:U,indexFromEnd:q}=n,W=g(()=>I.value?void 0:G.value),{elevationClasses:x}=Ft(W),{textColorClasses:P,textColorStyles:S}=Dt(k),{backgroundColorClasses:Y,backgroundColorStyles:b}=Be(M),{pageup:E,pagedown:J,end:ce,home:ee,left:H,right:te,down:oe,up:ae}=Vt,Se=[E,J,ce,ee,H,te,oe,ae],le=g(()=>y.value?[1,2,3]:[1,5,10]);function fe(V,R){if(e.noKeyboard||!Se.includes(V.key))return;V.preventDefault();const c=y.value||.1,v=(d.value-o.value)/c;if([H,te,oe,ae].includes(V.key)){const ve=(Q.value?[s.value?H:te,X.value?oe:ae]:q.value!==s.value?[H,ae]:[te,ae]).includes(V.key)?1:-1,ge=V.shiftKey?2:V.ctrlKey?1:0;ve===-1&&R===d.value&&!ge&&!Number.isInteger(v)?R=R-v%1*c:R=R+ve*c*le.value[ge]}else if(V.key===ee)R=o.value;else if(V.key===ce)R=d.value;else{const se=V.key===J?1:-1;R=R-se*c*(v>100?v/10:10)}return Math.max(e.min,Math.min(e.max,R))}function pe(V){const R=fe(V,e.modelValue);R!=null&&r("update:modelValue",R)}return ye(()=>{const V=ie(q.value?100-e.position:e.position,"%");return m("div",{class:N(["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&j.value},e.class,i.value]),style:re([{"--v-slider-thumb-position":V,"--v-slider-thumb-size":ie(D.value)},e.style]),role:"slider",tabindex:I.value?-1:0,"aria-label":e.name,"aria-valuemin":o.value,"aria-valuemax":d.value,"aria-valuenow":e.modelValue,"aria-readonly":!!A.value,"aria-orientation":K.value,onKeydown:A.value?void 0:pe},[m("div",{class:N(["v-slider-thumb__surface",P.value,x.value]),style:re(S.value)},null),ze(m("div",{class:N(["v-slider-thumb__ripple",P.value]),style:re(S.value)},null),[[Oe,e.ripple,null,{circle:!0,center:!0}]]),u(Wt,{origin:"bottom center"},{default:()=>[ze(m("div",{class:"v-slider-thumb__label-container"},[m("div",{class:N(["v-slider-thumb__label",Y.value]),style:re(b.value)},[m("div",null,[a["thumb-label"]?.({modelValue:e.modelValue})??e.modelValue.toFixed(y.value?U.value:1)]),m("div",{class:"v-slider-thumb__label-wedge"},null)])]),[[Nt,O.value&&e.focused||O.value==="always"]])]})])}),{}}}),Qs=he({start:{type:Number,required:!0},stop:{type:Number,required:!0},...Re()},"VSliderTrack"),Js=ke()({name:"VSliderTrack",props:Qs(),emits:{},setup(e,t){let{slots:a}=t;const r=qe(Pe);if(!r)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:n,parsedTicks:s,rounded:i,showTicks:o,tickSize:d,trackColor:k,trackFillColor:M,trackSize:y,vertical:I,min:D,max:O,indexFromEnd:K}=r,{roundedClasses:X}=Et(i),{backgroundColorClasses:Q,backgroundColorStyles:A}=Be(M),{backgroundColorClasses:G,backgroundColorStyles:j}=Be(k),U=g(()=>`inset-${I.value?"block":"inline"}-${K.value?"end":"start"}`),q=g(()=>I.value?"height":"width"),W=g(()=>({[U.value]:"0%",[q.value]:"100%"})),x=g(()=>e.stop-e.start),P=g(()=>({[U.value]:ie(e.start,"%"),[q.value]:ie(x.value,"%")})),S=g(()=>o.value?(I.value?s.value.slice().reverse():s.value).map((b,E)=>{const J=b.value!==D.value&&b.value!==O.value?ie(b.position,"%"):void 0;return m("div",{key:b.value,class:N(["v-slider-track__tick",{"v-slider-track__tick--filled":b.position>=e.start&&b.position<=e.stop,"v-slider-track__tick--first":b.value===D.value,"v-slider-track__tick--last":b.value===O.value}]),style:{[U.value]:J}},[(b.label||a["tick-label"])&&m("div",{class:"v-slider-track__tick-label"},[a["tick-label"]?.({tick:b,index:E})??b.label])])}):[]);return ye(()=>m("div",{class:N(["v-slider-track",X.value,e.class]),style:re([{"--v-slider-track-size":ie(y.value),"--v-slider-tick-size":ie(d.value)},e.style])},[m("div",{class:N(["v-slider-track__background",G.value,{"v-slider-track__background--opacity":!!n.value||!M.value}]),style:{...W.value,...j.value}},null),m("div",{class:N(["v-slider-track__fill",Q.value]),style:{...P.value,...A.value}},null),o.value&&m("div",{class:N(["v-slider-track__ticks",{"v-slider-track__ticks--always-show":o.value==="always"}])},[S.value])])),{}}}),ei=he({...Xt(),...Ks(),...Zt(),modelValue:{type:[Number,String],default:0}},"VSlider"),ti=ke()({name:"VSlider",props:ei(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,t){let{slots:a,emit:r}=t;const n=be(),s=be(),{rtlClasses:i}=Ie(),o=Ws(e),d=Lt(e,"modelValue",void 0,x=>o.roundValue(x??o.min.value)),{min:k,max:M,mousePressed:y,roundValue:I,onSliderMousedown:D,onSliderTouchstart:O,trackContainerRef:K,position:X,hasLabels:Q,readonly:A,noKeyboard:G}=Ys({props:e,steps:o,onSliderStart:()=>{r("start",d.value)},onSliderEnd:x=>{let{value:P}=x;const S=I(P);d.value=S,r("end",S)},onSliderMove:x=>{let{value:P}=x;return d.value=I(P)},getActiveThumb:()=>n.value?.$el}),{isFocused:j,focus:U,blur:q}=Yt(e),W=g(()=>X(d.value));return ye(()=>{const x=Ae.filterProps(e),P=!!(e.label||a.label||a.prepend);return u(Ae,Z({ref:s,class:["v-slider",{"v-slider--has-labels":!!a["tick-label"]||Q.value,"v-slider--focused":j.value,"v-slider--pressed":y.value,"v-slider--disabled":e.disabled},i.value,e.class],style:e.style},x,{focused:j.value}),{...a,prepend:P?S=>m(me,null,[a.label?.(S)??(e.label?u(Qt,{id:S.id.value,class:"v-slider__label",text:e.label},null):void 0),a.prepend?.(S)]):void 0,default:S=>{let{id:Y,messagesId:b}=S;return m("div",{class:"v-slider__container",onMousedown:A.value?void 0:D,onTouchstartPassive:A.value?void 0:O},[m("input",{id:Y.value,name:e.name||Y.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:d.value},null),u(Js,{ref:K,start:0,stop:W.value},{"tick-label":a["tick-label"]}),u(Xs,{ref:n,"aria-describedby":b.value,focused:j.value,noKeyboard:G.value,min:k.value,max:M.value,modelValue:d.value,"onUpdate:modelValue":E=>d.value=E,position:W.value,elevation:e.elevation,onFocus:U,onBlur:q,ripple:e.ripple,name:e.name},{"thumb-label":a["thumb-label"]})])}})}),zt({focus:()=>n.value?.$el.focus()},s)}}),ai={name:"PaginationSlider",props:{min:{type:Number,default:0}}};function si(e,t,a,r,n,s){return l(),f(ti,Z({"thumb-size":"36",class:"paginationSlider",density:"compact","hide-details":"auto",min:a.min,rounded:!0,"show-ticks":"always",step:1,"thumb-label":"always"},e.$attrs),{"tick-label":C(({index:i})=>[F(w(i+a.min),1)]),_:1},16,["min"])}const yi=T(ai,[["render",si],["__scopeId","data-v-01b67afd"]]),ii={name:"PaginationToolbar"};function ni(e,t,a,r,n,s){return l(),f(ea,{class:"paginationToolbar codexToolbar",density:"compact",transform:"center bottom"},Ve({_:2},[ue(e.$slots,(i,o)=>({name:o,fn:C(d=>[Ne(e.$slots,o,Z({props:i},d),void 0,!0)])}))]),1024)}const _i=T(ii,[["render",ni],["__scopeId","data-v-cfa8cce0"]]);export{ca as B,pa as D,ka as M,Ce as N,ki as P,vi as T,pi as V,gi as a,bi as b,_i as c,yi as d,tt as g,Qe as p,Ge as t};
