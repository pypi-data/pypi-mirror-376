import{bm as F,a8 as T,aa as O,z as i,R,U as z,V as $,W as E,B as v,aM as I,b2 as A,b3 as J,b4 as V,b5 as q,aG as B,b6 as k,I as b,bu as P}from"./index-Ci5z7q6x.js";import{j as t}from"./@radix-B1sy0Lhr.js";import{S as D}from"./plus-DOrkJCmy.js";import{S as _}from"./trash-D9LA4VFD.js";import{a as d,b as H,C as x}from"./index.esm-SBF9nn_P.js";import{S as M}from"./info-CI2szPUG.js";function U(e){return e.type==="string"}function Z(e){return e.type==="string"&&e.enum!==void 0}function G(e){return e.type==="string"&&!!e.sensitive}function S(e){return e.type==="boolean"}function w(e){return e.type==="object"}function N(e){return e.type==="array"}function K(e){return e.type==="integer"}function W(e){var s;return((s=e.enum)==null?void 0:s.map(n=>n.toString()))||[]}function j(e,s){if(!e.$ref||!s)return e;const n=e.$ref.replace("#/$defs/",""),a=s[n];return a||console.error(`Could not resolve $ref: ${e.$ref}`),a}function Y(e,s){return e.title?e.title:O(s)}function me(e,s){const n=Object.entries(e.properties||{}).reduce((a,[o,r])=>{let l="";return r.default?S(r)?l=r.default:w(r)?l=JSON.stringify(r.default):N(r)||F(r.default)?l=r.default:l=r.default.toString():N(r)&&(l=[]),{...a,[o]:l}},{});return s&&Object.entries(s).forEach(([a,o])=>{var l;const r=(l=e.properties)==null?void 0:l[a];r&&S(r)?n[a]=o==="True"?!0:o==="False"?!1:!!o:n[a]=F(o)?o.map(c=>JSON.stringify(c)):T(o)?JSON.stringify(o):o}),n}function xe(e){const s=Object.keys(e).reduce((n,a)=>(n[a]=i.string().trim().min(1),n),{});return i.object(s)}function je(e){if(!e.properties)return i.object({});const s=e.required||[],n=e.properties,a=Object.keys(n).reduce((o,r)=>{const l=n[r];if(!l)return o;const c=L(r,s);return o[r]=C(l,e.$defs,c),o},{});return i.object(a)}function C(e,s,n,a=!1){let o=y(e,s);if(o.anyOf){const l=o.anyOf.find(c=>c.type!==null);l&&(o=y(l,s))}switch(o.allOf&&(o=y(o.allOf[0],s)),o.type){case"string":return n?i.string().trim():i.string().trim().min(1,"Required");case"boolean":return n?i.union([i.literal(""),i.boolean()]):i.boolean();case"array":{if(a)return n?i.union([i.literal(""),p]):p;const l=i.array(C(o.items||{},s,!1,!0));return n?l:l.min(1)}case"object":return n?i.union([i.literal(""),p]):p;case"integer":return n?i.union([i.literal(""),i.preprocess(l=>Number(l),i.number().int())]):i.preprocess(l=>Number(l),i.number().int());default:return n?i.union([i.literal(""),i.string()]):i.string().min(1,"Required")}}function L(e,s){return!s.includes(e)}const p=i.string().refine(e=>{try{return JSON.parse(e),!0}catch{return!1}},{message:"Invalid JSON"}).transform(e=>e===""?e:JSON.parse(e));function y(e,s){if(!e.$ref||!s)return e;const n=e.$ref.split("/").pop();return!n||!s[n]?e:s[n]}function Q({schema:e,fieldName:s}){const n=e.description;return n?t.jsx(R,{children:t.jsxs(z,{children:[t.jsx($,{type:"button",children:t.jsx(M,{className:"size-4 shrink-0 fill-theme-text-secondary"})}),t.jsx(E,{className:"z-20 max-w-[400px] bg-theme-surface-primary p-5 text-text-sm text-theme-text-primary",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"w-fit rounded-sm bg-primary-25 px-1 py-0.5 font-mono text-primary-400",children:s}),t.jsx("p",{children:n})]})})]})}):null}function f({label:e,isOptional:s,schema:n,fieldName:a}){return t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsxs("p",{children:[e,!s&&t.jsx("span",{className:"text-theme-text-error","aria-label":"required",children:"*"})]}),n&&a&&t.jsx(Q,{schema:n,fieldName:a})]})}function X({name:e,label:s,isOptional:n,schema:a,definitions:o}){const r=d(),{fields:l,append:c,remove:u}=H({name:e,control:r.control});return t.jsxs("div",{className:"space-y-3",children:[!!s&&t.jsx("label",{className:"text-text-sm",children:t.jsx(f,{label:s,isOptional:n,schema:a,fieldName:e})}),t.jsx("ul",{className:"space-y-5",children:l.map((h,m)=>t.jsxs("li",{className:"flex w-full items-center gap-4 [&>div]:w-full",children:[t.jsx(oe,{isNested:!0,name:`${e}.${m}`,schema:a,isOptional:n,definitions:o}),t.jsxs(v,{className:"h-7 w-7",emphasis:"subtle",size:"sm",type:"button",onClick:()=>u(m),children:[t.jsx(_,{className:"h-5 w-5 fill-primary-900"}),t.jsx("span",{className:"sr-only",children:"remove"})]})]},h.id))}),t.jsxs(v,{className:"h-7 w-7",emphasis:"subtle",type:"button",onClick:()=>c(""),children:[t.jsx(D,{className:"h-5 w-5 fill-primary-900"}),t.jsx("p",{className:"sr-only",children:"Add Item"})]})]})}function ee({name:e,isOptional:s,label:n,schema:a}){var l;const o=d(),r=o.formState.errors[e];return t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[!!n&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:n,isOptional:s,schema:a,fieldName:e})}),t.jsx(x,{control:o.control,name:e,render:({field:{onChange:c,value:u,...h}})=>t.jsx(I,{id:e,checked:u,onCheckedChange:m=>c(m),...h})}),r&&t.jsx("p",{className:"text-text-sm text-error-500",children:(l=r.message)==null?void 0:l.toString()})]})}function re({name:e,label:s,isOptional:n,schema:a,enumValues:o}){var c;const r=d(),l=r.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!s&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:s,isOptional:n,schema:a,fieldName:e})}),t.jsx(x,{control:r.control,name:e,render:({field:{onChange:u,ref:h,...m}})=>t.jsxs(A,{...m,onValueChange:u,children:[t.jsx(J,{"data-error":l?"true":"false",className:"h-7 max-w-full truncate border border-neutral-300 px-2 text-left text-text-sm data-[error=true]:border-error-500",children:t.jsx(V,{placeholder:"Select Option"})}),t.jsx(q,{children:t.jsx(B,{viewportClassName:"max-h-[300px]",children:o.map(g=>t.jsx(k,{className:"space-x-2",value:g,children:g},g))})})]})}),l&&t.jsx("p",{className:"text-text-sm text-error-500",children:(c=l.message)==null?void 0:c.toString()})]})}function te({name:e,isOptional:s,label:n,schema:a}){var l;const o=d(),r=o.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!n&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:n,isOptional:s,schema:a,fieldName:e})}),t.jsx(x,{control:o.control,name:e,render:({field:c})=>t.jsx(b,{inputSize:"md",className:"w-full data-[error=true]:border-error-500",id:e,...c,type:"number","data-error":r?"true":"false"})}),r&&t.jsx("p",{className:"text-text-sm text-error-500",children:(l=r.message)==null?void 0:l.toString()})]})}function se({name:e,label:s,isOptional:n,schema:a}){var l;const o=d(),r=o.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!s&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:s,isOptional:n,schema:a,fieldName:e})}),t.jsx(x,{control:o.control,name:e,render:({field:c})=>t.jsx("textarea",{rows:4,placeholder:"Please paste your JSON",className:P({inputSize:"md",className:"h-auto w-full resize-none font-mono data-[error=true]:border-error-500"}),id:e,...c,"data-error":r?"true":"false"})}),r&&t.jsx("p",{className:"text-text-sm text-error-500",children:(l=r.message)==null?void 0:l.toString()})]})}function ne({name:e,isOptional:s,label:n,schema:a}){var l;const o=d(),r=o.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!n&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:n,isOptional:s,schema:a,fieldName:e})}),t.jsx(x,{control:o.control,name:e,render:({field:c})=>t.jsx(b,{inputSize:"md",className:"w-full data-[error=true]:border-error-500",id:e,...c,"data-error":r?"true":"false"})}),r&&t.jsx("p",{className:"text-text-sm text-error-500",children:(l=r.message)==null?void 0:l.toString()})]})}function le({name:e,label:s,isOptional:n,schema:a}){var l;const o=d(),r=o.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!s&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:s,isOptional:n,schema:a,fieldName:e})}),t.jsx(x,{control:o.control,name:e,render:({field:c})=>t.jsx(b,{placeholder:"Use {{<SECRET_NAME>.<SECRET_KEY>}} to reference a secret",inputSize:"md",className:"w-full placeholder:font-mono data-[error=true]:border-error-500",id:e,...c,type:"text","data-error":r?"true":"false"})}),r&&t.jsx("p",{className:"text-text-sm text-error-500",children:(l=r.message)==null?void 0:l.toString()})]})}function oe({schema:e,name:s,isOptional:n,definitions:a,isNested:o}){let r=j(e,a);o&&r.items&&(r=j(r.items,a)),o&&r.prefixItems&&(r=j(r.prefixItems[0],a));const l=o?"":Y(r,s);if(r.anyOf){const c=r.anyOf.find(u=>u.type!==null);if(c){const u=j(c,a);r={...r,...u}}}if(r.allOf){const c=j(r.allOf[0],a);r={...r,...c}}if(Z(r))return t.jsx(re,{name:s,label:l,schema:r,isOptional:n,enumValues:W(r)});if(G(r))return t.jsx(le,{name:s,label:l,schema:r,isOptional:n});if(K(r))return t.jsx(te,{name:s,label:l,schema:r,isOptional:n});if(U(r))return t.jsx(ne,{name:s,label:l,schema:r,isOptional:n});if(S(r))return t.jsx(ee,{name:s,label:l,schema:r,isOptional:n});if(w(r)||N(r)&&o)return t.jsx(se,{name:s,label:l,schema:r,isOptional:n});if(N(r))return t.jsx(X,{definitions:a,name:s,label:l,schema:r,isOptional:n})}export{oe as D,me as a,L as b,je as g,xe as z};
