<!--
  ~ SPDX-License-Identifier: LGPL-3.0-or-later
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ app_name }}</title>
    {% if favicon %}
        <link rel="icon" href="{{ favicon }}">
    {% else %}
        <link rel="icon" type="image/png" href="{{ url_for('maeser.static', filename='maeser.png') }}">
    {% endif %}    
    <link rel="stylesheet" href="{{ url_for('maeser.static', filename='styles.css') }}">
</head>
<body>
    <b>Name: {{real_name}}</b>
    <b>User Authentication: {{user_name}}</b>
    <b>Time: {{time}}</b>
    <b>Branch: {{branch}}</b>
    <b>Total Cost: ${{total_cost}}</b>
    <b>Total Tokens: {{total_tokens}}</b>
    <hr style="color: black;width: 97%;margin: 1rem;">
    {% if messages is not none %}
        {% for message in messages %}
            {{ message['content'] | safe }}
            {% if message['role'] == 'system' %}
                <b style="margin-top: 1rem">Cost: ${{ message['cost'] }}</b>
                <b>Tokens: {{ message['tokens_used'] }}</b>
                <b>Time to Response: {{ message['execution_time'] }} seconds</b>
                {% if 'liked' in message %}
                    <b>
                        Feedback: {{ 'Positive' if message['liked'] else 'Negative' }}
                    </b>
                {% endif %}
            {% endif %}
            <hr style="color: black;width: 97%;margin: 1rem;">
        {% endfor %}
    {% else %}
        <p>No messages in this conversation.</p>
    {% endif %}
    <br>
    <a href="{{ url_for('maeser.logs') }}", style="margin-top: 2rem">Back to list</a>
</body>
</html>

