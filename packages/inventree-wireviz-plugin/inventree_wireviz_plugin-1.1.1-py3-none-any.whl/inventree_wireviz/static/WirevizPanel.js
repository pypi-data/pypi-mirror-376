import{a as M,g as z,M as D,n as f}from"./assets/Navigation-yUMBvUKs.js";import{c as d,a as C}from"./assets/createReactComponent--Uuatr69.js";/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var I=d("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var b=d("outline","file","IconFile",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var W=d("outline","trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var S=d("outline","upload","IconUpload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 9l5 -5l5 5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]);const _=window.MantineCore.ActionIcon,s=window.MantineCore.Alert,T=window.MantineCore.Anchor,k=window.MantineCore.Divider,v=window.MantineCore.Group,A=window.MantineCore.Image,i=window.MantineCore.Menu,E=window.MantineCore.Paper,P=window.MantineCore.SimpleGrid,o=window.MantineCore.Stack,t=window.MantineCore.Table,l=window.MantineCore.Text,y=window.MantineCore.Title,r=window.React.useMemo;function F({context:a,row:e}){const c=e.sub_part&&e.pn?z(D.part,e.sub_part,!0):"";return React.createElement(t.Tr,{key:`bom-${e.idx}`},React.createElement(t.Td,{key:"col-idx"},e.idx),React.createElement(t.Td,{key:"col-dsg"},e.designators),React.createElement(t.Td,{key:"col-dsc"},e.description),React.createElement(t.Td,{key:"col-qua"},React.createElement(v,{gap:"xs",wrap:"nowrap"},React.createElement(l,{key:"quantity"},e.quantity),e.unit&&React.createElement(l,{key:"unit",size:"sm"},e.unit))),React.createElement(t.Td,{key:"col-prt"},c?React.createElement(T,{href:c,onClick:m=>f(c,a.navigate,m)},e.pn):React.createElement(l,null,"-")))}function U({context:a}){const e=r(()=>(a==null?void 0:a.context)??{},[a]),c=r(()=>e.wireviz_bom_data??[],[e]),m=r(()=>e.wireviz_svg_file??null,[e]),p=r(()=>e.wireviz_errors??[],[e]),u=r(()=>e.wireviz_warnings??[],[e]),R=r(()=>e.wireviz_source_file??null,[e]),g=r(()=>(e==null?void 0:e.can_edit)??!1,[e]),w=a.forms.create({title:"Remove Wireviz Diagram",url:M("/plugin/wireviz/delete/"),method:"POST",fields:{part:{value:a.id,hidden:!0}},preFormContent:React.createElement(s,{color:"red",title:"Delete Diagram"},"Delete the Wireviz diagram from this part?"),successMessage:"Diagram removed",onFormSuccess:()=>{window.location.reload()}}),h=a.forms.create({title:"Upload New Wireviz Diagram",url:M("/plugin/wireviz/upload/"),method:"POST",fields:{part:{value:a.id,hidden:!0},file:{}},successMessage:"Diagram uploaded",onFormSuccess:()=>{window.location.reload()}});return React.createElement(React.Fragment,null,g&&h.modal,g&&w.modal,React.createElement(o,{gap:"xs",w:"100%"},p&&p.length>0&&React.createElement(s,{color:"red",title:"Wireviz Errors"},React.createElement(o,{gap:"xs"},p.map(n=>React.createElement(l,{key:n},n)))),u&&u.length>0&&React.createElement(s,{color:"yellow",title:"Wireviz Warnings"},React.createElement(o,{gap:"xs"},u.map(n=>React.createElement(l,{key:n},n)))),React.createElement(P,{cols:2},React.createElement(E,{shadow:"lg",p:"md"},React.createElement(o,{gap:"xs"},React.createElement(v,{justify:"space-between"},React.createElement(y,{order:4},"Harness Diagram"),g&&React.createElement(i,{position:"bottom-end",withArrow:!0},React.createElement(i.Target,null,React.createElement(_,{variant:"transparent"},React.createElement(I,null))),React.createElement(i.Dropdown,null,React.createElement(i.Item,{onClick:h.open,leftSection:React.createElement(S,{color:"green"})},"Upload New Diagram"),R&&React.createElement(i.Item,{onClick:w.open,leftSection:React.createElement(W,{color:"red"})},"Remove Diagram")))),React.createElement(k,null),m?React.createElement(A,{src:m,alt:"Wireviz diagram"}):React.createElement(s,{color:"red",title:"No Diagram Available"},React.createElement(l,null,"No Wireviz diagram available for this part")))),React.createElement(E,{shadow:"lg",p:"md"},React.createElement(o,{gap:"xs"},React.createElement(y,{order:4},"Bill of Materials"),React.createElement(k,null),React.createElement(t,{striped:!0},React.createElement(t.Thead,null,React.createElement(t.Tr,null,React.createElement(t.Th,null,"ID"),React.createElement(t.Th,null,"Designators"),React.createElement(t.Th,null,"Description"),React.createElement(t.Th,null,"Quantity"),React.createElement(t.Th,null,"Part"))),React.createElement(t.Tbody,null,c.map(n=>React.createElement(F,{row:n,context:a}))))))),R&&React.createElement(E,{shadow:"lg",p:"md"},React.createElement(T,{href:R,target:"_blank"},React.createElement(v,{gap:"xs"},React.createElement(b,null),React.createElement(l,null,"Wireviz Source File"))))))}function q(a){return C(a),React.createElement(U,{context:a})}export{q as renderWirevizPanel};
