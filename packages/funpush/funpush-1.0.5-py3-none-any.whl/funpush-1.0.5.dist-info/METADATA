Metadata-Version: 2.4
Name: funpush
Version: 1.0.5
Summary: funpush
Author-email: ç‰›å“¥ <niuliangtao@qq.com>, farfarfun <farfarfun@qq.com>
Maintainer-email: ç‰›å“¥ <niuliangtao@qq.com>, farfarfun <farfarfun@qq.com>
Project-URL: Organization, https://github.com/farfarfun
Project-URL: Repository, https://github.com/farfarfun/funpush
Project-URL: Releases, https://github.com/farfarfun/funpush/releases
Requires-Python: >=3.9
Description-Content-Type: text/markdown
Requires-Dist: funutil>=1.0.53

# FunPush

[![PyPI version](https://badge.fury.io/py/funpush.svg)](https://badge.fury.io/py/funpush)
[![Python](https://img.shields.io/pypi/pyversions/funpush.svg)](https://pypi.org/project/funpush/)
[![License](https://img.shields.io/github/license/farfarfun/funpush.svg)](https://github.com/farfarfun/funpush/blob/main/LICENSE)

**ä¸€ä¸ªç®€å•æ˜“ç”¨çš„Pythonæ¶ˆæ¯æ¨é€åº“ï¼Œæ”¯æŒé’‰é’‰ã€å¾®ä¿¡ç­‰å¤šå¹³å°æœºå™¨äººæ¶ˆæ¯å‘é€ã€‚**

FunPush æ˜¯ä¸€ä¸ªä¸“ä¸ºå„ç§å³æ—¶é€šè®¯å¹³å°è®¾è®¡çš„æ¶ˆæ¯æ¨é€åº“ã€‚ç›®å‰ä¸»è¦æ”¯æŒé’‰é’‰æœºå™¨äººæ¶ˆæ¯æ¨é€ï¼Œæœªæ¥å°†æ‰©å±•æ”¯æŒæ›´å¤šå¹³å°ã€‚

**å…³é”®è¯ï¼š** `æ¶ˆæ¯æ¨é€` `é’‰é’‰æœºå™¨äºº` `Python` `å³æ—¶é€šè®¯` `API` `Webhook` `è‡ªåŠ¨åŒ–` `é€šçŸ¥` `æœºå™¨äºº` `æ¶ˆæ¯å‘é€`

## âœ¨ ç‰¹æ€§

- ğŸ¤– **é’‰é’‰æœºå™¨äººæ”¯æŒ**ï¼šå®Œæ•´æ”¯æŒé’‰é’‰æœºå™¨äººçš„æ‰€æœ‰æ¶ˆæ¯ç±»å‹
- ğŸ”’ **ç±»å‹å®‰å…¨**ï¼šå®Œæ•´çš„ç±»å‹æç¤ºæ”¯æŒï¼Œæä¾›æ›´å¥½çš„å¼€å‘ä½“éªŒ
- ğŸš€ **æ¶ˆæ¯å»é‡**ï¼šå†…ç½®æ¶ˆæ¯å»é‡æœºåˆ¶ï¼Œé˜²æ­¢é‡å¤å‘é€
- âš¡ **é€Ÿç‡é™åˆ¶**ï¼šå¯é…ç½®çš„å‘é€å»¶è¿Ÿï¼Œé¿å…è§¦å‘å¹³å°é™åˆ¶
- ğŸ“ **ä¸°å¯Œçš„æ¶ˆæ¯ç±»å‹**ï¼šæ”¯æŒæ–‡æœ¬ã€é“¾æ¥ã€Markdownã€ActionCardã€FeedCardç­‰å¤šç§æ¶ˆæ¯æ ¼å¼
- ğŸ›¡ï¸ **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œæ—¥å¿—è®°å½•
- ğŸ“š **è¯¦ç»†æ–‡æ¡£**ï¼šå®Œæ•´çš„ä¸­æ–‡æ–‡æ¡£å’Œç¤ºä¾‹

## ğŸ“¦ å®‰è£…

ä½¿ç”¨ pip å®‰è£…ï¼š

```bash
pip install funpush
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### é’‰é’‰æœºå™¨äººé…ç½®

1. åœ¨é’‰é’‰ç¾¤ä¸­æ·»åŠ è‡ªå®šä¹‰æœºå™¨äºº
2. è·å– Webhook URL å’Œå¯†é’¥ï¼ˆå¦‚æœå¯ç”¨äº†åŠ ç­¾éªŒè¯ï¼‰
3. ä½¿ç”¨ä»¥ä¸‹ä»£ç å‘é€æ¶ˆæ¯ï¼š

```python
from funpush import DingTalkClient

# åˆå§‹åŒ–å®¢æˆ·ç«¯
client = DingTalkClient()

# é…ç½®é’‰é’‰æœºå™¨äººè®¿é—®ä¿¡æ¯
access = {
    "access_token": "your_access_token_here",
    "secret": "your_secret_here"  # å¯é€‰ï¼Œå¦‚æœå¯ç”¨äº†åŠ ç­¾éªŒè¯
}

# å‘é€æ–‡æœ¬æ¶ˆæ¯
client.send_text(
    access=access,
    content="Hello, World! è¿™æ˜¯ä¸€æ¡æµ‹è¯•æ¶ˆæ¯ã€‚",
    at_all=False
)
```

## ğŸ“– è¯¦ç»†ä½¿ç”¨è¯´æ˜

### 1. æ–‡æœ¬æ¶ˆæ¯

```python
# å‘é€æ™®é€šæ–‡æœ¬æ¶ˆæ¯
client.send_text(
    access=access,
    content="è¿™æ˜¯ä¸€æ¡æ™®é€šçš„æ–‡æœ¬æ¶ˆæ¯"
)

# å‘é€å¸¦@åŠŸèƒ½çš„æ–‡æœ¬æ¶ˆæ¯
client.send_text(
    access=access,
    content="é‡è¦é€šçŸ¥ï¼šè¯·ç›¸å…³äººå‘˜æ³¨æ„ï¼",
    mobiles=["13800138000"],  # @æŒ‡å®šæ‰‹æœºå·
    user_ids=["user123"],     # @æŒ‡å®šç”¨æˆ·ID
    at_all=False              # æ˜¯å¦@æ‰€æœ‰äºº
)
```

### 2. é“¾æ¥æ¶ˆæ¯

```python
client.send_link(
    access=access,
    title="é‡è¦å…¬å‘Š",
    text="ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†å†…å®¹",
    message_url="https://example.com/announcement",
    pic_url="https://example.com/image.jpg"
)
```

### 3. Markdown æ¶ˆæ¯

```python
markdown_text = """
# é¡¹ç›®è¿›åº¦æŠ¥å‘Š
## æœ¬å‘¨å®Œæˆ
- âœ… åŠŸèƒ½Aå¼€å‘å®Œæˆ
- âœ… å•å…ƒæµ‹è¯•é€šè¿‡
- âœ… ä»£ç å®¡æŸ¥å®Œæˆ

## ä¸‹å‘¨è®¡åˆ’
- ğŸ“‹ åŠŸèƒ½Bå¼€å‘
- ğŸ§ª é›†æˆæµ‹è¯•
- ğŸš€ å‡†å¤‡å‘å¸ƒ

**è´Ÿè´£äººï¼š** @å¼ ä¸‰
"""

client.send_markdown(
    access=access,
    title="é¡¹ç›®è¿›åº¦æŠ¥å‘Š",
    text=markdown_text,
    mobiles=["13800138000"]
)
```

### 4. ActionCard æ¶ˆæ¯

#### å•æŒ‰é’® ActionCard

```python
client.send_action_card(
    access=access,
    title="ç³»ç»Ÿå‡çº§é€šçŸ¥",
    text="ç³»ç»Ÿå°†äºä»Šæ™š22:00-24:00è¿›è¡Œå‡çº§ç»´æŠ¤ï¼Œè¯·æå‰åšå¥½å‡†å¤‡ã€‚",
    single_title="æŸ¥çœ‹è¯¦æƒ…",
    single_url="https://example.com/upgrade-notice"
)
```

#### å¤šæŒ‰é’® ActionCard

```python
buttons = [
    {"title": "åŒæ„", "actionURL": "https://example.com/approve"},
    {"title": "æ‹’ç»", "actionURL": "https://example.com/reject"},
    {"title": "æŸ¥çœ‹è¯¦æƒ…", "actionURL": "https://example.com/details"}
]

client.send_action_cards(
    access=access,
    title="è¯·å‡ç”³è¯·å®¡æ‰¹",
    text="å¼ ä¸‰ç”³è¯·è¯·å‡3å¤©ï¼Œè¯·å®¡æ‰¹ã€‚",
    buttons=buttons
)
```

### 5. FeedCard æ¶ˆæ¯

```python
# æ–¹å¼ä¸€ï¼šä½¿ç”¨å­—å…¸åˆ—è¡¨
links = [
    {
        "title": "æ–°é—»1ï¼šæŠ€æœ¯çªç ´",
        "messageURL": "https://example.com/news1",
        "picURL": "https://example.com/pic1.jpg"
    },
    {
        "title": "æ–°é—»2ï¼šå¸‚åœºåŠ¨æ€", 
        "messageURL": "https://example.com/news2",
        "picURL": "https://example.com/pic2.jpg"
    }
]

client.send_feed_card(access=access, links=links)

# æ–¹å¼äºŒï¼šä½¿ç”¨ç®€åŒ–æ–¹æ³•
titles = ["æ–°é—»1ï¼šæŠ€æœ¯çªç ´", "æ–°é—»2ï¼šå¸‚åœºåŠ¨æ€"]
urls = ["https://example.com/news1", "https://example.com/news2"]
pics = ["https://example.com/pic1.jpg", "https://example.com/pic2.jpg"]

client.send_feed_card_simple(
    access=access,
    titles=titles,
    urls=urls,
    pics=pics
)
```

## âš™ï¸ é«˜çº§é…ç½®

### å®¢æˆ·ç«¯é…ç½®

```python
# è‡ªå®šä¹‰é…ç½®
client = DingTalkClient(
    max_cache_size=200,    # æ¶ˆæ¯å»é‡ç¼“å­˜å¤§å°
    send_delay=5.0         # å‘é€å»¶è¿Ÿï¼ˆç§’ï¼‰
)
```

### é”™è¯¯å¤„ç†

```python
try:
    success = client.send_text(
        access=access,
        content="æµ‹è¯•æ¶ˆæ¯"
    )
    if success:
        print("æ¶ˆæ¯å‘é€æˆåŠŸ")
    else:
        print("æ¶ˆæ¯å‘é€å¤±è´¥")
except Exception as e:
    print(f"å‘é€è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯: {e}")
```

## ğŸ”§ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
funpush/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ funpush/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ base/           # åŸºç¡€ç±»å’Œæ¥å£
â”‚       â”œâ”€â”€ dingtalk/       # é’‰é’‰ç›¸å…³å®ç°
â”‚       â”‚   â”œâ”€â”€ client.py   # é’‰é’‰å®¢æˆ·ç«¯
â”‚       â”‚   â”œâ”€â”€ message.py  # æ¶ˆæ¯ç±»å‹å®šä¹‰
â”‚       â”‚   â””â”€â”€ util.py     # å·¥å…·å‡½æ•°
â”‚       â””â”€â”€ wechat/         # å¾®ä¿¡ç›¸å…³ï¼ˆå¼€å‘ä¸­ï¼‰
â”œâ”€â”€ pyproject.toml
â””â”€â”€ README.md
```

### è´¡çŒ®æŒ‡å—

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“‹ TODO

- [ ] å¾®ä¿¡ä¼ä¸šå·æœºå™¨äººæ”¯æŒ
- [ ] é£ä¹¦æœºå™¨äººæ”¯æŒ
- [ ] é‚®ä»¶æ¨é€æ”¯æŒ
- [ ] çŸ­ä¿¡æ¨é€æ”¯æŒ
- [ ] æ¶ˆæ¯æ¨¡æ¿åŠŸèƒ½
- [ ] å¼‚æ­¥å‘é€æ”¯æŒ

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ‘¥ ä½œè€…

- **ç‰›å“¥** - *é¡¹ç›®ç»´æŠ¤è€…* - [niuliangtao@qq.com](mailto:niuliangtao@qq.com)
- **farfarfun** - *é¡¹ç›®ç»´æŠ¤è€…* - [farfarfun@qq.com](mailto:farfarfun@qq.com)

## ğŸ”— ç›¸å…³é“¾æ¥

- [é¡¹ç›®ä¸»é¡µ](https://github.com/farfarfun/funpush)
- [å‘å¸ƒé¡µé¢](https://github.com/farfarfun/funpush/releases)
- [é—®é¢˜åé¦ˆ](https://github.com/farfarfun/funpush/issues)
- [PyPI é¡µé¢](https://pypi.org/project/funpush/)

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

---

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª â­ï¸ï¼
